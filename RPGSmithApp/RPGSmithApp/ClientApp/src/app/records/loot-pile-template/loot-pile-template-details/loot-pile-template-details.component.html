<div class="page-item-details">
  <!-- Toolbar -->
  <div class="page-toolbar">
    <div class="container">
      <div class="page-toolbar-wrapper">
        <div class="page-toolbar-title">
          <!--<a (click)="RedirectBack()" class="icon icon-back"></a>-->
          <!--<h1>Item Template Details</h1>-->
          <!--<h1>Back</h1>-->
          <a (click)="RedirectBack()" class="icon icon-back">
            <h1 class="d-inline-block"> Back</h1>
          </a>
        </div>
        <div class="page-toolbar-wrapper initial show recordes-menu">
          <!-- Toolbar links -->
          <!--if !GM-->
          <ul class="page-toolbar-links" *ngIf="!isLoading && !IsGm">
            <li *ngIf="ItemMasterDetail?.ruleSet" class="hidden-tab">
              <a *ngIf="!IsGm" [routerLink]="['/ruleset/dashboard/', ruleSetId]" class="btn btn-link-primary nav-redirection">Layouts</a>
              <a *ngIf="IsGm" [routerLink]="['/ruleset/campaign-dashboard/', ruleSetId]" class="btn btn-link-primary nav-redirection">Layouts</a>
            </li>
            <li class="hidden-tab crsr-pointer" *ngIf="ItemMasterDetail?.ruleSet?.isItemEnabled">
              <a [routerLink]="['/ruleset/loot-pile-template/', ruleSetId]" class="btn btn-link-primary nav-redirection selected icon-Rec-Contained"> <span> Random Loot</span></a>
            </li>
            <li *ngIf="ItemMasterDetail?.ruleSet?.isSpellEnabled" (click)="Redirect('/ruleset/spell/')" class="hidden-tab">
              <a [routerLink]="['/ruleset/spell/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Rec-Magical"> <span>Spells</span></a>
            </li>
            <li *ngIf="ItemMasterDetail?.ruleSet?.isAbilityEnabled" (click)="Redirect('/ruleset/ability/')" class="hidden-tab">
              <a [routerLink]="['/ruleset/ability/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Gen-Ability"> <span>Abilities</span></a>
            </li>
            <li *ngIf="ItemMasterDetail?.ruleSet?.isBuffAndEffectEnabled" (click)="Redirect('/ruleset/buff-effect/')" class="hidden-tab">
              <a [routerLink]="['/ruleset/buff-effect/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-BnE"> <span>Buffs/Effects</span></a>
            </li>
            <li *ngIf="ItemMasterDetail?.ruleSet" class="hidden-tab">
              <a [routerLink]="['/ruleset/character-stats/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Gen-CharStat"> <span>Character Stats</span></a>
            </li>
            <li class="visible-tab mt-0">
              <div class="dropdown dropdown-buttons" [ngClass]="{'show': isDropdownOpen}">
                <button type="button" data-toggle="dropdown" aria-expanded="false" class="btn btn-primary dropdown-toggle is-show">Records</button>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="newItemTrigger" *ngIf="isDropdownOpen">
                  <ul class="dropdown-menu-list" *ngIf="!isLoading">
                    <li class="dropdown-menu-item" *ngIf="ItemMasterDetail?.ruleSet">
                      <a *ngIf="!IsGm" [routerLink]="['/ruleset/dashboard/', ruleSetId]" class="btn btn-link-primary nav-redirection">Layouts</a>
                      <a *ngIf="IsGm" [routerLink]="['/ruleset/campaign-dashboard/', ruleSetId]" class="btn btn-link-primary nav-redirection">Layouts</a>
                    </li>
                    <li class="dropdown-menu-item crsr-pointer" *ngIf="ItemMasterDetail?.ruleSet?.isItemEnabled">
                      <a [routerLink]="['/ruleset/loot-pile-template/', ruleSetId]" class="btn btn-link-primary nav-redirection selected icon-Rec-Contained"> Random Loot</a>
                    </li>
                    <li class="dropdown-menu-item" *ngIf="ItemMasterDetail?.ruleSet?.isSpellEnabled">
                      <a [routerLink]="['/ruleset/spell/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Rec-Magical"> Spells</a>
                    </li>
                    <li class="dropdown-menu-item" *ngIf="ItemMasterDetail?.ruleSet?.isAbilityEnabled">
                      <a [routerLink]="['/ruleset/ability/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Gen-Ability"> Abilities</a>
                    </li>
                    <li class="dropdown-menu-item" *ngIf="ItemMasterDetail?.ruleSet?.isBuffAndEffectEnabled">
                      <a [routerLink]="['/ruleset/buff-effect/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-BnE"> Buffs/Effects</a>
                    </li>
                    <li class="dropdown-menu-item" *ngIf="ItemMasterDetail?.ruleSet">
                      <a [routerLink]="['/ruleset/character-stats/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Gen-CharStat"> Character Stats</a>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
          </ul>

          <!--if GM-->
          <ul class="page-toolbar-links" *ngIf="!isLoading && IsGm">
            <li *ngIf="ItemMasterDetail?.ruleSet" class="hidden-tab show-first-child">
              <a [routerLink]="['/ruleset/monster/', ruleSetId]" class="btn btn-link-primary nav-redirection icon icon-Monster"> <span>Monsters</span></a>
            </li>
            <li *ngIf="ItemMasterDetail?.ruleSet?.isSpellEnabled" (click)="Redirect('/ruleset/spell/')" class="hidden-tab">
              <a [routerLink]="['/ruleset/spell/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Rec-Magical"> <span>Spells</span></a>
            </li>
            <li *ngIf="ItemMasterDetail?.ruleSet?.isAbilityEnabled" (click)="Redirect('/ruleset/ability/')" class="hidden-tab">
              <a [routerLink]="['/ruleset/ability/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Gen-Ability"> <span>Abilities</span></a>
            </li>
            <li *ngIf="ItemMasterDetail?.ruleSet?.isBuffAndEffectEnabled" class="hidden-tab">
              <a [routerLink]="['/ruleset/buff-effect/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-BnE"> <span>Buffs/Effects</span></a>
            </li>
            <li *ngIf="ItemMasterDetail?.ruleSet?.isItemEnabled" class="hidden-tab crsr-pointer">
              <a [routerLink]="['/ruleset/loot-pile-template/', ruleSetId]" class="btn btn-link-primary nav-redirection selected icon-Rec-Contained"> <span> Random Loot</span></a>
            </li>
            <li class="visible-tab mt-0">
              <div class="dropdown dropdown-buttons" [ngClass]="{'show': isDropdownOpen}">
                <button type="button" data-toggle="dropdown" aria-expanded="false" class="btn btn-primary dropdown-toggle is-show">Records</button>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="newItemTrigger" *ngIf="isDropdownOpen">
                  <ul class="dropdown-menu-list" *ngIf="!isLoading">
                    <li class="dropdown-menu-item" *ngIf="ItemMasterDetail?.ruleSet">
                      <a [routerLink]="['/ruleset/monster/', ruleSetId]" class="btn btn-link-primary nav-redirection icon icon-Monster">Monsters</a>
                    </li>
                    <li class="dropdown-menu-item" *ngIf="ItemMasterDetail?.ruleSet?.isSpellEnabled">
                      <a [routerLink]="['/ruleset/spell/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Rec-Magical"> Spells</a>
                    </li>
                    <li class="dropdown-menu-item" *ngIf="ItemMasterDetail?.ruleSet?.isAbilityEnabled">
                      <a [routerLink]="['/ruleset/ability/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Gen-Ability"> Abilities</a>
                    </li>
                    <li class="dropdown-menu-item" *ngIf="ItemMasterDetail?.ruleSet?.isBuffAndEffectEnabled">
                      <a [routerLink]="['/ruleset/buff-effect/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-BnE">Buffs/Effects</a>
                    </li>
                    <li class="dropdown-menu-item crsr-pointer" *ngIf="ItemMasterDetail?.ruleSet?.isItemEnabled">
                      <a [routerLink]="['/ruleset/loot-pile-template/', ruleSetId]" class="btn btn-link-primary nav-redirection selected icon-Rec-Contained"> Random Loot</a>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
          </ul>
          <!-- End of toolbar links -->
          <!-- Toolbar actions -->
          <ul class="page-toolbar-actions" *ngIf="!isLoading">
            <li>
              <!-- Manage item -->
              <div class="dropdown dropdown-buttons">
                <button type="button" id="manageItemTrigger" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="btn btn-primary dropdown-toggle icon-Gen-Edit"> Manage Item</button>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="newItemTrigger">
                  <ul class="dropdown-menu-list">
                    <li class="dropdown-menu-item">
                      <button type="button" (click)="editItemTemplate(ItemMasterDetail)" class="btn icon icon-with-text icon-pencil btn-accent">Edit</button>
                    </li>
                    <li class="dropdown-menu-item">
                      <!--<button type="button" *ngIf="ItemMasterDetail.isShow" (click)="Show(ItemMasterDetail)" class="btn btn-accent icon icon-Gen-Hide icon-with-text">Hide</button>
                      <button type="button" *ngIf="!ItemMasterDetail.isShow" (click)="Show(ItemMasterDetail)" class="btn btn-accent icon icon-Rec-Visible icon-with-text">Show</button>-->
                    </li>
                    <li class="dropdown-menu-item">
                      <button type="button" (click)="deleteItemTemplate(ItemMasterDetail)" class="btn icon icon-with-text icon-trash btn-accent">Delete</button>
                    </li>
                  </ul>
                </div>
              </div>
              <!-- Manage item -->
            </li>
            <li>
              <button type="button" *ngIf="IsGm && !isLoading" (click)="openDiceRollModal()" class="btn icon icon-with-text icon-dice icon-rsi btn-primary">Dice</button>
            </li>
          </ul>
          <!-- End of toolbar actions -->
        </div>
        <!-- Toolbar actions -->
        <ul class="page-toolbar-actions web-view" *ngIf="!isLoading">
          <li>
            <!-- Manage item -->
            <div class="dropdown dropdown-buttons">
              <button type="button" id="manageItemTrigger" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="btn btn-primary dropdown-toggle icon-Gen-Edit"> Manage Item</button>
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="newItemTrigger">
                <ul class="dropdown-menu-list">
                  <li class="dropdown-menu-item">
                    <button type="button" (click)="editItemTemplate(ItemMasterDetail)" class="btn icon icon-with-text icon-pencil btn-accent"> Edit</button>
                  </li>
                  <li class="dropdown-menu-item">
                    <button type="button" (click)="duplicateItemTemplate(ItemMasterDetail)" class="btn icon icon-with-text icon-copy icon-rsi btn-accent">Duplicate</button>
                    <!--<button type="button" *ngIf="ItemMasterDetail.isShow" (click)="Show(ItemMasterDetail)" class="btn btn-accent icon icon-Gen-Hide icon-with-text">Hide</button>
                    <button type="button" *ngIf="!ItemMasterDetail.isShow" (click)="Show(ItemMasterDetail)" class="btn btn-accent icon icon-Rec-Visible icon-with-text">Show</button>-->
                  </li>
                  <li class="dropdown-menu-item">
                    <button type="button" (click)="deleteItemTemplate(ItemMasterDetail)" class="btn icon icon-with-text icon-trash btn-accent"> Delete</button>
                  </li>
                </ul>
              </div>
            </div>
            <!-- Manage item -->
          </li>
          <li>
            <button type="button" *ngIf="IsGm && !isLoading" (click)="openDiceRollModal()" class="btn icon icon-with-text icon-dice icon-rsi btn-primary">Dice</button>
          </li>
        </ul>
        <!-- End of toolbar actions -->
      </div>
    </div>
  </div>
  <!-- End of toolbar -->
  <!-- Item info -->
  <div class="item-info" *ngIf="!isLoading">
    <div class="container">
      <div class="item-info-wrapper">
        <div class="item-info-top-section">
          <div class="row">
            <div class="col">
              <div class="item-info-banner">
                <div class="item-info-image">
                  <img class="card-img-top" [src]="ItemMasterDetail.imageUrl" [alt]="ItemMasterDetail.name"
                       onerror="this.src='../assets/images/DefaultImages/Item.jpg';" #imgref (click)="ViewImage(imgref)" />
                </div>
                <h2 class="item-info-name"> {{ItemMasterDetail.name}} </h2>
                <div class="item-info-props-indics">
                  <ul class="item-info-indics">
                    <!--<li *ngIf="ItemMasterDetail.isShow" title="Hide" data-toggle="tooltip">
                      <i class="item-property item-property-icon icon icon-Gen-Hide icon-ico"></i>
                    </li>
                    <li *ngIf="!ItemMasterDetail.isShow" title="Hide" data-toggle="tooltip">
                      <i class="item-property item-property-icon icon icon-Rec-Visible icon-ico"></i>
                    </li>-->
                  </ul>
                </div>
              </div>
              <ul class="item-info-actions d-none d-md-flex">
                <li>
                  <button type="button" (click)="DeployLootPile(ItemMasterDetail)" class="btn btn-accent icon-Rec-Add">Deploy</button>
                </li>
                <!--<li>
                  <button type="button" (click)="editItemTemplate(ItemMasterDetail)" class="btn btn-accent icon-with-text icon icon-pencil "> Edit</button>
                </li>
                <li>
                  <button type="button" (click)="duplicateItemTemplate(ItemMasterDetail)" class="btn icon icon-with-text icon-copy icon-rsi btn-accent">Duplicate</button>
                </li>
                <li>
                  <button type="button" (click)="deleteItemTemplate(ItemMasterDetail)" class="btn btn-accent icon-with-text icon icon-trash"> Delete</button>
                </li>-->
                <li>
                  <!--<button type="button" *ngIf="ItemMasterDetail?.isShow" (click)="Show(ItemMasterDetail)" class="btn btn-accent icon icon-Gen-Hide icon-with-text">Hide</button>
                  <button type="button" *ngIf="!ItemMasterDetail?.isShow" (click)="Show(ItemMasterDetail)" class="btn btn-accent icon icon-Rec-Visible icon-with-text">Show</button>-->
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="item-info-bottom-section">
          <div class="row">
            <div class="col-12 col-md-12">
              <div class="item-info-desc">
                <h3>Description</h3>
                <p [froalaView]="ItemMasterDetail?.description"></p>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-md-12">
              <div class="item-info-desc">
                <h3>GM Only</h3>
                <p [froalaView]="ItemMasterDetail?.gmOnly"></p>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <div class="item-info-tags">
                <h3>Tags</h3>
                <p>{{ItemMasterDetail.metatags}}</p>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12">
              <div class="item-info-abils">
                <h3>Currency</h3>
                <div class="form-group output-list output-list-wrap">
                  <ul class="output-list-items">
                    <li class="output-list-item" *ngFor="let currency of ItemMasterDetail.lootTemplateCurrency">
                      <div class="d-flex justify-content-between">
                        <span>{{currency.name}}</span>
                        <span class="currencyQty">{{currency.command ? currency.command : 0}}</span>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div class="row page-item-details">
            <div class="col-12" *ngIf="ItemMasterDetail?.lootTemplateRandomizationEngines?.length">
              <div class="item-info-abils">
                <h3>Items</h3>
                <div class="form-group output-list output-list-wrap">
                  <ul class="output-list-items1 list-unstyled">
                    <li class="output-list-item tooltip1" *ngFor="let item of ItemMasterDetail.lootTemplateRandomizationEngines">
                      <div [routerLink]="['/ruleset/item-details', item.itemMasterId]" class="crsr-pointer li-items-hover">
                        <img class="card-img-top" [src]="item?.itemMaster?.itemImage" [alt]="item?.itemMaster?.itemName"
                             onerror="this.src='../assets/images/DefaultImages/Item.jpg';" />
                        <span>{{item?.itemMaster?.itemName}}</span>
                      </div>
                      <!--//////////-->
                      <div class="top1">
                        <!-- Item info -->
                        <div class="item-info mb-0" [routerLink]="['/ruleset/item-details', item.itemMasterId]">
                          <div class="container px-0">
                            <div class="item-info-wrapper">
                              <div class="item-info-top-section">
                                <div class="row">
                                  <div class="col">
                                    <div class="item-info-banner">
                                      <div class="item-info-image">
                                        <img class="card-img-top" [src]="item?.itemMaster?.itemImage" [alt]="item?.itemMaster?.itemName"
                                             onerror="this.src='../assets/images/DefaultImages/Item.jpg';" />
                                      </div>
                                      <h2 class="item-info-name mb-0">
                                        {{item?.itemMaster?.itemName}}
                                      </h2>
                                      <div class="item-info-props-indics">
                                        <ul class="item-info-props">
                                          <li *ngIf="item?.itemMaster?.rarity">{{item?.itemMaster?.rarity}}</li>
                                          <li *ngIf="item?.itemMaster?.value">{{item?.itemMaster?.value}} {{item?.itemMaster?.currencyLabel}}</li>
                                          <li *ngIf="item?.itemMaster?.weight">{{item?.itemMaster?.weight}} {{item?.itemMaster?.weightLabel}}</li>
                                          <li *ngIf="item?.itemMaster?.volume">{{item?.itemMaster?.volume}} {{item?.itemMaster?.volumeLabel}}</li>
                                        </ul>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-3 align-self-start">
                                  <ul class="item-info-indics ml-3 w-100 mt-5 justify-content-start list-unstyled">
                                    <li *ngIf="item?.itemMaster?.isConsumable" title="Consumable" data-toggle="tooltip">
                                      <i class="item-property item-property-icon icon icon-Rec-consumable icon-ico"></i>
                                    </li>
                                    <li *ngIf="item?.itemMaster?.isMagical" title="Magical" data-toggle="tooltip">
                                      <i class="item-property item-property-icon icon icon-Rec-Magical icon-ico"></i>
                                    </li>
                                    <li *ngIf="item?.itemMaster?.isContainer" title="Container" data-toggle="tooltip">
                                      <i class="item-property item-property-icon icon icon-Rec-Container icon-ico"></i>
                                    </li>
                                  </ul>
                                </div>
                                <div class="col-9">
                                  <div class="item-info-actions ml-0 h-100 w-100">
                                    <div class="item-info-bottom-section px-2 pt-3">
                                      <div class="row">
                                        <div class="col-md-12">
                                          <div class="item-info-desc d-block mr-0">
                                            <h3>Description</h3>
                                            <p [froalaView]="item?.itemMaster?.itemVisibleDesc"></p>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="row">
                                        <div class="col-12 col-md-6">
                                          <div class="item-info-stats ml-0">
                                            <h3>Stats</h3>
                                            <p [froalaView]="item?.itemMaster?.itemStats"></p>
                                          </div>
                                        </div>
                                        <div class="col-12 col-md-6">
                                          <div class="item-info-stats mr-0">
                                            <h3>GM Only</h3>
                                            <p [froalaView]="item?.itemMaster?.gmOnly"></p>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!-- End of item info -->
                      </div>
                      <!--////////-->
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End of item info -->
</div>

<app-loader [isLoading]="isLoading"></app-loader>
