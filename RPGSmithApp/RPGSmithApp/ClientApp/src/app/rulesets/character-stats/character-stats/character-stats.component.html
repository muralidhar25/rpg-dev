<div class="page-character-stats">
  <!-- Toolbar -->
  <div class="page-toolbar">
    <div class="container">
      <div class="page-toolbar-wrapper">
        <div class="page-toolbar-title">
          <a (click)="RedirectBack()" class="icon icon-back">
            <h1 class="d-none d-md-inline-block"> Back</h1>
          </a>
          <h1 class="d-md-none">Character Stats</h1>
        </div>
        <!--<div class="page-toolbar-wrapper-toggle-trigger">
            <button type="button" class="btn icon icon-with-text btn-accent btn-block" (click)="showActionButtons(showActions)"
                    [ngClass]="{'icon-arrow-up' : showActions,  'icon-arrow-down' : !showActions}">
                {{actionText}}
            </button>
        </div>-->
        <div class="page-toolbar-wrapper initial show recordes-menu">
          <!-- Toolbar links -->
          <ul class="page-toolbar-links" *ngIf="!isLoading">
            <li *ngIf="rulesetModel" class="hidden-tab">
              <a *ngIf="!IsGm" [routerLink]="['/ruleset/dashboard/', ruleSetId]" class="btn btn-link-primary nav-redirection">Layouts</a>
              <a *ngIf="IsGm" [routerLink]="['/ruleset/campaign-dashboard/', ruleSetId]" class="btn btn-link-primary nav-redirection">Layouts</a>
            </li>
            <li *ngIf="rulesetModel?.isItemEnabled" class="hidden-tab">
              <a [routerLink]="['/ruleset/item-master/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Gen-Items"> <span>Item Templates</span></a>
            </li>
            <li *ngIf="rulesetModel?.isSpellEnabled" class="hidden-tab">
              <a [routerLink]="['/ruleset/spell/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Rec-Magical"> <span>Spells</span></a>
            </li>
            <li *ngIf="rulesetModel?.isAbilityEnabled" class="hidden-tab">
              <a [routerLink]="['/ruleset/ability/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Gen-Ability"> <span>Abilities</span></a>
            </li>
            <li *ngIf="rulesetModel?.isBuffAndEffectEnabled" class="hidden-tab">
              <a [routerLink]="['/ruleset/buff-effect/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-BnE"> <span>Buffs/Effects</span></a>
            </li>
            <li *ngIf="rulesetModel" class="hidden-tab">
              <a [routerLink]="['/ruleset/character-stats/', ruleSetId]" class="btn btn-link-primary nav-redirection selected icon-Gen-CharStat"> <span>Character Stats</span></a>
            </li>
            <li class="hidden-tab">
              <button type="button" id="newStatTrigger" data-toggle="modal" (click)="newCharacterStat()"
                      class="btn icon icon-with-text icon-plus btn-primary" [disabled]="isLoading">
                <span>New Stat</span>
              </button>
            </li>
            <!--<li class="hidden-tab">
    <button type="button" *ngIf="IsGm && !isLoading" (click)="openDiceRollModal()" class="btn icon icon-with-text icon-dice icon-rsi btn-primary">Dice</button>
  </li>-->
            <li class="visible-tab">
              <div class="dropdown dropdown-buttons" [ngClass]="{'show': isDropdownOpen}">
                <button type="button" data-toggle="dropdown" aria-expanded="false" class="btn btn-primary dropdown-toggle is-show">Records</button>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="newItemTrigger" *ngIf="isDropdownOpen">
                  <ul class="dropdown-menu-list" *ngIf="!isLoading">
                    <li *ngIf="rulesetModel" class="dropdown-menu-item">
                      <a *ngIf="!IsGm" [routerLink]="['/ruleset/dashboard/', ruleSetId]" class="btn btn-link-primary nav-redirection">Layouts</a>
                      <a *ngIf="IsGm" [routerLink]="['/ruleset/campaign-dashboard/', ruleSetId]" class="btn btn-link-primary nav-redirection">Layouts</a>
                    </li>
                    <li *ngIf="rulesetModel?.isItemEnabled" class="dropdown-menu-item">
                      <!--<a (click)="navigateTo(3)" class="btn btn-link-primary nav-redirection icon-Gen-Items"> Inventory</a>-->
                      <a [routerLink]="['/ruleset/item-master/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Gen-Items"> <span>Item Templates</span></a>
                    </li>
                    <li *ngIf="rulesetModel?.isSpellEnabled" class="dropdown-menu-item">
                      <!--<a (click)="navigateTo(2)" class="btn btn-link-primary nav-redirection icon-Rec-Magical">Spells</a>-->
                      <a [routerLink]="['/ruleset/spell/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Rec-Magical"> <span>Spells</span></a>
                    </li>
                    <li *ngIf="rulesetModel?.isAbilityEnabled" class="dropdown-menu-item">
                      <!--<a (click)="navigateTo(1)" class="btn btn-link-primary nav-redirection icon-Gen-Ability"> Abilities</a>-->
                      <a [routerLink]="['/ruleset/ability/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-Gen-Ability"> <span>Abilities</span></a>
                    </li>
                    <li *ngIf="rulesetModel?.isBuffAndEffectEnabled" class="dropdown-menu-item">
                      <a [routerLink]="['/ruleset/buff-effect/', ruleSetId]" class="btn btn-link-primary nav-redirection icon-BnE"> <span>Buffs/Effects</span></a>
                    </li>
                    <li *ngIf="rulesetModel" class="dropdown-menu-item">
                      <!--<a [routerLink]="['/character/character-stats/', characterId]" class="btn btn-link-primary nav-redirection selected icon-Gen-CharStat"> Character Stats</a>-->
                      <a [routerLink]="['/ruleset/character-stats/', ruleSetId]" class="btn btn-link-primary nav-redirection selected icon-Gen-CharStat"> <span>Character Stats</span></a>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
            <!--<li>
      <button type="button" id="newStatTrigger" data-toggle="modal" (click)="newCharacterStat()"
              class="btn icon icon-with-text icon-plus btn-primary">
          <span>New Stat</span>
      </button>
  </li>-->
          </ul>
          <!-- End of toolbar links -->
        </div>
        <ul class="page-toolbar-actions">
          <li>
            <button type="button" id="newStatTrigger" data-toggle="modal" (click)="newCharacterStat()"
                    class="btn icon icon-with-text icon-plus btn-primary" [disabled]="isLoading">
              <span>New Stat</span>
            </button>
          </li>
          <!--<li>
            <button type="button" *ngIf="IsGm && !isLoading" (click)="openDiceRollModal()" class="btn icon icon-with-text icon-dice icon-rsi btn-primary">Dice</button>
          </li>-->
        </ul>
      </div>
    </div>
  </div>
  <!-- End of toolbar -->
  <!--serach box-->
  <div class="row stat-search-box">
    <div class="col-12 col-md-12 col-sm-12">
      <div class="form-group form-group-unlabelled">
        <span class="input-group-btn">
          <button type="button" title="Search" data-toggle="tooltip" class="btn icon icon-search btn-simple-primary"></button>
        </span>
        <input type="text" id="statSearchQuery" name="statSearchQuery" class="form-control" placeholder="Search Character Stat"
               [(ngModel)]="searchText" />
      </div>
    </div>
  </div>

  <!-- Character stat cards -->
  <div class="cards cards-stats" *ngIf="!isLoading">
    <div class="container">
      <p class="text-center py-5 w-100 d-block" *ngIf="noRecordFound">No Character Stats have been added to this ruleset. Click "+New Stat" to add some.</p>
      <div class="card-list web-view" [dragula]='"bag-characterStats"' [dragulaModel]="characterStats">
        <div class="card-wrapper" *ngFor="let characterStat of characterStats | filter : searchText : 'statName';" [attr.id]="characterStat.characterStatId"
             [attr.rid]="characterStat.ruleSetId">
          <div class="card" (click)="editCharacterStat(characterStat)">
            <div *ngIf="characterStat.icon !== 'icon-CharStat-Text'" class="card-icon icon icon-rsi" [ngClass]="characterStat.icon"></div>
            <div *ngIf="characterStat.icon === 'icon-CharStat-Text'" class="card-icon icon icon-ico" [ngClass]="characterStat.icon"></div>
            <div class="card-order-trigger icon icon-list"></div>
            <div class="card-body">
              <h4 class="card-title">{{characterStat.statName}}</h4>
              <div class="item-type">
                <span>{{characterStat.characterStatTypeViewModel.statTypeName}}</span>
              </div>
              <div class="item-desc">{{characterStat.statDesc}}</div>

              <div class="card-actions sorting-up-arrow" (click)="scrollUp(characterStat)">
                <i class="fa fa-arrow-up"></i>
              </div>
              <div class="card-actions sorting-down-arrow" (click)="scrollDown(characterStat)">
                <i class="fa fa-arrow-down"></i>
              </div>
            </div>
          </div>
          <div class="more-option-btn">
            <div class="card-actions-trigger" *ngIf="!characterStat.showIcon">
              <button type="button" (click)="manageIcon(characterStat.characterStatId)" tooltip="Manage"
                      class="btn icon icon-more btn-simple-primary pull-right"></button>
            </div>
            <div class="card-actions crud-button" *ngIf="characterStat.showIcon">
              <button type="button" (click)="editCharacterStat(characterStat)" tooltip="Edit" class="btn icon icon-pencil btn-simple-primary"></button>
              <button type="button" (click)="duplicateCharacterStat(characterStat)" tooltip="Duplicate" class="btn icon icon-copy icon-rsi btn-simple-primary"></button>
              <button type="button" (click)="deleteCharacterStat(characterStat)" tooltip="Delete" class="btn icon icon-trash btn-simple-primary"></button>
              <button type="button" (click)="manageIcon(false)" tooltip="Close" class="btn icon icon-cross btn-simple-primary"></button>
            </div>
          </div>
        </div>
      </div>
      <div class="card-list mob-view">
        <div class="card-wrapper" *ngFor="let characterStat of characterStats | filter : searchText : 'statName';" [attr.id]="characterStat.characterStatId"
             [attr.rid]="characterStat.ruleSetId">
          <div class="card" (click)="editCharacterStat(characterStat)">
            <div *ngIf="characterStat.icon !== 'icon-CharStat-Text'" class="card-order-trigger card-icon icon icon-rsi" [ngClass]="characterStat.icon"></div>
            <div *ngIf="characterStat.icon === 'icon-CharStat-Text'" class="card-order-trigger card-icon icon icon-ico" [ngClass]="characterStat.icon"></div>
            <!-- <div class="card-order-trigger icon icon-list"></div> -->
            <div class="card-body">
              <h4 class="card-title">{{characterStat.statName}}</h4>
              <div class="item-type">
                <span>{{characterStat.characterStatTypeViewModel.statTypeName}}</span>
              </div>
              <div class="item-desc">{{characterStat.statDesc}}</div>


            </div>
          </div>
          <div class="more-option-btn">
            <div class="card-actions-trigger" *ngIf="!characterStat.showIcon">
              <button type="button" (click)="manageIcon(characterStat.characterStatId)" tooltip="Manage"
                      class="btn icon icon-more btn-simple-primary pull-right"></button>
            </div>
            <div class="card-actions crud-button" *ngIf="characterStat.showIcon">
              <button type="button" (click)="editCharacterStat(characterStat)" tooltip="Edit" class="btn icon icon-pencil btn-simple-primary"></button>
              <button type="button" (click)="duplicateCharacterStat(characterStat)" tooltip="Duplicate" class="btn icon icon-copy icon-rsi btn-simple-primary"></button>
              <button type="button" (click)="deleteCharacterStat(characterStat)" tooltip="Delete" class="btn icon icon-trash btn-simple-primary"></button>
              <button type="button" (click)="manageIcon(false)" tooltip="Close" class="btn icon icon-cross btn-simple-primary"></button>
            </div>
            <div class="card-actions sorting-up-arrow" (click)="scrollUp(characterStat)">
              <i class="fa fa-arrow-up"></i>
            </div>
            <div class="card-actions sorting-down-arrow" (click)="scrollDown(characterStat)">
              <i class="fa fa-arrow-down"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End of inventory cards -->

  <app-loader [isLoading]="isLoading"></app-loader>
</div>
