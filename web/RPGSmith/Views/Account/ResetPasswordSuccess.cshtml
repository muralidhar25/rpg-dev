@using System.Configuration;
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>RPGSmith ResetPwd</title>
	<link href="@Url.Content("http://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900")" rel="stylesheet" type="text/css" />
	<link href="~/wwwroot/css/style.css" rel="stylesheet" type="text/css" />
	<link href="~/wwwroot/css/site.css" rel="stylesheet" type="text/css" />
	<link href="~/wwwroot/css/bootstrap.css" rel="stylesheet" type="text/css" />
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css" />
	<script src="https://apis.google.com/js/api:client.js"></script>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
	<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32" />
	<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16" />
	<link rel="manifest" href="/manifest.json" />
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
	<meta name="apple-mobile-web-app-title" content="RPGSmith" />
	<meta name="application-name" content="RPGSmith" />
	<meta name="theme-color" content="#ffffff" />
	<link href="/wwwroot/lib/tinymce/skins/lightgray/skin.min.css" rel="stylesheet" />
	<link href="/wwwroot/css/style.css" rel="stylesheet" />

	<link href="/wwwroot/css/bootstrap.css" rel="stylesheet" />


	<environment names="Development">
		<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.css" />

		<link rel="stylesheet" href="/wwwroot/css/site.css" />
	</environment>
	<environment names="Staging,Production">
		<link rel="stylesheet" href="/bower_components/font-awesome/css/font-awesome.min.css" />

		<link rel="stylesheet" href="/wwwroot/css/site.min.css" asp-append-version="true" />
	</environment>
	<style>
		.col-sm-2 {
			-ms-flex: 0 0 100%;
			flex: 0 0 100%;
			max-width: 100%;
		}
		.col-sm-3 {
			-ms-flex: 0 0 100%;
			flex: 0 0 100%;
			max-width: 100%;
		}
		.col-10 {
			-ms-flex: 0 0 83.333333%;
			flex: 0 0 83.333333%;
			max-width: 100%;
			columns: 2;
		}
		.btn {
			width: 150px;
		}
	</style>
	<script type="text/javascript" src="//cdn.jsdelivr.net/jquery/1/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
	<link href="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet" />
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js">

	</script>
	<script type="text/javascript">
		function ResetProfilePassword() {
			if (document.getElementById("newpassword").value == "" || document.getElementById("newpassword").value.trim().length < 8) {
				toastr.warning('Please enter the new password. This should be 8 characters long', 'New Password Alert', { timeOut: 5000 });
				document.getElementById("newpassword").focus();
				return;
			}
			if (document.getElementById("newpassword").value != document.getElementById("confirmpassword").value) {
				toastr.warning('Confirm password should be the same as the new password.', 'Confirm Password Alert', { timeOut: 5000 });
				document.getElementById("confirmpassword").focus();
				return;
			}
			
			var resetpass = {
				Password: document.getElementById("newpassword").value,
				ConfirmPassword: document.getElementById("confirmpassword").value ,
				UserId: window.location.search.userid
			};
			$.ajax({
				type: "POST",
				url: "/api/Profile/ResetPassword",
				data: resetpass,
				success: function (xml) {
					toastr.success("Password reset was successfull: Message from the server: " + xml, "Reset password Success");
					document.getElementById("confirmationrow1").style.display = "block";
					document.getElementById("confirmationrow2").style.display = "block";
					document.getElementById("confirmationrow3").style.display = "block";
					document.getElementById("resetrow").style.display = "none";
				},
				error: function (err) {
					toastr.failure("An error occurred while processing your request.");
				}
			});
		}
	</script>
</head>
<body style="margin: 0;padding: 0;width:100%;color: #000000;background-color:#EBEBEB;font-family: Roboto, HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif; ">
	
	<div style="max-width: 6in;margin: 0 auto;background-color:#ffffff;margin-top: 1.5em;align-content: center">

		<table style="width: 100%;align-content: center">

			<tr>
				<td align="center" style="padding-top: 1em">
					<a href="https://www.facebook.com/RPG-Smith-1625592264372389" title="RPGSmith"><img width="252" height="127" title="RPGSmith" alt="RPGSmith" src="https://lh3.googleusercontent.com/QEifSn90PEjjSZ-5d3yhXoVp6ixxojV6Jo3P_lKUvvBTqxFsWmLjHllW0HrLji6hM5lgEYv3cCuWE_dDo3hzyevV_RyQZf4fA0JRHr7Y6bV0oX9Mjc3O5ZlLKzkF9sfnjkpM_YmNmLJ2SX2MmjwteXop2spQACXtsQgSOM0Sc0K94F-JFC2NcSTHwqTerHPgG-T2PSG2qINGcSdgn2m7AMkq1tSqKds5x1Ovic9auo7NkNomKTgw2WvCsoR96g9TkJRqi-viX38qbJkl3RJySoqycBoSULmZ8WaIb3gMcBM4CJFEHiVZx9a1qfpxibE_iMARM4PdP8GOiGZkqLt4NNI2rs7ojnvpXIagmS0OuUyZtXt8yw0egJWadSM_K3N_vDFE_fPt4I0RU7CDgPlD-UgjvuZ7om7c-448MOtbR4lVqFyGKyYnxxruPwtr966PpXQ3NpQpHmhfMbqSnseYJ512_aeg1ohlKpUhknsSS2WBRhTcfBo14t1f1VEyNOnd8bPx0jEUQhx4euqH8raDO6W7MxOR666SWFAlLiNJdA=w702-h353-no" /></a>
				</td>
			</tr>
			<tr style="width: 100%" id="resetrow">
				<td style="padding-top: 1em; width: 100%; padding-left: 50px;padding-bottom: 40px;" >
					<div class="container reset_password" style="width: 100%">
						<div class="panel panel-primary" style="width: 100%">
							<div class="panel-heading" style="width: 100%">
								<h4><i class="fa fa-edit"></i>  Reset Password </h4>

							</div>
							<div class="panel-body" style="width: 100%">
								<div class="col-md-offset-2 col-md-10">
									<div class="form-horizontal">
										
										<div class="form-group">
											<label class="control-label col-sm-2" for="newpassword">New Password</label>
											<div class="col-sm-3">
												<input type="password" class="form-control" id="newpassword" placeholder="Enter New Password" name="newpassword" ng-model="newpassword" />
											</div>
										</div>
										<div class="form-group">
											<label class="control-label col-sm-2" for="confirmpassword"> Confirm Password:</label>
											<div class="col-sm-3">
												<input type="password" class="form-control" id="confirmpassword" placeholder="Enter Confirm password" name="confirmpwd" ng-model="confirmpassword" ng-change="checkpass()" />
											</div>
										</div>
									</div>

									<div class="form-group">
										<div class="col-10">
											<button  type="button" class="btn btn-primary " onclick="ResetProfilePassword()"><i class="fa fa-edit"></i> <span> &nbsp;&nbsp;Update</span></button>
											<button  type="button" class="btn btn-default " onclick="window.location.href='/login'"><i class="fa fa-times"></i> <span> &nbsp;&nbsp;Back to Login</span></button>
										</div>
									</div>
								</div>

							</div>
						</div>
					</div>

					<toaster-container toaster-options="{'position-class': 'toast-top-right'}" style=" left: 50%; position: fixed;"></toaster-container>
				</td>
			</tr>
			<tr style="display: none; width: 100%; text-align: -webkit-center" id="confirmationrow1">
				<td align="center">
					<div style="margin-bottom: 1em;font-size: 1.4em;font-weight: 500" mc:edit="rem_title">Success!!</div>
				</td>
			</tr>

			<tr style="display: none;width: 100%; text-align: -webkit-center" id="confirmationrow2">
				<td align="left">
					<div style="margin-bottom: 1.5em;font-weight: 300" mc:edit="rem_notes">Your password has been changed.<br><br>You can now login to RPGSmith with your new password.</div>
				</td>
			</tr>

			<tr style="display: none; width: 100%; text-align: -webkit-center" id="confirmationrow3">
				<td align="center">
					<table width="100%">
						<tr>
							<button type="button" style="width: 150px;display: inline-block;padding: 6px 12px;margin-bottom: 0;font-size: 14px;font-weight: 400;line-height: 1.42857143;text-align: center;white-space: nowrap;vertical-align: middle;-ms-touch-action: manipulation;touch-action: manipulation;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;background-image: none;border: 1px solid transparent;border-radius: 4px;background-color: #d35e3f;"><a href="http://app.rpgsmith.com" style="text-decoration:none;color:#fff">Launch RPGSmith</a></button>
							<br/>
							<br/>
							<br/>
						</tr>
					</table>
				</td>
			</tr>

			
			<tr>
				<td align="center" style="font-weight: 300;font-size: 0.8em;padding-bottom: 1em">
					Copyright &#169;2018 <a href="https://www.facebook.com/RPG-Smith-1625592264372389" title="RPGSmith" style="text-decoration: none;color: #34AADC;"><span class="RPGSmith" style="color: #D2602A;font-weight: 700;">RPG<b style="color: #000000;font-weight: 700;">&#8226;Smith</b></span></a>, LLC All rights reserved.<br />
					<div style="padding-top: 1.0em">
						<a href="https://www.facebook.com/RPG-Smith-1625592264372389" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/facebook.png" border="0" alt="Facebook" /></a>
						<a href="https://twitter.com/RpgSmith" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/twitter.png" border="0" alt="Twitter" /></a>
						<a href="https://plus.google.com/u/2/communities/101062066525142446219" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/google_plusone_share.png" border="0" alt="Google+" /></a>
					</div>
				</td>
			</tr>
		</table>

	</div>
	<toaster-container class="toaster_align" toaster-options="{'time-out':6000}"></toaster-container>
</body>
</html>