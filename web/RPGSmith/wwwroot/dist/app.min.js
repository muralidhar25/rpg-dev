function InitialiseFacebook(e){window.fbAsyncInit=function(){function t(e){$.ajax({url:"/account/facebooklogin",type:"POST",data:e,error:function(){alert("error logging in to your facebook account.")},success:function(){angular.element("#profileImage").scope().gotoHomepage()}})}FB.init({appId:e,status:!0,cookie:!0,xfbml:!0}),FB.Event.subscribe("auth.login",function(e){t({uid:e.authResponse.userID,accessToken:e.authResponse.accessToken})})},function(e){var t,a="facebook-jssdk",i=e.getElementsByTagName("script")[0];e.getElementById(a)||(t=e.createElement("script"),t.id=a,t.async=!0,t.src="//connect.facebook.net/en_US/all.js",i.parentNode.insertBefore(t,i))}(document)}function googleSignIn(){gapi.load("auth2,signin2",function(){var e=gapi.auth2.init();e.then(function(){var t=e.isSignedIn.get();e.currentUser.get();t?1==confirm("Continue with Goole Account")?gapi.signin2.render("signInGoogle",{onsuccess:"onSignIn"}):signOut():gapi.signin2.render("signInGoogle",{onsuccess:"onSignIn"})})})}function onSignIn(e){var t=e.getBasicProfile();console.log("ID: "+t.getId()),console.log("Name: "+t.getName()),console.log("Image URL: "+t.getImageUrl()),console.log("Email: "+t.getEmail()),console.log("Access"+e.getAuthResponse().id_token),isUserRegistered(t.getEmail(),t.getId(),e.getAuthResponse().id_token)}function onSignInFailure(){alert("failure")}function signOut(){gapi.auth2.getAuthInstance().signOut().then(function(){gapi.signin2.render("signInGoogle",{onsuccess:"onSignIn"})})}function isUserRegistered(e,t,a){$.ajax({url:"/Account/GoogleLogin",method:"GET",data:{Email:e,AccesKey:t,AccountType:"Google"},success:function(e){null!=e?angular.element("#profileImage").scope().gotoHomepage():window.location.href="/views/home/login.html"}})}function dicenotationvalidator(e){for(var t,a,i=["d4","d6","d8","d10","d12","d20","d100"],l=e.split("@"),o=/\s*(\d*)([a-z]+)(\d+)(\s*\+\s*(\d+)){0,1}\s*(\+|$)/gi,s=/(\b)*(\d+)(\b)*/gi,n={set:[],constant:0,result:[],error:!1};a=o.exec(l[0]);){if("d"==a[2]){var r=parseInt(a[1]);""==a[1]&&(r=1);var c="d"+a[3];if(-1!=i.indexOf(c)){for(;r--;)n.set.push(c);a[5]&&(n.constant+=parseInt(a[5]))}else n.error=!0}else n.error=!0}for(;a=s.exec(l[1]);)n.result.push(parseInt(a[2]));return void 0==n||null==n?t=!1:0!=n.set.length&&(t=!0),t}function dicerollwithcommand(e){$("#canvas").children().remove(),$("#canvas").append('<canvas width="1365" height="345"></canvas>'),$t.id("set").value=e;var t=$t.id("diceareaforroll");$t.id("diceRollTrigger").style.display="inline-block",$t.id("addmod").style.display="inline-block",$t.id("diceareaforselection").style.display="none",$t.id("showdicerollresult").style.display="none",$t.id("diceareaforroll").style.display="block",$t.id("defaultDiceSelect").style.display="none",diceinitializer=new dice_initialize(t),diceinitializer.rolediceagain()}function diceselectcommandtrace_temp(){var e="";customarray=[];for(var t=[],a="",i=$("#customset").val(),l=0;l<i.length;l++)"+"!=i[l]&&"/"!=i[l]&&"-"!=i[l]&&"*"!=i[l]?(e+=i[l],l==i.length-1&&customarray.push(e)):("+"==i[l]||"/"==i[l]||"-"==i[l]&&"*"!=i[l])&&(customarray.push(e),customarray.push(i[l]),e="");for(var o=0;o<customarray.length;o++){var s=/\s*(\d*)([a-z]+)(\d+)(\s*\+\s*(\d+)){0,1}\s*(\+|$)/gi,n=/(\b)*(\d+)(\b)*/gi;1==s.test(customarray[o])&&1==n.test(customarray[o])&&(t.push(customarray[o]),t.push("+"),a+=customarray[o],a+="+")}return a}function diceselectcommandtrace(){var e="";customarray=[];for(var t=[],a=[],i="",l=["d4","d6","d8","d10","d12","d20","d100"],o=$t.id("customset"),s=o.value,n=1,r=[],c=0;c<s.length;c++)if("("!=s[c]){if(")"==s[c]&&(r.push(e),n=3),1==n)"+"!=s[c]&&"/"!=s[c]&&"-"!=s[c]&&"*"!=s[c]?(e+=s[c],c==s.length-1&&t.push(e)):"+"!=s[c]&&"/"!=s[c]&&"-"!=s[c]&&"*"!=s[c]||(t.push(e),t.push(s[c]),e="");else if(2==n)"+"!=s[c]&&"/"!=s[c]&&"-"!=s[c]&&"*"!=s[c]?(e+=s[c],c==s.length-1&&r.push(e)):"+"!=s[c]&&"/"!=s[c]&&"-"!=s[c]&&"*"!=s[c]||(r.push(e),r.push(s[c]),e="");else if(3==n){if(r.length>1){t.push("(");for(var d=0;d<r.length;d++)t.push(r[d]);t.push(")")}else t.push("("+r[0]+")");n=1}}else n=2;for(var d=0;d<t.length;d++){var u=t[d].trim(),p=u.split("@"),m=/\s*(\d*)([a-z]+)(\d+)(\s*\+\s*(\d+)){0,1}\s*(\+|$)/gi,g=0,b=[];p[0].includes(" ")||(b=m.exec(p[0]));var h=[],v=!0,f="",y="";if((null==b||""==b||void 0==b)&&(!1,h=p[0].split(" "),2==h.length))if(b=m.exec(h[0]),"RD"==h[1]||"RU"==h[1])v=!0;else if(h[1].startsWith("KL")||h[1].startsWith("KH")||h[1].startsWith("DL")||h[1].startsWith("DH")){var S=h[1];diceSpecialOperatorStr=S.trim(),diceSpecialOperatorCmd=diceSpecialOperatorStr.substring(0,2),diceSpecialOperatorValue=diceSpecialOperatorStr.charAt(2),isNumeric(diceSpecialOperatorValue)?(diceSpecialOperatorValue=parseInt(diceSpecialOperatorValue),v=!0):v=!1}null!=b&&void 0!=b&&b.length>0&&(f=b[2],y=b[2]+b[3]),"d"==f&&l.indexOf(y)>-1&&1==v&&(g=""==b[1]?1:parseInt(b[1]),a.push(g+f+b[3]))}customarray=t;for(var d=0;d<a.length;d++)i+=a[d],i+="+";return i}function diceresultafterroll(e,t,a){var l=["d4","d6","d8","d10","d12","d20","d100"];for(i=0;i<l.length;i++){var o=-1,s=l[i],n=$t.id("showdicerollresult_"+s),r=0;for(j=0;j<e.set.length;j++)(o=s==e.set[j]?j:-1)>-1&&(r+=t[o]);null!=n.innerHTML&&void 0!=n.innerHTML&&""!=n.innerHTML&&(n.innerHTML=r)}$t.id("showdicerollresult_Sum").innerHTML=a;var c=$t.id("canvas");c.style.display="none";var c=$t.id("showdicerollresult");c.style.display="block"}function diceafterrolltrace(e,t){var a=["d4","d6","d8","d10","d12","d20","d100"],i=[],l={};if(customdicearray=customarray,t.length<=0)return void alert("error in result");for(var o=0;o<e.set.length;o++){var s=e.set[o];void 0==l[s]&&(l[s]=[]),l[s].push(t[o])}for(var n=0;n<customdicearray.length;n++){var r=customdicearray[n].trim(),c=r.split("@"),d=/\s*(\d*)([a-z]+)(\d+)(\s*\+\s*(\d+)){0,1}\s*(\+|$)/gi,u=0,p="",m="",g="",b=0,h=[];c[0].includes(" ")||(h=d.exec(c[0]));var v=[],f=!0,y="",S="";if((null==h||""==h||void 0==h)&&(customarraynowithfuncavail=!1,v=c[0].split(" "),2==v.length))if(h=d.exec(v[0]),"RD"==v[1]||"RU"==v[1])f=!0;else if(v[1].startsWith("KL")||v[1].startsWith("KH")||v[1].startsWith("DL")||v[1].startsWith("DH")){var w=v[1];m=w.trim(),g=m.substring(0,2),b=m.charAt(2),isNumeric(b)?(b=parseInt(b),f=!0):f=!1}if(null!=h&&void 0!=h&&h.length>0&&(y=h[2],S=h[2]+h[3]),"d"==y&&a.indexOf(S)>-1&&1==f){var C=0;u=""==h[1]?1:parseInt(h[1]),p="d"+h[3];l[p];if(0==v.length)for(var I=0;I<u;I++)C+=l[p].pop();else if(2==v.length)if(v[1].includes("KL")||v[1].includes("KH")||v[1].includes("DL")||v[1].includes("DH")){for(var x=[],I=0;I<u;I++)x.push(l[p].pop());x.sort();for(var I=0;I<u;I++)"KL"==g?I<b?C+=x.pop():x.pop():"KH"==g?I>=x.length-b?C+=x.pop():x.pop():"DL"==g?I>=x.length-b?x.pop():C+=x.pop():"DH"==g&&(I>=x.length-b?C+=x.pop():x.pop())}else if("RD"==v[1]||"RU"==v[1]){for(var I=0;I<u;I++)C+=l[p].pop();C=C+" "+v[1]}i.push(C)}else i.push(r)}var T=calculateDiceCommandResult(i);return diceresultafterroll(e,t,T),T}function calculateDiceCommandResult(e){for(var t=[],a=[],i=1,l=0,o=0;o<e.length;o++)"("!=e[o]?")"==e[o]&&o==e.length-1?(l=calculateCommandResult(a),t.push(l),i=1):")"==e[o]?(i=3,o):1==i?t.push(e[o]):2==i?a.push(e[o]):3==i&&(l=calculateCommandResult(a),t.push(l),i=1):(i=2,o);return calculateCommandResult(t)}function calculateCommandResult(e){var t="",a="",i="",l=0;if(1==e.length)l=e[0];else{for(var o=[],s=e,n=1;n<=4;n++){t="",i="",a="";for(var r=0;r<s.length;r++){var c=s[r];if(isNumeric(c)||(c=c.trim()),isNumeric(c)&&(c=parseInt(c)),""!=t||"+"==c||"-"==c||"*"==c||"/"==c)if(""!=i||1!=c.length){if(""==a&&(a=c),""!=i&&""!=t&&""!=a){if("*"==i&&1==n){var d=t*a;o.pop(),o.push(d)}else if("/"==i&&2==n){var u=a.split(" "),p=0,m=null;u.length>1?(p=u[0],m=u[1]):p=u[0];var d=t/p;"RD"==m?(o.pop(),o.push(Math.floor(d))):"RU"==m?(o.pop(),o.push(Math.ceil(d))):(o.push(d),t=d)}else if("-"==i&&3==n){var d=t-a;o.pop(),o.push(d),t=d}else if("+"==i&&4==n){var d=0;d=(isNumeric(t)&&isNumeric(a),t+a),o.pop(),o.push(d),t=d}else o.length>0?(o.push(i),o.push(a)):(o.push(t),o.push(i),o.push(a)),t=a;i="",a=""}}else i=c;else t=c}if(s=o,o=[],1==s.length)break}1==s.length&&(l=s[0])}return l}function isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}function dicerollwithoutcommand(){$t.id("defaultDiceSelect").style.display="none",$t.id("diceRollTrigger").style.display="block",$t.id("addmod").style.display="block"}function DiceCommandRoll(){$("#canvas").children().remove(),$("#canvas").append('<canvas width="1365" height="345"></canvas>'),$t.id("canvas").style.display="block",$t.id("diceareaforselection").style.display="none",$t.id("showdicerollresult").style.display="none",$t.id("defaultDiceSelect").style.display="none",$t.id("diceareaforroll").style.display="block",$t.id("savedattackoptions").style.display="block",$t.id("addmod").style.display="block",$t.id("lastDiceRollResult").style.display="block";var e=$t.id("customset");$t.id("customsetatroll").value=e.value;var t=$t.id("diceareaforroll");diceinitializer=new dice_initialize(t),diceinitializer.rolediceagain()}function diceCommandClear(){$t.id("customset").value=""}function diceselectcommand(){return $t.id("savedattackoptions").style.display="none",$t.id("addmod").style.display="none",$t.id("diceRollTrigger").style.display="none",$t.id("dicesavecommand").style.display="none",$t.id("lastDiceRollResult").style.display="none",$t.id("defaultDiceSelect").style.display="block",""}function parsecustomdice_notation(e){for(var t,a=["d4","d6","d8","d10","d12","d20","d100"],i=e.split("@"),l=/\s*(\d*)([a-z]+)(\d+)(\s*\+\s*(\d+)){0,1}\s*(\+|$)/gi,o=/(\b)*(\d+)(\b)*/gi,s={set:[],constant:0,result:[],error:!1};t=l.exec(i[0]);){if("d"==t[2]){var n=parseInt(t[1]);""==t[1]&&(n=1);var r="d"+t[3];if(-1!=a.indexOf(r)){for(;n--;)s.set.push(r);t[5]&&(s.constant+=parseInt(t[5]))}else s.error=!0}else s.error=!0}for(;t=o.exec(i[1]);)s.result.push(parseInt(t[2]));return s}function dicecommandsearch(e){if(void 0!=e){var t="",a="",i=$t.id("customset"),l=i.value,o=[],s=e,n=s.split("@"),r=/\s*(\d*)([a-z]+)(\d+)(\s*\+\s*(\d+)){0,1}\s*(\+|$)/gi,c=r.exec(n[0]),d=c[2],u="";"d"==d&&(""==c[1]?1:parseInt(c[1]),u="d"+c[3]);for(var p=0;p<l.length;p++)"+"!=l[p]&&"/"!=l[p]&&"-"!=l[p]&&"*"!=l[p]?(t+=l[p],p==l.length-1&&o.push(t)):"+"!=l[p]&&"/"!=l[p]&&"-"!=l[p]&&"*"==l[p]||(o.push(t),o.push(l[p]),t="");for(var m=!1,g=0;g<o.length;g++){var b=o[g].trim(),h=b.split("@"),v=/\s*(\d*)([a-z]+)(\d+)(\s*\+\s*(\d+)){0,1}\s*(\+|$)/gi,f=0,y="",S="",w=[];h[0].includes(" ")||(w=v.exec(h[0]));var C=[],I=!1;if(null==w||""==w||void 0==w){if(C=h[0].split(" "),2!=C.length)continue;w=v.exec(C[0]),I=!0}"d"==w[2]&&(f=""==w[1]?1:parseInt(w[1]),y="d"+w[3]),y==u&&(f+=1,S=f+y,o[g]=1==I?S+" "+C[1]:S,m=!0)}if(0==m&&(o.length>0?(o.push("+"),o.push(e)):o.push(e)),o.length>0)for(var g=0;g<o.length;g++)a=a.trim()+" "+o[g].trim();i.value=a.trim()}}function stringifycustomdice_notation(e){var t={},a="";for(var i in e.set)t[e.set[i]]?++t[e.set[i]]:t[e.set[i]]=1;for(var i in t)a.length&&(a+=" + "),a+=(t[i]>1?t[i]:"")+i;return e.constant&&(a+=" + "+e.constant),a}function customrolediceagain(){var e=$t.id("canvas");e.style.display="block";var e=$t.id("showdicerollresult");e.style.display="none",diceinitializer.rolediceagain()}function dicerollcomplete(){$t.id("diceareaforroll").style.display="none",$t.id("diceareaforselection").style.display="block"}function dice_initialize(e){function t(e,t,a){a()}function a(){return n.value=diceselectcommandtrace(),$t.dice.parse_notation(n.value)}function i(e,t){var a=t.join(" ");e.constant&&(a+=" +"+e.constant),t.length>1&&(a+=" = "+(t.reduce(function(e,t){return e+t})+e.constant)),a=diceafterrolltrace(e,t),s.value=a,localStorage.setItem("rollresult",s.value),r.value=a}var l=$t.id("myModal"),o=$t.id("canvas");o.style.width="569px",o.style.height="499px";var s=$t.id("rollresult"),n=$t.id("set"),r=($t.id("customset"),$t.id("sethelp"),$t.id("lastrunresult"));!function(e){n.style.width=n.value.length+3+"ex"}(),$t.dice.use_true_random=!1;var c=new $t.dice.dice_box(o,{w:500,h:300});c.animate_selector=!1,$t.bind(window,"resize",function(){o.style.width=l.innerWidth-1+"px",o.style.height=l.innerHeight-1+"px",c.reinit(o,{w:500,h:300})}),c.bind_mouse(e,a,t,i);var d=$t.get_url_params();d.notation&&(n.value=d.notation),d.roll?$t.raise_event($t.id("throw"),"mouseup"):function(){c.draw_selector()}(),this.rolediceagain=function(){c.bind_customthrow(a,t,i)}}!function(){"use strict";Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),a=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],l=0;l<a;){var o=t[l];if(e.call(i,o,l,t))return l;l++}return-1}})}(),function(e){"use strict";GridStackUI.Utils.getNode=function(e){return e.data("_gridstack_node")},GridStackUI.Utils.getNodeData=function(e){return e.data("_item_data")},Math.clamp=function(e,t,a){return e<=t?t:a<=e?a:e},Math.randomInteger=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.obj2Styles=function(e){if(e){var t="";for(var a in e)e.hasOwnProperty(a)&&(t+="; ",t+=a,t+=": ",t+=e[a]);if(t.length>1)return t.substring(2)}return""},e.styles2Obj=function(e){for(var t,a=/([\w-]*)\s*:\s*([^;]*)/g,i={};t=a.exec(e);)i[t[1]]=t[2].trim();return i},e.isNullOrWhiteSpace=function(e){return null==e||/^\s*$/.test(e)},e.tileTypes={note:{id:1,name:"Note"},counter:{id:2,name:"Counter"},attribute:{id:3,name:"Attribute"},command:{id:3,name:"Command"},inventory:{id:4,name:"Inventory"},equipment:{id:5,name:"Equipment"}},e.isEmpty=function(e){return null==e||0===e.length},e.fillArray=function(e,t,a){"function"!=typeof a&&(a=function(e){return e}),t&&(t.length=0,e&&e.forEach(function(e){t.push(a(e))}))}}(window.rpgsmith=window.rpgsmith||{}),function(){"use strict";angular.module("rpgsmith-dialogs",["ui.bootstrap","dialogs.main"]),angular.module("rpgsmith-services",["ngStorage"]),angular.module("rpgsmith-filters",["rpgsmith-services"]),angular.module("rpgsmith-directives",[]),angular.module("rpgsmith-controllers",["rpgsmith-directives","rpgsmith-services"]),angular.module("rpgsmith-templates",[]);var e=angular.module("rpgsmith",["dialogs.main","ngMessages","angularSpectrumColorpicker","ngAnimate","ngTouch","ngSanitize","ngStorage","ngImgCrop","ngFileUpload","pageslide-directive","rpgsmith-directives","rpgsmith-dialogs","rpgsmith-filters","rpgsmith-controllers","rpgsmith-services","rpgsmith-templates","toaster","ui.router","ui.sortable","ui.tab.scroll","ui.select","ui.tinymce","colorpicker","ngStorage"]);e.filter("trusted",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),e.config(["uiSelectConfig",function(e){e.theme="bootstrap",e.searchEnabled=!1,e.skipFocusser=!0}]),e.config(["$animateProvider",function(e){e.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/)}]),e.config(["$localStorageProvider",function(e){e.setKeyPrefix("RPGSmith")}]),e.config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider",function(e,t,a,i){i.interceptors.push("authInterceptor"),a.html5Mode(!0).hashPrefix("!"),t.otherwise("/characters"),e.state("login",{url:"/login",cache:!1,authenticate:!1,templateUrl:"/views/home/login.html",controller:"loginController",resolve:{previousState:["$state",function(e){return{name:e.current.name,params:e.params,url:e.href(e.current.name,e.params)}}]}}).state("profile",{abstract:!0,authenticate:!1,template:'<div ui-view="topNav"></div><div ui-view="main"></div>'}).state("profile.characters",{authenticate:!0,url:"/characters",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/characters.html",controller:"charactersPageController"}},params:{menuSelected:"Characters"},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.addnewcharacterdialog",{authenticate:!0,url:"/characters/addnewcharacterdialog",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/dialogs/edit-character.html",controller:"charactersPageController"}},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.addnewcorestatdialog",{authenticate:!0,url:"/RuleSet/addnewcorestatdialog",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/dialogs/addnewcorestat.html",controller:"ruleSetPageController"}},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.addnewcharacter",{authenticate:!0,url:"/addnewcharacter",views:{"main@profile":{templateUrl:"/views/home/character-addnew.html",controller:"charactersPageController"}},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.character",{abstract:!0,authenticate:!0,url:"^/characterlayout"}).state("profile.character.notes",{authenticate:!0,url:"/notes",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/character-notes.html",controller:"notesPageController"}}}).state("profile.AddNewRuleSet",{authenticate:!0,url:"/RuleSets",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/RuleSet.html",controller:"ruleSetPageController"}},params:{menuSelected:"Rulesets",action:1},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.NewRuleSet",{authenticate:!0,url:"/RuleSet?RuleSetId",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav_addnewruleset.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/ruleset-addnew.html",controller:"ruleSetPageController"}},params:{action:2,isNew:0,CopyOrUpdate:0,IsAddRuleSet:0},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.ExistingRuleSet",{authenticate:!0,url:"/characters/ExistingRuleSet",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/dialogs/ExistingRuleset.html",controller:"charactersPageController"}},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.character.counters",{authenticate:!0,url:"/counters",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/character-counters.html",controller:"countersPageController"}}}).state("profile.character.attributes",{authenticate:!0,url:"/stats",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/character-attributes.html",controller:"attributesPageController"}}}).state("profile.character.links",{authenticate:!0,url:"/links",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/character-links.html",controller:"linksPageController"}}}).state("profile.character.executes",{authenticate:!0,url:"/executes",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/character-executes.html",controller:"executesPageController"}}}).state("profile.character.commands",{authenticate:!0,url:"/commands",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/character-commands.html",controller:"commandsPageController"}}}).state("profile.character.layouts",{authenticate:!0,url:"/layouts",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/character-layouts.html",controller:"layoutsPageController"}}}).state("profile.character.layout",{authenticate:!0,url:"?characterId",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/character-layout.html",controller:"layoutPageController"}},onEnter:["navService",function(e){e.setHeader(null)}],params:{action:1,isNew:1}}).state("profile.EditProfile",{authenticate:!0,url:"/Editprofile",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav_addnewruleset.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/editprofile.html",controller:"topNavController"}},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.ResetPassword",{authenticate:!1,url:"/ResetPassword",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav_addnewruleset.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/resetpassword.html",controller:"topNavController"}},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.Items",{authenticate:!0,url:"/Items?RuleSetId",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/ruleset_itemproperties.html",controller:"ruleSetPageController"}},params:{action:4,ContentId:1},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.Spells",{authenticate:!0,url:"/Spells?RuleSetId",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/ruleset-spells.html",controller:"ruleSetPageController"}},params:{action:4,ContentId:2},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.Abilities",{authenticate:!0,url:"/Abilities?RuleSetId",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/ruleset-abilities.html",controller:"ruleSetPageController"}},params:{action:4,ContentId:3},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.Corestats",{authenticate:!0,url:"/Corestats?RuleSetId",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/ruleset-corestats.html",controller:"ruleSetPageController"}},params:{action:3},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.RulesetItemDetails",{authenticate:!0,url:"/RulesetItemDetails",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/rulesetitemcontent.html",controller:"ruleSetPageController"}},params:{action:5,RuleSetId:0,contentType:1,index:-1},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.RulesetSpellDetails",{authenticate:!0,url:"/RulesetSpellDetails",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/rulesetspellcontent.html",controller:"ruleSetPageController"}},params:{action:5,RuleSetId:0,contentType:2,index:-1},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.RulesetAbilityDetails",{authenticate:!0,url:"/RulesetAbilityDetails",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/rulesetabilitycontent.html",controller:"ruleSetPageController"}},params:{action:5,RuleSetId:0,contentType:3,index:-1},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.ItemInventory",{authenticate:!0,url:"/ItemInventory?characterId&contentType",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/iteminventory.html",controller:"layoutPageController"}},params:{action:2,isNew:0},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.SpellInventory",{authenticate:!0,url:"/SpellInventory?characterId&contentType",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/spellinventory.html",controller:"layoutPageController"}},params:{action:2},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.AbilityInventory",{authenticate:!0,url:"/AbilityInventory?characterId&contentType",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/attributeinventory.html",controller:"layoutPageController"}},params:{action:2},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.CharacterRulesetItems",{authenticate:!0,url:"/CharacterRulesetItems?characterId",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/CharacterRulesetItems.html",controller:"layoutPageController"}},params:{action:3,isNew:0,contentType:1},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.CharacterRulesetSpells",{authenticate:!0,url:"/CharacterRulesetSpells?characterId",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/CharacterRulesetSpells.html",controller:"layoutPageController"}},params:{action:3,contentType:1},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.CharacterRulesetAbilities",{authenticate:!0,url:"/CharacterRulesetAbilities?characterId",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/CharacterRulesetAbilities.html",controller:"layoutPageController"}},params:{action:3,isNew:0,contentType:1},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.CharacterItemsDetails",{authenticate:!0,url:"/CharacterItemsDetails?characterId",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/characteritemcontent.html",controller:"layoutPageController"}},params:{action:4,contentType:1,index:-1},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.CharacterSpellDetails",{authenticate:!0,url:"/CharacterSpellDetails?characterId",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/characterspellcontent.html",controller:"layoutPageController"}},params:{action:4,contentType:2,index:-1},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.CharacterAbilityDetails",{authenticate:!0,url:"/CharacterAbilityDetails?characterId",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/home/characterabilitycontent.html",controller:"layoutPageController"}},params:{action:4,contentType:3,index:-1},onEnter:["navService",function(e){e.setHeader(null)}]}).state("profile.AccountSettings",{url:"/AccountSettings",views:{"topNav@profile":{templateUrl:"/views/shared/home-topNav.html",controller:"topNavController"},"main@profile":{templateUrl:"/views/shared/AccountSettings.html",controller:"topNavController"}},params:{menuSelected:"AccountSettings"}}).state("RegisterSuccess",{authenticate:!1,url:"/RegisterSuccess",views:{"main@profile":{templateUrl:"/views/EmailTemplates/RegisterSuccess.html",controller:"registerController"}}}).state("RegisterConfirmationEmailMessage",{authenticate:!0,url:"/RegisterConfirmationEmail",views:{"main@profile":{templateUrl:"/views/EmailTemplates/RegisterEmailConfirmation.html",controller:"topNavController"}},onEnter:["navService",function(e){e.setHeader(null)}]})}]),e.config(["$qProvider",function(e){e.errorOnUnhandledRejections(!1)}]),e.run(["$rootScope","$http","$state","authService","navService",function(e,t,a,i,l){i.init(),e.$on("httpUnauthorized",function(){a.transitionTo("login")}),t.defaults.headers.common["X-XSRF-TOKEN"]=angular.element('input[name="__RequestVerificationToken"]').attr("value")}]),e.run(["$transitions","authService","$state",function(e,t,a){e.onBefore({},function(e){e.addResolvable({token:"$transition",resolveFn:function(){return e}})}),e.onStart({},function(e){t.authentication.authenticated||a.go("login")})}]),e.run(["$templateCache","$interpolate",function(e,t){var a=t.startSymbol(),i=t.endSymbol();e.put("/dialogs/error.html",'<div class="modal-header dialog-header-error"><h4 class="modal-title text-danger"><span class="'+a+"icon"+i+'"></span> <span ng-bind-html="header"></span></h4></div><div class="modal-body text-danger" ng-bind-html="msg"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="close()">'+a+'"DIALOGS_CLOSE" | translate'+i+"</button></div>"),e.put("/dialogs/wait.html",'<div class="modal-header dialog-header-wait"><h4 class="modal-title"><span class="'+a+"icon"+i+'"></span> '+a+"header"+i+'</h4></div><div class="modal-body"><p ng-bind-html="msg"></p><div class="progress progress-striped active"><div class="progress-bar progress-bar-info" ng-style="getProgress()"></div><span class="sr-only">'+a+"progress"+i+a+'"DIALOGS_PERCENT_COMPLETE" | translate'+i+"</span></div></div>"),e.put("/dialogs/notify.html",'<div class="modal-header dialog-header-notify"><h4 class="modal-title text-info"><span class="'+a+"icon"+i+'"></span> '+a+"header"+i+'</h4></div><div class="modal-body text-info" ng-bind-html="msg"></div><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="close()">'+a+'"DIALOGS_OK" | translate'+i+"</button></div>"),e.put("/dialogs/confirm.html",'<div class="modal-header dialog-header-confirm"><h4 class="modal-title"><span class="'+a+"icon"+i+'"></span> '+a+"header"+i+'</h4></div><div class="modal-body" ng-bind-html="msg"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="yes()">'+a+'"DIALOGS_YES" | translate'+i+'</button><button type="button" class="btn btn-primary" ng-click="no()">'+a+'"DIALOGS_NO" | translate'+i+"</button></div>")}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("loginController",["$scope","$window","$log","$state","authService","navService","previousState","$rootScope","toaster","dialogs","rulesetDataShareService","$localStorage",function(e,t,a,i,l,o,s,n,r,c,d,u){e.profileimagesrc="http://www.advacto.com/images/user.jpg",e.mode=1,e.registersuccess=!1,e.useremail="",e.name="",angular.element(document).ready(function(){angular.element(window).keydown(function(){if(13==event.keyCode)return event.preventDefault(),!1})});var p=d.getloginData();if(l.authentication.authenticated){var m=JSON.parse(localStorage.getItem("LoginData"));null!=m&&(e.data={},m.rememberMe?(e.data.username=m.username,e.data.password=m.password,e.data.rememberMe=m.rememberMe):(localStorage.setItem("LoginData",JSON.stringify(p)),e.data.username,e.data.password))}else{e.data={},1==p.rememberMe&&(e.data.username=p.username,e.data.password=p.password,e.data.rememberMe=p.rememberMe);var m=JSON.parse(localStorage.getItem("LoginData"));null!=m&&(m.rememberMe?(e.data.username=m.username,e.data.password=m.password,e.data.rememberMe=m.rememberMe):(localStorage.setItem("LoginData",JSON.stringify(p)),e.data.username,e.data.password))}e.passwordKeyPress=function(t){1===e.mode&&13===t.which&&e.action()},e.rememberKeyPress=function(t){e.data.rememberMe=!e.data.rememberMe},e.showTerms=function(){var e={id:0,name:"",file:null,RulesetID:0};c.create("/views/dialogs/termsAndServices.html","dialogAddNewCharacter",{mode:1,characterData:e}).result.then(function(e){})},e.setMode=function(t){e.mode=t},e.profileImageUpload=function(t){if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){$("#profileImage").attr("src",t.target.result).width(120).height(120),e.data.profileimage=t.target.result},a.readAsDataURL(t.files[0])}},e.gotoLoginPage=function(){o.gotoLogin(!0)},e.Cancel=function(){e.mode=1},e.isUserRegistered=function(t,a,i){
$.ajax({url:"api/Account/GoogleLogin",method:"GET",data:{Email:t,AccesKey:a,AccountType:"Google"},success:function(t){200==t.StatusCode?(e.logindata=t.PayLoad,l.Exlogin(),u.firstLoginController=e.logindata,o.gotoCharacters(!0)):400==t.StatusCode&&(window.location.href="/views/home/login.html")},error:function(e,t,a){alert(e.responseText)}})},e.isFBUserRegistered=function(e){$.ajax({url:"api/account/facebooklogin",type:"POST",data:e,success:function(e){200==e.StatusCode?(n.logindata=e.PayLoad,l.Exlogin(),o.gotoCharacters(!0)):400==e.StatusCode&&(window.location.href="/views/home/login.html")},error:function(e,t,a){console.log(e.responseText)}})},e.action=function(){switch($("#loading").css("display","block"),e.mode){case 1:if(!(e.data.email&&""!=e.data.email||""!=e.data.password)){r.pop("error","Please enter Email And Password"),$("#loading").fadeOut("slow");break}if(""!=e.data.email&&(""==e.data.password||null==e.data.password)){r.pop("error","Please enter Email And Password"),$("#loading").fadeOut("slow");break}if((""==e.data.email||null==e.data.email)&&""!=e.data.password){r.pop("error","Please enter Email"),$("#loading").fadeOut("slow");break}l.login(e.data.email,e.data.password,e.data.rememberMe).then(function(t){200==t.data.StatusCode?(e.logindata=t.data.PayLoad,e.logindata.rememberMe=e.data.rememberMe,o.gotoCharacters(!0),u.firstLoginController=e.logindata,d.setloginData(e.data),localStorage.setItem("LoginData",JSON.stringify(e.data))):400==t.data.StatusCode&&("Invalid Email /password"==t.data.PayLoad?(r.pop("error",t.data.PayLoad),$("#loading").fadeOut("slow")):(r.pop("error","Please Enter valid UserId and password"),$("#loading").fadeOut("slow")))}).catch(function(){alert("TODO: login failed")});break;case 2:if(!(null!=e.data.username&&""!=e.data.username||null!=e.data.email&&""!=e.data.email&&void 0!=e.data.email||null!=e.data.password&&""!=e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null!=e.data.username&&""!=e.data.username||null!=e.data.email&&""!=e.data.email||null==e.data.password&&""==e.data.password||null==e.data.confirmPassword&&""==e.data.confirmPassword)&&void 0!=e.data.email){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null!=e.data.username&&""!=e.data.username||null==e.data.email&&""==e.data.email&&void 0==e.data.email||null!=e.data.password&&""!=e.data.password||null==e.data.confirmPassword&&""==e.data.confirmPassword)){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null!=e.data.username&&""!=e.data.username||null==e.data.email&&""==e.data.email&&void 0==e.data.email||null==e.data.password&&""==e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null==e.data.username&&""==e.data.username||null!=e.data.email&&""!=e.data.email||null!=e.data.password&&""!=e.data.password||null==e.data.confirmPassword&&""==e.data.confirmPassword)&&void 0!=e.data.email){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null==e.data.username&&""==e.data.username||null!=e.data.email&&""!=e.data.email||null==e.data.password&&""==e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)&&void 0!=e.data.email){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null==e.data.username&&""==e.data.username||null==e.data.email&&""==e.data.email&&void 0==e.data.email||null!=e.data.password&&""!=e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null!=e.data.username&&""!=e.data.username||null!=e.data.email&&""!=e.data.email||null!=e.data.password&&""!=e.data.password||null==e.data.confirmPassword&&""==e.data.confirmPassword)&&void 0!=e.data.email){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null!=e.data.username&&""!=e.data.username||null==e.data.email&&""==e.data.email&&void 0==e.data.email||null!=e.data.password&&""!=e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null!=e.data.username&&""!=e.data.username||null!=e.data.email&&""!=e.data.email||null==e.data.password&&""==e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)&&void 0!=e.data.email){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null!=e.data.username&&""!=e.data.username||null==e.data.email&&""==e.data.email&&void 0==e.data.email||null!=e.data.password&&""!=e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null==e.data.username&&""==e.data.username||null!=e.data.email&&""!=e.data.email||null!=e.data.password&&""!=e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)&&void 0!=e.data.email){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(null==e.data.username||""==e.data.username){r.pop("error","Please Fill User Name"),$("#loading").fadeOut("slow");break}if(null==e.data.email||""==e.data.email){r.pop("error","Please Fill Email Address"),$("#loading").fadeOut("slow");break}var t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(0==t.test(e.data.email)){r.pop("error","Please Enter Valid Email Address"),$("#loading").fadeOut("slow");break}if(null==e.data.password||""==e.data.password){r.pop("error","Please Fill Password"),$("#loading").fadeOut("slow");break}if(!new RegExp("^(?=.{8,})").test(e.data.password)){r.pop("error","Password should be atleast 8 characters"),$("#loading").fadeOut("slow");break}if(null==e.data.confirmPassword||""==e.data.confirmPassword){r.pop("error","Please Fill Confirm Password"),$("#loading").fadeOut("slow");break}if(e.data.password!=e.data.confirmPassword){r.pop("error","Confirm Password Should Be same As Password"),$("#loading").fadeOut("slow");break}e.data.password===e.data.confirmPassword?l.register(e.data.username,e.data.email,e.data.password,e.data.confirmPassword,e.data.profileimage).then(function(t){200==t.data.StatusCode?(e.useremail=e.data.email,e.name=e.data.username,r.pop("success","Registered Successfully.Activation link has been sent to the registered email."),e.data.username="",e.data.email="",e.data.password="",e.data.confirmPassword="",e.data.profileimage="",e.data.profileimagesrc="",n.logindata=t.data.PayLoad,$("#loading").fadeOut("slow"),e.registersuccess=!0):400==t.data.StatusCode&&(e.error=t.data.ErrorMessage,r.pop("error",e.error),$("#loading").fadeOut("slow"))}):(r.pop("error","Passwords do not match"),$("#loading").fadeOut("slow"));break;case 3:var t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;0==t.test(e.data.email)?(r.pop("error","Please enter valid Email Address."),$("#loading").fadeOut("slow")):(l.ForgotPassword(e.data.email),r.pop("success","We have sent a  link to your "+e.data.email+". Please Reset your Password."),e.data.email="",$("#loading").fadeOut("slow"));break;case 6:o.gotoCharacters(!0)}}}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("registerController",["$scope",function(e){}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("resetpwdController",["$scope","$window","$log","$state","authService","navService","previousState","$rootScope","toaster","rulesetDataShareService","$localStorage",function(e,t,a,i,l,o,s,n,r,c,d){e.profileimagesrc="http://www.advacto.com/images/user.jpg",e.mode=1;var u=c.getloginData();if(l.authentication.authenticated){var p=JSON.parse(localStorage.getItem("LoginData"));null!=p&&(e.data={},p.rememberMe?(e.data.username=p.username,e.data.password=p.password,e.data.rememberMe=p.rememberMe):(localStorage.setItem("LoginData",JSON.stringify(u)),e.data.username,e.data.password))}else{e.data={},1==u.rememberMe&&(e.data.username=u.username,e.data.password=u.password,e.data.rememberMe=u.rememberMe);var p=JSON.parse(localStorage.getItem("LoginData"));null!=p&&(p.rememberMe?(e.data.username=p.username,e.data.password=p.password,e.data.rememberMe=p.rememberMe):(localStorage.setItem("LoginData",JSON.stringify(u)),e.data.username,e.data.password))}e.passwordKeyPress=function(t){1===e.mode&&13===t.which&&e.action()},e.rememberKeyPress=function(t){e.data.rememberMe=!e.data.rememberMe},e.setMode=function(t){e.mode=t},e.profileImageUpload=function(t){if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){$("#profileImage").attr("src",t.target.result).width(120).height(120),e.data.profileimage=t.target.result},a.readAsDataURL(t.files[0])}},e.gotoLoginPage=function(){o.gotoLogin(!0)},e.Cancel=function(){e.mode=1},e.isUserRegistered=function(t,a,i){$.ajax({url:"api/Account/GoogleLogin",method:"GET",data:{Email:t,AccesKey:a,AccountType:"Google"},success:function(t){200==t.StatusCode?(e.logindata=t.PayLoad,l.Exlogin(),d.firstLoginController=e.logindata,o.gotoCharacters(!0)):400==t.StatusCode&&(window.location.href="/views/home/login.html")},error:function(e,t,a){alert(e.responseText)}})},e.isFBUserRegistered=function(e){$.ajax({url:"api/account/facebooklogin",type:"POST",data:e,success:function(e){200==e.StatusCode?(n.logindata=e.PayLoad,l.Exlogin(),o.gotoCharacters(!0)):400==e.StatusCode&&(window.location.href="/views/home/login.html")},error:function(e,t,a){alert(e.responseText)}})},e.action=function(){switch($("#loading").css("display","block"),e.mode){case 1:if(""==e.data.username&&""==e.data.password){r.pop("error","Please Enter UserId And Password"),$("#loading").fadeOut("slow");break}if(""!=e.data.username&&(""==e.data.password||null==e.data.password)){r.pop("error","Please Enter Password"),$("#loading").fadeOut("slow");break}if((""==e.data.username||null==e.data.username)&&""!=e.data.password){r.pop("error","Please Enter UserId"),$("#loading").fadeOut("slow");break}l.login(e.data.username,e.data.password,e.data.rememberMe).then(function(t){200==t.data.StatusCode?(e.logindata=t.data.PayLoad,e.logindata.rememberMe=e.data.rememberMe,o.gotoCharacters(!0),d.firstLoginController=e.logindata,c.setloginData(e.data),localStorage.setItem("LoginData",JSON.stringify(e.data))):400==t.data.StatusCode&&("Invalid Email /password"==t.data.PayLoad?(r.pop("error",t.data.PayLoad),$("#loading").fadeOut("slow")):(r.pop("error","Please Enter valid UserId and password"),$("#loading").fadeOut("slow")))}).catch(function(){alert("TODO: login failed")});break;case 2:if(!(null!=e.data.username&&""!=e.data.username||null!=e.data.email&&""!=e.data.email&&void 0!=e.data.email||null!=e.data.password&&""!=e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null!=e.data.username&&""!=e.data.username||null!=e.data.email&&""!=e.data.email||null==e.data.password&&""==e.data.password||null==e.data.confirmPassword&&""==e.data.confirmPassword)&&void 0!=e.data.email){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null!=e.data.username&&""!=e.data.username||null==e.data.email&&""==e.data.email&&void 0==e.data.email||null!=e.data.password&&""!=e.data.password||null==e.data.confirmPassword&&""==e.data.confirmPassword)){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null!=e.data.username&&""!=e.data.username||null==e.data.email&&""==e.data.email&&void 0==e.data.email||null==e.data.password&&""==e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null==e.data.username&&""==e.data.username||null!=e.data.email&&""!=e.data.email||null!=e.data.password&&""!=e.data.password||null==e.data.confirmPassword&&""==e.data.confirmPassword)&&void 0!=e.data.email){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null==e.data.username&&""==e.data.username||null!=e.data.email&&""!=e.data.email||null==e.data.password&&""==e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)&&void 0!=e.data.email){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null==e.data.username&&""==e.data.username||null==e.data.email&&""==e.data.email&&void 0==e.data.email||null!=e.data.password&&""!=e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null!=e.data.username&&""!=e.data.username||null!=e.data.email&&""!=e.data.email||null!=e.data.password&&""!=e.data.password||null==e.data.confirmPassword&&""==e.data.confirmPassword)&&void 0!=e.data.email){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null!=e.data.username&&""!=e.data.username||null==e.data.email&&""==e.data.email&&void 0==e.data.email||null!=e.data.password&&""!=e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null!=e.data.username&&""!=e.data.username||null!=e.data.email&&""!=e.data.email||null==e.data.password&&""==e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)&&void 0!=e.data.email){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null!=e.data.username&&""!=e.data.username||null==e.data.email&&""==e.data.email&&void 0==e.data.email||null!=e.data.password&&""!=e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(!(null==e.data.username&&""==e.data.username||null!=e.data.email&&""!=e.data.email||null!=e.data.password&&""!=e.data.password||null!=e.data.confirmPassword&&""!=e.data.confirmPassword)&&void 0!=e.data.email){r.pop("error","Please Fill All (*) Fields in Register Page"),$("#loading").fadeOut("slow");break}if(null==e.data.username||""==e.data.username){r.pop("error","Please Fill User Name"),$("#loading").fadeOut("slow");break}if(null==e.data.email||""==e.data.email){r.pop("error","Please Fill Email Address"),$("#loading").fadeOut("slow");break}var t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(0==t.test(e.data.email)){r.pop("error","Please Enter Valid Email Address"),$("#loading").fadeOut("slow");break}if(null==e.data.password||""==e.data.password){r.pop("error","Please Fill Password"),$("#loading").fadeOut("slow");break}if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#$@!%&*?])[A-Za-z\d#$@!%&*?]{8,12}$/.test(e.data.password)){r.pop("error","Password Should Be Atleast 8 characters And 1 Uppercase,1 SpecialChar,1 Lowercase,1 Number"),$("#loading").fadeOut("slow");break}if(null==e.data.confirmPassword||""==e.data.confirmPassword){r.pop("error","Please Fill Confirm Password"),$("#loading").fadeOut("slow");break}if(e.data.password!=e.data.confirmPassword){r.pop("error","Confirm Password Should Be same As Password"),$("#loading").fadeOut("slow");break}e.data.password===e.data.confirmPassword?l.register(e.data.username,e.data.email,e.data.password,e.data.confirmPassword,e.data.profileimage).then(function(t){200==t.data.StatusCode?(r.pop("success","Registered Successfully.Activation link has been sent to Registered Email."),e.data.username="",e.data.email="",e.data.password="",e.data.confirmPassword="",e.data.profileimage="",e.data.profileimagesrc="",n.logindata=t.data.PayLoad,$("#loading").fadeOut("slow")):400==t.data.StatusCode&&(e.error=t.data.ErrorMessage,r.pop("error",e.error),$("#loading").fadeOut("slow"))}):(r.pop("error","Passwords do not match"),$("#loading").fadeOut("slow"));break;case 3:var t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;0==t.test(e.data.email)?(r.pop("error","Please enter valid Email Address."),$("#loading").fadeOut("slow")):(l.ForgotPassword(e.data.email),r.pop("success","We have sent a  link to your "+e.data.email+". Please Reset your Password."),e.data.email="",$("#loading").fadeOut("slow"));break;case 6:o.gotoCharacters(!0)}}}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("topNavController",["$scope","$location","navService","$rootScope","$state","authService","rulesetDataShareService","toaster","characterService","$browser","rulesetService","$localStorage","$window",function(e,t,a,i,l,o,s,n,r,c,d,u,p){var m=["Characters","Rulesets","AccountSettings"],g=m.indexOf(l.params.menuSelected);e.resetModel={},g>-1&&(e.activeMenu=m[g]),e.navService=a,e.data=u.firstLoginController,$("#loading").fadeOut("slow"),e.noop=function(){angular.noop()},e.gohome=function(){return a.gotoCharacters()},e.hasNav=function(e){return a.hasNav(e)},e.toggleNav=function(e){a.toggleNav(e)},e.newstyles=function(e){return e.ProfileImage?{"background-size":"100% 100%","background-repeat":"no-repeat",width:"120px",height:"120px"}:{"background-color":"transparent"}},e.getThumbNail=function(){return e.data.ProfileImage?e.data.ProfileImage:null},e.CharacterRulesetCount=function(){r.GetHeaderContentsCounts().then(function(t){200==t.data.StatusCode?(e.HeaderContents=t.data.PayLoad,s.SetDisplayCharacterRulesetCount(e.HeaderContents)):400==t.data.StatusCode&&1==t.data.ShowToUser&&alert(t.data.ErrorMessage)})},e.ProfileImageUpload=function(t){if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){$("#profileImage").attr("src",t.target.result).width(120).height(120),e.data.ProfileImage=t.target.result},a.readAsDataURL(t.files[0])}},e.AccountSettings=function(){$("#loading").css("display","block"),e.resetModel={},e.resetModel.newpassword="",e.resetModel.confirmpassword="",e.resetModel.oldpassword="",l.go("profile.AccountSettings"),$("#loading").fadeOut("slow")},e.loadResetPage=function(){console.log("Search Params: ",t.search().userid),$("#loading").css("display","block"),e.resetModel={},e.resetModel.newpassword="",e.resetModel.confirmpassword="",o.authentication.authenticated=!0,$("#loading").fadeOut("slow")},e.Cancel=function(){p.history.back()},e.Update=function(){var t={username:e.data.Name,Email:e.data.Email,ProfileImage:e.data.ProfileImage};o.updateprofile(t).then(function(e){200==e.data.StatusCode?n.pop("success","Details Updated Successfully"):400==e.data.StatusCode&&1==e.data.ShowToUser&&n.pop("success",e.data.ErrorMessage)})},e.cancel=function(){l.go("profile.AccountSettings")},e.ReSetPassword=function(){l.go("profile.ResetPassword")},e.EditData=function(){l.go("profile.EditProfile")},e.onloadFun=function(){$("#loading").fadeOut("slow")},e.ResetProfilePassword=function(a){console.log("ResetModel:",a),console.log("PasswordHash:",e.data.PasswordHash);var i=new RegExp("^(?=.{8,})");if(""==a.oldpassword||null==a.oldpassword||1==angular.isUndefined(a.oldpassword))n.pop("Warning","Please Enter Old Password"),$("#loading").fadeOut("slow");else if(a.oldpassword!=e.data.PasswordHash)n.pop("Warning","Old Password is not same."),$("#loading").fadeOut("slow");else if(a.newpassword==e.data.PasswordHash)n.pop("Warning","New Password Should not Be Same as Old Password"),$("#loading").fadeOut("slow");else if(""!=a.oldpassword&&void 0==a.newpassword&&void 0==a.confirmpassword)n.pop("Warning","Please Enter New Password"),$("#loading").fadeOut("slow");else if(i.test(a.newpassword))if(a.newpassword!=a.confirmpassword)n.pop("Warning","Confirm Password Should Be same As Password"),$("#loading").fadeOut("slower");else{var l={Password:a.newpassword,ConfirmPassword:a.confirmpassword,UserId:t.search().userid},s=o.Resetpassword(l);s.then(function(t){200==t.data.StatusCode?(n.pop("success","Password Updated Successfully"),e.resetModel={},e.resetModel.newpassword="",e.resetModel.confirmpassword="",e.resetModel.oldpassword="",$("#loading").fadeOut("slow")):400==t.data.StatusCode&&1==t.data.ShowToUser&&(alert(t.data.ErrorMessage),$("#loading").fadeOut("slow"))})}else n.pop("Warning","New Password should be atleast 8 characters long"),$("#loading").fadeOut("slowest")},e.signoutGoogle=function(){null!=gapi&&null!=gapi.auth2&&null!=gapi.auth2.getAuthInstance()&&(gapi.auth2.getAuthInstance().disconnect(),googleUser=null)},e.signout=function(){$("#loading").css("display","block"),e.signoutGoogle(),o.logout().then(function(e){if($("#loading").fadeOut("slow"),200==e.data.StatusCode){var t={},a={},i={},n={};s.setRulesetItems(t),s.setRulesetSpells(a),s.setRulesetAbilities(i),s.setcorestat(n),localStorage.clear(),o.authentication.authenticated=!1,l.go("login")}else 400==e.data.StatusCode&&1==e.data.ShowToUser&&(alert(e.data.ErrorMessage),$("#loading").fadeOut("slow"))})}}])}();var customarray=[],diceinitializer;!function(){"use strict";var e=angular.module("rpgsmith-directives");e.directive("droppable",["$compile",function(e){return{restrict:"A",scope:{onDroppableDrop:"&",onDroppableOver:"&",onDroppableOut:"&"},link:function(e,t,a,i,l){t.droppable({tolerance:"pointer",over:function(t,a){e.onDroppableOver({event:t,ui:a})},out:function(t,a){e.onDroppableOut({event:t})},drop:function(t,a){e.onDroppableDrop({event:t,ui:a})}})}}}]),e.directive("rpgsmithBody",[function(){return{restrict:"A",link:function(e,t,a,i,l){e.$root.$on("rpgsmithSetBodyClass",function(e,a){a.remove&&t.removeClass(a.remove),a.add&&t.addClass(a.add)})}}}])}(),function(){"use strict";angular.module("rpgsmith-directives").directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(t,a,i){var l=e(i.fileModel),o=l.assign;a.bind("change",function(){t.$apply(function(){o(t,a[0].files[0]),evt.target.value=""})})}}}])}(),function(){"use strict";var e=angular.module("rpgsmith-directives");e.controller("GridstackController",["$scope",function(e){var t=null;this.init=function(e,a){return t=e.gridstack(a).data("gridstack")},this.verticalMargin=function(e,a){t&&t.verticalMargin(e,a)},this.enableMove=function(e){t&&t.enableMove(e,!0)},this.enableResize=function(e){t&&t.enableResize(e,!0)},this.removeItem=function(e){return t?t.removeWidget(e,!1):null},this.addItem=function(e){if(t){return t.makeWidget(e).attr("data-gs-auto-position",!1),e}return null}}]),e.directive("gridstack",["$timeout","$window",function(e,t){return{restrict:"A",controller:"GridstackController",scope:{options:"=",onChange:"&",onDragStart:"&",onDragStop:"&",onResizeStart:"&",onResizeStop:"&",gridstackHandler:"=?",gsLockTiles:"=?"},link:function(e,a,i,l,o){var s=l.init(a,e.options);e.gridstackHandler=s,e.options.api=s,angular.element(t).bind("resize",_.debounce(function(){var t=a.innerWidth(),i=s.cellWidth();if(i>0){var l=Math.floor(t/i);l!==e.options.width&&e.$evalAsync(function(){console.log(l),s.setGridWidth(l,!1)})}},500)),a.on("change",function(e,t){console.log("Change: ",e,t)}),a.on("dragstart",function(t,a){e.onDragStart({event:t,ui:a})}),a.on("dragstop",function(t,a){e.onDragStop({event:t,ui:a})}),a.on("resizestart",function(t,a){e.onResizeStart({event:t,ui:a})}),a.on("resizestop",function(t,a){e.onResizeStop({event:t,ui:a})}),e.$watch("gsLockTiles",function(){l.enableMove(!e.gsLockTiles),l.enableResize(!e.gsLockTiles)})}}}]),e.directive("gridstackItem",["$timeout",function(e){return{restrict:"A",controller:"GridstackController",require:"^gridstack",scope:{gsItem:"=?",gridstackItem:"=",gsItemId:"=?",gsItemX:"=?",gsItemY:"=?",gsItemWidth:"=?",gsItemHeight:"=?",gsItemAutoPosition:"=?",gsItemMinHeight:"=?",gsItemMaxHeight:"=?",gsItemMinWidth:"=?",gsItemMaxWidth:"=?"},link:function(e,t,a,i){var l=$(t);t.data("_item_data",e.gsItem),l.attr("data-gs-id",e.gsItemId),e.gsItemAutoPosition||(l.attr("data-gs-x",e.gsItemX),l.attr("data-gs-y",e.gsItemY)),l.attr("data-gs-width",e.gsItemWidth),l.attr("data-gs-height",e.gsItemHeight),l.attr("data-gs-min-width",e.gsItemMinWidth),l.attr("data-gs-min-height",e.gsItemMinHeight),l.attr("data-gs-max-width",e.gsItemMaxWidth),l.attr("data-gs-max-height",e.gsItemMaxHeight),l.attr("data-gs-auto-position",e.gsItemAutoPosition);i.addItem(t),t.data("_gridstack_node");e.$watch(function(){return l.attr("data-gs-id")},function(t){e.gsItemId=t}),e.$watch(function(){return l.attr("data-gs-x")},function(t){e.gsItemX=Number(t)}),e.$watch(function(){return l.attr("data-gs-y")},function(t){e.gsItemY=Number(t)}),e.$watch(function(){return l.attr("data-gs-width")},function(t){e.gsItemWidth=Number(t)}),e.$watch(function(){return l.attr("data-gs-height")},function(t){e.gsItemHeight=Number(t)}),t.bind("$destroy",function(){t.data("_gridstack_node");i.removeItem(t)})}}}])}(),function(){"use strict";var e=angular.module("rpgsmith-directives");e.directive("rpgsmithnotetype",["$compile","dialogs","tileService","$state","toaster","rulesetDataShareService",function(e,t,a,i,l,o){var s=function(e){var t="";switch(e){case 1:t='<form><div class="form-row"><div class="col-12 col-md-4"><div class="form-group"><label for="newNoteTitle">Title</label><input type= "text" id="newNoteTitle" class="form-control" placeholder= "Enter note title" ng-model="info.Value.Note.Name" ></div><div class="form-group"> <ul class="input-color-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor" checked="checked"><i class="icon input-color-2"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-4"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-6"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-8"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-10"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-12"></i></label></li><li class="form-check"><label class="form-check-label"><i class="icon input-color-custom" role="button" data-dismiss="modal" data-toggle="modal" data-target="#colorSelectionPopup"></i></label></li></ul></div></div></div> <div class="form-row"><div class="col"><div class="form-group"><label for="newNoteContents">Contents*</label><textarea id="newNoteContents" class="form-control" placeholder="Enter note contents" rows="8" ng-model="info.Value.Note.Text"></textarea></div></div></div></form > ';break;case 0:t='<div class="NoteTile" style="background-color: {{info.Styles.titlebackgroundcolor}};height: 50px;"><span class="text_design" ng-click="EditNoteTile()" > <p style="color:{{info.Styles.titletextcolor}};height: 50px;">{{ info.Value.Note.Name }}</p></span ></div ><div style="color:{{info.Styles.bodytextcolor}};height: 80%" ng-bind-html="info.Value.Note.Text" ng-click="ShowContent()"></div>'}return t};return{restrict:"E",replace:!0,link:function(n,r,c){r.html(s(n.useoredit)),e(r.contents())(n),n.EditNoteTile=function(){t.create("/views/dialogs/tile-editor-1.html","NoteTile",{scope:n.info,Tablist:n.fullscope}).result.then(function(e){"cancel"!=e&&(e.IsSync=!1,e.UpdateDate=Date.now(),null!=e.Styles&&(e.Styles.backgroundColor=$("#bckcolor").val()),o.setTilelst(e),n.info=e,n.fromDirectiveFn(n.info))})},n.ShowContent=function(){t.create("/views/dialogs/notetilecontent.html","ShowAllTileContent",{scope:n.info}).result.then(function(e){"cancel"!=e&&(n.info=e)})},n.RemoveTile=function(){t.confirm("Confirm Delete","Are you sure you want to delete "+n.info.Value.Note.Name,{size:"sm"}).result.then(function(e){a.deleteTile(n.info.TileId).then(function(e){200==e.data.StatusCode?(i.go("profile.character.layout"),l.pop("success","Tile deleted Successfully.")):400==e.data.StatusCode&&1==e.data.ShowToUser&&alert(e.data.ErrorMessage)})})}},scope:{info:"=",useoredit:"=",fromDirectiveFn:"=method"}}}]),e.directive("rpgsmithcountertype",["$compile","dialogs","tileService","toaster","rulesetDataShareService",function(e,t,a,i,l){var o=function(e){var t="";switch(e){case 1:t='<form><div class="form-row"><div class="col-12 col-md-6"><div class="form-group"><label for="newCounterTitle">Title</label><input type="text" id="newCounterTitle" class="form-control" ng-model="info.Value.Counter.Name" placeholder="Enter counter title"></div></div><div class="col-12 col-md-6"><div class="form-group"><label for="newCounterDefaultValue">Default Value*</label><input type="number" id="newCounterDefaultValue" class="form-control" placeholder="Enter reset value" ng-model="info.Value.Counter.Value"></div></div></div><div class="form-row"><div class="col-12 col-md-6"><div class="form-group"><label for="newCounterMinimumValue">Minimum</label><input type="number" id="newCounterMinimumValue" class="form-control" placeholder="Enter minimum value" ng-model="info.Value.Counter.Min"></div></div><div class="col-12 col-md-6"><div class="form-group"><label for="newCounterMaximumValue">Maximum</label><input type="number" id="newCounterMaximumValue" class="form-control" placeholder="Enter maximum value" ng-model="info.Value.Counter.Max"></div></div></div><div class="form-row"><div class="col-12 col-md-6"><div class="form-group"><label for="newCounterStep">Step</label><input type="number" id="newCounterStep" class="form-control" placeholder="Enter step" ng-model="info.Value.Counter.Step"></div><div class="form-group"><label for="colorList">Color*</label><ul id="colorList" class="input-color-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor" checked="checked"><i class="icon input-color-2"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-4"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-6"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-8"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-10"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-12"></i></label></li><li class="form-check"><label class="form-check-label"><i class="icon input-color-custom" role="button" data-dismiss="modal" data-toggle="modal" data-target="#colorSelectionPopup"></i></label></li></ul></div></div></div></form>';break;case 0:
t='<div class="NoteTile" style="background-color: {{info.Styles.titlebackgroundcolor}}"><span  ng-click="EditCounterTile()" class="text_design"><p style="color:{{info.Styles.titletextcolor}};height:50px">{{info.Value.Counter.Name}}</p></span></div> <div class="text_align" style="font-size: larger;vertical-align: middle;background-color: {{info.Styles.bodybackgroundColor}};width: 100%;height:90%"><p ng-click="ShowCounterValue()" style="color:{{info.Styles.bodytextcolor}};">{{ info.Value.Counter.Value }}</p> </div>'}return t};return{restrict:"E",replace:!0,link:function(s,n,r){n.html(o(s.useoredit)),e(n.contents())(s),s.EditCounterTile=function(){t.create("/views/dialogs/tile-editor-2.html","NoteTile",{scope:s.info}).result.then(function(e){"cancel"!=e&&(null!=e.Styles&&(e.Styles.backgroundColor=$("#bckcolor").val()),l.setTilelst(e),s.info=e)})};var c=function(e){s.info.IsSync=!1,s.info.Value.Counter.Value=parseInt(e)};c(s.info.Value.Counter.Value),s.ShowCounterValue=function(){t.create("/views/dialogs/countertilecontent.html","ShowAllTileContent",{scope:s.info}).result.then(function(e){"cancel"!=e&&(s.info=e)})},s.Increment=function(){var e=angular.isUndefined(s.info.Value.Counter.Min)?null:parseInt(s.info.Value.Counter.Min),t=angular.isUndefined(s.info.Value.Counter.Max)?null:parseInt(s.info.Value.Counter.Max),a=angular.isUndefined(s.info.Value.Counter.Step)?0:parseInt(s.info.Value.Counter.Step);return t&&(s.info.Value.Counter.Value>=t||s.info.Value.Counter.Value+a>=t)?(c(t),!1):0==a?(s.info.Value.Counter.Value=e,!1):void c(s.info.Value.Counter.Value+a)},s.Decrement=function(){var e=angular.isUndefined(s.info.Value.Counter.Min)?null:parseInt(s.info.Value.Counter.Min),t=(angular.isUndefined(s.info.Value.Counter.Max)||parseInt(s.info.Value.Counter.Max),angular.isUndefined(s.info.Value.Counter.Step)?0:parseInt(s.info.Value.Counter.Step));if(e&&(s.info.Value.Counter.Value<=e||s.info.Value.Counter.Value-t<=e)||0===e&&s.info.Value.Counter.Value<1)return c(e),!1;c(s.info.Value.Counter.Value-t)},s.Reset=function(){angular.isUndefined(s.info.Value.Counter.Min)||parseInt(s.info.Value.Counter.Min),angular.isUndefined(s.info.Value.Counter.Max)||parseInt(s.info.Value.Counter.Max),angular.isUndefined(s.info.Value.Counter.Step)||parseInt(s.info.Value.Counter.Step);t.confirm("Confirm Reset",'Are you sure you want to reset "'+s.info.Value.Counter.Name+'" to "'+s.info.Value.Counter.DefaultValue+'"?',{size:"md"}).result.then(function(){s.info.IsSync=!1,s.info.UpdateDate=Date.now(),s.info.Value.Counter.Value=s.info.Value.Counter.DefaultValue})},s.RemoveTile=function(){t.confirm("Confirm Delete","Are you sure you want to delete "+s.info.Value.Counter.Name,{size:"sm"}).result.then(function(e){a.deleteTile(s.info.TileId).then(function(e){200==e.data.StatusCode?i.pop("success","Tile deleted Successfully."):400==e.data.StatusCode&&1==e.data.ShowToUser&&alert(e.data.ErrorMessage)})})}},scope:{info:"=",useoredit:"="}}}]),e.directive("rpgsmithattributetype",["$compile","dialogs","rulesetDataShareService",function(e,t,a){var i=function(e){var t="";switch(e){case 1:t='<form><div class="form-row"><div class="col-12 col-md-6"><div class="form-group"><label for="colorList">Color*</label><ul id="colorList" class="input-color-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor" checked="checked"><i class="icon input-color-2"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-4"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-6"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-8"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-10"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-12"></i></label></li><li class="form-check"><label class="form-check-label"><i class="icon input-color-custom" role="button" data-dismiss="modal" data-toggle="modal" data-target="#colorSelectionPopup"></i></label></li></ul></div><fieldset class="form-group input-switch input-switch-dual"><legend></legend><ul class="input-switch-items"><li class="form-check"><label class="control-label col-md-4">Title</label></li><li class="form-check"><input type="text" class="form-control col-md-8" ng-model="info.Value.Attribute.Title" value="" /></li></ul></fieldset></div></div><div class="form-row"><div class="col"><fieldset class="form-group input-list input-list-wrap core-stats"><legend>Core Stats*</legend><ul class="input-list-items" ng-if="info.CorestatValues != null"><li class="form-check" ng-repeat="coreStatValue in info.CorestatValues"><label class="form-check-label"><input class="form-check-input" type="radio" name="newAttributeCoreStats" value="{{coreStatValue.Name}}" ng-model="$parent.info.Value.Attribute.CorestatValue"><span><em>{{ coreStatValue.Name }}</em><i class="icon"></i></span></label></li></ul><p class="text-center" ng-if="info.CorestatValues == null">No Corestats Available</p></fieldset></div></div></form>';break;case 0:t='<div class="NoteTile" style="background-color: {{info.Styles.titlebackgroundcolor}}"><span ng-click="EditAttributeTile()" class="text_design"><p style="color:{{info.Styles.titletextcolor}};">{{info.Value.Attribute.Title}}</p></span></div><div class="text_align"><p ng-click="ShowAttributeContent()" style="color:{{info.Styles.bodytextcolor}};">{{info.Value.Attribute.Name}}</p></div>'}return t};return{restrict:"E",replace:!0,link:function(l,o,s){var n=angular.copy(l.info);if(o.html(i(l.useoredit)),e(o.contents())(l),0==l.useoredit){if(null==n.Value.Attribute.AttributeContent||""==n.Value.Attribute.AttributeContent||1==angular.isUndefined(n.Value.Attribute.AttributeContent))for(var r=a.getLayoutData(),c=0;c<r.CorestatValues.length;c++){var d=r.CorestatValues[c];l.info.Value.Attribute.TypeId==d.TypeId&&(n.Value.Attribute.AttributeContent=d)}1==n.Value.Attribute.AttributeContent.TypeId?(l.info.Value.Attribute.CoreStatValue=n.Value.Attribute.AttributeContent.Value,l.info.Value.Attribute.TypeId=n.Value.Attribute.AttributeContent.TypeId,null!=n.Value.Attribute.AttributeContent.Value.Text?l.info.Value.Attribute.CorestatValues="Text:"+n.Value.Attribute.AttributeContent.Value.Text.value:l.info.Value.Attribute.CorestatValues="",l.info.Value.Attribute.AttributeContent=n.Value.Attribute.AttributeContent):2==n.Value.Attribute.AttributeContent.TypeId?(l.info.Value.Attribute.CoreStatValue=n.Value.Attribute.AttributeContent.Value,null!=n.Value.Attribute.AttributeContent.Value.Choices?l.info.Value.Attribute.CorestatValues="Choices:"+n.Value.Attribute.AttributeContent.Value.Choices:l.info.Value.Attribute.CorestatValues="",l.info.Value.Attribute.AttributeContent.AttributeValue="Choices:"+n.Value.Attribute.AttributeContent.Value.Choices):3==n.Value.Attribute.AttributeContent.TypeId?(l.info.Value.Attribute.CoreStatValue=n.Value.Attribute.AttributeContent.Value,l.info.Value.Attribute.TypeId=n.Value.Attribute.AttributeContent.TypeId,null!=n.Value.Attribute.AttributeContent.Value.YesOrNo?l.info.Value.Attribute.CorestatValues="On/Off:"+n.Value.Attribute.AttributeContent.Value.YesOrNo.value:l.info.Value.Attribute.CorestatValues="",l.info.Value.Attribute.AttributeContent=n.Value.Attribute.AttributeContent):4==n.Value.Attribute.AttributeContent.TypeId?(l.info.Value.Attribute.CoreStatValue=n.Value.Attribute.AttributeContent.Value,l.info.Value.Attribute.TypeId=n.Value.Attribute.AttributeContent.TypeId,null!=n.Value.Attribute.AttributeContent.Value.OnOrOff?l.info.Value.Attribute.CorestatValues="Yes/No:"+n.Value.Attribute.AttributeContent.Value.OnOrOff.value:l.info.Value.Attribute.CorestatValues="",l.info.Value.Attribute.AttributeContent=n.Value.Attribute.AttributeContent):5==n.Value.Attribute.AttributeContent.TypeId?(l.info.Value.Attribute.CoreStatValue=n.Value.Attribute.AttributeContent.Value,l.info.Value.Attribute.TypeId=n.Value.Attribute.AttributeContent.TypeId,null!=n.Value.Attribute.AttributeContent.Value.ValueAndSubValue?l.info.Value.Attribute.CorestatValues="Value:"+n.Value.Attribute.AttributeContent.Value.ValueAndSubValue.value+" Sub Value:"+n.Value.Attribute.AttributeContent.Value.ValueAndSubValue.subvalue:l.info.Value.Attribute.CorestatValues="",l.info.Value.Attribute.AttributeContent=n.Value.Attribute.AttributeContent):6==n.Value.Attribute.AttributeContent.TypeId?(l.info.Value.Attribute.CoreStatValue=n.Value.Attribute.AttributeContent.Value,l.info.Value.Attribute.TypeId=n.Value.Attribute.AttributeContent.TypeId,null!=n.Value.Attribute.AttributeContent.Value.CurrentAndMaxValue?l.info.Value.Attribute.CorestatValues="Current Value:"+n.Value.Attribute.AttributeContent.Value.CurrentAndMaxValue.CurrentValue+" Max Value:"+n.Value.Attribute.AttributeContent.Value.CurrentAndMaxValue.MaxValue:l.info.Value.Attribute.CorestatValues="",l.info.Value.Attribute.AttributeContent=n.Value.Attribute.AttributeContent):7==n.Value.Attribute.AttributeContent.TypeId?(l.info.Value.Attribute.CoreStatValue=n.Value.Attribute.AttributeContent.Value,l.info.Value.Attribute.TypeId=n.Value.Attribute.AttributeContent.TypeId,null!=n.Value.Attribute.AttributeContent.Value.Weight?l.info.Value.Attribute.CorestatValues="Weight:"+n.Value.Attribute.AttributeContent.Value.Weight.value+n.Value.Attribute.AttributeContent.Weight.units.selectedUnit:l.info.Value.Attribute.CorestatValues="",l.info.Value.Attribute.AttributeContent=n.Value.Attribute.AttributeContent):8==n.Value.Attribute.AttributeContent.TypeId?(l.info.Value.Attribute.CoreStatValue=n.Value.Attribute.AttributeContent.Value,l.info.Value.Attribute.TypeId=n.Value.Attribute.AttributeContent.TypeId,null!=n.Value.Attribute.AttributeContent.Value.Image?l.info.Value.Attribute.CorestatValues=n.Value.Attribute.AttributeContent.Value.Image.image:l.info.Value.Attribute.CorestatValues="",l.info.Value.Attribute.AttributeContent=n.Value.Attribute.AttributeContent):12==n.Value.Attribute.AttributeContent.TypeId?(l.info.Value.Attribute.CoreStatValue=n.Value.Attribute.AttributeContent.Value,l.info.Value.Attribute.TypeId=n.Value.Attribute.AttributeContent.TypeId,null!=n.Value.Attribute.AttributeContent.Value.Height?l.info.Value.Attribute.CorestatValues="Height:"+n.Value.Attribute.AttributeContent.Value.Height.value+n.Value.Attribute.AttributeContent.Height.units.selectedUnit:l.info.Value.Attribute.CorestatValues="",l.info.Value.Attribute.AttributeContent=n.Value.Attribute.AttributeContent):13==n.Value.Attribute.AttributeContent.TypeId?(l.info.Value.Attribute.CoreStatValue=n.Value.Attribute.AttributeContent.Value,l.info.Value.Attribute.TypeId=n.Value.Attribute.AttributeContent.TypeId,null!=n.Value.Attribute.AttributeContent.Value.Volume?l.info.Value.Attribute.CorestatValues="Volume:"+n.Value.Attribute.AttributeContent.Value.Volume.value+"  "+n.Value.Attribute.AttributeContent.Volume.units.selectedUnit:l.info.Value.Attribute.CorestatValues="",l.info.Value.Attribute.AttributeContent=n.Value.Attribute.AttributeContent):14==n.Value.Attribute.AttributeContent.TypeId?(l.info.Value.Attribute.CoreStatValue=n.Value.Attribute.AttributeContent.Value,l.info.Value.Attribute.TypeId=n.Value.Attribute.AttributeContent.TypeId,null!=n.Value.Attribute.AttributeContent.Value.Number?l.info.Value.Attribute.CorestatValues="Number:"+n.Value.Attribute.AttributeContent.Value.Number.value:l.info.Value.Attribute.CorestatValues="",l.info.Value.Attribute.AttributeContent=n.Value.Attribute.AttributeContent):15==n.Value.Attribute.AttributeContent.TypeId?(l.info.Value.Attribute.CoreStatValue=n.Value.Attribute.AttributeContent.Value,l.info.Value.Attribute.TypeId=n.Value.Attribute.AttributeContent.TypeId,null!=n.Value.Attribute.AttributeContent.Value.DefaultDice?l.info.Value.Attribute.CorestatValues="Dice:"+n.Value.Attribute.AttributeContent.Value.DefaultDice.value:l.info.Value.Attribute.CorestatValues="",l.info.Value.Attribute.AttributeContent=n.Value.Attribute.AttributeContent):19==n.Value.Attribute.AttributeContent.TypeId&&(l.info.Value.Attribute.CoreStatValue=n.Value.Attribute.AttributeContent.Value,l.info.Value.Attribute.TypeId=n.Value.Attribute.AttributeContent.TypeId,null!=n.Value.Attribute.AttributeContent.Value.TextArea?l.info.Value.Attribute.CorestatValues=n.Value.Attribute.AttributeContent.Value.TextArea.value:l.info.Value.Attribute.CorestatValues="",l.info.Value.Attribute.AttributeContent.AttributeValue=n.Value.Attribute.AttributeContent.Value.TextArea.value)}l.ShowAttributeContent=function(){t.create("/views/dialogs/attributetilecontent.html","ShowAllTileContent",{scope:l.info}).result.then(function(e){"cancel"!=e&&(l.info=e)})},l.EditAttributeTile=function(){var e=a.getLayoutData(),i=e.CorestatValues;l.info.CorestatValues=0==angular.isUndefined(i)?i:[];for(var o=0;o<l.info.CorestatValues.length;o++)null!=l.info.CorestatValues[o].Name&&l.info.Value.Attribute.Name==l.info.CorestatValues[o].Name&&(l.info.Value.Attribute.SelectedCorestatValue=l.info.CorestatValues[o].Name);t.create("/views/dialogs/tile-editor-3.html","NoteTile",{scope:l.info}).result.then(function(e){"cancel"!=e&&(null!=e.Styles&&(e.Styles.backgroundColor=$("#bckcolor").val()),a.setTilelst(e),l.info=e)})},l.RemoveTile=function(){t.confirm("Confirm Delete","Are you sure you want to delete "+l.info.Value.Attribute.Name,{size:"sm"}).result.then(function(e){tileService.deleteTile(l.info.TileId).then(function(e){200==e.data.StatusCode?toaster.pop("success","Tile deleted Successfully."):400==e.data.StatusCode&&1==e.data.ShowToUser&&alert(e.data.ErrorMessage)})})}},scope:{info:"=",useoredit:"="}}}]),e.directive("rpgsmithlinktype",["$compile","dialogs","rulesetDataShareService",function(e,t,a){var i=function(e){var t="";switch(e){case 1:t='<form><div class="form-row"><div class="col-12 col-md-6"><div class="form-group"><label for="colorList">Color*</label><ul id="colorList" class="input-color-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor" checked="checked"><i class="icon input-color-2"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-4"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-6"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-8"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-10"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-12"></i></label></li><li class="form-check"><label class="form-check-label"><i class="icon input-color-custom" role="button" data-dismiss="modal" data-toggle="modal" data-target="#colorSelectionPopup"></i></label></li></ul></div><fieldset class="form-group input-switch input-switch-dual"><legend></legend><ul class="input-switch-items"><li class="form-check"><label class="form-check-label">Title</label></li><li class="form-check"><input type="text" class="form-control col-md-8" ng-model="info.Value.Link.Title" value="" /></li></ul></fieldset></div></div><div class="form-row"><div class="col">\x3c!-- Link property switch --\x3e<fieldset class="form-group input-switch"><legend>Property*</legend><ul class="input-switch-items"><li class="form-check" ><label class="form-check-label"><input class="form-check-input" type="radio" name="newLinkProperty" ng-click="ShowItemsDropdown()" value="Items" ng-model="info.Value.Link.SelectedPropertyValue"><span>Items</span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newLinkProperty" ng-click="ShowSpellsDropdown()" value="Spells" ng-model="info.Value.Link.SelectedPropertyValue"><span>Spells</span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newLinkProperty" ng-click="ShowAbilitiesDropdown()" value="Abilities" ng-model="info.Value.Link.SelectedPropertyValue"><span>Abilities</span></label></li></ul></fieldset><fieldset class="form-group input-list input-list-wrap properties"><ul class="input-list-items"><li class="form-check" ng-show="IsItemVisible" ng-repeat="item in LinkTileItems"><label class="form-check-label"><input class="form-check-input" type="radio" name="newLinkProperties" value="{{item.ItemProperties[0].Value.Text.value}}" ng-model="$parent.info.Value.Link.SelectedProperty" ng-click="SetContentType(1)"><span><em>{{ item.ItemProperties[0].Value.Text.value }}</em><i class="icon"></i></span></label></li><li class="form-check" ng-show="IsSpellVisible" ng-repeat="spell in LinkTileSpells"><label class="form-check-label"><input class="form-check-input" type="radio" name="newLinkProperties" value="{{spell.SpellProperties[0].Value.Text.value}}"  ng-model="$parent.info.Value.Link.SelectedProperty"><span><img ng-src="{{info.Value.Link.SelectedPropertyValueImage}}" alt=""><em>{{spell.SpellProperties[0].Value.Text.value}}</em><i class="icon"></i></span></label></li><li class="form-check" ng-show="IsAbilityVisible" ng-repeat="ability in LinkTileAbilities"><label class="form-check-label"><input class="form-check-input" type="radio" name="newLinkProperties" value="{{ability.AbilityProperties[0].Value.Text.value}}" ng-model="$parent.info.Value.Link.SelectedProperty"><span><img ng-src="{{info.Value.Link.SelectedPropertyValueImage}}" alt=""><em>{{ability.AbilityProperties[0].Value.Text.value}}</em><i class="icon"></i></span></label></li></ul><p style="text-align:center;" ng-show="ShowContent">Content Not Available</p></fieldset></div></div></form>';break;case 0:t='<div class="NoteTile" style="background-color: {{info.Styles.titlebackgroundcolor}};height: 50px;"> <span ng-click="EditLinkTile()" style="color:{{info.Styles.titletextcolor}};">{{info.Value.Link.Title}}</span></div><div class="text_align" style="text-align:center;width:100%;height:90%;background-size: 100% 100%;background-image: url(&#34;{{info.Value.Link.SelectedPropertyValueImage}}&#34;)"> </div>'}return t};return{restrict:"E",replace:!0,link:function(l,o,s){var n=angular.copy(l.info);if(o.html(i(l.useoredit)),e(o.contents())(l),l.IsItemVisible=!0,l.IsSpellVisible=!1,l.IsAbilityVisible=!1,l.LinkTileItems=[],l.LinkTileSpells=[],l.LinkTileAbilities=[],0==angular.isUndefined(l.fullscope)){if(null!=l.fullscope.Items)for(var r=0;r<l.fullscope.Items.length;r++)l.LinkTileItems.push(l.fullscope.Items[r]);if(null!=l.fullscope.Spells)for(var r=0;r<l.fullscope.Spells.length;r++)l.LinkTileSpells.push(l.fullscope.Spells[r]);if(null!=l.fullscope.Abilities)for(var r=0;r<l.fullscope.Abilities.length;r++)l.LinkTileAbilities.push(l.fullscope.Abilities[r])}"Items"==n.Value.Link.SelectedPropertyValue&&(l.IsItemVisible=!0,l.IsSpellVisible=!1,l.IsAbilityVisible=!1),"Spells"==n.Value.Link.SelectedPropertyValue&&(l.IsItemVisible=!1,l.IsSpellVisible=!0,l.IsAbilityVisible=!1),"Abilities"==n.Value.Link.SelectedPropertyValue&&(l.IsItemVisible=!1,l.IsSpellVisible=!1,l.IsAbilityVisible=!0),l.SetContentType=function(e){1==e?l.info.Value.Link.SelectedPropertyValue="Items":2==e?l.info.Value.Link.SelectedPropertyValue="Spells":3==e&&(l.info.Value.Link.SelectedPropertyValue="Abilities")},l.ShowItemsDropdown=function(){l.IsItemVisible=!0,l.IsSpellVisible=!1,l.IsAbilityVisible=!1,l.LinkTileItems.length<=0&&(l.ShowContent=!0)},l.ShowSpellsDropdown=function(){l.IsItemVisible=!1,l.IsSpellVisible=!0,l.IsAbilityVisible=!1,l.LinkTileSpells.length<=0&&(l.ShowContent=!0)},l.ShowAbilitiesDropdown=function(){l.IsItemVisible=!1,l.IsSpellVisible=!1,l.IsAbilityVisible=!0,l.LinkTileAbilities.length<=0&&(l.ShowContent=!0)},l.newstyles=function(){return{"background-size":"100% 100%","background-repeat":"no-repeat",width:"100%",height:"100%"}},l.ShowAllContent=function(){var e=!1,a=!1,i=!1;if("Items"==l.info.Value.Link.SelectedPropertyValue)for(var o=0;o<l.LinkTileItems.length;o++){var s=l.LinkTileItems[o];l.info.Value.Link.SelectedProperty==s.ItemProperties[0].Value.Text.value&&(e=!0)}else if("Spells"==l.info.Value.Link.SelectedPropertyValue)for(var o=0;o<l.LinkTileSpells.length;o++){var s=l.LinkTileSpells[o];l.info.Value.Link.SelectedProperty==s.SpellProperties[0].Value.Text.value&&(a=!0)}else if("Abilities"==l.info.Value.Link.SelectedPropertyValue)for(var o=0;o<l.LinkTileAbilities.length;o++){var s=l.LinkTileAbilities[o];l.info.Value.Link.SelectedProperty==s.AbilityProperties[0].Value.Text.value&&(i=!0)}if(1==e){var n=0==angular.isUndefined(l.info.Value.Link.Content)?l.info.Value.Link.Content:s,r=t.create("/views/dialogs/allitemcontent.html","ShowItems",{scope:n});r.result.then(function(e){})}else if(1==a){var c=0==angular.isUndefined(l.info.Value.Link.Content)?l.info.Value.Link.Content:s,r=t.create("/views/dialogs/allspellcontent.html","ShowItems",{scope:c});r.result.then(function(e){})}else if(1==i){var d=0==angular.isUndefined(l.info.Value.Link.Content)?l.info.Value.Link.Content:s,r=t.create("/views/dialogs/allabilitycontent.html","ShowItems",{scope:d});r.result.then(function(e){})}},l.EditLinkTile=function(){t.create("/views/dialogs/tile-editor-4.html","NoteTile",{scope:l.info,fullscope:l.fullscope}).result.then(function(e){"cancel"!=e&&(null!=e.Styles&&(e.Styles.backgroundColor=$("#bckcolor").val()),a.setTilelst(e),l.info=e)})},l.RemoveTile=function(){t.confirm("Confirm Delete","Are you sure you want to delete "+l.info.Value.Link.Name,{size:"sm"}).result.then(function(e){tileService.deleteTile(l.info.TileId).then(function(e){200==e.data.StatusCode?toaster.pop("success","Tile deleted Successfully."):400==e.data.StatusCode&&1==e.data.ShowToUser&&alert(e.data.ErrorMessage)})})}},scope:{info:"=",useoredit:"=",fullscope:"="}}}]),e.directive("rpgsmithexecutetype",["$compile","dialogs","rulesetDataShareService",function(e,t,a){var i=function(e){var t="";switch(e){case 1:t='<form><div class="form-row"><div class="col-12 col-md-6"><fieldset class="form-group input-switch input-switch-dual"><legend></legend><ul class="input-switch-items"><li class="form-check"><label class="form-check-label">Title</label></li><li class="form-check"><input type="text" class="form-control col-md-8" ng-model="info.Value.Execute.Title" value="" /></li></ul></fieldset></div></div><div class="form-row"><div class="col">\x3c!-- Link property switch --\x3e<fieldset class="form-group input-switch"><legend>Property*</legend><ul class="input-switch-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newLinkProperty" ng-click="ShowItemsDropdown()" value="Items" ng-model="info.Value.Execute.SelectedPropertyValue"><span>Items</span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newLinkProperty" ng-click="ShowSpellsDropdown()" value="Spells" ng-model="info.Value.Execute.SelectedPropertyValue"><span>Spells</span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newLinkProperty" ng-click="ShowAbilitiesDropdown()" value="Abilities" ng-model="info.Value.Execute.SelectedPropertyValue"><span>Abilities</span></label></li></ul></fieldset><fieldset class="form-group input-list input-list-wrap properties"><ul class="input-list-items"><li class="form-check" ng-show="IsItemVisible" ng-repeat="item in ExecuteTileItems"><label class="form-check-label"><input class="form-check-input" type="radio" name="newLinkProperties" value="{{item.ItemProperties[0].Value.Text.value}}" ng-model="$parent.info.Value.Execute.SelectedProperty" ng-click="SetContentType(1)"><span><em>{{ item.ItemProperties[0].Value.Text.value }}</em><i class="icon"></i></span></label></li><li class="form-check" ng-show="IsSpellVisible" ng-repeat="spell in ExecuteTileSpells"><label class="form-check-label"><input class="form-check-input" type="radio" name="newLinkProperties" value="{{spell.SpellProperties[0].Value.Text.value}}" ng-model="$parent.info.Value.Execute.SelectedProperty"><span><img ng-src="{{info.Value.Link.SelectedPropertyValueImage}}" alt=""><em>{{ spell.SpellProperties[0].Value.Text.value }}</em><i class="icon"></i></span></label></li><li class="form-check" ng-show="IsAbilityVisible" ng-repeat="ability in ExecuteTileAbilities"><label class="form-check-label"><input class="form-check-input" type="radio" name="newLinkProperties" value="{{ability.AbilityProperties[0].Value.Text.value}}" ng-model="$parent.info.Value.Execute.SelectedProperty"><span><img ng-src="{{info.Value.Link.SelectedPropertyValueImage}}" alt=""><em>{{ ability.AbilityProperties[0].Value.Text.value }}</em><i class="icon"></i></span></label></li></ul><p style="text-align:center;" ng-show="ShowContent">Content Not Available</p></fieldset></div></div></form>';break;case 0:t='<div class="NoteTile" style="background-color: {{info.Styles.titlebackgroundcolor}};height: 50px"><span ng-click="EditExecuteTile()" class="text_design"><p style="color:{{info.Styles.titletextcolor}};">{{info.Value.Execute.Name}}</p></span></div><div class="text_align" style="text-align:center"> <img src="{{info.Value.Execute.SelectedPropertyValueImage}}" ng-style="newstyles()" class="img-resposive ng-pristine ng-untouched ng-valid ng-empty" ng-click="ShowAllContent()"></div>'}return t};return{restrict:"E",replace:!0,link:function(l,o,s){var n=angular.copy(l.info);if(o.html(i(l.useoredit)),e(o.contents())(l),l.IsItemVisible=!0,l.IsSpellVisible=!1,l.IsAbilityVisible=!1,l.ExecuteTileItems=[],l.ExecuteTileSpells=[],l.ExecuteTileAbilities=[],0==angular.isUndefined(l.fullscope)){if(null!=l.fullscope.Items)for(var r=0;r<l.fullscope.Items.length;r++)l.ExecuteTileItems.push(l.fullscope.Items[r]);if(null!=l.fullscope.Spells)for(var r=0;r<l.fullscope.Spells.length;r++)l.ExecuteTileSpells.push(l.fullscope.Spells[r]);if(null!=l.fullscope.Abilities)for(var r=0;r<l.fullscope.Abilities.length;r++)l.ExecuteTileAbilities.push(l.fullscope.Abilities[r])}"Items"==n.Value.Execute.SelectedPropertyValue&&(l.IsItemVisible=!0,l.IsSpellVisible=!1,l.IsAbilityVisible=!1),"Spells"==n.Value.Execute.SelectedPropertyValue&&(l.IsItemVisible=!1,l.IsSpellVisible=!0,l.IsAbilityVisible=!1),"Abilities"==n.Value.Execute.SelectedPropertyValue&&(l.IsItemVisible=!1,l.IsSpellVisible=!1,l.IsAbilityVisible=!0),l.ShowItemsDropdown=function(){l.IsItemVisible=!0,l.IsSpellVisible=!1,l.IsAbilityVisible=!1,l.LinkTileItems.length<=0&&(l.ShowContent=!0)},l.ShowSpellsDropdown=function(){l.IsItemVisible=!1,l.IsSpellVisible=!0,l.IsAbilityVisible=!1,l.LinkTileSpells.length<=0&&(l.ShowContent=!0)},l.ShowAbilitiesDropdown=function(){l.IsItemVisible=!1,l.IsSpellVisible=!1,l.IsAbilityVisible=!0,l.LinkTileAbilities.length<=0&&(l.ShowContent=!0)},l.newstyles=function(){return{"background-size":"100% 100%","background-repeat":"no-repeat",width:"120px",height:"120px"}},l.ShowAllContent=function(){var e=!1,a=!1,i=!1;if("Items"==l.info.Value.Execute.SelectedPropertyValue)for(var o=0;o<l.ExecuteTileItems.length;o++){var s=l.ExecuteTileItems[o];l.info.Value.Execute.SelectedProperty==s.ItemProperties[0].Value.Text.value&&(e=!0)}else if("Spells"==l.info.Value.Execute.SelectedPropertyValue)for(var o=0;o<l.ExecuteTileSpells.length;o++){var s=l.ExecuteTileSpells[o];l.info.Value.Execute.SelectedProperty==s.SpellProperties[0].Value.Text.value&&(a=!0)}else if("Abilities"==l.info.Value.Execute.SelectedPropertyValue)for(var o=0;o<l.ExecuteTileAbilities.length;o++){var s=l.ExecuteTileAbilities[o];l.info.Value.Execute.SelectedProperty==s.AbilityProperties[0].Value.Text.value&&(i=!0)}if(1==e){var n=t.create("/views/dialogs/defaultdiceselection.html","dialogDefaultDiceSelect",{scope:l.info.Value.Execute.Content,mode:2});n.result.then(function(e){})}else if(1==a){var n=t.create("/views/dialogs/defaultdiceselection.html","dialogDefaultDiceSelect",{scope:l.info.Value.Execute.Content,mode:2});n.result.then(function(e){})}else if(1==i){var n=t.create("/views/dialogs/defaultdiceselection.html","dialogDefaultDiceSelect",{scope:l.info.Value.Execute.Content,mode:2});n.result.then(function(e){})}},l.EditExecuteTile=function(){t.create("/views/dialogs/tile-editor-5.html","NoteTile",{scope:l.info,fullscope:l.fullscope}).result.then(function(e){"cancel"!=e&&(null!=e.Styles&&(e.Styles.backgroundColor=$("#bckcolor").val()),a.setTilelst(e),l.info=e)})},l.RemoveTile=function(){t.confirm("Confirm Delete","Are you sure you want to delete "+l.info.Value.Execute.Name,{size:"sm"}).result.then(function(e){tileService.deleteTile(l.info.TileId).then(function(e){200==e.data.StatusCode?toaster.pop("success","Tile deleted Successfully."):400==e.data.StatusCode&&1==e.data.ShowToUser&&alert(e.data.ErrorMessage)})})}},scope:{info:"=",fullscope:"=",useoredit:"="}}}]),e.directive("rpgsmithcommandtype",["$compile","dialogs","rulesetDataShareService",function(e,t,a){var i=function(e){var t="";switch(e){case 1:
t='<form><div class="form-row"><div class="col-12 col-md-6"><div class="form-group"><label for="newCommandTitle">Title</label><input type="text" id="newCommandTitle" class="form-control" placeholder="Enter command title" ng-model="info.Value.Command.Name"></div><div class="form-group"><label for="newCommandCmd">Command</label><span class="input-group-btn"><button type="button" title="Show Dice" data-toggle="tooltip" class="btn icon icon-dice icon-rsi btn-simple-primary" ng-click="defaultDiceSelect()" ng-model="info.Value.Command.command"/></button></span><input type="text" id="newCommandCmd" ng-model="info.Value.Command.command" class="form-control" placeholder="Enter the command"></div><div class="form-group"><label for="colorList">Color*</label><ul id="colorList" class="input-color-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor" checked="checked"><i class="icon input-color-2"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-4"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-6"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-8"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-10"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-12"></i></label></li><li class="form-check"><label class="form-check-label"><i class="icon input-color-custom" role="button" data-dismiss="modal" data-toggle="modal" data-target="#colorSelectionPopup"></i></label></li></ul></div></div><div class="col-12 col-md-6"><div class="form-group input-image"><label for="newCommandImage">Image</label><div class="input-image-control-wrapper"><div class="form-group input-image"><label for="newImageFile"></label><div class="input-image-control-wrapper"><div class="input-image-note icon icon-upload"><span ng-model="info.Value.Command.ImagePath">Click here to upload.</span><small>(320 x 320 px)</small></div><input type="file"  class="form-control-file"  onchange="angular.element(this).scope().CommandImageUpload(this)" accept="x-png,gif,jpeg"></div></div></form>';break;case 0:t='<div class="NoteTile" style="background-color: {{info.Styles.titlebackgroundcolor}};height: 50px"><span ng-click="EditCommandTile()" class="text_design"><p style="color:{{info.Styles.titletextcolor}};">{{info.Value.Command.Name}}</p></span></div><div class="text_align"><img src="{{info.Value.Command.ImagePath}}" ng-style="newstyles()" class="img-resposive ng-pristine ng-untouched ng-valid ng-empty" ng-click="CommandRun()"></div>'}return t};return{restrict:"E",replace:!0,link:function(l,o,s){angular.copy(l.info);o.html(i(l.useoredit)),e(o.contents())(l),l.CommandImageUpload=function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){$("#commandImage").attr("Src",e.target.result).width(120).height(120),l.info.Value.Command.ImagePath=e.target.result},t.readAsDataURL(e.files[0])}},l.defaultDiceSelect=function(){t.create("/views/dialogs/defaultdiceselection.html","dialogDefaultDiceSelect",{mode:1,scope:l.info.Value.Command.command}).result.then(function(e){l.info.Value.Command.command=e})},l.newstyles=function(){return{"background-size":"100% 100%","background-repeat":"no-repeat",width:"120px",height:"120px"}},l.CommandRun=function(){t.create("/views/dialogs/defaultdiceselection.html","dialogDefaultDiceSelect",{scope:l.info,mode:2}).result.then(function(e){})},l.EditCommandTile=function(){t.create("/views/dialogs/tile-editor-6.html","NoteTile",{scope:l.info}).result.then(function(e){"cancel"!=e&&(null!=e.Styles&&(e.Styles.backgroundColor=$("#bckcolor").val()),null!=e.Styles&&(e.Styles.backgroundColor=$("#bckcolor").val()),a.setTilelst(e),l.info=e)})},l.RemoveTile=function(){t.confirm("Confirm Delete","Are you sure you want to delete "+l.info.Value.Command.Name,{size:"sm"}).result.then(function(e){tileService.deleteTile(l.info.TileId).then(function(e){200==e.data.StatusCode?toaster.pop("success","Tile deleted Successfully."):400==e.data.StatusCode&&1==e.data.ShowToUser&&alert(e.data.ErrorMessage)})})}},scope:{info:"=",useoredit:"="}}}]),e.directive("rpgsmithimagetype",["$compile","dialogs","rulesetDataShareService",function(e,t,a){var i=function(e){var t="";switch(e){case 1:t='<form><div class="form-row"><div class="col-12 col-md-6"><div class="form-group"><label for="newImageTitle">Title</label><input type="text" id="newImageTitle" class="form-control" placeholder="Enter image title" ng-model="info.Value.Imagetile.Name"></div><div class="form-group"><label for="newImageDescription">Description</label><textarea class="form-control" rows="10" ng-model = "info.Value.Imagetile.Description" id="newImageDescription" class="form-control" placeholder="Enter image description"></textarea></div><div class="form-group"><label for="colorList">Color*</label><ul id="colorList" class="input-color-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor" checked="checked"><i class="icon input-color-2"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-4"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-6"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-8"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-10"></i></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" name="newNoteTileColor"><i class="icon input-color-12"></i></label></li><li class="form-check"><label class="form-check-label"><i class="icon input-color-custom" role="button" data-dismiss="modal" data-toggle="modal" data-target="#colorSelectionPopup"></i></label></li></ul></div></div><div class="col-12 col-md-6"><div class="form-group input-image"><label for="newCommandImage">Image</label><div class="input-image-control-wrapper"><div class="form-group input-image"><label for="newImageFile"></label><div class="input-image-control-wrapper"><div class="input-image-note icon icon-upload"><span ng-model="info.Value.Imagetile.Imagepath">Click here to upload.</span><small>(320 x 320 px)</small></div><input type="file"  class="form-control-file"  onchange="angular.element(this).scope().CommandImageUpload(this)" accept="x-png,gif,jpeg"></div></div></form>';break;case 0:t='<div class="NoteTile" style="background-color: {{info.Styles.titlebackgroundcolor}}height: 50px;"><span ng-click="EditImageTile()" class="text_design"><p style="color:{{info.Styles.titletextcolor}};">{{info.Value.Imagetile.Name}}</p></span></div><div class="text_align"><img ng-src="{{info.Value.Imagetile.Imagepath}}" class="img-resposive img_center" width="120" height="120" ng-click="showImage()" /></div>'}return t};return{restrict:"E",replace:!0,link:function(l,o,s){angular.copy(l.info);o.html(i(l.useoredit)),e(o.contents())(l),l.getThumbNail=function(){if(l.file)return $scope.file;var e=l.item;return e.id&&e.portrait?"/characterdata/"+e.id+"/"+e.portrait:null},l.CommandImageUpload=function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){$("#commandImage").attr("Src",e.target.result).width(120).height(120),l.info.Value.Imagetile.Imagepath=e.target.result},t.readAsDataURL(e.files[0])}},l.showImage=function(){t.create("/views/dialogs/Imagetilecontent.html","ShowAllTileContent",{scope:l.info}).result.then(function(e){"cancel"!=e&&(l.info=e)})},l.EditImageTile=function(){t.create("/views/dialogs/tile-editor-7.html","NoteTile",{scope:l.info,Tablist:l.fullscope}).result.then(function(e){if("cancel"!=e){if(null!=e.Styles&&(e.Styles.backgroundColor=$("#bckcolor").val()),a.setTilelst(e),0==angular.isUndefined(l.fullscope))for(var t=0;t<l.fullscope.length;t++)l.fullscope[t].TileId==e.TileId&&(l.fullscope.splice(t,1),l.fullscope.push(e));l.info=e}})},l.RemoveTile=function(){t.confirm("Confirm Delete","Are you sure you want to delete "+l.info.Value.Command.Name,{size:"sm"}).result.then(function(e){tileService.deleteTile(l.info.TileId).then(function(e){200==e.data.StatusCode?toaster.pop("success","Tile deleted Successfully."):400==e.data.StatusCode&&1==e.data.ShowToUser&&alert(e.data.ErrorMessage)})})}},scope:{info:"=",fullscope:"=",useoredit:"="}}}])}(),function(){"use strict";angular.module("rpgsmith-directives").directive("pageslideMenu",[function(){return{restrict:"E",templateUrl:"/views/shared/pageslide-menu.html",scope:{menuClick:"&?",menus:"="},link:function(e,t,a,i,l){e.hasMenus=function(e){return e&&angular.isArray(e.menus)},e.onItemClick=function(t){t.disabled||(e.menuClick()(t),"function"==typeof t.action&&t.action(t))}}}}])}(),function(){"use strict";angular.module("rpgsmith-directives").directive("rulesetproperty",[function(e){return{restrict:"E",templateUrl:"/views/shared/rulesetproperty.html",scope:{info:"="}}}])}(),function(){"use strict";var e=angular.module("rpgsmith-directives");e.directive("ngBindHtmlCompile",["$timeout","$sce","$compile","$interpolate",function(e,t,a,i){return{restrict:"A",link:function(e,i,l){e.$watch(t.parseAsHtml(l.ngBindHtmlCompile),function(t){i.html(t),a(i.contents())(e)})}}}]),e.directive("tileRender1",[function(){return{restrict:"A",controller:"tileRenderController1",templateUrl:"/views/tiles/tile-template-1.html",scope:{tile:"=tileRender1"}}}]),e.directive("tileRender2",[function(){return{restrict:"A",controller:"tileRenderController2",templateUrl:"/views/tiles/tile-template-2.html",scope:{tile:"=tileRender2"}}}]),e.directive("tileRender3",[function(){return{restrict:"A",controller:"tileRenderController3",templateUrl:"/views/tiles/tile-template-3.html",scope:{tile:"=tileRender2"}}}])}(),function(){"use strict";angular.module("rpgsmith-directives").directive("tilePicker",["$document","$timeout","$q",function(e,t,a){return{restrict:"A",scope:{api:"=tilePicker"},link:function(a,i,l,o,s){function n(e){27===(e.keyCode||e.which)&&c()}function r(e){c()}function c(){a.api.selecting&&(d=null,e.on("keydown",n),e.on("touchend click",r),t(function(){a.api.selecting=!1,"function"==typeof a.api.onClose&&a.api.onClose()}))}var d=null;a.$on("$destroy",function(){c()}),a.api.selecting=!1,a.api.beginSelect=function(i){d=i,t(function(){"function"==typeof a.api.beforeSelect&&a.api.beforeSelect(),a.api.selecting=!0,e.on("keydown",n),e.on("click",r)})},a.api.endSelect=function(e){"function"==typeof d&&d(e),a.api.selecting=!1,"function"==typeof a.api.onClose&&a.api.onClose()}}}}])}(),function(e){"use strict";var t=angular.module("rpgsmith-filters");t.filter("counter",["$sce","dataContext",function(e,t){var a=function(e){var a=(t.character.counters||[]).find(function(t){return e===t.name});return a?a.displayValue:""};return a.$stateful=!0,a}]),t.filter("corestat",["$sce","dataContext",function(e,t){var a=function(e){var a=(t.character.coreStats||[]).find(function(t){return e===t.code});return a?a.name:""};return a.$stateful=!0,a}])}(),function(e){"use strict";angular.module("rpgsmith-services").factory("characterCoreStatFactory",["dataContext",function(e){var t=function(){};return t.prototype.onPropertyChanged=function(e){},t.typeInitializer=function(e){},{CoreStat:t}}])}(),function(e){"use strict";angular.module("rpgsmith-services").factory("counterFactory",["dataContext",function(e){var t=function(){},a=function(e,t){return format(e,t)},i=function(e,t){return null!=e.min&&t<e.min&&(t=e.min),null!=e.max&&t>e.max&&(t=e.max),t!==e.value&&(e.value=t,!0)};return t.prototype.onPropertyChanged=function(e){"value"!==e.propertyName&&"mask"!==e.propertyName||(this.displayValue=a(this.mask,this.value))},t.prototype.increment=function(){return i(this,this.value+this.step)},t.prototype.decrement=function(){return i(this,this.value-this.step)},t.prototype.reset=function(){return i(this,this.defaultValue||0)},t.prototype.formatValue=function(e,t){return a(e,t)},t.typeInitializer=function(e){e.displayValue=a(e.mask,e.value)},{Counter:t}}])}(),function(e){"use strict";var t=window.rpgsmith.tileTypes;angular.module("rpgsmith-services").factory("tileFactory",["dataContext",function(e){var a=function(){function e(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];(rpgsmith.isEmpty(a)||"inherit"===a||"initial"===a||"transparent"===a)&&delete e[t]}return e}this.parseStyle=function(){if(null===this.__styleComputed){var t=angular.fromJson(this.style)||{};t=angular.extend({tile:{classes:null,styles:{}},content:{classes:null,styles:{}}},t),e(t.tile.styles),e(t.content.styles),this.__styleComputed=t}return this.__styleComputed},this.updateStyle=function(t){e(t.tile.styles),e(t.content.styles),this.__styleComputed=t,this.style=t&&Object.keys(t).length?angular.toJson(t):null}},i=function(a){if(e.character)switch(a.typeId){case t.note.id:return e.character.notes.find(function(e){return e.id===a.entityId});case t.counter.id:return e.character.counters.find(function(e){return e.id===a.entityId})}return null};return a.typeInitializer=function(e){e.__entity=null,e.__styleComputed=null,e.__randomShake="disable-rpgsmith-shake-"+Math.randomInteger(1,10)},a.prototype.onPropertyChanged=function(e){"entityId"!==e.propertyName&&"typeId"!==e.propertyName||(this.__entity=i(this))},Object.defineProperty(a.prototype,"entity",{enumerable:!1,configurable:!1,get:function(){return null==this.__entity&&(this.__entity=i(this)),this.__entity}}),{Tile:a}}])}(),function(){"use strict";var e=angular.module("rpgsmith-services");e.factory("authInterceptor",["$rootScope",function(e){var t={};return t.responseError=function(t){return 401===t.status&&e.$broadcast("httpUnauthorized"),t},t}]),e.factory("authService",["$http","$q","$state","$localStorage",function(e,t,a,i){var l={authenticated:!1},o=function(){delete i.authorizationData,l.authenticated=!1,l.username=null},s={};return s.authentication=l,s.init=function(){i.authorizationData&&(l.authenticated=!0)},s.ExternalGoogle=function(){var t={provider:"Google",returnUrl:null};e.post("/api/Account/ExternalLogin",t).then(function(e){window.location.href=e.data},function(e,t){o(),deferred.reject(e)})},s.GetServiceUrl=function(){var t="";e.get("http://localhost:61492/api/Account/ExternalLogins?returnUrl=%2F&generateState=true").then(function(e){return t=e.ExternalLoginViewModel.Url}),e({url:"http://localhost:61492/api/Account/ExternalLogins?returnUrl=%2F&generateState=true",method:"GET",contentType:"application/xml"}).then(function(e,t){}),$(document).ready(function(){$.ajax({type:"GET",url:"http://localhost:61492/api/Account/ExternalLogins?returnUrl=%2F&generateState=true",dataType:"xml",success:function(e){},error:function(e){alert("An error occurred while processing XML file.")}})})},s.logout=function(){return e.post("/api/Account/LogOff")},s.login=function(a,s,n){var r={Email:a,Password:s,RememberMe:n},c=t.defer();return e.post("/api/Account/Login",r).then(function(e){o(),i.authorizationData={},l.authenticated=!0,c.resolve(e)},function(e,t){o(),c.reject(e)}),c.promise},s.Exlogin=function(){t.defer();o(),i.authorizationData={},l.authenticated=!0},s.register=function(a,s,n,r,c){var d={username:a,Email:s,Password:n,ConfirmPassword:r,ProfileImage:c},u=t.defer();return e.post("/api/Account/Register",d).then(function(e){o(),i.authorizationData={},l.authenticated=!0,u.resolve(e)},function(e,t){o(),u.reject(e)}),u.promise},s.updateprofile=function(t){return e.post("/api/Profile/UpdateProfile",t)},s.Resetpassword=function(t){return e.post("/api/Profile/ResetPassword",t)},s.ForgotPassword=function(t){var a={Email:t};return e.post("/api/Account/ForgotPassword",a)},s}])}(),function(){"use strict";angular.module("rpgsmith-services").factory("characterService",["$http",function(e){function t(){}var a="/api/Character",i=new t;return i.GetCharacters=function(){return e.get(a+"/Get")},i.GetHeaderContentsCounts=function(){return e.get(a+"/GetHeaderContentsCounts")},i.saveCharacter=function(t){return e.post(a+"/Create",t)},i.CopyCharacter=function(t){return e.post(a+"/Copy",t)},i.EditCharacter=function(t){return e.post(a+"/Edit",t)},i.Deletecharacter=function(t){return e.post(a+"/DeleteCharacter/?UserID="+t)},i.GetCorestats=function(t){return e.post(a+"/GetCorestatsByCharacter/?CharacterId="+t)},i.AddCorestatValues=function(t){var i=JSON.stringify(t);return e.post(a+"/CreateCorestatsValues",i)},i.GetLayouts=function(t){return e.get("/api/Layout/Get/?CharacterProfileId="+t)},i.GetNewCharacterInventory=function(){return e.get(a+"/GetNewCharacterInventory")},i.CreateCharacterInventoryItems=function(t){return e.post(a+"/CreateCharacterInventoryItems",t)},i.CreateCharacterInventorySpells=function(t){return e.post(a+"/CreateCharacterInventorySpells",t)},i.CreateCharacterInventoryAbility=function(t){return e.post(a+"/CreateCharacterInventoryAbility",t)},i.GetCharacterContent=function(t){return e.get(a+"/GetCharacterInventoryByCharacterProfileId/?CharacterProfileId="+t)},i.EditCharacterContent=function(t){return e.post(a+"/EditCharacterContentValues",t)},i.CopyCharacterContent=function(t){return e.post(a+"/CopyCharacterContentValues",t)},i.DeleteCharacterContent=function(t){return e.post(a+"/DeleteCharacterContentValues/?CharacterItemId="+t)},i.DeleteCharacterSpellContent=function(t){return e.post(a+"/DeleteCharacterSpellContentValues/?CharacterSpellId="+t)},i.DeleteCharacterAbilityContent=function(t){return e.post(a+"/DeleteCharacterAbilityContentValues/?CharacterAbilityId="+t)},i.UpdateItemEquipContent=function(t){return e.post(a+"/UpdateItemEquipContent",t)},i.UpdateSpellMemorizeContent=function(t){return e.post(a+"/UpdateSpellMemorizeContent",t)},i.UpdateAbilityEnabledContent=function(t){return e.post(a+"/UpdateAbilityEnabledContent",t)},i.GetCharacterItemContent=function(t){return e.get(a+"/GetCharacterItemInventoryByCharacterProfileId/?CharacterProfileId="+t)},i.GetCharacterSpellContent=function(t){return e.get(a+"/GetCharacterSpellInventoryByCharacterProfileId/?CharacterProfileId="+t)},i.GetCharacterAbilityContent=function(t){return e.get(a+"/GetCharacterAbilityInventoryByCharacterProfileId/?CharacterProfileId="+t)},i.CreateItemInventorytile=function(t){return e.post(a+"/CreateCharacterInventoryItemTiles",t)},i.CreateSpellInventorytile=function(t){return e.post(a+"/CreateCharacterInventorySpellTiles",t)},i.CreateAbilityInventorytile=function(t){return e.post(a+"/CreateCharacterInventoryAbilityTiles",t)},i.uploadFileToUrl=function(t,a,i){var l=new FormData;return l.append("filedata",a),l.append("characterProfileId",t),l.append("filename",i),e.post("/api/CharecterRuleSetImportExport/Import",l,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},i}])}(),function(){"use strict";angular.module("rpgsmith-services").factory("dataContext",[function(){return{profile:null,character:null,layout:null}}])}(),function(){"use strict";angular.module("rpgsmith-services").factory("rulesetDataShareService",[function(){function e(e){ge=e}function t(){return ge}function a(e){be=e}function i(){return be}function l(e){he=e}function o(){return he}function s(e){ve=e}function n(){return ve}function r(e){fe=e}function c(e){return fe}function d(e){ye=e}function u(e){return ye}function p(e){Se=e}function m(e){return Se}function g(e){we=e}function b(e){return we}function h(e){Ce=e}function v(e){return Ce}function f(e){Ie=e}function y(e){return Ie}function S(e){Fe=e}function w(e){return Fe}function C(e){_e=e}function I(e){return _e}function x(e){Ge=e}function T(e){return Ge}function P(e){We=e}function A(e){return We}function k(e){je=e}function N(e){return je}function R(e){He=e}function V(e){return He}function L(e){$e.push(e),localStorage.setItem("Tilelst",JSON.stringify($e))}function D(){return $e}function E(e){Oe=e}function M(){return Oe}function O(e){xe=e}function $(){return xe}function U(e){Te=e}function B(){return Te}function F(e){Pe=e}function _(){return Pe}function G(e){Ae=e}function j(){return Ae}function H(e){ke=e}function q(){return ke}function z(e){Ve=e}function W(){return Ve}function Y(e){Ne=e}function X(){return Ne}function J(e){Re=e}function Q(){return Re}function K(e){Le=e}function Z(){return Le}function ee(e){De=e}function te(){return De}function ae(e){Ee=e}function ie(){return Ee}function le(e){Me=e}function oe(){return Me}function se(e){Ue=e}function ne(){return Ue}function re(e){Be=e}function ce(){return Be}function de(e){qe=e}function ue(){return qe}function pe(e){ze=e}function me(){return ze}var ge={},be={},he={},ve={},fe={},ye={},Se={},we={},Ce={},Ie={},xe={},Te={},Pe={},Ae={},ke={},Ne={},Re={},Ve={},Le={},De={},Ee={},Me={},Oe={},$e=[],Ue={},Be={},Fe={},_e={},Ge={},je={},He={},qe={},ze={},We={};return{setRulesetData:a,getRulesetData:i,setLayoutData:s,getLayoutData:n,setloginData:e,getloginData:t,setCharacterLayoutsData:l,getCharacterLayoutsData:o,setLayoutItemInventoryData:r,getLayoutItemInventoryData:c,setLayoutSpellInventoryData:d,getLayoutSpellInventoryData:u,setLayoutAbilityInventoryData:p,getLayoutAbilityInventoryData:m,setLayoutRulesetItemInventoryData:g,getLayoutRulesetItemInventoryData:b,setLayoutRulesetSpellInventoryData:h,getLayoutRulesetSpellInventoryData:v,setLayoutRulesetAbilityInventoryData:f,getLayoutRulesetAbilityInventoryData:y,setLayoutItemInventoryMetaData:S,getLayoutItemInventoryMetaData:w,setLayoutSpellInventoryMetaData:C,getLayoutSpellInventoryMetaData:I,setLayoutAbilityInventoryMetaData:x,getLayoutAbilityInventoryMetaData:T,setTilelst:L,getTilelst:D,setTileStyles:E,getTileStyles:M,setRulesetItems:O,getRulesetItems:$,setRulesetSpells:U,getRulesetSpells:B,setRulesetAbilities:F,getRulesetAbilities:_,setruleset:G,getruleset:j,setcorestat:H,getcorestat:q,setcorestatvalue:z,getcorestatvalue:W,setlayoutmetadata:Y,getlayoutmetadata:X,setnewlayout:J,getnewlayout:Q,setcharacterRulesetitems:K,getcharacterRulesetitems:Z,setSelectedRulesetitems:ee,getSelectedRulesetitems:te,setInventory:ae,getInventory:ie,setItemProperties:le,getItemProperties:oe,setRulesetcontent:se,getRulesetcontent:ne,setRulesetspellcontent:re,getRulesetspellcontent:ce,setLinkTileData:P,getLinkTileData:A,setRulesetsData:k,getRulesetsData:N,setRpgtypeData:R,getRpgtypeData:V,SetDisplayCharacterRulesetCount:de,getDisplayCharacterRulesetCount:ue,setImageandName:pe,getImageandName:me}}])}(),function(){"use strict";angular.module("rpgsmith-services").factory("layoutService",["$http","$rootScope","$state","$localStorage","authService",function(e,t,a,i,l){var o={};return o.topNav={},o.create=function(t){return e.post("/api/Layout/Create",t)},o.update=function(t){return e.post("/api/Layout/Update",t)},o.copyLayout=function(t){return e.post("/api/Layout/Copy",t)},o.GetNewLayout=function(){return e.get("/api/Layout/GetNewLayout")},o.loadLayout=function(t){var a={LayoutId:t};return e.post("/api/Layout/GetLayouByLayoutId",a)},o.GetDice=function(t){return e.get("/api/Layout/GetDiceList/?characterProfileId="+t)},o.SaveDice=function(t){return e.post("/api/Layout/SaveVirtualDice",t)},o.deleteLayout=function(t){return e.post("/api/Layout/DeleteLayout",t)},o.GetDefaultDice=function(t){return e.get("/api/Layout/GetDefaultDiceByCharacter/?CharacterProfileID="+t)},o.GetCharacterLayouts=function(t){return e.get("/api/Layout/Get/?CharacterProfileId="+t)},o}])}(),function(){"use strict";angular.module("rpgsmith-services").factory("navService",["$rootScope","$state","$localStorage","authService","rulesetDataShareService",function(e,t,a,i,l){var o={},s={};s.topNav={};var n=function(e){return t.current.url+"/"+e};return s.setLastCharacterId=function(e){a.lastCharacterId=e},s.setLastLayoutId=function(e,t){var i=a.lastLayouts||{},l=i[e]||[],o=l.find(function(e){return e.layoutId===t});o?o.dt=Date.now():l.push({layoutId:t,pageId:null}),i[e]=l,a.lastLayouts=i},s.setLastTabId=function(e,t,i){var l=a.lastLayouts||{},o=l[e]||[],s=o.find(function(e){return e.layoutId===t});s?(s.dt=Date.now(),s.pageId=i):o.push({dt:Date.now(),layoutId:t,pageId:i}),l[e]=o,a.lastLayouts=l},s.getLastCharacterId=function(){return a.lastCharacterId},s.getLastLayoutId=function(e){var t=s.getLastLayout(e);return t?t.layoutId:null},s.getLastPageId=function(e,t){if(a.lastLayouts&&t.tabs&&t.tabs.length){var i=a.lastLayouts[e.id]||[],l=i.find(function(e){return e.layoutId===t.id});if(l){var o=t.tabs.find(function(e){return e.id===l.pageId});if(o)return o.id}return t.tabs[0].id}return null},s.getLastLayout=function(e){if(a.lastLayouts){var t=a.lastLayouts[e.id]||[];if(t.length){if(e.layouts&&e.layouts.length){for(var i=t.sort(function(e,t){return t.dt-e.dt}),l=null;i.length;){if(e.layouts.find(function(e){return e.id===i[0].layoutId})){l=i[0];break}i.shift()}return a.lastLayouts[e.id]=i,l}a.lastLayouts[e.id]=[]}}return null},s.gotoRegisterSuccess=function(e){return t.go("RegisterSuccess",null,{location:"replace"})},s.gotoCharacters=function(e){return t.go("profile.characters",null,{location:"replace"})},s.NewRuleSet=function(){return t.go("profile.NewRuleSet",{location:"replace"})},s.ExistingRuleSet=function(){return t.go("profile.ExistingRuleSet",{location:"replace"})},s.gotoLayouts=function(e,a){return t.go("profile.character.layouts",{characterId:e},{location:"replace"})},s.gotoLayout=function(e,a,i,l){return t.go("profile.character.layout",{characterId:e,layoutId:a,pageId:i},{location:"replace"})},s.setHeader=function(e){s.topNav.header=e},s.updateBody=function(t,a){var i=null,l=null;a?(i="navbar-2",l="navbar-1"):t?(i="navbar-1",l="navbar-2"):l="navbar-1 navbar2",e.$emit("rpgsmithSetBodyClass",{add:i,remove:l})},s.logout=function(){i.logout()},s.registerNav=function(e,t){o[n(e)]=t},s.hasNav=function(e){return o.hasOwnProperty(n(e))},s.toggleNav=function(e){var t=o[n(e)];t&&(t.opened=!t.opened)},s.getCommonHamburger=function(e){return[{id:"nav.profile",name:"Profile",icon:"fa-fw fa-user",action:function(){t.go("profile.characters")}},{id:"nav.signout",name:"Sign out",icon:"fa-fw fa-sign-out",action:function(){i.logout().then(function(e){if(200==e.data.StatusCode){var a={},i={},o={},s={};l.set(a),l.setspell(i),l.setability(o),l.setcorestat(s),localStorage.clear(),t.go("login")}else 400==e.data.StatusCode&&1==e.data.ShowToUser&&alert(e.data.ErrorMessage)})}}].concat(e||[])},s.getCommonCharacterNav=function(e){return[{id:"nav.notes",name:"Notes",icon:"fa-fw fa-sticky-note-o",action:function(){t.go("profile.character.notes",{characterId:t.params.characterId})}},{id:"nav.counters",name:"Counters",icon:"fa-fw fa-percent",action:function(){t.go("profile.character.counters",{characterId:t.params.characterId})}},{id:"nav.attributes",name:"Core Stats",icon:"fa-fw fa-user-circle-o",action:function(){t.go("profile.character.attributes",{characterId:t.params.characterId})}},{id:"nav.links",name:"Links",icon:"fa-fw fa-user-circle-o",action:function(){t.go("profile.character.links",{characterId:t.params.characterId})}},{id:"nav.attributes",name:"Executes",icon:"fa-fw fa-user-circle-o",action:function(){t.go("profile.character.executes",{characterId:t.params.characterId})}},{id:"nav.attributes",name:"Commands",icon:"fa-fw fa-user-circle-o",action:function(){t.go("profile.character.commands",{characterId:t.params.characterId})}},{id:"nav.characters",name:"Characters",icon:"fa-fw fa-users",action:function(){t.go("profile.characters")}}].concat(e||[])},s}])}(),function(){"use strict";angular.module("rpgsmith-services").factory("rulesetService",["$http",function(e){function t(){}function a(e,t,a){t=t||"",a=a||512;for(var i=atob(e),l=[],o=0;o<i.length;o+=a){for(var s=i.slice(o,o+a),n=new Array(s.length),r=0;r<s.length;r++)n[r]=s.charCodeAt(r);var c=new Uint8Array(n);l.push(c)}return new Blob(l,{type:t},name)}var i=new t;i.GetRuleSets=function(){return e.get("/api/RuleSet/Get")},i.GetNewRuleset=function(){return e.get("/api/RuleSet/GetNewRuleset")},i.GetNewRulesetByRuleSetId=function(t){return e({method:"get",url:"/api/RuleSet/GetRulesetByRuleSetId?RuleSetId="+t})},i.saveRuleSet=function(t){for(var i=[],l=angular.copy(t),o=0;o<l.Rulesetproperty.length;o++){var s=l.Rulesetproperty[o];if(2==o&&null!=s.Value.Image.image&&""!=s.Value.Image.image&&0==angular.isUndefined(s.Value.Image.image)){var n=s.Value.Image.image.split(";"),r=n[0].split(":")[1],c=n[1].split(",")[1],d=a(c,r),u=r.split("/"),p=u[1],m=Date.now(),g=new File([d],l.Name+"~"+l.UserId+m+"."+p,{type:r});i.push(g),s.Value.Image.image=l.Name+"~"+l.UserId+m+"."+p;break}}for(var o=0;o<l.Items.length;o++)for(var b=l.Items[o],h=0;h<b.ItemProperties.length;h++)if(1==h&&null!=b.ItemProperties[h].Value.Image.image&&""!=b.ItemProperties[h].Value.Image.image&&0==angular.isUndefined(b.ItemProperties[h].Value.Image.image)){var n=b.ItemProperties[h].Value.Image.image.split(";"),r=n[0].split(":")[1],c=n[1].split(",")[1],d=a(c,r),u=r.split("/"),p=u[1],m=Date.now(),g=new File([d],b.ItemProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p);i.push(g),b.ItemProperties[h].Value.Image.image=b.ItemProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p;break}for(var o=0;o<l.Spells.length;o++)for(var v=l.Spells[o],h=0;h<v.SpellProperties.length;h++)if(1==h&&null!=v.SpellProperties[h].Value.Image.image&&""!=v.SpellProperties[h].Value.Image.image&&0==angular.isUndefined(v.SpellProperties[h].Value.Image.image)){var n=v.SpellProperties[h].Value.Image.image.split(";"),r=n[0].split(":")[1],c=n[1].split(",")[1],d=a(c,r),u=r.split("/"),p=u[1],m=Date.now(),g=new File([d],v.SpellProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p);i.push(g),v.SpellProperties[h].Value.Image.image=v.SpellProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p;break}for(var o=0;o<l.Abilities.length;o++)for(var f=l.Abilities[o],h=0;h<f.AbilityProperties.length;h++)if(1==h&&null!=f.AbilityProperties[h].Value.Image.image&&""!=f.AbilityProperties[h].Value.Image.image&&0==angular.isUndefined(f.AbilityProperties[h].Value.Image.image)){var n=f.AbilityProperties[h].Value.Image.image.split(";"),r=n[0].split(":")[1],c=n[1].split(",")[1],d=a(c,r),u=r.split("/"),p=u[1],m=Date.now(),g=new File([d],f.AbilityProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p);i.push(g),f.AbilityProperties[h].Value.Image.image=f.AbilityProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p;break}var y=0==angular.isUndefined(y)?y:null;return e({url:"/api/RuleSet/Create",method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;t.append("ruleSetViewModel",angular.toJson(e.ruleSetViewModel));for(var a=0;a<e.clientImages.length;a++)t.append("clientImages["+a+"]",e.clientImages[a]);return t},data:{ruleSetViewModel:l,clientImages:i}})},i.updateRuleSet=function(t){for(var i=[],l=angular.copy(t),o=0;o<l.Rulesetproperty.length;o++){var s=l.Rulesetproperty[o];if(2==o&&null!=s.Value.Image.image&&""!=s.Value.Image.image&&0==angular.isUndefined(s.Value.Image.image)){if(0==s.Value.Image.image.includes("wwwroot")){var n=s.Value.Image.image.split(";"),r=n[0].split(":")[1],c=n[1].split(",")[1],d=a(c,r),u=r.split("/"),p=u[1],m=Date.now(),g=new File([d],l.Name+"~"+l.UserId+m+"."+p,{type:r});i.push(g),s.Value.Image.image=l.Name+"~"+l.UserId+m+"."+p}break}}
for(var o=0;o<l.Items.length;o++)for(var b=l.Items[o],h=0;h<b.ItemProperties.length;h++)if(1==h&&null!=b.ItemProperties[h].Value.Image.image&&""!=b.ItemProperties[h].Value.Image.image&&0==angular.isUndefined(b.ItemProperties[h].Value.Image.image)){if(0==b.ItemProperties[h].Value.Image.image.includes("wwwroot")){var n=b.ItemProperties[h].Value.Image.image.split(";"),r=n[0].split(":")[1],c=n[1].split(",")[1],d=a(c,r),u=r.split("/"),p=u[1],m=Date.now(),g=new File([d],b.ItemProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p);i.push(g),b.ItemProperties[h].Value.Image.image=b.ItemProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p}break}for(var o=0;o<l.Spells.length;o++)for(var v=l.Spells[o],h=0;h<v.SpellProperties.length;h++)if(1==h&&null!=v.SpellProperties[h].Value.Image.image&&""!=v.SpellProperties[h].Value.Image.image&&0==angular.isUndefined(v.SpellProperties[h].Value.Image.image)){if(0==v.SpellProperties[h].Value.Image.image.includes("wwwroot")){var n=v.SpellProperties[h].Value.Image.image.split(";"),r=n[0].split(":")[1],c=n[1].split(",")[1],d=a(c,r),u=r.split("/"),p=u[1],m=Date.now(),g=new File([d],v.SpellProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p);i.push(g),v.SpellProperties[h].Value.Image.image=v.SpellProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p}break}for(var o=0;o<l.Abilities.length;o++)for(var f=l.Abilities[o],h=0;h<f.AbilityProperties.length;h++)if(1==h&&null!=f.AbilityProperties[h].Value.Image.image&&""!=f.AbilityProperties[h].Value.Image.image&&0==angular.isUndefined(f.AbilityProperties[h].Value.Image.image)){if(0==f.AbilityProperties[h].Value.Image.image.includes("wwwroot")){var n=f.AbilityProperties[h].Value.Image.image.split(";"),r=n[0].split(":")[1],c=n[1].split(",")[1],d=a(c,r),u=r.split("/"),p=u[1],m=Date.now(),g=new File([d],f.AbilityProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p);i.push(g),f.AbilityProperties[h].Value.Image.image=f.AbilityProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p}break}var y=0==angular.isUndefined(y)?y:null;return e({url:"/api/RuleSet/Update",method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;t.append("ruleSetViewModel",angular.toJson(e.ruleSetViewModel));for(var a=0;a<e.clientImages.length;a++)t.append("clientImages["+a+"]",e.clientImages[a]);return t},data:{ruleSetViewModel:l,clientImages:i}})},i.copyRuleSet=function(t){for(var i=[],l=angular.copy(t),o=0;o<l.Rulesetproperty.length;o++){var s=l.Rulesetproperty[o];if(2==o&&null!=s.Value.Image.image&&""!=s.Value.Image.image&&0==angular.isUndefined(s.Value.Image.image)){if(0==s.Value.Image.image.includes("wwwroot")){var n=s.Value.Image.image.split(";"),r=n[0].split(":")[1],c=n[1].split(",")[1],d=a(c,r),u=r.split("/"),p=u[1],m=Date.now(),g=new File([d],l.Name+"~"+l.UserId+m+"."+p,{type:r});i.push(g),s.Value.Image.image=l.Name+"~"+l.UserId+m+"."+p}break}}for(var o=0;o<l.Items.length;o++)for(var b=l.Items[o],h=0;h<b.ItemProperties.length;h++)if(1==h&&null!=b.ItemProperties[h].Value.Image.image&&""!=b.ItemProperties[h].Value.Image.image&&0==angular.isUndefined(b.ItemProperties[h].Value.Image.image)){if(0==b.ItemProperties[h].Value.Image.image.includes("wwwroot")){var n=b.ItemProperties[h].Value.Image.image.split(";"),r=n[0].split(":")[1],c=n[1].split(",")[1],d=a(c,r),u=r.split("/"),p=u[1],m=Date.now(),g=new File([d],b.ItemProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p);i.push(g),b.ItemProperties[h].Value.Image.image=b.ItemProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p}break}for(var o=0;o<l.Spells.length;o++)for(var v=l.Spells[o],h=0;h<v.SpellProperties.length;h++)if(1==h&&null!=v.SpellProperties[h].Value.Image.image&&""!=v.SpellProperties[h].Value.Image.image&&0==angular.isUndefined(v.SpellProperties[h].Value.Image.image)){if(0==v.SpellProperties[h].Value.Image.image.includes("wwwroot")){var n=v.SpellProperties[h].Value.Image.image.split(";"),r=n[0].split(":")[1],c=n[1].split(",")[1],d=a(c,r),u=r.split("/"),p=u[1],m=Date.now(),g=new File([d],v.SpellProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p);i.push(g),v.SpellProperties[h].Value.Image.image=v.SpellProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p}break}for(var o=0;o<l.Abilities.length;o++)for(var f=l.Abilities[o],h=0;h<f.AbilityProperties.length;h++)if(1==h&&null!=f.AbilityProperties[h].Value.Image.image&&""!=f.AbilityProperties[h].Value.Image.image&&0==angular.isUndefined(f.AbilityProperties[h].Value.Image.image)){if(0==f.AbilityProperties[h].Value.Image.image.includes("wwwroot")){var n=f.AbilityProperties[h].Value.Image.image.split(";"),r=n[0].split(":")[1],c=n[1].split(",")[1],d=a(c,r),u=r.split("/"),p=u[1],m=Date.now(),g=new File([d],f.AbilityProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p);i.push(g),f.AbilityProperties[h].Value.Image.image=f.AbilityProperties[0].Value.Text.value+"~"+l.UserId+m+"."+p}break}var y=0==angular.isUndefined(y)?y:null;return e({url:"/api/RuleSet/Copy",method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;t.append("ruleSetViewModel",angular.toJson(e.ruleSetViewModel));for(var a=0;a<e.clientImages.length;a++)t.append("clientImages["+a+"]",e.clientImages[a]);return t},data:{ruleSetViewModel:l,clientImages:i}})},i.GetTypes=function(){return e.get("/api/RPGSmithType/GetRPGSmithTypeForCoreStat")},i.DeleteRuleSet=function(t){var a={RuleSetID:t};return e.post("/api/RuleSet/Delete",a)},i.GetCoreStatById=function(t){return e({method:"post",url:"/api/RuleSet/GetCoreStatsByCoreStatId",params:{CoreStatID:JSON.stringify(t)}})},i.GetRuleSetItemsForItemInventory=function(t){return e.post("/api/RuleSet/GetRuleSetItemsByCharacterProfileId?CharacterProfileId="+t)},i.GetRuleSetSpellsForSpellInventory=function(t){return e.post("/api/RuleSet/GetRuleSetSpellsByCharacterProfileId?CharacterProfileId="+t)},i.GetRuleSetAbilitiesForAbilityInventory=function(t){return e.post("/api/RuleSet/GetRuleSetAbilitiesByCharacterProfileId?CharacterProfileId="+t)},i.GetRuleSetForLinkTile=function(t){return e.post("/api/RuleSet/GetRuleSetByCharacterProfileId?CharacterProfileId="+t)},i.ExportRuleset=function(e){location.href="/api/RuleSetImportExport/Export?RuleSetID="+e};var a=function(e,t,a){t=t||"",a=a||512;for(var i=atob(e),l=[],o=0;o<i.length;o+=a){for(var s=i.slice(o,o+a),n=new Array(s.length),r=0;r<s.length;r++)n[r]=s.charCodeAt(r);var c=new Uint8Array(n);l.push(c)}return new Blob(l,{type:t})};return i.uploadFileToUrl=function(t,a,i,l){var o=new FormData;return o.append("filedata",a),o.append("rulesetId",t),o.append("filename",i),o.append("RuleSetName",l),e.post("/api/RuleSetImportExport/Import",o,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},i.GetAllRuleSets=function(){return e.get("/api/RuleSet/GetRulesetsByUserId")},i.CopyRulesetByRulesetId=function(t,a){return e.post("/api/RuleSet/CopyRulesetByRulesetId?RulesetId="+t+"&Name="+a)},i.GetRuleSetGeneralSettings=function(t){return e.post("/api/RuleSet/GetRulesetGeneralSettingsByRulesetId?RulesetId="+t)},i.GetGeneralSettingsMetadata=function(){return e.get("/api/RuleSet/GetGeneralSettingsMetaData")},i.CreateGeneralSettings=function(t){for(var i=[],l=angular.copy(t),o=0;o<t.length;o++){var s=l[o];if(2==o&&null!=s.Value.Image.image&&""!=s.Value.Image.image&&0==angular.isUndefined(s.Value.Image.image)){var n=s.Value.Image.image.split(";"),r=n[0].split(":")[1],c=n[1].split(",")[1],d=a(c,r),u=r.split("/"),p=u[1],m=Date.now(),g=new File([d],l[0].RulesetName+"~"+m+"."+p,{type:r});i.push(g),s.Value.Image.image=l[0].RulesetName+"~"+m+"."+p;break}}var b=0==angular.isUndefined(b)?b:null;return e({url:"/api/RuleSet/CreateRulesetGeneralSettings",method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;t.append("_rulesetProperty",angular.toJson(e._rulesetProperty));for(var a=0;a<e.clientImages.length;a++)t.append("clientImages["+a+"]",e.clientImages[a]);return t},data:{_rulesetProperty:l,clientImages:i}})},i.UpdateGeneralSettings=function(t){for(var i=[],l=angular.copy(t),o=0;o<t.length;o++){var s=l[o];if(2==o&&null!=s.Value.Image.image&&""!=s.Value.Image.image&&0==angular.isUndefined(s.Value.Image.image)){if(0==s.Value.Image.image.includes("wwwroot")){var n=s.Value.Image.image.split(";"),r=n[0].split(":")[1],c=n[1].split(",")[1],d=a(c,r),u=r.split("/"),p=u[1],m=Date.now(),g=new File([d],l.Name+"~"+l.UserId+m+"."+p,{type:r});i.push(g),s.Value.Image.image=l.Name+"~"+l.UserId+m+"."+p}break}}var b=0==angular.isUndefined(b)?b:null;return e({url:"/api/RuleSet/UpdateRulesetGeneralSettings",method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;t.append("_updateGeneralSettings",angular.toJson(e._updateGeneralSettings));for(var a=0;a<e.clientImages.length;a++)t.append("clientImages["+a+"]",e.clientImages[a]);return t},data:{_updateGeneralSettings:l,clientImages:i}})},i.GetRulesetCorestats=function(t){return e.post("/api/RuleSet/GetCorestatsByRulesetId?RulesetId="+t)},i.GetCorestatsMetadata=function(){return e.get("/api/RuleSet/GetCorestatsMetadata")},i.CreateCorestats=function(t){return e.post("/api/RuleSet/CreateCorestats",t)},i.UpdateCorestats=function(t){return e.post("/api/RuleSet/UpdateCorestats",t)},i.CopyCorestats=function(t){return e.post("/api/RuleSet/CopyCorestats",t)},i.DeleteCorestats=function(t){return e.post("/api/RuleSet/DeleteCorestats",t)},i.GetRulesetItems=function(t){return e.get("/api/RuleSet/GetRulesetItemsByRulesetId/?RUlesetId="+t)},i.GetItemsMetadata=function(t){return e({method:"post",url:"/api/RuleSet/GetRulesetItemsMetadata",params:{RulesetId:JSON.stringify(t)}})},i.CreateItems=function(t){for(var i=[],l=angular.copy(t),o=0;o<t.length;o++)for(var s=l[o],n=0;n<s.ItemProperties.length;n++)if(1==n&&null!=s.ItemProperties[n].Value.Image.image&&""!=s.ItemProperties[n].Value.Image.image&&0==angular.isUndefined(s.ItemProperties[n].Value.Image.image)){var r=s.ItemProperties[n].Value.Image.image.split(";"),c=r[0].split(":")[1],d=r[1].split(",")[1],u=a(d,c),p=c.split("/"),m=p[1],g=Date.now(),b=new File([u],s.ItemProperties[0].Value.Text.value+"~"+g+"."+m);i.push(b),s.ItemProperties[n].Value.Image.image=s.ItemProperties[0].Value.Text.value+"~"+g+"."+m;break}var h=0==angular.isUndefined(h)?h:null;return e({url:"/api/RuleSet/CreateRulesetItems",method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;t.append("_rulesetItems",angular.toJson(e._rulesetItems));for(var a=0;a<e.clientImages.length;a++)t.append("clientImages["+a+"]",e.clientImages[a]);return t},data:{_rulesetItems:l,clientImages:i}})},i.UpdateItems=function(t){for(var i=[],l=angular.copy(t),o=0;o<t.length;o++)for(var s=l[o],n=0;n<s.ItemProperties.length;n++)if(1==n&&null!=s.ItemProperties[n].Value.Image.image&&""!=s.ItemProperties[n].Value.Image.image&&0==angular.isUndefined(s.ItemProperties[n].Value.Image.image)){if(0==s.ItemProperties[n].Value.Image.image.includes("wwwroot")){var r=s.ItemProperties[n].Value.Image.image.split(";"),c=r[0].split(":")[1],d=r[1].split(",")[1],u=a(d,c),p=c.split("/"),m=p[1],g=Date.now(),b=new File([u],s.ItemProperties[0].Value.Text.value+"~"+l.UserId+g+"."+m);i.push(b),s.ItemProperties[n].Value.Image.image=s.ItemProperties[0].Value.Text.value+"~"+l.UserId+g+"."+m}break}var h=0==angular.isUndefined(h)?h:null;return e({url:"/api/RuleSet/UpdateRulesetItems",method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;t.append("_updateItems",angular.toJson(e._updateItems));for(var a=0;a<e.clientImages.length;a++)t.append("clientImages["+a+"]",e.clientImages[a]);return t},data:{_updateItems:l,clientImages:i}})},i.CopyItems=function(t){for(var i=[],l=angular.copy(t),o=0;o<t.length;o++)for(var s=l[o],n=0;n<s.ItemProperties.length;n++)if(1==n&&null!=s.ItemProperties[n].Value.Image.image&&""!=s.ItemProperties[n].Value.Image.image&&0==angular.isUndefined(s.ItemProperties[n].Value.Image.image)){if(0==s.ItemProperties[n].Value.Image.image.includes("wwwroot")){var r=s.ItemProperties[n].Value.Image.image.split(";"),c=r[0].split(":")[1],d=r[1].split(",")[1],u=a(d,c),p=c.split("/"),m=p[1],g=Date.now(),b=new File([u],s.ItemProperties[0].Value.Text.value+"~"+l.UserId+g+"."+m);i.push(b),s.ItemProperties[n].Value.Image.image=s.ItemProperties[0].Value.Text.value+"~"+l.UserId+g+"."+m}break}var h=0==angular.isUndefined(h)?h:null;return e({url:"/api/RuleSet/CopyRulesetItems",method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;t.append("_copyItems",angular.toJson(e._copyItems));for(var a=0;a<e.clientImages.length;a++)t.append("clientImages["+a+"]",e.clientImages[a]);return t},data:{_copyItems:l,clientImages:i}})},i.DeleteItems=function(t){return e.post("/api/RuleSet/DeleteItem",t)},i.GetRulesetSpells=function(t){return e.get("/api/RuleSet/GetRulesetSpellsByRulesetId/?RUlesetId="+t)},i.GetSpellsMetadata=function(t){return e({method:"post",url:"/api/RuleSet/GetRulesetSpellsMetadata",params:{RulesetId:JSON.stringify(t)}})},i.CreateSpells=function(t){for(var i=[],l=angular.copy(t),o=0;o<t.length;o++)for(var s=l[o],n=0;n<s.SpellProperties.length;n++)if(1==n&&null!=s.SpellProperties[n].Value.Image.image&&""!=s.SpellProperties[n].Value.Image.image&&0==angular.isUndefined(s.SpellProperties[n].Value.Image.image)){var r=s.SpellProperties[n].Value.Image.image.split(";"),c=r[0].split(":")[1],d=r[1].split(",")[1],u=a(d,c),p=c.split("/"),m=p[1],g=Date.now(),b=new File([u],s.SpellProperties[0].Value.Text.value+"~"+g+"."+m);i.push(b),s.SpellProperties[n].Value.Image.image=s.SpellProperties[0].Value.Text.value+"~"+g+"."+m;break}var h=0==angular.isUndefined(h)?h:null;return e({url:"/api/RuleSet/CreateRulesetSpells",method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;t.append("_rulesetSpells",angular.toJson(e._rulesetSpells));for(var a=0;a<e.clientImages.length;a++)t.append("clientImages["+a+"]",e.clientImages[a]);return t},data:{_rulesetSpells:l,clientImages:i}})},i.UpdateSpells=function(t){for(var i=[],l=angular.copy(t),o=0;o<t.length;o++)for(var s=l[o],n=0;n<s.SpellProperties.length;n++)if(1==n&&null!=s.SpellProperties[n].Value.Image.image&&""!=s.SpellProperties[n].Value.Image.image&&0==angular.isUndefined(s.SpellProperties[n].Value.Image.image)){if(0==s.SpellProperties[n].Value.Image.image.includes("wwwroot")){var r=s.SpellProperties[n].Value.Image.image.split(";"),c=r[0].split(":")[1],d=r[1].split(",")[1],u=a(d,c),p=c.split("/"),m=p[1],g=Date.now(),b=new File([u],s.SpellProperties[0].Value.Text.value+"~"+g+"."+m);i.push(b),s.SpellProperties[n].Value.Image.image=s.SpellProperties[0].Value.Text.value+"~"+g+"."+m}break}var h=0==angular.isUndefined(h)?h:null;return e({url:"/api/RuleSet/UpdateRulesetSpells",method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;t.append("_updateSpells",angular.toJson(e._updateSpells));for(var a=0;a<e.clientImages.length;a++)t.append("clientImages["+a+"]",e.clientImages[a]);return t},data:{_updateSpells:l,clientImages:i}})},i.CopySpells=function(t){for(var i=[],l=angular.copy(t),o=0;o<t.length;o++)for(var s=t[o],n=0;n<s.SpellProperties.length;n++)if(1==n&&null!=s.SpellProperties[n].Value.Image.image&&""!=s.SpellProperties[n].Value.Image.image&&0==angular.isUndefined(s.SpellProperties[n].Value.Image.image)){if(0==s.SpellProperties[n].Value.Image.image.includes("wwwroot")){var r=s.SpellProperties[n].Value.Image.image.split(";"),c=r[0].split(":")[1],d=r[1].split(",")[1],u=a(d,c),p=c.split("/"),m=p[1],g=Date.now(),b=new File([u],s.SpellProperties[0].Value.Text.value+"~"+l.UserId+g+"."+m);i.push(b),s.SpellProperties[n].Value.Image.image=s.SpellProperties[0].Value.Text.value+"~"+l.UserId+g+"."+m}break}var h=0==angular.isUndefined(h)?h:null;return e({url:"/api/RuleSet/CopyRulesetSpells",method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;t.append("_copySpells",angular.toJson(e._copySpells));for(var a=0;a<e.clientImages.length;a++)t.append("clientImages["+a+"]",e.clientImages[a]);return t},data:{_copySpells:l,clientImages:i}})},i.DeleteSpells=function(t){return e.post("/api/RuleSet/DeleteSpell",t)},i.GetRulesetAbilities=function(t){return e.get("/api/RuleSet/GetRulesetAbilitiesByRulesetId/?RUlesetId="+t)},i.GetAbilitiesMetadata=function(t){return e({method:"post",url:"/api/RuleSet/GetRulesetAbilitiesMetadata",params:{RulesetId:JSON.stringify(t)}})},i.CreateAbilities=function(t){for(var i=[],l=angular.copy(t),o=0;o<t.length;o++)for(var s=l[o],n=0;n<s.AbilityProperties.length;n++)if(1==n&&null!=s.AbilityProperties[n].Value.Image.image&&""!=s.AbilityProperties[n].Value.Image.image&&0==angular.isUndefined(s.AbilityProperties[n].Value.Image.image)){var r=s.AbilityProperties[n].Value.Image.image.split(";"),c=r[0].split(":")[1],d=r[1].split(",")[1],u=a(d,c),p=c.split("/"),m=p[1],g=Date.now(),b=new File([u],s.AbilityProperties[0].Value.Text.value+"~"+g+"."+m);i.push(b),s.AbilityProperties[n].Value.Image.image=s.AbilityProperties[0].Value.Text.value+"~"+g+"."+m;break}var h=0==angular.isUndefined(h)?h:null;return e({url:"/api/RuleSet/CreateRulesetAbilities",method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;t.append("_rulesetAbilities",angular.toJson(e._rulesetAbilities));for(var a=0;a<e.clientImages.length;a++)t.append("clientImages["+a+"]",e.clientImages[a]);return t},data:{_rulesetAbilities:l,clientImages:i}})},i.UpdateAbilities=function(t){for(var i=[],l=angular.copy(t),o=0;o<t.length;o++)for(var s=l[o],n=0;n<s.AbilityProperties.length;n++)if(1==n&&null!=s.AbilityProperties[n].Value.Image.image&&""!=s.AbilityProperties[n].Value.Image.image&&0==angular.isUndefined(s.AbilityProperties[n].Value.Image.image)){if(0==s.AbilityProperties[n].Value.Image.image.includes("wwwroot")){var r=s.AbilityProperties[n].Value.Image.image.split(";"),c=r[0].split(":")[1],d=r[1].split(",")[1],u=a(d,c),p=c.split("/"),m=p[1],g=Date.now(),b=new File([u],s.AbilityProperties[0].Value.Text.value+"~"+g+"."+m);i.push(b),s.AbilityProperties[n].Value.Image.image=s.AbilityProperties[0].Value.Text.value+"~"+g+"."+m}break}var h=0==angular.isUndefined(h)?h:null;return e({url:"/api/RuleSet/UpdateRulesetAbilities",method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;t.append("_updateAbilities",angular.toJson(e._updateAbilities));for(var a=0;a<e.clientImages.length;a++)t.append("clientImages["+a+"]",e.clientImages[a]);return t},data:{_updateAbilities:l,clientImages:i}})},i.CopyAbilities=function(t){for(var i=[],l=angular.copy(t),o=0;o<t.length;o++)for(var s=t[o],n=0;n<s.AbilityProperties.length;n++)if(1==n&&null!=s.AbilityProperties[n].Value.Image.image&&""!=s.AbilityProperties[n].Value.Image.image&&0==angular.isUndefined(s.AbilityProperties[n].Value.Image.image)){if(0==s.AbilityProperties[n].Value.Image.image.includes("wwwroot")){var r=s.AbilityProperties[n].Value.Image.image.split(";"),c=r[0].split(":")[1],d=r[1].split(",")[1],u=a(d,c),p=c.split("/"),m=p[1],g=Date.now(),b=new File([u],s.AbilityProperties[0].Value.Text.value+"~"+l.UserId+g+"."+m);i.push(b),s.AbilityProperties[n].Value.Image.image=s.AbilityProperties[0].Value.Text.value+"~"+l.UserId+g+"."+m}break}var h=0==angular.isUndefined(h)?h:null;return e({url:"/api/RuleSet/CopyRulesetAbilities",method:"POST",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;t.append("_copyAbilities",angular.toJson(e._copyAbilities));for(var a=0;a<e.clientImages.length;a++)t.append("clientImages["+a+"]",e.clientImages[a]);return t},data:{_copyAbilities:l,clientImages:i}})},i.DeleteAbilities=function(t){return e.post("/api/RuleSet/DeleteAbility",t)},i.GetTilesMetadataForRuleset=function(){return e.get("/api/RuleSet/GetTilesMetadataForRuleset")},i.SaveRulesetTiles=function(t){return e.post("/api/RuleSet/SaveOrUpdateRulesetContentTiles",t)},i}])}(),function(){"use strict";angular.module("rpgsmith-services").factory("tabService",["$http","$rootScope","$state","$localStorage","authService",function(e,t,a,i,l){var o={};return o.topNav={},o.GetTabs=function(t){return e.get("/api/Tab/GetTabListByLayoutId/?LayoutId="+t)},o.AddTab=function(t){return e.post("/api/Tab/Create",t)},o.UpdateTab=function(t){return e.post("/api/Tab/Update",t)},o.deleteTab=function(t){return e.post("/api/Tab/DeleteTab",t)},o}])}(),function(){"use strict";angular.module("rpgsmith-services").factory("tileService",["$http","$rootScope","$state","$localStorage","authService",function(e,t,a,i,l){var o={};return o.topNav={},o.GetTileTypes=function(){return e.get("/api/Tile/GetTileTypes")},o.AddTile=function(t){return e.post("/api/Tile/Create",t)},o.UpdateTile=function(t){return e.post("/api/Tile/Update",t)},o.deleteTile=function(t){return e.post("/api/Tile/DeleteTile",t)},o.GetAllTileTypesRelatedCharacter=function(t){var a={CharacterProfileID:t};return e.post("/api/Tile/GetAllTileTypesRelatedCharacter",a)},o}])}(),tinymce.PluginManager.add("rpgsbackgroundcolor",function(e){function t(t){return e.getContentAreaContainer().style.backgroundColor}function a(t){var a,i,l=[];for(i=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","500000","Maroon","FF6600","Orange","805000","Olive","005000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","500080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],i=e.settings.textcolor_map||i,i=e.settings[t+"_map"]||i,a=0;a<i.length;a+=2)l.push({text:i[a+1],color:"#"+i[a]});return l}function i(){function t(e,t){var a="initial"==e;return'<td class="mce-grid-cell'+(a?" mce-colorbtn-trans":"")+'"><div id="'+g+"-"+b+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+tinymce.translate(t)+'">'+(a?"&#215;":"")+"</div></td>"}var i,l,o,s,n,d,u,p,m=this,g=m._id,b=0;for(p=m.settings.origin,i=a(p),i.push({text:tinymce.translate("No color"),color:"initial"}),o='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',s=i.length-1,d=0;d<c[p];d++){for(o+="<tr>",n=0;n<r[p];n++)u=d*r[p]+n,u>s?o+="<td></td>":(l=i[u],o+=t(l.color,l.text));o+="</tr>"}if(e.settings.color_picker_callback){for(o+='<tr><td colspan="'+r[p]+'" class="mce-custom-color-btn"><div id="'+g+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+g+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+tinymce.translate("Custom...")+"</button></div></td></tr>",o+="<tr>",n=0;n<r[p];n++)o+=t("","Custom color");o+="</tr>"}return o+="</tbody></table>"}function l(t,a){e.undoManager.transact(function(){e.getContentAreaContainer().style.backgroundColor=a})}function o(t){e.undoManager.transact(function(){e.getContentAreaContainer().style.backgroundColor=null})}function s(a){function i(e){d.hidePanel(),d.color(e),l(d.settings.format,e)}function s(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)}var n,c,d=this.parent();c=d.settings.origin,tinymce.DOM.getParent(a.target,".mce-custom-color-btn")&&(d.hidePanel(),e.settings.color_picker_callback.call(e,function(e){var t,a,l,o=d.panel.getEl().getElementsByTagName("table")[0];for(t=tinymce.map(o.rows[o.rows.length-1].childNodes,function(e){return e.firstChild}),l=0;l<t.length&&(a=t[l],a.getAttribute("data-mce-color"));l++);if(l==r[c])for(l=0;l<r[c]-1;l++)s(t[l],t[l+1].getAttribute("data-mce-color"));s(a,e),i(e)},t(d.settings.format))),n=a.target.getAttribute("data-mce-color"),n?(this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),a.target.setAttribute("aria-selected",!0),this.lastId=a.target.id,"transparent"==n?function(){d.hidePanel(),d.resetColor(),o(d.settings.format)}():i(n)):null!==n&&d.hidePanel()}function n(){var e=this;e._color?l(e.settings.format,e._color):o(e.settings.format)}this.updateStyles=function(t){t.tile.styles["background-color"]=e.getContentAreaContainer().style.backgroundColor};var r,c,d=null;c={forecolor:e.settings.forecolor_rows||e.settings.textcolor_rows||5,backcolor:e.settings.backcolor_rows||e.settings.textcolor_rows||5},r={forecolor:e.settings.forecolor_cols||e.settings.textcolor_cols||8,backcolor:e.settings.backcolor_cols||e.settings.textcolor_cols||8},e.buttons.backcolor.tooltip="Text background color",e.on("ExecCommand",function(e){e.command}),e.addButton("rpgsbackgroundcolor",{type:"colorbutton",tooltip:"Tile background color",panel:{origin:"backcolor",role:"application",ariaRemember:!0,html:i,onclick:s},onpostrender:function(){d=arguments[0].control.$el.find("i.mce-i-rpgsbackgroundcolor")},onclick:n})}),tinymce.PluginManager.add("rpgsborder",function(e){function t(){for(var e=[],t=1;t<=10;t++)e.push({text:t+"px",value:t+"px"});return e}function a(){var t=e.settings.color_picker_callback;if(t)return function(){var a=this;t.call(e,function(e){a.value(e).fire("change")},a.value())}}this.updateStyles=function(t){var a=e.getContentAreaContainer();t.tile.styles.border=a.style.border,t.tile.styles["border-radius"]=a.style.borderRadius,t.tile.styles["box-shadow"]=a.style.boxShadow||null},e.on("Init",function(t){var a=e.getContentAreaContainer(),i=e.getParam("tileStyle").tile;a.style.borderWidth=null,a.style.backgroundColor=i.styles["background-color"],a.style.border=i.styles.border,a.style.borderRadius=i.styles["border-radius"],a.style.boxShadow=i.styles["box-shadow"]}),e.on("ExecCommand",function(e){e.command}),e.addButton("rpgsborder",{type:"button",tooltip:"Tile border",onclick:function(){var i=e.getContentAreaContainer().style;e.windowManager.open({title:"Edit border",body:[{type:"listbox",name:"style",label:"Style",values:[{text:"Use default",value:"inherit"},{text:"None",value:"none"},{text:"Dotted",value:"dotted"},{text:"Double",value:"double"},{text:"Dashed",value:"dashed"},{text:"Groove",value:"groove"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"Ridge",value:"ridge"},{text:"Solid",value:"solid"}],value:i.borderStyle},{type:"colorbox",name:"color",label:"Color",onaction:a(),value:i.borderColor},{type:"combobox",name:"width",label:"Width",values:t(),value:i.borderWidth},{type:"combobox",name:"radius",label:"Radius",values:t(),value:i.borderRadius},{type:"listbox",name:"shadow",label:"Shadow",values:[{text:"Use default",value:"inherit"},{text:"Yes",value:"yes"},{text:"No",value:"no"}],value:function(){return"none"===i.boxShadow?"no":"yes"}()}],onsubmit:function(t){e.undoManager.transact(function(){switch(t.data.style){case"":case"inherit":i.border=null;break;case"none":i.border="none";break;default:i.border=t.data.width+" "+t.data.style+" "+t.data.color}switch(t.data.shadow){case"":case"inherit":case"yes":i.boxShadow=null;break;case"no":i.boxShadow="none"}"inherit"===t.data.radius||""===t.data.radius?i.borderRadius=null:i.borderRadius=t.data.radius}),e.focus()}})}})}),tinymce.PluginManager.add("rpgsstaticcontent",function(e){function t(){var t=e.dom.select("p")[0];if(t)for(;t.children.length>0;)t=t.children[0];return t}function a(){var a=t();return e.focus(),e.selection.select(a),a}function i(t){e.getBody().setAttribute("contenteditable",!t)}function l(){i(!1),a()}function o(){e.selection.collapse(),i(!0)}function s(t){l(),r.forEach(function(a){a!==t&&e.formatter.remove(a)}),e.formatter.toggle(t,void 0),e.nodeChanged(),o()}this.updateStyles=function(e){var a=$(t());e.content.classes=a.attr("class"),e.content.styles=rpgsmith.styles2Obj(a.attr("style"))};var n=null,r=["valigntop","valignmiddle","valignbottom"];e.on("PreInit",function(t){n=e.formatter.apply,e.formatter.apply=function(t,a,i){e.fire("BeforeExecCommand",{command:t}),n.call(arguments),e.fire("ExecCommand",{command:t})},e.formatter.unregister("bold"),e.formatter.unregister("italic"),e.formatter.unregister("underline"),e.formatter.unregister("alignleft"),e.formatter.unregister("aligncenter"),e.formatter.unregister("alignright"),e.formatter.register("bold",{inline:"span",styles:{"font-weight":"bold"}}),e.formatter.register("italic",{inline:"span",styles:{"font-style":"italic"}}),e.formatter.register("underline",{inline:"span",styles:{"text-decoration":"underline"}}),e.formatter.register("alignleft",{inline:"span",classes:"tile-content-left"}),e.formatter.register("aligncenter",{inline:"span",classes:"tile-content-center"}),e.formatter.register("alignright",{inline:"span",classes:"tile-content-right"}),e.formatter.register("valigntop",{inline:"span",classes:"tile-content-top"}),e.formatter.register("valignmiddle",{inline:"span",classes:"tile-content-middle"}),e.formatter.register("valignbottom",{inline:"span",classes:"tile-content-bottom"}),window.setTimeout(function(){i(!0),a(),e.selection.collapse()},5)}),e.on("BeforeExecCommand",function(e){switch(console.log("BeforeExecCommand"),e.command){case"mceInsertContent":return!1;default:a(),i(!1)}}),e.on("ExecCommand",function(t){"selectAll"!==t.command&&(i(!0),e.selection.collapse())}),e.addButton("valigntop",{text:"T",tooltip:"Align top",icon:!1,onclick:function(){s("valigntop")},onpostrender:function(){var t=this;e.on("init",function(){e.formatter.formatChanged("valigntop",function(e){t.active(e)})})}}),e.addButton("valignmiddle",{text:"M",tooltip:"Align middle",icon:!1,onclick:function(){s("valignmiddle")},onpostrender:function(){var t=this;e.on("init",function(){e.formatter.formatChanged("valignmiddle",function(e){t.active(e)})})}}),e.addButton("valignbottom",{text:"B",tooltip:"Align bottom",icon:!1,onclick:function(){s("valignbottom")},onpostrender:function(){var t=this;e.on("init",function(){e.formatter.formatChanged("valignbottom",function(e){t.active(e)})})}})}),function(){"use strict";var module=angular.module("rpgsmith-dialogs");module.controller("dialogAddNewCharacter",["$scope","$state","$q","$uibModalInstance","Upload","data","rulesetService","characterService","toaster",function(e,t,a,i,l,o,s,n,r){e.character=o.characterData,e.showimagebtns=!1,1==o.mode?(e.pageHeading="New Character",e.pageButton="Save",e.disableNameControl=!1,e.disableAllControls=!1,e.mode=1):2==o.mode?(e.pageHeading="Edit Character",e.pageButton="Save",e.disableNameControl=!0,e.disableAllControls=!1,e.mode=2):(e.pageHeading="Duplicate Character",e.pageButton="Save",e.character.name="",e.disableNameControl=!1,e.disableAllControls=!0,e.mode=3),e.cancel=function(){i.dismiss("Canceled")},e.getThumbNail=function(){if(e.file)return e.file;var t=e.item;return t.id&&t.portrait?"/characterdata/"+t.id+"/"+t.portrait:null},e.OpenFile=function(){console.log("Open and upload file..."),$("#newCharacterImage").click()},e.characterImageUpload=function(t){if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){e.file=t.target.result,e.character.file=e.file},a.readAsDataURL(t.files[0])}},e.save=function(){var t={};if(1==e.mode&&0==e.character.id)if(t={Id:0,Name:e.character.name,Portrait:e.character.file,RulesetID:e.character.RulesetID},e.character.RulesetID>0){var a=n.saveCharacter(t);a.then(function(e){200==e.data.StatusCode?i.close(e.data.PayLoad):400==e.data.StatusCode&&1==e.data.ShowToUser&&r.pop("error",e.data.ErrorMessage)})}else r.pop("error","Please select one ruleset");else{var l;2==e.mode?(t={Id:e.character.id,Name:e.character.name,Portrait:e.character.file,RulesetID:e.character.RulesetID},l=n.EditCharacter(t)):3==e.mode&&(t={Id:e.character.id,Name:e.character.name,Portrait:e.character.file,RulesetID:e.character.RulesetID},l=n.CopyCharacter(t)),l.then(function(e){200==e.data.StatusCode?i.close(e.data.PayLoad):400==e.data.StatusCode&&1==e.data.ShowToUser&&r.pop("error",e.data.ErrorMessage)})}},
s.GetRuleSets().then(function(t){200==t.data.StatusCode?e.RuleSets=t.data.PayLoad:400==t.data.StatusCode&&1==t.data.ShowToUser&&r.pop("error",t.data.ErrorMessage)}),e.manageRuleSets=function(){i.dismiss("Canceled"),t.go("profile.AddNewRuleSet")}}]),module.controller("dialogEditCharacter",["$scope","$q","$uibModalInstance","Upload","data",function(e,t,a,i,l){e.isEdit=l.isEdit,e.item=l.item,e.file=null,e.cancel=function(){a.dismiss("Canceled")},e.getThumbNail=function(){if(e.file)return e.file;var t=e.item;return t.id&&t.portrait?"/characterdata/"+t.id+"/"+t.portrait:null},e.save=function(){}}]),module.controller("dialogLayoutRename",["$scope","$uibModalInstance","data","rulesetService",function(e,t,a,i){e.Tab=a.scope,e.TabHeading=a.State,e.ButtonText=a.btntext,e.cancel=function(){t.dismiss("Canceled")},e.save=function(){t.close(e.Tab)},e.hitEnter=function(t){13!==t.which||angular.equals(e.name,null)||angular.equals(e.name,"")||e.save()},e.cancel=function(){t.dismiss("Canceled")},e.SaveCorestat=function(){t.close(e.CoreStatProperties)}}]),module.controller("dialogTabRename",["$scope","$uibModalInstance","data","rulesetService",function(e,t,a,i){e.Tab=a.scope,e.TabHeading=a.State,e.ButtonText=a.btntext,e.cancel=function(){t.dismiss("Canceled")},e.save=function(){t.close(e.Tab)},e.hitEnter=function(t){13!==t.which||angular.equals(e.name,null)||angular.equals(e.name,"")||e.save()},e.cancel=function(){t.dismiss("Canceled")},e.SaveCorestat=function(){t.close(e.CoreStatProperties)}}]),module.controller("dialogTileTypes",["$scope","$uibModalInstance","data","dialogs","tileService",function(e,t,a,i,l){e.tileTypes=a.scope,e.cancel=function(){t.dismiss("Canceled")},e.choosetile=function(e){t.close(e)},e.cancel=function(){t.dismiss("Canceled")}}]),module.controller("dialogAddTile",["$scope","$uibModalInstance","data","tileService",function(e,t,a,i){e.Tiles=a.scope}]),module.controller("dialogCreateCoreStat",["$scope","$uibModalInstance","data","toaster","rulesetService",function(e,t,a,i,l){e.OperationTypeMode=a.CoreStatMode,e.CoreStatProperties=a.scope,e.CoreStatsInGrid=a.CoreStatsInGrid,e.CoreStatsNameInGrid=a.CoreStatsNameInGrid,e.CoreStatProperties.Value.Choices.choices=[],e.tabName=a.tabname,e.buttontext=a.btntext,e.IsButtonDisabled=a.IsenableBtn,e.CoreStatProperties.Value.Choices.choices.push({ChoiceName:""}),"Create"==e.OperationTypeMode&&(e.DisableField=!1),l.GetTypes().then(function(t){200==t.data.StatusCode?(e.Types=t.data.PayLoad,console.log("data.data.PayLoad",t.data.PayLoad),e.weight=t.data.PayLoad[6].Units,e.Height=t.data.PayLoad[8].Units,e.Volume=t.data.PayLoad[9].Units):400==t.data.StatusCode&&1==t.data.ShowToUser&&i.pop("error",t.data.ErrorMessage)}),e.CoreStatOnChange=function(){void 0==e.CoreStatProperties.TypeId?(e.IsButtonDisabled=!0,e.ShowChoices=!1,e.ShowCalculation=!1,e.ShowValueandSubvalue=!1,e.ShowCurrentMaxValue=!1):2==e.CoreStatProperties.TypeId?(e.ShowChoices=!0,e.IsButtonDisabled=!1,e.ShowCalculation=!1,e.ShowValueandSubvalue=!1,e.ShowCurrentMaxValue=!1):16==e.CoreStatProperties.TypeId?(e.ShowCalculation=!0,e.IsButtonDisabled=!1,e.ShowChoices=!1,e.ShowValueandSubvalue=!1,e.ShowCurrentMaxValue=!1):5==e.CoreStatProperties.TypeId?(e.ShowCalculation=!1,e.IsButtonDisabled=!1,e.ShowChoices=!1,e.ShowValueandSubvalue=!0,e.ShowCurrentMaxValue=!1):6==e.CoreStatProperties.TypeId?(e.ShowCalculation=!1,e.IsButtonDisabled=!1,e.ShowChoices=!1,e.ShowValueandSubvalue=!1,e.ShowCurrentMaxValue=!0):e.CoreStatProperties.TypeId>0||""!=e.CoreStatProperties.Name?(e.ShowChoices=!1,e.ShowCalculation=!1,e.IsButtonDisabled=!1,e.ShowValueandSubvalue=!1,e.ShowCurrentMaxValue=!1):e.IsButtonDisabled=!1},e.AddValueSubvalue=function(t){"Value"==t?e.valueName=t:"SubValue"==t&&(e.valueName=t)},e.Addcurrentmax=function(t){"CurrentValue"==t?e.CurrentMaxvalue=t:"MaxValue"==t&&(e.CurrentMaxvalue=t)},e.ExistCoreStatOnChange=function(){if(void 0!=e.CoreStatsInGrid.Name){var t="[abc]";t=t.replace("abc",e.CoreStatsInGrid.Name.Name),e.tempVar=t}else""==e.Formula||void 0==e.Formula?e.Formula="":e.Formula=e.Formula},e.CreateFormula=function(){""==e.Formula||void 0==e.Formula?e.Formula=e.tempVar:""!=e.Formula&&(e.Formula=e.Formula+""+e.tempVar)},e.addChoice=function(){e.CoreStatProperties.Value.Choices.choices.push({ChoiceName:""})},e.RemoveChoice=function(t){var a=e.CoreStatProperties.Value.Choices.choices.indexOf(t);e.CoreStatProperties.Value.Choices.choices.splice(a,1)},e.SaveCorestat=function(){if(""==e.CoreStatProperties.Name||void 0===e.CoreStatProperties.Name||null==e.CoreStatProperties.Name)return void i.pop("error","Please enter CoreStat Name");if(0==e.CoreStatProperties.TypeId||void 0===e.CoreStatProperties.TypeId||""==e.CoreStatProperties.TypeId)return void i.pop("error","Please Select CoreStat Type");if(void 0!=e.CoreStatsNameInGrid)for(var a=0;a<e.CoreStatsNameInGrid.length;a++)if(void 0===e.CoreStatsNameInGrid[a].Name)return void i.pop("error","Please enter CoreStat Name");for(var l=0;l<e.Types.length;l++)e.Types[l].TypeId==e.CoreStatProperties.TypeId&&(e.CoreStatProperties.TypeName=e.Types[l].Name,16==e.Types[l].TypeId&&16==e.CoreStatProperties.TypeId&&(e.CoreStatProperties.Value.Calculation.formulae=e.Formula));t.close(e.CoreStatProperties)},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogAddCorestatValues",["$scope","$uibModalInstance","data","rulesetService","rulesetDataShareService",function(e,t,a,i,l){e.characters=a.scope,e.SaveCorestatValues=function(){l.setcorestatvalue(e.characters),t.close(e.characters)},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogAssociatedSpells",["$scope","$uibModalInstance","data","rulesetService","dialogs",function(e,t,a,i,l){e.Spells=a.scope;var o=a.associatedspells;if(null!=o&&void 0!=o)for(var s=0;s<e.Spells.length;s++)for(var n=0;n<o.length;n++)e.Spells[s].SpellProperties[0].Value.Text.value==o[n].SpellProperties[0].Value.Text.value&&(e.Spells[s].Selected=!0);e.SaveAssociatedSpells=function(){for(var a=[],i=0;i<e.Spells.length;i++)e.Spells[i].Selected&&a.push(e.Spells[i]);t.close(a)},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogAssociatedRulesetItems",["$scope","$uibModalInstance","data","rulesetService","dialogs",function(e,t,a,i,l){e.RulesetItems=a.scope,e.SaveAssociatedRulesetItems=function(){console.log("In rulesetsItems: "+e.RulesetItems.length);for(var a=[],i=0;i<e.RulesetItems.length;i++)console.log("$scope.RulesetItems[i].Selected: "+e.RulesetItems[i].Selected),e.RulesetItems[i].Selected&&a.push(e.RulesetItems[i]);t.close(a)},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogAssociatedRulesetSpells",["$scope","$uibModalInstance","data","rulesetService","dialogs",function(e,t,a,i,l){e.RulesetSpells=a.scope,e.SaveAssociatedRulesetSpells=function(){console.log("In rulesetsItems: "+e.RulesetSpells.length);for(var a=[],i=0;i<e.RulesetSpells.length;i++)console.log("$scope.RulesetItems[i].Selected: "+e.RulesetSpells[i].Selected),e.RulesetSpells[i].Selected&&a.push(e.RulesetSpells[i]);t.close(a)},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogAssociatedRulesetAbilities",["$scope","$uibModalInstance","data","rulesetService","dialogs",function(e,t,a,i,l){e.RulesetAbilities=a.scope,e.SaveAssociatedRulesetAbilities=function(){console.log("In rulesetsAbilities: "+e.RulesetAbilities.length);for(var a=[],i=0;i<e.RulesetAbilities.length;i++)console.log("$scope.RulesetItems[i].Selected: "+e.RulesetAbilities[i].Selected),e.RulesetAbilities[i].Selected&&a.push(e.RulesetAbilities[i]);t.close(a)},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogAssociatedAbilities",["$scope","$uibModalInstance","data","rulesetService","dialogs",function(e,t,a,i,l){e.Abilities=a.scope;var o=a.associatedabilities;if(null!=o&&void 0!=o)for(var s=0;s<e.Abilities.length;s++)for(var n=0;n<o.length;n++)e.Abilities[s].AbilityProperties[0].Value.Text.value==o[n].AbilityProperties[0].Value.Text.value&&(e.Abilities[s].Selected=!0);e.SaveAssociatedAbilities=function(){for(var a=[],i=0;i<e.Abilities.length;i++)e.Abilities[i].Selected&&a.push(e.Abilities[i]);t.close(a)},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogCreateItem",["$scope","$uibModalInstance","data","toaster","rulesetService","dialogs",function(e,t,a,i,l,o){var s=a.Spells,n=a.Abilities;e.Properties=a.scope,e.tabName=a.tabName,e.buttontext=a.btntext,e.IsBtnDisabled=a.IsBtnDisabled,e.Content_ItemProperties=a.Content_ItemProperties,e.ShowAssociatedSpells=!0,e.ShowAssociatedAbilities=!0,e.showimagebtns=!1,console.log("$scope.Properties: ",e.Properties),e.OpenFile=function(){console.log("Open and upload file..."),$("#newRulesetImage").click()},e.ItemImageUpload=function(t){if(console.log("File Input: ",t),e.showimagebtns=!1,t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){e.$apply(function(){e.Properties[1].Value.Image.image=t.target.result})},a.readAsDataURL(t.files[0])}},e.OpenAssociatedSpells=function(){o.create("/views/dialogs/AssociatedSpells.html","dialogAssociatedSpells",{scope:s,associatedspells:e.AssociatedSpells}).result.then(function(t){e.AssociatedSpells=t})},e.OpenAssociatedAbilities=function(){o.create("/views/dialogs/AssociatedAbilities.html","dialogAssociatedAbilities",{scope:n,associatedabilities:e.AssociatedAbilities}).result.then(function(t){e.AssociatedAbilities=t})},e.Create=function(){if(void 0!=e.Content_ItemProperties)for(var a=0;a<e.Content_ItemProperties.length;a++)if(e.Content_ItemProperties[a].toLowerCase()==e.Properties[0].Value.Text.value.toLowerCase())return void i.pop("Error","Please enter unique Item Name");for(var l={},a=0;a<e.Properties.length;a++)2==e.Properties[a].TypeId&&(e.Properties[a].Value.Choices.SelectedChoiceName=e.Properties[a].Value.Choices.selectedchoice.ChoiceName,e.Properties[a].Value.Choices.selectedchoice=""),14==e.Properties[a].TypeId&&(e.Properties[a].Value.Text=null);l.Properties=e.Properties,l.AssociatedSpells=e.AssociatedSpells,l.AssociatedAbilities=e.AssociatedAbilities,t.close(l)},e.ItemcloseDialog=function(){t.close(e.CoreStatProperties)},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogCreateSpell",["$scope","$uibModalInstance","data","toaster","rulesetService",function(e,t,a,i,l){e.OperationTypeMode=a.SpellMode,e.Content_SpellProperties=a.Content_SpellProperties,e.Properties=a.scope,e.tabName=a.tabName,e.buttontext=a.btntext,e.Create=function(){if(void 0!=e.Content_SpellProperties)for(var a=0;a<e.Content_SpellProperties.length;a++)if(e.Content_SpellProperties[a].toLowerCase()==e.Properties[0].Value.Text.value.toLowerCase())return void i.pop("Error","Please enter unique Spell Name");t.close(e.Properties)},e.OpenFile=function(){console.log("Open and upload file..."),$("#newRulesetImage").click()},e.ItemImageUpload=function(t){if(console.log("File Input: ",t),e.showimagebtns=!1,t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){e.$apply(function(){e.Properties[1].Value.Image.image=t.target.result})},a.readAsDataURL(t.files[0])}},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogCreateAbility",["$scope","$uibModalInstance","data","toaster","rulesetService",function(e,t,a,i,l){e.OperationTypeMode=a.AbilityMode,e.Content_AbilityProperties=a.Content_AbilityProperties,e.Properties=a.scope,e.tabName=a.tabName,e.buttontext=a.btntext,e.ShowAssociatedSpells=!1,e.ShowAssociatedAbilities=!1,e.showimagebtns=!1,e.OpenFile=function(){console.log("Open and upload file..."),$("#newRulesetImage").click()},e.ItemImageUpload=function(t){if(console.log("File Input: ",t),e.showimagebtns=!1,t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){e.$apply(function(){e.Properties[1].Value.Image.image=t.target.result})},a.readAsDataURL(t.files[0])}},e.Create=function(){if(void 0!=e.Content_AbilityProperties)for(var a=0;a<e.Content_AbilityProperties.length;a++)if(e.Content_AbilityProperties[a].toLowerCase()==e.Properties[0].Value.Text.value.toLowerCase())return void i.pop("Error","Please enter unique Ability Name");for(var a=0;a<e.Properties.length;a++)2==e.Properties[a].TypeId&&(e.Properties[a].Value.Choices.SelectedChoiceName=e.Properties[a].Value.Choices.selectedchoice.ChoiceName,e.Properties[a].Value.Choices.selectedchoice="");t.close(e.Properties)},e.cancel=function(){t.close("cancel")}}]),module.controller("ShowAllTileContent",["$scope","$uibModalInstance","data","rulesetService",function(e,t,a,i){e.Content=a.scope,e.ShowAssociatedSpells=!1,e.ShowAssociatedAbilities=!1,e.cancel=function(){t.close("cancel")}}]),module.controller("dialogTabReorder",["$scope","$uibModalInstance","$filter","data",function(e,t,a,i){e.temp=i,e.cancel=function(){t.dismiss("Canceled")},e.save=function(){t.close(e.items)},e.hitEnter=function(t){13!==t.which||angular.equals(e.name,null)||angular.equals(e.name,"")||e.save()},function(){var t=(i.items||[]).slice();i.sorter(t),e.items=t}()}]),module.controller("dialogCopyCoreStat",["$scope","$uibModalInstance","data","toaster","rulesetService",function(e,t,a,i,l){e.OperationTypeMode=a.CoreStatMode,e.CoreStatProperties=a.scope,e.CoreStatsInGrid=a.CoreStatsInGrid,e.CoreStatsNameInGrid=a.CoreStatsNameInGrid,e.tabName=a.tabname,e.copyitem=a.item,e.count=a.count,e.buttontext=a.btntext,e.IsButtonDisabled=a.IsenableBtn,e.OperationTypeMode=a.CoreStatMode,"Edit"==e.OperationTypeMode?(e.DisablecopyFields=!1,e.DisableNameField=!0):"Copy"==e.OperationTypeMode&&(e.CoreStatProperties.Name="",e.DisablecopyFields=!0,e.DisableNameField=!1),2==e.CoreStatProperties.TypeId&&(e.ShowChoices=!0,e.ShowCalculation=!1,e.ShowValueandSubvalue=!1,e.ShowCurrentMaxValue=!1),16==e.CoreStatProperties.TypeId&&(e.ShowCalculation=!0,e.ShowChoices=!1,e.ShowValueandSubvalue=!1,e.ShowCurrentMaxValue=!1,e.Formula=e.CoreStatProperties.Value.Calculation.formulae),5==e.CoreStatProperties.TypeId&&(e.ValSub=e.CoreStatProperties.ValSub,e.ShowCalculation=!1,e.ShowChoices=!1,e.ShowValueandSubvalue=!0,e.IsButtonDisabled=!1,e.ShowCurrentMaxValue=!1),6==e.CoreStatProperties.TypeId&&(e.CurrentMaxVal=e.CoreStatProperties.CurrentMaxVal,e.ShowCalculation=!1,e.ShowChoices=!1,e.ShowValueandSubvalue=!1,e.IsButtonDisabled=!1,e.ShowCurrentMaxValue=!0),l.GetTypes().then(function(t){200==t.data.StatusCode?(e.Types=t.data.PayLoad,e.weight=t.data.PayLoad[6].Units,e.Height=t.data.PayLoad[8].Units,e.Volume=t.data.PayLoad[9].Units):400==t.data.StatusCode&&1==t.data.ShowToUser&&alert(t.data.ErrorMessage)}),e.addChoice=function(){e.CoreStatProperties.Value.Choices.choices.push({ChoiceName:""})},e.RemoveChoice=function(t){var a=e.CoreStatProperties.Value.Choices.choices.indexOf(t);e.CoreStatProperties.Value.Choices.choices.splice(a,1)},e.CoreStatOnChange=function(){void 0==e.CoreStatProperties.TypeId&&(e.IsButtonDisabled=!0,e.ShowChoices=!1,e.ShowCalculation=!1,e.ShowValueandSubvalue=!1,e.ShowCurrentMaxValue=!1),2==e.CoreStatProperties.TypeId?(e.ShowChoices=!0,e.IsButtonDisabled=!1,e.ShowCalculation=!1,e.ShowValueandSubvalue=!1,e.ShowCurrentMaxValue=!1):e.ShowChoices=!1,16==e.CoreStatProperties.TypeId?(e.ShowCalculation=!0,e.IsButtonDisabled=!1,e.ShowChoices=!1,e.ShowValueandSubvalue=!1,e.ShowCurrentMaxValue=!1):e.ShowCalculation=!1,5==e.CoreStatProperties.TypeId?(e.ShowCalculation=!1,e.IsButtonDisabled=!1,e.ShowChoices=!1,e.ShowValueandSubvalue=!0,e.ShowCurrentMaxValue=!1):e.ShowValueandSubvalue=!1,6==e.CoreStatProperties.TypeId?(e.ShowCalculation=!1,e.IsButtonDisabled=!1,e.ShowChoices=!1,e.ShowValueandSubvalue=!1,e.ShowCurrentMaxValue=!0):e.ShowCurrentMaxValue=!1},e.AddValueSubvalue=function(t){"Value"==t?e.valueName=t:"SubValue"==t&&(e.valueName=t)},e.Addcurrentmax=function(t){"CurrentValue"==t?e.CurrentMaxvalue=t:"MaxValue"==t&&(e.CurrentMaxvalue=t)},e.ExistCoreStatOnChange=function(){if(void 0!=e.CoreStatsInGrid.Name){var t="[abc]";t=t.replace("abc",e.CoreStatsInGrid.Name.Name),e.tempVar=t}else""==e.Formula||void 0==e.Formula?e.Formula="":e.Formula=e.Formula},e.CreateFormula=function(){""==e.Formula||void 0==e.Formula?e.Formula=e.tempVar:""!=e.Formula&&(e.Formula=e.Formula+""+e.tempVar)},e.SaveCorestat=function(){if(""==e.CoreStatProperties.Name||void 0===e.CoreStatProperties.Name||null==e.CoreStatProperties.Name)return void i.pop("error","Please enter CoreStat Name");if(0==e.CoreStatProperties.TypeId||void 0===e.CoreStatProperties.TypeId||""==e.CoreStatProperties.TypeId)return void i.pop("error","Please Select CoreStat Type");if(void 0!=e.CoreStatsNameInGrid)for(var a=0;a<e.CoreStatsNameInGrid.length;a++)5==e.CoreStatsNameInGrid[a].TypeId||e.CoreStatsNameInGrid[a].TypeId;for(var l=0;l<e.Types.length;l++)e.valueName=e.ValSub,e.CurrentMaxvalue=e.CurrentMaxVal,e.Types[l].TypeId==e.CoreStatProperties.TypeId&&(e.CoreStatProperties.TypeName=e.Types[l].Name,16==e.Types[l].TypeId&&16==e.CoreStatProperties.TypeId&&(e.CoreStatProperties.Value.Calculation.formulae=e.Formula));t.close(e.CoreStatProperties)},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogCopyItem",["$scope","$uibModalInstance","data","toaster","rulesetService","characterService","dialogs",function(e,t,a,i,l,o,s){e.AssociatedSpells=a.AssociatedSpells,e.AssociatedAbilities=a.AssociatedAbilities;var n=a.Spells,r=a.Abilities;e.OperationTypeMode=a.ItemMode,e.Content_ItemProperties=a.Content_ItemProperties,e.Properties=a.scope,e.contentType=a.contentType,e.tabName=a.tabName,e.copyitem=a.item,e.count=a.count,e.buttontext=a.btntext,e.IsBtnDisabled=a.IsBtnDisabled,e.ShowAssociatedSpells=!0,e.ShowAssociatedAbilities=!0,e.SelectAssociatedSpells=a.SelectAssociatedSpells,e.SelectAssociatedAbilities=a.SelectAssociatedAbilities,e.OpenFile=function(){console.log("Open and upload file..."),$("#newRulesetImage").click()},e.ItemImageUpload=function(t){if(console.log("File Input: ",t),e.showimagebtns=!1,t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){e.$apply(function(){e.Properties[1].Value.Image.image=t.target.result})},a.readAsDataURL(t.files[0])}},e.Create=function(){if(void 0!=e.Content_ItemProperties)for(var a=0;a<e.Content_ItemProperties.length;a++)if(e.Content_ItemProperties[a].toLowerCase()==e.Properties[0].Value.Text.value.toLowerCase())return void alert("Please enter unique Item Name");var i={};i.ItemProperties=e.Properties,i.AssociatedSpells=e.AssociatedSpells,i.AssociatedAbilities=e.AssociatedAbilities,t.close(i)},e.OpenAssociatedSpells=function(){s.create("/views/dialogs/AssociatedSpells.html","dialogAssociatedSpells",{scope:n,associatedspells:e.AssociatedSpells}).result.then(function(t){e.AssociatedSpells=t})},e.OpenAssociatedAbilities=function(){s.create("/views/dialogs/AssociatedAbilities.html","dialogAssociatedAbilities",{scope:r,associatedabilities:e.AssociatedAbilities}).result.then(function(t){e.AssociatedAbilities=t})},e.DropItem=function(){if(void 0!=e.Properties[0].CharacterItemId){var a=s.confirm("Confirm Delete",'Are you sure you want to delete this Item, "'+e.Properties[0].Value.Text.value+'", and all associated pages, tabs, and tiles?',{});a.result.then(function(a){if("yes"==a){o.DeleteCharacterContent(e.Properties[0].CharacterItemId).then(function(a){200==a.data.StatusCode&&(e.Properties.Action="Delete",t.close(e.Properties))})}})}else if(void 0!=e.Properties[0].CharacterSpellValueId){var a=s.confirm("Confirm Delete",'Are you sure you want to delete this Spell, "'+e.Properties[0].Value.Text.value+'"?',{});a.result.then(function(a){if("yes"==a){o.DeleteCharacterSpellContent(e.Properties[0].CharacterSpellId).then(function(a){200==a.data.StatusCode&&(e.Properties.Action="Delete",t.close(e.Properties))})}})}else if(void 0!=e.Properties[0].CharacterAbilityValueId){var a=s.confirm("Confirm Delete",'Are you sure you want to delete this Ability, "'+e.Properties[0].Value.Text.value+'",?',{});a.result.then(function(a){if("yes"==a){o.DeleteCharacterAbilityContent(e.Properties[0].CharacterAbilityId).then(function(a){200==a.data.StatusCode&&(e.Properties.Action="Delete",t.close(e.Properties))})}})}},e.EditItem=function(){e.pageName="Editing Item",e.buttontext="Update",e.IsButtonDisabled=!0,e.isBtnShow=!0,s.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:e.Properties,tabName:e.pageName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow}).result.then(function(a){e.Properties=a,e.Properties.Action="Edit",t.close(e.Properties)})},e.DuplicateItem=function(){e.pageName="Copying Item",e.buttontext="Copy",e.IsButtonDisabled=!0,e.isBtnShow=!0,s.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:item.CharacterItemsValues,tabName:e.pageName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow}).result.then(function(a){e.Properties=a,e.Properties.Action="Copy",t.close(e.Properties)})},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogCopySpell",["$scope","$uibModalInstance","data","toaster","rulesetService",function(e,t,a,i,l){e.OperationTypeMode=a.SpellMode,e.Content_SpellProperties=a.Content_SpellProperties,e.Properties=a.scope,e.tabName=a.tabName,e.copyitem=a.item,e.count=a.count,e.buttontext=a.btntext,e.SelectAssociatedSpells=!1,e.ShowAssociatedAbilities=!1,e.showimagebtns=!1,e.OpenFile=function(){console.log("Open and upload file..."),$("#newRulesetImage").click()},e.ItemImageUpload=function(t){if(console.log("File Input: ",t),e.showimagebtns=!1,t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){e.$apply(function(){e.Properties[1].Value.Image.image=t.target.result})},a.readAsDataURL(t.files[0])}},e.Create=function(){if(void 0!=e.Content_SpellProperties)for(var a=0;a<e.Content_SpellProperties.length;a++)if(e.Content_SpellProperties[a].toLowerCase()==e.Properties[0].Value.Text.value.toLowerCase())return void i.pop("error","Please enter unique Spell Name");t.close(e.Properties)},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogCopyAbility",["$scope","$uibModalInstance","data","toaster","rulesetService",function(e,t,a,i,l){e.OperationTypeMode=a.AbilityMode,e.Content_AbilityProperties=a.Content_AbilityProperties,e.Properties=a.scope,e.tabName=a.tabName,e.copyitem=a.item,e.count=a.count,e.buttontext=a.btntext,e.SelectAssociatedSpells=!1,e.ShowAssociatedAbilities=!1,e.showimagebtns=!1,e.OpenFile=function(){console.log("Open and upload file..."),$("#newRulesetImage").click()},e.ItemImageUpload=function(t){if(console.log("File Input: ",t),e.showimagebtns=!1,t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){e.$apply(function(){e.Properties[1].Value.Image.image=t.target.result})},a.readAsDataURL(t.files[0])}},e.Create=function(){if(void 0!=e.Content_AbilityProperties)for(var a=0;a<e.Content_AbilityProperties.length;a++)if(e.Content_AbilityProperties[a].toLowerCase()==e.Properties[0].Value.Text.value.toLowerCase())return void i.pop("error","Please enter unique Ability Name");t.close(e.Properties)},e.cancel=function(){t.close("cancel")}}]),module.controller("ShowItems",["$scope","$rootScope","$uibModalInstance","data","characterService","dialogs",function($scope,$rootScope,$uibModalInstance,data,characterService,dialogs){$scope.Properties=data.scope,$scope.EditItem=function(e,t,a){if(1==a){$scope.pageName="Editing Item",$scope.buttontext="Update",$scope.IsButtonDisabled=!0,$scope.isBtnShow=!0;var i=dialogs.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:e.CharacterItemsValues,tabName:$scope.pageName,btntext:$scope.buttontext,IsBtnDisabled:$scope.IsButtonDisabled,IsBtnShow:$scope.isBtnShow,Fullscope:e});i.result.then(function(e){if("cancel"!=e)if(0==t){$scope.RemainingItemData=[];for(var a=0;a<$scope.Properties.length;a++)0!=a&&$scope.RemainingItemData.push($scope.Properties[a].CharacterItemsValues);var i={CharacterItemsValues:e};$scope.Properties.splice(t),$scope.Properties.push(i);for(var l=0;l<$scope.RemainingItemData.length;l++){var o={CharacterItemsValues:$scope.RemainingItemData[l]};$scope.Properties.push(o)}}else{var i={CharacterItemsValues:e};$scope.Properties.splice(t),$scope.Properties.push(i)}})}else if(2==a){$scope.pageName="Editing Spell",$scope.buttontext="Update",$scope.isBtnShow=!0;var i=dialogs.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:e.CharacterSpellsValues,tabName:$scope.pageName,btntext:$scope.buttontext,IsBtnShow:$scope.isBtnShow,FullSpellscope:e});i.result.then(function(e){if("cancel"!=e)if(0==t){$scope.RemainingSpellData=[];for(var a=0;a<$scope.Properties.length;a++)0!=a&&$scope.RemainingSpellData.push($scope.Properties[a].CharacterSpellsValues);var i={CharacterSpellsValues:e};$scope.Properties.splice(t),$scope.Properties.push(i);for(var l=0;l<$scope.RemainingSpellData.length;l++){var o={CharacterSpellsValues:$scope.RemainingSpellData[l]};$scope.Properties.push(o)}}else{var i={CharacterSpellsValues:e};$scope.Properties.splice(t),$scope.Properties.push(i)}})}else if(3==a){$scope.pageName="Editing Ability",$scope.buttontext="Update",$scope.isBtnShow=!0;var i=dialogs.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:e.CharacterAbilitiesValues,tabName:$scope.pageName,btntext:$scope.buttontext,IsBtnShow:$scope.isBtnShow,FullAbilityScope:e});i.result.then(function(e){if("cancel"!=e)if(0==t){$scope.RemainingAbilityData=[];for(var a=0;a<$scope.Properties.length;a++)0!=a&&$scope.RemainingAbilityData.push($scope.Properties[a].CharacterAbilitiesValues);var i={CharacterAbilitiesValues:e};$scope.Properties.splice(t),$scope.Properties.push(i);for(var l=0;l<$scope.RemainingAbilityData.length;l++){var o={CharacterAbilitiesValues:$scope.RemainingAbilityData[l]};$scope.Properties.push(o)}}else{var i={CharacterAbilitiesValues:e};$scope.Properties.splice(t),$scope.Properties.push(i)}})}},$scope.CopyItem=function(e,t,a){if(1==a){$scope.pageName="Copying Item",$scope.buttontext="Copy",$scope.IsButtonDisabled=!0,$scope.isBtnShow=!0;var i=dialogs.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:e.CharacterItemsValues,tabName:$scope.pageName,btntext:$scope.buttontext,IsBtnDisabled:$scope.IsButtonDisabled,IsBtnShow:$scope.isBtnShow,Fullscope:e});i.result.then(function(e){if("cancel"!=e){var t={CharacterItemsValues:e};$scope.Properties.push(t)}})}else if(2==a){$scope.pageName="Copying Spell",$scope.buttontext="Copy",$scope.isBtnShow=!0;var i=dialogs.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:e.CharacterSpellsValues,tabName:$scope.pageName,btntext:$scope.buttontext,IsBtnShow:$scope.isBtnShow,FullSpellscope:e});i.result.then(function(e){if("cancel"!=e){var t={CharacterSpellsValues:e};$scope.Properties.push(t)}})}else if(3==a){$scope.pageName="Copying Ability",$scope.buttontext="Copy",$scope.isBtnShow=!0;var i=dialogs.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:e.CharacterAbilitiesValues,tabName:$scope.pageName,btntext:$scope.buttontext,IsBtnShow:$scope.isBtnShow,FullAbilityScope:e});i.result.then(function(e){if("cancel"!=e){var t={CharacterAbilitiesValues:e};$scope.Properties.push(t)}})}},$scope.ShowAllItemProperties=function(item,count){var dlg=dialogs.create("/views/dialogs/characteritemcontent.html","dialogCopyItem",{scope:item.CharacterItemsValues});dlg.result.then(function(res){if("Delete"==res.Action){for(var index=-1,deleteitem=eval($scope.Properties),i=0;i<deleteitem.length;i++)if(deleteitem[i].CharacterItemsValues===res){index=i;break}$scope.Properties.splice(index,1)}else if("Edit"==res.Action)if(0==count){$scope.RemainingItemData=[];for(var k=0;k<$scope.Properties.length;k++)0!=k&&$scope.RemainingItemData.push($scope.Properties[k].CharacterItemsValues);var ItemProperties={CharacterItemsValues:res};$scope.Properties.splice(count),$scope.Properties.push(ItemProperties);for(var j=0;j<$scope.RemainingItemData.length;j++){var RemainingItemProperties={CharacterItemsValues:$scope.RemainingItemData[j]};$scope.Properties.push(RemainingItemProperties)}}else{var ItemProperties={CharacterItemsValues:res};$scope.Properties.splice(count),$scope.Properties.push(ItemProperties)}else if("Copy"==res.Action){var ItemProperties={CharacterItemsValues:res};$scope.Properties.push(ItemProperties)}})},$scope.ShowAllSpellProperties=function(item,count){var dlg=dialogs.create("/views/dialogs/characterspellcontent.html","dialogCopyItem",{scope:item.CharacterSpellsValues});dlg.result.then(function(res){if("Delete"==res.Action){for(var index=-1,deletespell=eval($scope.Properties),i=0;i<deletespell.length;i++)if(deletespell[i].CharacterSpellsValues===res){index=i;break}$scope.Properties.splice(index,1)}else if("Edit"==res.Action)if(0==count){$scope.RemainingSpellData=[];for(var k=0;k<$scope.Properties.length;k++)0!=k&&$scope.RemainingSpellData.push($scope.Properties[k].CharacterSpellsValues);var SpellProperties={CharacterSpellsValues:res};$scope.Properties.splice(count),$scope.Properties.push(SpellProperties);for(var j=0;j<$scope.RemainingSpellData.length;j++){var RemainingSpellProperties={CharacterSpellsValues:$scope.RemainingSpellData[j]};$scope.Properties.push(RemainingSpellProperties)}}else{var SpellProperties={CharacterSpellsValues:res};$scope.Properties.splice(count),$scope.Properties.push(SpellProperties)}else if("Copy"==res.Action){var SpellProperties={CharacterSpellsValues:res};$scope.Properties.push(SpellProperties)}})},$scope.ShowAllAbilityProperties=function(item,count){var dlg=dialogs.create("/views/dialogs/characterabilitycontent.html","dialogCopyItem",{scope:item.CharacterAbilitiesValues});dlg.result.then(function(res){if("Delete"==res.Action){for(var index=-1,deleteability=eval($scope.Properties),i=0;i<deleteability.length;i++)if(deleteability[i].CharacterAbilitiesValues===res){index=i;break}$scope.Properties.splice(index,1)}else if("Edit"==res.Action)if(0==count){$scope.RemainingAbilityData=[];for(var k=0;k<$scope.Properties.length;k++)0!=k&&$scope.RemainingAbilityData.push($scope.Properties[k].CharacterAbilitiesValues);var AbilityProperties={CharacterAbilitiesValues:res};$scope.Properties.splice(count),$scope.Properties.push(AbilityProperties);for(var j=0;j<$scope.RemainingAbilityData.length;j++){var RemainingAbilityProperties={CharacterAbilitiesValues:$scope.RemainingAbilityData[j]};$scope.Properties.push(RemainingAbilityProperties)}}else{var AbilityProperties={CharacterAbilitiesValues:res};$scope.Properties.splice(count),$scope.Properties.push(AbilityProperties)}else if("Copy"==res.Action){var AbilityProperties={CharacterAbilitiesValues:res};$scope.Properties.push(AbilityProperties)}})},$scope.Removeitem=function(item,Num){if(1==Num){var dlg=dialogs.confirm("Confirm Delete",'Are you sure you want to delete this Item, "'+item.CharacterItemsValues[0].Value.Text.value+'", and all associated pages, tabs, and tiles?',{});dlg.result.then(function(res){if("yes"==res)var deleteitem=characterService.DeleteCharacterContent(item.CharacterItemsValues[0].CharacterItemId).then(function(data){if(200==data.data.StatusCode){for(var index=-1,deleteitem=eval($scope.Properties),i=0;i<deleteitem.length;i++)if(deleteitem[i].CharacterItemsValues===item.CharacterItemsValues){index=i;break}$scope.Properties.splice(index,1)}})})}else if(2==Num){var dlg=dialogs.confirm("Confirm Delete",'Are you sure you want to delete this Spell, "'+item.CharacterSpellsValues[0].Value.Text.value+'",?',{});dlg.result.then(function(res){if("yes"==res)var deleteitem=characterService.DeleteCharacterSpellContent(item.CharacterSpellsValues[0].CharacterSpellId).then(function(data){if(200==data.data.StatusCode){for(var index=-1,deletespell=eval($scope.Properties),i=0;i<deletespell.length;i++)if(deletespell[i].CharacterSpellsValues===item.deletespell){index=i;break}$scope.Properties.splice(index,1)}})})}else if(3==Num){var dlg=dialogs.confirm("Confirm Delete",'Are you sure you want to delete this Ability, "'+item.CharacterAbilitiesValues[0].Value.Text.value+'",?',{});dlg.result.then(function(res){if("yes"==res)var deleteitem=characterService.DeleteCharacterAbilityContent(item.CharacterAbilitiesValues[0].CharacterAbilityId).then(function(data){if(200==data.data.StatusCode){
for(var index=-1,deleteability=eval($scope.Properties),i=0;i<deleteability.length;i++)if(deleteability[i].CharacterAbilitiesValues===item.deleteability){index=i;break}$scope.Properties.splice(index,1)}})})}},$scope.cancel=function(){$uibModalInstance.close("cancel")}}]),module.controller("dialogEditCharacterItem",["$scope","$uibModalInstance","data","characterService","dialogs","rulesetDataShareService",function(e,t,a,i,l,o){e.AssociatedSpells=a.AssocSpells,e.AssociatedAbilities=a.AssocAbilities,e.ShowAssociatedSpells=!0,e.ShowAssociatedAbilities=!0,"Editing Spell"!=a.tabName&&"Copying Spell"!=a.tabName&&"Editing Ability"!=a.tabName&&"Copying Ability"!=a.tabName||(e.ShowAssociatedSpells=!1,e.ShowAssociatedAbilities=!1),e.Properties=a.scope,e.Items=a.Fullscope,e.Spells=a.FullSpellscope,e.Abilities=a.FullAbilityScope,e.tabName=a.tabName,e.copyitem=a.item,e.count=a.count,e.buttontext=a.btntext,e.IsBtnDisabled=a.IsBtnDisabled,e.OperationTypeMode=a.OperationTypeMode,e.SelectAssociatedSpells=a.SelectAssociatedSpells,e.SelectAssociatedAbilities=a.SelectAssociatedAbilities,e.CharacterId=a.CharacterId,e.Create=function(){if($("#loading").css("display","block"),e.OperationTypeMode="Create",void 0!=e.Properties[0].CharacterItemId)if(void 0!=e.AssociatedSpellsChanged&&(e.Items.AssociatedSpells=e.AssociatedSpellsChanged),void 0!=e.AssociatedAbilitiesChanged&&(e.Items.AssociatedAbilities=e.AssociatedAbilitiesChanged),void 0==e.Items){var a={CharacterItemId:e.Properties[0].CharacterItemId,CharacterItemsValues:e.Properties};e.Items=a}else e.Items.CharacterItemsValues=e.Properties;else if(void 0!=e.Properties[0].CharacterSpellId)if(void 0==e.Spells){var l={CharacterSpellId:e.Properties[0].CharacterSpellId,CharacterSpellsValues:e.Properties};e.Spells=l}else e.Spells.CharacterSpellsValues=e.Properties;else if(void 0!=e.Properties[0].CharacterAbilityId)if(void 0==e.Abilities){var o={CharacterAbilityId:e.Properties[0].CharacterAbilityId,CharacterAbilitiesValues:e.Properties};e.Abilities=o}else e.Abilities.CharacterAbilitiesValues=e.Properties;if("Update"==e.buttontext&&void 0!=e.Items){var s={CharacterItem:e.Items,CharacterSpell:null,CharacterAbility:null};i.EditCharacterContent(s).then(function(e){200==e.data.StatusCode?(t.close(e.data.PayLoad.CharacterItem),$("#loading").fadeOut("slow")):400==e.data.StatusCode&&1==e.data.ShowToUser&&toaster.pop("error",e.data.ErrorMessage)})}else if("Copy"==e.buttontext&&void 0!=e.Items){var s={CharacterItem:e.Items,CharacterSpell:null,CharacterAbility:null};i.CopyCharacterContent(s).then(function(e){200==e.data.StatusCode?(t.close(e.data.PayLoad.CharacterItem),$("#loading").fadeOut("slow")):400==e.data.StatusCode&&1==e.data.ShowToUser&&toaster.pop("error",e.data.ErrorMessage)})}else if("Update"==e.buttontext&&void 0!=e.Spells){var s={CharacterItem:null,CharacterSpell:e.Spells,CharacterAbility:null};i.EditCharacterContent(s).then(function(e){200==e.data.StatusCode?(t.close(e.data.PayLoad.CharacterSpell),$("#loading").fadeOut("slow")):400==e.data.StatusCode&&1==e.data.ShowToUser&&toaster.pop("error",e.data.ErrorMessage)})}else if("Copy"==e.buttontext&&void 0!=e.Spells){var s={CharacterItem:null,CharacterSpell:e.Spells,CharacterAbility:null};i.CopyCharacterContent(s).then(function(e){200==e.data.StatusCode?(t.close(e.data.PayLoad.CharacterSpell),$("#loading").fadeOut("slow")):400==e.data.StatusCode&&1==e.data.ShowToUser&&toaster.pop("error",e.data.ErrorMessage)})}else if("Update"==e.buttontext&&void 0!=e.Abilities){var s={CharacterItem:null,CharacterSpell:null,CharacterAbility:e.Abilities};i.EditCharacterContent(s).then(function(e){200==e.data.StatusCode?(t.close(e.data.PayLoad.CharacterAbility),$("#loading").fadeOut("slow")):400==e.data.StatusCode&&1==e.data.ShowToUser&&toaster.pop("error",e.data.ErrorMessage)})}else if("Copy"==e.buttontext&&void 0!=e.Abilities){var s={CharacterItem:null,CharacterSpell:null,CharacterAbility:e.Abilities};i.CopyCharacterContent(s).then(function(e){200==e.data.StatusCode?(t.close(e.data.PayLoad.CharacterAbility),$("#loading").fadeOut("slow")):400==e.data.StatusCode&&1==e.data.ShowToUser&&toaster.pop("error",e.data.ErrorMessage)})}},e.OpenAssociatedSpells=function(){var t=o.getLayoutSpellInventoryData();if(0==angular.equals({},t)){l.create("/views/dialogs/CharacterAssociatedSpells.html","dialogCharacterAssociatedSpells",{scope:t.CharacterSpells,associatedspells:e.AssociatedSpells}).result.then(function(t){e.AssociatedSpellsChanged=t})}else{i.GetCharacterSpellContent(e.CharacterId).then(function(t){if(200==t.data.StatusCode){var a=t.data.PayLoad;o.setLayoutSpellInventoryData(a);l.create("/views/dialogs/CharacterAssociatedSpells.html","dialogCharacterAssociatedSpells",{scope:a.CharacterSpells,associatedspells:e.AssociatedSpells}).result.then(function(t){e.AssociatedSpellsChanged=t})}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&toaster.pop("error",t.data.ErrorMessage)})}},e.OpenAssociatedAbilities=function(){var t=o.getLayoutAbilityInventoryData();if(0==angular.equals({},t)){l.create("/views/dialogs/CharacterAssociatedAbilities.html","dialogCharacterAssociatedAbilities",{scope:t.CharacterAbilities,associatedabilities:e.AssociatedAbilities}).result.then(function(t){e.AssociatedAbilitiesChanged=t})}else{i.GetCharacterAbilityContent(e.CharacterId).then(function(t){if(200==t.data.StatusCode){var a=t.data.PayLoad;o.setLayoutAbilityInventoryData(a);l.create("/views/dialogs/CharacterAssociatedAbilities.html","dialogCharacterAssociatedAbilities",{scope:a.CharacterAbilities,associatedabilities:e.AssociatedAbilities}).result.then(function(t){e.AssociatedAbilitiesChanged=t})}})}},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogCharacterAssociatedSpells",["$scope","$uibModalInstance","data","rulesetService","dialogs",function(e,t,a,i,l){e.Spells=a.scope;var o=a.associatedspells;if(null!=o&&void 0!=o)for(var s=0;s<e.Spells.length;s++)for(var n=0;n<o.length;n++)e.Spells[s].CharacterSpellsProperties[0].Value.Text.value==o[n].CharacterSpellsProperties[0].Value.Text.value&&(e.Spells[s].Selected=!0);e.SaveAssociatedSpells=function(){for(var a=[],i=0;i<e.Spells.length;i++)e.Spells[i].Selected&&a.push(e.Spells[i]);t.close(a)},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogCharacterAssociatedAbilities",["$scope","$uibModalInstance","data","rulesetService","dialogs",function(e,t,a,i,l){e.Abilities=a.scope;var o=a.associatedabilities;if(null!=o&&void 0!=o)for(var s=0;s<e.Abilities.length;s++)for(var n=0;n<o.length;n++)e.Abilities[s].CharacterAbilitiesProperties[0].Value.Text.value==o[n].CharacterAbilitiesProperties[0].Value.Text.value&&(e.Abilities[s].Selected=!0);e.SaveAssociatedAbilities=function(){for(var a=[],i=0;i<e.Abilities.length;i++)e.Abilities[i].Selected&&a.push(e.Abilities[i]);t.close(a)},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogCreateInventoryItem",["$scope","$uibModalInstance","data","rulesetService","characterService","rulesetDataShareService","dialogs","toaster",function(e,t,a,i,l,o,s,n){e.Properties=a.scope,e.tabName=a.tabName,e.buttontext=a.btntext,e.IsBtnDisabled=a.IsBtnDisabled,e.InventoryItems=a.NewInventory,e.CharacterId=a.CharacterId,e.ShowAssociatedSpells=!0,e.ShowAssociatedAbilities=!0,e.OpenAssociatedSpells=function(){var t=o.getLayoutSpellInventoryData();if(0==angular.equals({},t)){s.create("/views/dialogs/CharacterAssociatedSpells.html","dialogCharacterAssociatedSpells",{scope:t.CharacterSpells,associatedspells:e.AssociatedSpells}).result.then(function(t){e.AssociatedSpells=t})}else{l.GetCharacterSpellContent(e.CharacterId).then(function(t){if(200==t.data.StatusCode){var a=t.data.PayLoad;o.setLayoutSpellInventoryData(a);s.create("/views/dialogs/CharacterAssociatedSpells.html","dialogCharacterAssociatedSpells",{scope:a.CharacterSpells,associatedspells:e.AssociatedSpells}).result.then(function(t){e.AssociatedSpells=t})}})}},e.OpenAssociatedAbilities=function(){var t=o.getLayoutAbilityInventoryData();if(0==angular.equals({},t)){s.create("/views/dialogs/CharacterAssociatedAbilities.html","dialogCharacterAssociatedAbilities",{scope:t.CharacterAbilities,associatedabilities:e.AssociatedAbilities}).result.then(function(t){e.AssociatedAbilities=t})}else{l.GetCharacterAbilityContent(e.CharacterId).then(function(t){if(200==t.data.StatusCode){var a=t.data.PayLoad;o.setLayoutAbilityInventoryData(a);s.create("/views/dialogs/CharacterAssociatedAbilities.html","dialogCharacterAssociatedAbilities",{scope:a.CharacterAbilities,associatedabilities:e.AssociatedAbilities}).result.then(function(t){e.AssociatedAbilities=t})}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&n.pop("error",t.data.ErrorMessage)})}},e.Create=function(){$("#loading").css("display","block"),void 0!=e.Properties[0].CharacterItemId&&(e.InventoryItems.CharacterItems.CharacterProfileId=e.CharacterId,e.InventoryItems.CharacterItems.CharacterItemsProperties=e.Properties,e.InventoryItems.CharacterItems.AssociatedSpells=e.AssociatedSpells,e.InventoryItems.CharacterItems.AssociatedAbilities=e.AssociatedAbilities);var a=[];a.push(e.InventoryItems.CharacterItems);l.CreateCharacterInventoryItems(a).then(function(a){if(200==a.data.StatusCode){if(0!=a.data.PayLoad.length)for(var i=0;i<a.data.PayLoad.length;i++)e.Properties=a.data.PayLoad[i];t.close(e.Properties),$("#loading").fadeOut("slow")}else 400==a.data.StatusCode&&1==a.data.ShowToUser&&n.pop("error",a.data.ErrorMessage)})},e.ItemcloseDialog=function(){t.close(e.CoreStatProperties)},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogCreateInventorySpell",["$scope","$uibModalInstance","data","rulesetService","characterService",function(e,t,a,i,l){e.Properties=a.scope,e.tabName=a.tabName,e.buttontext=a.btntext,e.IsBtnDisabled=a.IsBtnDisabled,e.InventorySpells=a.NewInventory,e.CharacterId=a.CharacterId,e.Create=function(){void 0!=e.Properties[0].CharacterSpellId&&(e.InventorySpells.CharacterSpells.CharacterProfileId=e.CharacterId,e.InventorySpells.CharacterSpells.CharacterSpellsProperties=e.Properties);var a=[];a.push(e.InventorySpells.CharacterSpells);l.CreateCharacterInventorySpells(a).then(function(a){if(200==a.data.StatusCode){if(0!=a.data.PayLoad.length)for(var i=0;i<a.data.PayLoad.length;i++)e.Properties=a.data.PayLoad[i];t.close(e.Properties),$("#loading").fadeOut("slow")}else 400==a.data.StatusCode&&1==a.data.ShowToUser&&toaster.pop("error",a.data.ErrorMessage)})},e.ItemcloseDialog=function(){t.close(e.CoreStatProperties)},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogCreateInventoryAbility",["$scope","$uibModalInstance","data","rulesetService","characterService",function(e,t,a,i,l){e.Properties=a.scope,e.tabName=a.tabName,e.buttontext=a.btntext,e.IsBtnDisabled=a.IsBtnDisabled,e.InventoryAbility=a.NewInventory,e.CharacterId=a.CharacterId,e.Create=function(){void 0!=e.Properties[0].CharacterAbilityId&&(e.InventoryAbility.CharacterAbilities.CharacterProfileId=e.CharacterId,e.InventoryAbility.CharacterAbilities.CharacterAbilitiesProperties=e.Properties);var a=[];a.push(e.InventoryAbility.CharacterAbilities);l.CreateCharacterInventoryAbility(a).then(function(a){if(200==a.data.StatusCode){if(0!=a.data.PayLoad.length)for(var i=0;i<a.data.PayLoad.length;i++)e.Properties=a.data.PayLoad[i];t.close(e.Properties)}else 400==a.data.StatusCode&&1==a.data.ShowToUser&&toaster.pop("error",a.data.ErrorMessage)})},e.ItemcloseDialog=function(){t.close(e.CoreStatProperties)},e.cancel=function(){t.close("cancel")}}]),module.controller("NoteTile",["$scope","$uibModalInstance","data","rulesetService","toaster","dialogs","rulesetDataShareService",function(e,t,a,i,l,o,s){function n(){return Math.round((new Date).getTime()+100*Math.random())}e.NoteTile=a.scope,e.LinkExecuteTileContent=s.getLinkTileData(),1==angular.equals({},e.LinkExecuteTileContent)&&(e.LinkExecuteTileContent=a.RuleSetContentForLinkExecuteTile,1==angular.isUndefined(e.LinkExecuteTileContent)&&(e.LinkExecuteTileContent=a.fullscope)),e.Fullscope=a.fullscope,e.Modes=a.mode,e.TileBorder=function(){o.create("/views/dialogs/SelectTileBorder.html","dialogTileBorder",{scope:e.NoteTile.Styles}).result.then(function(t){switch(t.shadow){case"Use default":t.shadow="10px 10px";break;case"Yes":t.shadow="10px 10px 5px grey";break;case"No":default:t.shadow=""}null!=t.shadow&&""!=t.shadow||(t.shadow=""),null!=t.backgroundColor&&"#008fff"!=t.backgroundColor&&""!=t.shadow||(t.backgroundColor=""),null!=t.color&&""!=t.shadow||(t.color=""),null!=t.radius&&""!=t.shadow||(t.radius=""),null!=t.style&&""!=t.shadow||(t.style=""),null!=t.width&&""!=t.shadow||(t.width=""),e.NoteTile.Styles=t})},e.TileTitleBackground=function(){o.create("/views/dialogs/SelectTileTitleBackground.html","dialogTileBorder",{scope:e.NoteTile.Styles}).result.then(function(t){e.NoteTile.Styles=t})},e.SaveTile=function(){$("#loading").css("display","block"),0==angular.isUndefined(e.NoteTile.Styles)&&e.NoteTile.Styles,0==e.NoteTile.EditClientId&&(e.NoteTile.EditClientId=n()),t.close(e.NoteTile),$("#loading").fadeOut("slow")},e.SaveCounterTile=function(){$("#loading").css("display","block"),e.NoteTile.Value.Counter.Min>e.NoteTile.Value.Counter.Max?l.pop("error","Min Value Should be Less Than Max Value "):(null!=e.NoteTile.Styles&&(e.NoteTile.Styles.backgroundColor=$("#backgroundcolor").val()),0==e.NoteTile.EditClientId&&(e.NoteTile.EditClientId=n()),t.close(e.NoteTile),$("#loading").fadeOut("slow"))},e.SaveAttributeTile=function(){for(var a=0;a<e.NoteTile.CorestatValues.length;a++)if(null!=e.NoteTile.CorestatValues[a].Name&&e.NoteTile.Value.Attribute.CorestatValue==e.NoteTile.CorestatValues[a].Name){if(e.NoteTile.Value.Attribute.CoreStatValue=e.NoteTile.CorestatValues[a].Value,0==e.NoteTile.CorestatValues[a].Id)return l.pop("error","CoreStats Values are not saved for "+e.NoteTile.CorestatValues[a].Name+"  CoreStat"),!1;e.NoteTile.Value.Attribute.CoreStatValueId=e.NoteTile.CorestatValues[a].Id,e.NoteTile.Value.Attribute.TypeId=e.NoteTile.CorestatValues[a].TypeId,e.NoteTile.Value.Attribute.CharacterProfileId=e.NoteTile.CorestatValues[a].CharacterId,e.NoteTile.Value.Attribute.CorestatValue=e.NoteTile.CorestatValues[a].Name,e.NoteTile.Value.Attribute.AttributeContent=e.NoteTile.CorestatValues[a],e.NoteTile.Value.Attribute.Name=e.NoteTile.CorestatValues[a].Name,e.NoteTile.Value.Attribute.SelectedCorestatValue=e.NoteTile.CorestatValues[a].Name,1==e.NoteTile.Value.Attribute.TypeId?e.NoteTile.Value.Attribute.CorestatValues="Text:"+e.NoteTile.CorestatValues[a].Value.Text.value:2==e.NoteTile.Value.Attribute.TypeId?e.NoteTile.Value.Attribute.CorestatValues="Choices:"+e.NoteTile.CorestatValues[a].Value.Choices:3==e.NoteTile.Value.Attribute.TypeId?e.NoteTile.Value.Attribute.CorestatValues="On/Off:"+e.NoteTile.CorestatValues[a].Value.OnOrOff.value:4==e.NoteTile.Value.Attribute.TypeId?e.NoteTile.Value.Attribute.CorestatValues="Yes/No:"+e.NoteTile.CorestatValues[a].Value.YesOrNo.value:5==e.NoteTile.Value.Attribute.TypeId?e.NoteTile.Value.Attribute.CorestatValues="Value:"+e.NoteTile.CorestatValues[a].Value.ValueAndSubValue.value+" Sub Value:"+e.NoteTile.CorestatValues[a].Value.ValueAndSubValue.subvalue:6==e.NoteTile.Value.Attribute.TypeId?e.NoteTile.Value.Attribute.CorestatValues="Current Value:"+e.NoteTile.CorestatValues[a].Value.CurrentAndMaxValue.CurrentValue+" Max Value:"+e.NoteTile.CorestatValues[a].Value.CurrentAndMaxValue.MaxValue:7==e.NoteTile.Value.Attribute.TypeId?e.NoteTile.Value.Attribute.CorestatValues="Weight:"+e.NoteTile.CorestatValues[a].Value.Weight.value:8==e.NoteTile.Value.Attribute.TypeId?e.NoteTile.Value.Attribute.CorestatValues="Image:"+e.NoteTile.CorestatValues[a].Value.Image.image:12==e.NoteTile.Value.Attribute.TypeId?e.NoteTile.Value.Attribute.CorestatValues="Height:"+e.NoteTile.CorestatValues[a].Value.Height.value+e.NoteTile.CorestatValues[a].Value.Height.units.selectedUnit:13==e.NoteTile.Value.Attribute.TypeId?e.NoteTile.Value.Attribute.CorestatValues="Volume:"+e.NoteTile.CorestatValues[a].Value.Volume.value.depthvalue+"  "+e.NoteTile.CorestatValues[a].Value.Volume.units.selectedUnit:14==e.NoteTile.Value.Attribute.TypeId?e.NoteTile.Value.Attribute.CorestatValues="Number:"+e.NoteTile.CorestatValues[a].Value.Number.value:15==e.NoteTile.Value.Attribute.TypeId?e.NoteTile.Value.Attribute.CorestatValues="Dice:"+e.NoteTile.CorestatValues[a].Value.DefaultDice.value:19==e.NoteTile.Value.Attribute.TypeId&&(e.NoteTile.Value.Attribute.CorestatValues="Text Area:"+e.NoteTile.CorestatValues[a].Value.TextArea.value),s.setTilelst(e.NoteTile)}0==e.NoteTile.EditClientId&&(e.NoteTile.EditClientId=n()),t.close(e.NoteTile),$("#loading").fadeOut("slow")},e.SaveLinkTile=function(){$("#loading").css("display","block");var a=!1,i=!1,l=!1;if(0==angular.isUndefined(e.NoteTile.LinkTileItems)){if("Items"==e.NoteTile.Value.Link.SelectedPropertyValue)for(var o=0;o<e.NoteTile.LinkTileItems.length;o++)e.NoteTile.Value.Link.SelectedProperty==e.NoteTile.LinkTileItems[o].ItemProperties[0].Value.Text.value&&(a=!0);else if("Spells"==e.NoteTile.Value.Link.SelectedPropertyValue)for(var o=0;o<e.NoteTile.LinkTileSpells.length;o++)e.NoteTile.Value.Link.SelectedProperty==e.NoteTile.LinkTileSpells[o].SpellProperties[0].Value.Text.value&&(i=!0);else if("Abilities"==e.NoteTile.Value.Link.SelectedPropertyValue)for(var o=0;o<e.NoteTile.LinkTileAbilities.length;o++)e.NoteTile.Value.Link.SelectedProperty==e.NoteTile.LinkTileAbilities[o].AbilityProperties[0].Value.Text.value&&(l=!0);if(1==a)for(var o=0;o<e.NoteTile.LinkTileItems.length;o++)console.log("$scope.NoteTile.Value.Link.SelectedProperty: ",e.NoteTile.Value.Link.SelectedProperty),console.log("$scope.NoteTile.LinkTileItems[i].ItemProperties[0].Value.Text.value: ",e.NoteTile.LinkTileItems[o].ItemProperties[0].Value.Text.value),e.NoteTile.Value.Link.SelectedProperty==e.NoteTile.LinkTileItems[o].ItemProperties[0].Value.Text.value&&(e.NoteTile.Value.Link.Title=e.NoteTile.Value.Link.Title,e.NoteTile.Value.Link.SelectedPropertyValueImage=e.NoteTile.LinkTileItems[o].ItemProperties[1].Value.Image.image,null==e.NoteTile.Value.Link.SelectedPropertyValueImage&&(e.NoteTile.Value.Link.SelectedPropertyValueImage=""),e.NoteTile.Value.Link.SelectedProperty=e.NoteTile.LinkTileItems[o].ItemProperties[0].Value.Text.value,e.NoteTile.Value.Link.Content=e.NoteTile.LinkTileItems[o]);else if(1==i)for(var o=0;o<e.NoteTile.LinkTileSpells.length;o++)e.NoteTile.Value.Link.SelectedProperty==e.NoteTile.LinkTileSpells[o].SpellProperties[0].Value.Text.value&&(e.NoteTile.Value.Link.Title=e.NoteTile.Value.Link.Title,e.NoteTile.Value.Link.SelectedPropertyValueImage=e.NoteTile.LinkTileSpells[o].SpellProperties[1].Value.Image.image,null==e.NoteTile.Value.Link.SelectedPropertyValueImage&&(e.NoteTile.Value.Link.SelectedPropertyValueImage=""),e.NoteTile.Value.Link.SelectedProperty=e.NoteTile.LinkTileSpells[o].SpellProperties[0].Value.Text.value,e.NoteTile.Value.Link.Content=e.NoteTile.LinkTileSpells[o]);else if(1==l)for(var o=0;o<e.NoteTile.LinkTileAbilities.length;o++)e.NoteTile.Value.Link.SelectedProperty==e.NoteTile.LinkTileAbilities[o].AbilityProperties[0].Value.Text.value&&(e.NoteTile.Value.Link.Title=e.NoteTile.Value.Link.Title,e.NoteTile.Value.Link.SelectedPropertyValueImage=e.NoteTile.LinkTileAbilities[o].AbilityProperties[1].Value.Image.image,null==e.NoteTile.Value.Link.SelectedPropertyValueImage&&(e.NoteTile.Value.Link.SelectedPropertyValueImage=""),e.NoteTile.Value.Link.SelectedProperty=e.NoteTile.LinkTileAbilities[o].AbilityProperties[0].Value.Text.value,e.NoteTile.Value.Link.Content=e.NoteTile.LinkTileAbilities[o])}else{if(1==angular.isUndefined(e.LinkExecuteTileContent)){e.LinkExecuteTileContent={};var r=s.getRulesetData();e.LinkExecuteTileContent.Items=r.Items,e.LinkExecuteTileContent.Spells=r.Spells,e.LinkExecuteTileContent.Abilities=r.Abilities}if("Items"==e.NoteTile.Value.Link.SelectedPropertyValue)for(var o=0;o<e.LinkExecuteTileContent.Items.length;o++)e.NoteTile.Value.Link.SelectedProperty==e.LinkExecuteTileContent.Items[o].ItemProperties[0].Value.Text.value&&(a=!0);else if("Spells"==e.NoteTile.Value.Link.SelectedPropertyValue)for(var o=0;o<e.LinkExecuteTileContent.Spells.length;o++)e.NoteTile.Value.Link.SelectedProperty==e.LinkExecuteTileContent.Spells[o].SpellProperties[0].Value.Text.value&&(i=!0);else if("Abilities"==e.NoteTile.Value.Link.SelectedPropertyValue)for(var o=0;o<e.LinkExecuteTileContent.Abilities.length;o++)e.NoteTile.Value.Link.SelectedProperty==e.LinkExecuteTileContent.Abilities[o].AbilityProperties[0].Value.Text.value&&(l=!0);if(1==a)for(var o=0;o<e.LinkExecuteTileContent.Items.length;o++)e.NoteTile.Value.Link.SelectedProperty==e.LinkExecuteTileContent.Items[o].ItemProperties[0].Value.Text.value&&(e.NoteTile.Value.Link.Title=e.NoteTile.Value.Link.Title,e.NoteTile.Value.Link.SelectedPropertyValueImage=e.LinkExecuteTileContent.Items[o].ItemProperties[1].Value.Image.image,null==e.NoteTile.Value.Link.SelectedPropertyValueImage&&(e.NoteTile.Value.Link.SelectedPropertyValueImage=""),e.NoteTile.Value.Link.SelectedProperty=e.LinkExecuteTileContent.Items[o].ItemProperties[0].Value.Text.value,e.NoteTile.Value.Link.Content=e.LinkExecuteTileContent.Items[o]);else if(1==i)for(var o=0;o<e.LinkExecuteTileContent.Spells.length;o++)e.NoteTile.Value.Link.SelectedProperty==e.LinkExecuteTileContent.Spells[o].SpellProperties[0].Value.Text.value&&(e.NoteTile.Value.Link.Title=e.NoteTile.Value.Link.Title,e.NoteTile.Value.Link.SelectedPropertyValueImage=e.LinkExecuteTileContent.Spells[o].SpellProperties[1].Value.Image.image,null==e.NoteTile.Value.Link.SelectedPropertyValueImage&&(e.NoteTile.Value.Link.SelectedPropertyValueImage=""),e.NoteTile.Value.Link.SelectedProperty=e.LinkExecuteTileContent.Spells[o].SpellProperties[0].Value.Text.value,e.NoteTile.Value.Link.Content=e.LinkExecuteTileContent.Spells[o]);else if(1==l)for(var o=0;o<e.LinkExecuteTileContent.Abilities.length;o++)e.NoteTile.Value.Link.SelectedProperty==e.LinkExecuteTileContent.Abilities[o].AbilityProperties[0].Value.Text.value&&(e.NoteTile.Value.Link.Title=e.NoteTile.Value.Link.Title,e.NoteTile.Value.Link.SelectedPropertyValueImage=e.LinkExecuteTileContent.Abilities[o].AbilityProperties[1].Value.Image.image,null==e.NoteTile.Value.Link.SelectedPropertyValueImage&&(e.NoteTile.Value.Link.SelectedPropertyValueImage=""),e.NoteTile.Value.Link.SelectedProperty=e.LinkExecuteTileContent.Abilities[o].AbilityProperties[0].Value.Text.value,e.NoteTile.Value.Link.Content=e.LinkExecuteTileContent.Abilities[o])}null!=e.NoteTile.Styles&&(e.NoteTile.Styles.backgroundColor=$("#backgroundcolor").val()),0==e.NoteTile.EditClientId&&(e.NoteTile.EditClientId=n()),t.close(e.NoteTile),$("#loading").fadeOut("slow")},e.SaveExecuteTile=function(){$("#loading").css("display","block");var a=!1,i=!1,l=!1;if(0==angular.isUndefined(e.NoteTile.ExecuteTileItems)){if("Items"==e.NoteTile.Value.Execute.SelectedPropertyValue)for(var o=0;o<e.NoteTile.ExecuteTileItems.length;o++)e.NoteTile.Value.Execute.SelectedProperty==e.NoteTile.ExecuteTileItems[o].ItemProperties[0].Value.Text.value&&(a=!0);else if("Spells"==e.NoteTile.Value.Execute.SelectedPropertyValue)for(var o=0;o<e.NoteTile.ExecuteTileSpells.length;o++)e.NoteTile.Value.Execute.SelectedProperty==e.NoteTile.ExecuteTileSpells[o].SpellProperties[0].Value.Text.value&&(i=!0);else if("Abilities"==e.NoteTile.Value.Execute.SelectedPropertyValue)for(var o=0;o<e.NoteTile.ExecuteTileAbilities.length;o++)e.NoteTile.Value.Execute.SelectedProperty==e.NoteTile.ExecuteTileAbilities[o].AbilityProperties[0].Value.Text.value&&(l=!0);if(1==a)for(var o=0;o<e.NoteTile.ExecuteTileItems.length;o++)e.NoteTile.Value.Execute.SelectedProperty==e.NoteTile.ExecuteTileItems[o].ItemProperties[0].Value.Text.value&&(e.NoteTile.Value.Execute.Name=e.NoteTile.Value.Execute.Name,e.NoteTile.Value.Execute.SelectedPropertyValueImage=e.NoteTile.ExecuteTileItems[o].ItemProperties[1].Value.Image.image,null==e.NoteTile.Value.Execute.SelectedPropertyValueImage&&(e.NoteTile.Value.Execute.SelectedPropertyValueImage=""),e.NoteTile.Value.Execute.SelectedProperty=e.NoteTile.ExecuteTileItems[o].ItemProperties[0].Value.Text.value,e.NoteTile.Value.Execute.Command="",e.NoteTile.Value.Execute.CommandLastResult="",e.NoteTile.Value.Execute.Content=e.NoteTile.ExecuteTileItems[o]);else if(1==i)for(var o=0;o<e.NoteTile.ExecuteTileSpells.length;o++)e.NoteTile.Value.Execute.SelectedProperty==e.NoteTile.ExecuteTileSpells[o].SpellProperties[0].Value.Text.value&&(e.NoteTile.Value.Execute.Name=e.NoteTile.Value.Execute.Name,e.NoteTile.Value.Execute.SelectedPropertyValueImage=e.NoteTile.ExecuteTileSpells[o].SpellProperties[1].Value.Image.image,null==e.NoteTile.Value.Execute.SelectedPropertyValueImage&&(e.NoteTile.Value.Execute.SelectedPropertyValueImage=""),e.NoteTile.Value.Execute.SelectedProperty=e.NoteTile.ExecuteTileSpells[o].SpellProperties[0].Value.Text.value,e.NoteTile.Value.Execute.Command="",e.NoteTile.Value.Execute.CommandLastResult="",e.NoteTile.Value.Execute.Content=e.NoteTile.ExecuteTileSpells[o],e.NoteTile.Value.Execute.Content=e.NoteTile.ExecuteTileSpells[o]);else if(1==l)for(var o=0;o<e.NoteTile.ExecuteTileAbilities.length;o++)e.NoteTile.Value.Execute.SelectedPropertyValue==e.NoteTile.ExecuteTileAbilities[o].AbilityProperties[0].Value.Text.value&&(e.NoteTile.Value.Execute.Name=e.NoteTile.Value.Execute.Name,e.NoteTile.Value.Execute.SelectedPropertyValue=e.NoteTile.ExecuteTileAbilities[o].AbilityProperties[1].Value.Image.image,null==e.NoteTile.Value.Execute.SelectedPropertyValueImage&&(e.NoteTile.Value.Execute.SelectedPropertyValueImage=""),e.NoteTile.Value.Execute.SelectedProperty=e.NoteTile.ExecuteTileAbilities[o].AbilityProperties[0].Value.Text.value,e.NoteTile.Value.Execute.Command=e.NoteTile.Value.Execute.Command,e.NoteTile.Value.Execute.CommandLastResult=e.NoteTile.Value.Execute.CommandLastResult,e.NoteTile.Value.Execute.Content=e.NoteTile.ExecuteTileAbilities[o])}else{if(1==angular.isUndefined(e.LinkExecuteTileContent)){e.LinkExecuteTileContent={};var r=s.getRulesetData();e.LinkExecuteTileContent.Items=r.Items,e.LinkExecuteTileContent.Spells=r.Spells,e.LinkExecuteTileContent.Abilities=r.Abilities}if("Items"==e.NoteTile.Value.Execute.SelectedPropertyValue)for(var o=0;o<e.LinkExecuteTileContent.Items.length;o++)e.NoteTile.Value.Execute.SelectedProperty==e.LinkExecuteTileContent.Items[o].ItemProperties[0].Value.Text.value&&(a=!0);else if("Spells"==e.NoteTile.Value.Execute.SelectedPropertyValue)for(var o=0;o<e.LinkExecuteTileContent.Spells.length;o++)e.NoteTile.Value.Execute.SelectedProperty==e.LinkExecuteTileContent.Spells[o].SpellProperties[0].Value.Text.value&&(i=!0);else if("Abilities"==e.NoteTile.Value.Execute.SelectedPropertyValue)for(var o=0;o<e.LinkExecuteTileContent.Abilities.length;o++)e.NoteTile.Value.Execute.SelectedProperty==e.LinkExecuteTileContent.Abilities[o].AbilityProperties[0].Value.Text.value&&(l=!0);if(1==a)for(var o=0;o<e.LinkExecuteTileContent.Items.length;o++)e.NoteTile.Value.Execute.SelectedProperty==e.LinkExecuteTileContent.Items[o].ItemProperties[0].Value.Text.value&&(e.NoteTile.Value.Execute.Name=e.NoteTile.Value.Execute.Title,e.NoteTile.Value.Execute.SelectedPropertyValueImage=e.LinkExecuteTileContent.Items[o].ItemProperties[1].Value.Image.image,null==e.NoteTile.Value.Execute.SelectedPropertyValueImage&&(e.NoteTile.Value.Execute.SelectedPropertyValueImage=""),e.NoteTile.Value.Execute.SelectedProperty=e.LinkExecuteTileContent.Items[o].ItemProperties[0].Value.Text.value,e.NoteTile.Value.Execute.Command="",e.NoteTile.Value.Execute.CommandLastResult="",e.NoteTile.Value.Execute.Content=e.LinkExecuteTileContent.Items[o]);else if(1==i)for(var o=0;o<e.LinkExecuteTileContent.Spells.length;o++)e.NoteTile.Value.Execute.SelectedProperty==e.LinkExecuteTileContent.Spells[o].SpellProperties[0].Value.Text.value&&(e.NoteTile.Value.Execute.Name=e.NoteTile.Value.Execute.Title,e.NoteTile.Value.Execute.SelectedPropertyValueImage=e.LinkExecuteTileContent.Spells[o].SpellProperties[1].Value.Image.image,null==e.NoteTile.Value.Execute.SelectedPropertyValueImage&&(e.NoteTile.Value.Execute.SelectedPropertyValueImage=""),e.NoteTile.Value.Execute.SelectedProperty=e.LinkExecuteTileContent.Spells[o].SpellProperties[0].Value.Text.value,e.NoteTile.Value.Execute.Command="",e.NoteTile.Value.Execute.CommandLastResult="",e.NoteTile.Value.Execute.Content=e.LinkExecuteTileContent.Spells[o],e.NoteTile.Value.Execute.Content=e.LinkExecuteTileContent.Spells[o]);else if(1==l)for(var o=0;o<e.LinkExecuteTileContent.Abilities.length;o++)e.NoteTile.Value.Execute.SelectedPropertyValue==e.LinkExecuteTileContent.Abilities[o].AbilityProperties[0].Value.Text.value&&(e.NoteTile.Value.Execute.Name=e.NoteTile.Value.Execute.Title,e.NoteTile.Value.Execute.SelectedPropertyValue=e.LinkExecuteTileContent.Abilities[o].AbilityProperties[1].Value.Image.image,null==e.NoteTile.Value.Execute.SelectedPropertyValueImage&&(e.NoteTile.Value.Execute.SelectedPropertyValueImage=""),e.NoteTile.Value.Execute.SelectedProperty=e.LinkExecuteTileContent.Abilities[o].AbilityProperties[0].Value.Text.value,e.NoteTile.Value.Execute.Command=e.NoteTile.Value.Execute.Command,e.NoteTile.Value.Execute.CommandLastResult=e.NoteTile.Value.Execute.CommandLastResult,e.NoteTile.Value.Execute.Content=e.LinkExecuteTileContent.Abilities[o])}null!=e.NoteTile.Styles&&(e.NoteTile.Styles.backgroundColor=$("#backgroundcolor").val()),0==e.NoteTile.EditClientId&&(e.NoteTile.EditClientId=n()),t.close(e.NoteTile),$("#loading").fadeOut("slow")},e.SaveCommandTile=function(){if($("#loading").css("display","block"),null!=e.NoteTile.Value.Command.command){dicenotationvalidator(e.NoteTile.Value.Command.command)?(null!=e.NoteTile.Styles&&(e.NoteTile.Styles.backgroundColor=$("#backgroundcolor").val()),e.NoteTile.Value.Command.commandLastResult=localStorage.getItem("rollresult"),0==e.NoteTile.EditClientId&&(e.NoteTile.EditClientId=n()),t.close(e.NoteTile),$("#loading").fadeOut("slow")):l.pop("error","Invalid Command")}},e.SaveImageTile=function(){$("#loading").css("display","block"),null!=e.NoteTile.Styles&&(e.NoteTile.Styles.backgroundColor=$("#backgroundcolor").val()),0==e.NoteTile.EditClientId&&(e.NoteTile.EditClientId=n()),t.close(e.NoteTile),$("#loading").fadeOut("slow")},e.cancel=function(){t.close("cancel")}}]),module.controller("ShowAllTileContent",["$scope","$uibModalInstance","data","rulesetService","toaster","dialogs","layoutService",function(e,t,a,i,l,o,s){e.Content=a.scope,"Attribute"==e.Content.TileTypeName&&(5==e.Content.Value.Attribute.AttributeContent.TypeId?(e.Value=e.Content.Value.Attribute.AttributeContent.Value.ValueAndSubValue.value,e.Subvalue=e.Content.Value.Attribute.AttributeContent.Value.ValueAndSubValue.subvalue,e.ValueSubValue=!0,e.CurrentMax=!1,e.Number=!1):6==e.Content.Value.Attribute.AttributeContent.TypeId?(e.Currentvalue=e.Content.Value.Attribute.AttributeContent.Value.CurrentAndMaxValue.CurrentValue,e.Maxvalue=e.Content.Value.Attribute.AttributeContent.Value.CurrentAndMaxValue.MaxValue,e.ValueSubValue=!1,e.CurrentMax=!0,e.Number=!1):14==e.Content.Value.Attribute.AttributeContent.TypeId&&(e.Numbers=e.Content.Value.Attribute.AttributeContent.Value.Number.value,e.ValueSubValue=!1,e.CurrentMax=!1,e.Number=!0)),e.SaveCounterUpdatedValue=function(){e.Content.Value.Counter.Value>e.Content.Value.Counter.Max?l.pop("error","Value Should Not be Greater Than Max Value "):t.close(e.Content)},e.Increment=function(t){if(1==t){var t=e.Maxvalue;t+=1,e.Maxvalue=t}else if(2==t){var t=e.Currentvalue;t+=1,e.Currentvalue=t}else if(3==t){var t=e.Value;t+=1,e.Value=t}else if(4==t){var t=e.Subvalue;t+=1,e.Subvalue=t}else if(5==t){var t=e.Numbers;t+=1,e.Numbers=t}},e.Decrement=function(t){if(1==t){var t=e.Maxvalue;t-=1,e.Maxvalue=t}else if(2==t){var t=e.Currentvalue;t-=1,e.Currentvalue=t}else if(3==t){var t=e.Value;t-=1,e.Value=t}else if(4==t){var t=e.Subvalue;t-=1,e.Subvalue=t}else if(5==t){var t=e.Numbers;t-=1,e.Numbers=t}},e.Reset=function(t){if(1==t){
var a=o.confirm("Confirm Reset",'Are you sure you want to reset Max Value to "'+e.Content.Value.Attribute.AttributeContent.Value.CurrentAndMaxValue.MaxValue+'"?',{size:"md"});a.result.then(function(t){"yes"==t&&(e.Maxvalue=e.Content.Value.Attribute.AttributeContent.Value.CurrentAndMaxValue.MaxValue)})}else if(2==t){var a=o.confirm("Confirm Reset",'Are you sure you want to reset Current Value to "'+e.Content.Value.Attribute.AttributeContent.Value.CurrentAndMaxValue.CurrentValue+'"?',{size:"md"});a.result.then(function(t){"yes"==t&&(e.Currentvalue=e.Content.Value.Attribute.AttributeContent.Value.CurrentAndMaxValue.CurrentValue)})}else if(3==t){var a=o.confirm("Confirm Reset",'Are you sure you want to reset Value to "'+e.Content.Value.Attribute.AttributeContent.Value.ValueAndSubValue.value+'"?',{size:"md"});a.result.then(function(t){"yes"==t&&(e.Value=e.Content.Value.Attribute.AttributeContent.Value.ValueAndSubValue.value)})}else if(4==t){var a=o.confirm("Confirm Reset",'Are you sure you want to reset Sub Value to "'+e.Content.Value.Attribute.AttributeContent.Value.ValueAndSubValue.subvalue+'"?',{size:"md"});a.result.then(function(t){"yes"==t&&(e.Subvalue=e.Content.Value.Attribute.AttributeContent.Value.ValueAndSubValue.subvalue)})}else if(5==t){var a=o.confirm("Confirm Reset",'Are you sure you want to reset Number to "'+e.Content.Value.Attribute.AttributeContent.Value.Number.value+'"?',{size:"md"});a.result.then(function(t){"yes"==t&&(e.Numbers=e.Content.Value.Attribute.AttributeContent.Value.Number.value)})}},e.SaveAttributeCorestatValue=function(){6==e.Content.Value.Attribute.AttributeContent.TypeId||(5==e.Content.Value.Attribute.AttributeContent.TypeId?(e.Content.Value.Attribute.CoreStatValue.ValueAndSubValue.value=e.Value,e.Content.Value.Attribute.CoreStatValue.ValueAndSubValue.subvalue=e.Subvalue):14==e.Content.Value.Attribute.AttributeContent.TypeId&&(e.Content.Value.Attribute.CoreStatValue.Number.value=e.Numbers)),t.close(e.Content)},e.DiceRoll=function(t){if(1==t){s.GetDefaultDice(e.Content.Value.Attribute.AttributeContent.CharacterId).then(function(t){if(200==t.data.StatusCode){var a=t.data.PayLoad+"+"+e.Maxvalue;e.Content.Command=a;o.create("/views/dialogs/defaultdiceselection.html","dialogDefaultDiceSelect",{scope:e.Content,mode:2}).result.then(function(e){})}else 400==t.data.StatusCode&&alert(t.data.ErrorMessage)})}else if(2==t){s.GetDefaultDice(e.Content.Value.Attribute.AttributeContent.CharacterId).then(function(t){if(200==t.data.StatusCode){var a=t.data.PayLoad+"+"+e.Currentvalue;e.Content.Command=a;o.create("/views/dialogs/defaultdiceselection.html","dialogDefaultDiceSelect",{scope:e.Content,mode:2}).result.then(function(e){})}else 400==t.data.StatusCode&&alert(t.data.ErrorMessage)})}else if(3==t){s.GetDefaultDice(e.Content.Value.Attribute.AttributeContent.CharacterId).then(function(t){if(200==t.data.StatusCode){var a=t.data.PayLoad+"+"+e.Value;e.Content.Command=a;o.create("/views/dialogs/defaultdiceselection.html","dialogDefaultDiceSelect",{scope:e.Content,mode:2}).result.then(function(e){})}else 400==t.data.StatusCode&&alert(t.data.ErrorMessage)})}else if(4==t){s.GetDefaultDice(e.Content.Value.Attribute.AttributeContent.CharacterId).then(function(t){if(200==t.data.StatusCode){var a=t.data.PayLoad+"+"+e.Subvalue;e.Content.Command=a;o.create("/views/dialogs/defaultdiceselection.html","dialogDefaultDiceSelect",{scope:e.Content,mode:2}).result.then(function(e){})}else 400==t.data.StatusCode&&alert(t.data.ErrorMessage)})}else if(5==t){s.GetDefaultDice(e.Content.Value.Attribute.AttributeContent.CharacterId).then(function(t){if(200==t.data.StatusCode){var a=t.data.PayLoad+"+"+e.Numbers;e.Content.Command=a;o.create("/views/dialogs/defaultdiceselection.html","dialogDefaultDiceSelect",{scope:e.Content,mode:2}).result.then(function(e){})}else 400==t.data.StatusCode&&alert(t.data.ErrorMessage)})}},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogTileBorder",["$scope","$uibModalInstance","data","dialogs",function(e,t,a,i,l){e.TileBorders=a.scope,e.cancel=function(){t.dismiss("Canceled")},e.SaveTileBorder=function(){e.TileBorders.color=$("#bordercolor").val(),t.close(e.TileBorders)},e.SaveTileBackgrounds=function(){e.TileBorders.titletextcolor=$("#titletextcolor").val(),e.TileBorders.titlebackgroundcolor=$("#titlebackgroundcolor").val(),e.TileBorders.bodytextcolor=$("#bodytextcolor").val(),e.TileBorders.bodybackgroundColor=$("#bodybackgroundColor").val(),t.close(e.TileBorders)}}]),module.controller("dialogImportRulesetinCharecter",["$scope","$uibModalInstance","data","characterService","toaster",function(e,t,a,i,l){var o=a.characterProfileId;e.cancel=function(){t.close("cancel")},e.rulesetFileUpload=function(t){if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){e.file=t.target.result},a.readAsDataURL(t.files[0]),e.fileName=t.files[0].name}},e.uploadFile=function(){e.file;i.uploadFileToUrl(o,e.file,e.fileName).then(function(e){200==e.data.StatusCode?"Sucess"==e.data.PayLoad?(l.pop("success","Ruleset Imported Sucessfully"),t.close(e.data.PayLoad)):l.pop("error",e.data.ErrorMessage):400==e.data.StatusCode&&l.pop("error",e.data.ErrorMessage)})}}]),module.controller("dialogImportRuleset",["$scope","$uibModalInstance","data","rulesetService","toaster",function(e,t,a,i,l){var o=a.ruleSetId;e.rulesetFileUpload=function(t){if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){e.file=t.target.result},a.readAsDataURL(t.files[0]),e.fileName=t.files[0].name}},e.uploadFile=function(){e.file;if(1==angular.isUndefined(e.file))return l.pop("error","Please select zip file"),!1;i.uploadFileToUrl(o,e.file,e.fileName,e.RuleSetName).then(function(e){200==e.data.StatusCode?(l.pop("success","Ruleset Imported Sucessfully"),t.close(e.data.PayLoad)):l.pop("error",e.data.ErrorMessage)})},e.cancel=function(){t.close("")}}]),module.controller("dialogDefaultDiceSelect",["$scope","$uibModalInstance","data","rulesetService","layoutService","dialogs","rulesetDataShareService",function(e,t,a,i,l,o,s){e.Result=a.scope,e.CharacterId=a.CharacterId,e.Dicelist=a.Dice,e.Lastresult=a.LastResult,e.Corestats=s.getLayoutData(),void 0!=e.Result&&null!=e.Result&&e.Result.length<=0&&(e.ShowNonNumericCorestats=!0),t.rendered.then(function(){if(1==a.mode)void 0!=e.Result&&null!=e.Result&&""!=e.Result&&$("#customset").val(e.Result),diceselectcommand();else if(2==a.mode){if(e.Result.length<=0&&(e.ShowNonNumericCorestats=!0),e.DiceVisible=!1,"Execute"==e.Result.TileTypeName){if(null!=e.Result.ItemProperties)if(null!=e.Result.ItemProperties[10].Value.Text.value){var t=e.Result.ItemProperties[10].Value.Text.value;$("#customset").val(t)}else{var t="4d6 + d20";$("#customset").val(t)}}else if("Command"==e.Result.TileTypeName){if(null!=e.Result.Value.Command.command){var t=e.Result.Value.Command.command;$("#customset").val(t)}}else if("Attribute"==e.Result.TileTypeName){var t=e.Result.Command;$("#customset").val(t)}else{var t="4d6 + d20";$("#customset").val(t)}dicerollwithcommand(t)}else if(3==a.mode){var i=l.GetDice(e.Result);i.then(function(t){200==t.data.StatusCode&&(e.DiceList=t.data.PayLoad,e.DiceVisible=!0)}),dicerollwithoutcommand()}}),e.DefaultDiceSelect=function(){var e=$("#customset").val();t.close(e)},e.DiceSaveCommand=function(){var t=$("#customset").val();if(dicenotationvalidator(t)){o.create("/views/dialogs/adddicename.html","dialogDefaultDiceSelect",{scope:t,Dice:e.DiceList,LastResult:e.Lastresult,CharacterId:e.Result}).result.then(function(t){e.DiceList=t})}else alert("Invalid Command")},e.save=function(){var a={CharacterId:e.CharacterId,Name:e.Name,Command:e.Result,LastRunResult:e.Lastresult};l.SaveDice(a).then(function(i){200==i.data.StatusCode&&(e.Dicelist.push(a),t.close(e.Dicelist))})},e.ShowCommand=function(t){for(var a=0;a<e.DiceList.length;a++)t==e.DiceList[a].Name&&$("#customset").val(e.DiceList[a].Command)},e.AddNumericCorestats=function(){e.NumericCorestats=[];for(var t=0;t<e.Corestats.CorestatValues.length;t++)5!=e.Corestats.CorestatValues[t].TypeId&&6!=e.Corestats.CorestatValues[t].TypeId&&14!=e.Corestats.CorestatValues[t].TypeId||e.NumericCorestats.push(e.Corestats.CorestatValues[t].Name);o.create("/views/dialogs/addnumericcorestats.html","dialogDefaultDiceSelect",{scope:e.NumericCorestats}).result.then(function(e){})},e.ShowCorestatValue=function(){e.CurrentMaxValue=!1,e.ValueSubValue=!1,e.Number=!1;for(var t=0;t<e.Corestats.CorestatValues.length;t++)e.corestattype==e.Corestats.CorestatValues[t].CorestatName&&(null!=e.Corestats.CorestatValues[t].Value.CurrentAndMaxValue?(e.CurrentMaxValue=!0,e.ValueSubValue=!1,e.Number=!1,e.currenttext=!1,e.maxtext=!1,e.subvaltext=!1,e.valtext=!1,e.CurrentMaxVal=!1):null!=e.Corestats.CorestatValues[t].Value.ValueAndSubValue?(e.CurrentMaxValue=!1,e.ValueSubValue=!0,e.Number=!1,e.currenttext=!1,e.maxtext=!1,e.subvaltext=!1,e.valtext=!1,e.ValSub=!1):null!=e.Corestats.CorestatValues[t].Value.Number&&(e.CurrentMaxValue=!1,e.ValueSubValue=!1,e.Number=!0,e.currenttext=!1,e.maxtext=!1,e.subvaltext=!1,e.valtext=!1,e.number=e.Corestats.CorestatValues[1].Value.Number.value))},e.showcurrentmax=function(t){e.currenttext=!0,e.maxtext=!1,e.subvaltext=!1,e.valtext=!1;for(var a=0;a<e.Corestats.CorestatValues.length;a++)e.corestattype==e.Corestats.CorestatValues[a].CorestatName&&("MaxValue"==t?(e.value="MaxValue",e.maxtext=!0,e.currenttext=!1,e.max=e.Corestats.CorestatValues[a].Value.CurrentAndMaxValue.MaxValue):"CurrentValue"==t&&(e.value="CurrentValue",e.maxtext=!1,e.currenttext=!0,e.current=e.Corestats.CorestatValues[a].Value.CurrentAndMaxValue.CurrentValue))},e.showValueSubvalue=function(t){e.currenttext=!1,e.maxtext=!1,e.subvaltext=!0,e.valtext=!1;for(var a=0;a<e.Corestats.CorestatValues.length;a++)e.corestattype==e.Corestats.CorestatValues[a].CorestatName&&("Value"==t?(e.value="Value",e.valtext=!0,e.subvaltext=!1,e.val=e.Corestats.CorestatValues[a].Value.ValueAndSubValue.value):"SubValue"==t&&(e.value="SubValue",e.valtext=!1,e.subvaltext=!0,e.subval=e.Corestats.CorestatValues[a].Value.ValueAndSubValue.subvalue))},e.SaveCorestatValues=function(){for(var a=0;a<e.Corestats.CorestatValues.length;a++)if(e.corestatype==e.Corestats.CorestatValues[a].Name){var i=$("#customset").val();if(null!=e.Corestats.CorestatValues[a].Value.CurrentAndMaxValue)"MaxValue"==e.value&&null!=e.Corestats.CorestatValues[a].Value.CurrentAndMaxValue.MaxValue?e.value=i+" +"+e.Corestats.CorestatValues[a].Value.CurrentAndMaxValue.MaxValue:"CurrentValue"==e.value&&null!=e.Corestats.CorestatValues[a].Value.CurrentAndMaxValue.CurrentValue&&(e.value=i+" +"+e.Corestats.CorestatValues[a].Value.CurrentAndMaxValue.CurrentValue),$("#customset").val(e.value),t.dismiss($("#customset").val(e.value));else if(null!=e.Corestats.CorestatValues[a].Value.ValueAndSubValue)"Value"==e.value&&null!=e.Corestats.CorestatValues[a].Value.ValueAndSubValue.value?e.value=i+" +"+e.Corestats.CorestatValues[a].Value.ValueAndSubValue.value:"SubValue"==e.value&&null!=e.Corestats.CorestatValues[a].Value.ValueAndSubValue.subvalue&&(e.value=i+" +"+e.Corestats.CorestatValues[a].Value.ValueAndSubValue.subvalue),$("#customset").val(e.value),t.dismiss($("#customset").val(e.value));else if(e.corestatype==e.Corestats.CorestatValues[a].Name){var i=$("#customset").val();e.value=i+"+"+e.Corestats.CorestatValues[a].Value.Number.value,$("#customset").val(e.value),t.dismiss($("#customset").val(e.value))}}},e.Tracing=function(){diceselectcommandtrace()},e.cancel=function(){t.close("")}}]),module.controller("dialogGeneralSettings",["$scope","$uibModalInstance","data","rulesetService","toaster","dialogs",function(e,t,a,i,l,o){e.showimagebtns=!1,e.GeneralSettings=a.scope,e.imageLoaded=!1,console.log("$scope.GeneralSettings : ",e.GeneralSettings),e.buttontext=a.btntext,e.pageName=a.tabname,e.Disabled=a.Disabled,e.DisableName=a.DisableName,e.RulesetData=function(){i.GetRuleSets().then(function(t){200==t.data.StatusCode&&(e.RuleSets=t.data.PayLoad,e.HeaderContents=rulesetDataShareService.getDisplayCharacterRulesetCount(),e.HeaderContents.TotalRuleSetCount=e.RuleSets.length,$("#loading").fadeOut("slow"))})},e.OpenFile=function(){$("#newRulesetImage").click()},e.ItemImageUpload=function(t){if(console.log("File Input: ",t),e.showimagebtns=!1,t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){e.$apply(function(){e.GeneralSettings[2].Value.Image.image=t.target.result})},a.readAsDataURL(t.files[0])}},e.OpenManageRuleset=function(){console.log("OPenManageRuleSet"),a.openManageRuleset(e.GeneralSettings[0].RulesetId)},e.OpenBingSearch=function(){console.log("OPenManageRuleSet"),a.OpenBingSearch()},e.ManageRuleset=function(){if(console.log("$Scope.generalsettings: "+e.GeneralSettings[0].RulesetId),$("#loading").css("display","block"),0==e.GeneralSettings[0].RulesetId){i.CreateGeneralSettings(e.GeneralSettings).then(function(a){200==a.data.StatusCode?(e.GeneralSettings=a.data.PayLoad,t.close(e.GeneralSettings),$("#loading").fadeOut("slow")):400==a.data.StatusCode&&1==a.data.ShowToUser&&(l.pop("error",a.data.ErrorMessage),$("#loading").fadeOut("slow"))})}else if(0!=e.GeneralSettings[0].RulesetId&&"Update"==e.buttontext){var a=i.UpdateGeneralSettings(e.GeneralSettings);a.then(function(a){$("#loading").fadeOut("slow"),200==a.data.StatusCode&&(e.GeneralSettings=a.data.PayLoad,t.close(e.GeneralSettings),$("#loading").fadeOut("slow"))})}else if(0!=e.GeneralSettings[0].RulesetId&&"Copy"==e.buttontext){var o=e.GeneralSettings[0].RulesetId,s=e.GeneralSettings[0].RulesetName,n=i.CopyRulesetByRulesetId(o,s);n.then(function(e){$("#loading").fadeOut("slow"),200==e.data.StatusCode&&(t.close(e.data.PayLoad.Result),$("#loading").fadeOut("slow"))})}},e.cancel=function(){t.close("cancel")}}]),module.controller("dialogManageRuleset",["$scope","$uibModalInstance","data","rulesetService","toaster","dialogs","rulesetDataShareService","$interval",function(e,t,a,i,l,o,s,n){console.log("RulesetGeneralSettings: ",a.scope),e.GeneralSettings=a.scope,e.ShowAllRulesetContent=function(a){e.Response=a,t.close(e.Response)},e.ExportRuleSet=function(){var e=s.getRulesetsData();i.ExportRuleset(e)},e.cancel=function(){t.close("cancel")}}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("attributesPageController",["$scope","$q","$timeout","$transition","dialogs","toaster","navService","dataService",function(e,t,a,i,l,o,s,n){e.data=null,e.menuHamburger={opened:!1,menus:s.getCommonHamburger([]),menuClick:function(t){e.menuCharacter.opened=!1}},e.menuCharacter={opened:!1,menus:s.getCommonCharacterNav([]),menuClick:function(t){e.menuCharacter.opened=!1}},s.registerNav("hamburger",e.menuHamburger),s.registerNav("character",e.menuCharacter),function(){s.updateBody(!0,!1),a(function(){e.data={corestats:n.character.campaign.coreStats}})}()}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("charactersPageController",["$scope","$state","$window","dialogs","$timeout","$transition","toaster","navService","characterService","rulesetService","rulesetDataShareService","authService",function(e,t,a,i,l,o,s,n,r,c,d,u){e.file="",e.showBtn=!1,e.Imagesrc="http://www.advacto.com/images/user.jpg",e.characterAdd=function(){t.go("profile.addnewcharacterdialog")},e.characterSubmitForm=function(e){},e.CharacterRuleSetOnChange=function(){e.character.RulesetID>0?e.character.Button=!1:e.character.Button=!0},e.newCharacter=function(){var t={id:0,name:"",file:null,RulesetID:0};i.create("/views/dialogs/character-addnew.html","dialogAddNewCharacter",{mode:1,characterData:t}).result.then(function(t){"cancel"!=t&&(e.characters.push(t),s.pop("success","Character Created Successfully"))})},e.GetRulesets=function(){t.go("profile.AddNewRuleSet")},e.EditData=function(){t.go("profile.EditProfile")},e.ReSetPassword=function(){t.go("profile.ResetPassword")},e.newstyles=function(e){return e.Portrait?{"background-size":"100% 100%","background-repeat":"no-repeat",width:"120px",height:"120px"}:{"background-color":"transparent","background-repeat":"no-repeat",width:"120px",height:"120px"}},e.getStyles=function(e){return e.Portrait?{"background-image":"url("+e.Id+"/"+e.Portrait+")","background-color":"white",width:"10%",height:"10%"}:{"background-color":"transparent",width:"10%",height:"10%"}},r.GetCharacters().then(function(t){200==t.data.StatusCode?e.characters=t.data.PayLoad:400==t.data.StatusCode&&1==t.data.ShowToUser&&alert(t.data.ErrorMessage)}),e.GetCharacters=function(){r.GetCharacters().then(function(t){200==t.data.StatusCode?(e.characters=t.data.PayLoad,$("#loading").fadeOut("slow")):400==t.data.StatusCode&&1==t.data.ShowToUser&&(alert(t.data.ErrorMessage),$("#loading").fadeOut("slow"))})},c.GetRuleSets().then(function(t){200==t.data.StatusCode?(e.RuleSets=t.data.PayLoad,e.HeaderContents=d.getDisplayCharacterRulesetCount(),e.HeaderContents.TotalRuleSetCount=e.RuleSets.length,$("#loading").fadeOut("slow")):400==t.data.StatusCode&&1==t.data.ShowToUser&&(alert(t.data.ErrorMessage),$("#loading").fadeOut("slow"))}),e.GetRuleset=function(){c.GetRuleSets().then(function(t){200==t.data.StatusCode?(e.RuleSets=t.data.PayLoad,$("#loading").fadeOut("slow")):400==t.data.StatusCode&&1==t.data.ShowToUser&&(alert(t.data.ErrorMessage),$("#loading").fadeOut("slow"))})},e.getThumbNail=function(){return e.varRoot.file?e.varRoot.file:null},e.characterImageUpload=function(t){if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){$("#characterImage").attr("src",t.target.result).width(120).height(120),e.file=t.target.result,e.character.file=e.file},a.readAsDataURL(t.files[0])}},e.tilePickerApi={messageId:null,beforeSelect:function(){s.clear("*"),e.tilePickerApi.messageId=s.pop({type:"note",body:"Click a character to "+e.tilePickerApi.action+" it.",timeout:0})},onClose:function(){e.tilePickerApi.messageId&&s.clear(e.tilePickerApi.messageId)}},e.addNewRuleSet=function(){t.go("profile.NewRuleSet")},e.cancel=function(){a.history.back(),e.character.name="",e.character.file="",e.character.RulesetID=""},e.save=function(){$("#loading").css("display","block");var t={Id:e.character.id,Name:e.character.name,Portrait:e.character.file,RulesetID:e.character.RulesetID,Heading:e.character.Heading,Action:e.character.Action};if(e.character.RulesetID>0)if(0==e.character.id){var a=r.saveCharacter(t);a.then(function(t){200==t.data.StatusCode?(e.character.name="",e.character.file="",e.character.RulesetID="",e.createcharacter=t.PayLoad,$("#loading").fadeOut("slow"),s.pop("success","Character Created Successfully")):400==t.data.StatusCode&&1==t.data.ShowToUser&&(s.pop("error",t.data.ErrorMessage),$("#loading").fadeOut("slow"))})}else{var i;i="New"==e.character.Action?r.saveCharacter(t):"edit"==e.character.Action?r.EditCharacter(t):r.CopyCharacter(t),i.then(function(t){200==t.data.StatusCode?(e.character.name="",e.character.file="",e.character.RulesetID="",e.createcharacter=t.PayLoad,$("#loading").fadeOut("slow"),s.pop("success","Character Created Successfully")):400==t.data.StatusCode&&1==t.data.ShowToUser&&(s.pop("error",t.data.ErrorMessage),$("#loading").fadeOut("slow"))})}else s.pop("error","Please select one ruleset")},e.copyCharacter=function(t){var a={id:t.Id,name:t.Name,file:t.Portrait,RulesetID:t.RulesetId};i.create("/views/dialogs/character-addnew.html","dialogAddNewCharacter",{mode:3,characterData:a}).result.then(function(t){"cancel"!=t&&(e.characters.push(t),s.pop("success","Character Copied Successfully"))})},e.editCharacter=function(t){var a={id:t.Id,name:t.Name,file:t.Portrait,RulesetID:t.RulesetId};i.create("/views/dialogs/character-addnew.html","dialogAddNewCharacter",{mode:2,characterData:a}).result.then(function(t){if("cancel"!=t){for(var i=-1,l=0;l<e.characters.length;l++)e.characters[l].Id==a.id&&(i=l);i>-1&&(e.characters[i]=t,s.pop("success","Character Edited Successfully"))}})},e.selectCharacter=function(a){e.tilePickerApi.selecting?e.tilePickerApi.endSelect(a):e.tilePickerApi.selecting?e.tilePickerApi.endSelect(a):t.go("profile.character.layout",{characterId:a.Id,action:1,isNew:1})},e.showContextMenu=function(e){var t=angular.element(e.target).parents(".card").find(".card-actions");t.hasClass("hide")?(t.removeClass("hide"),t.addClass("show")):(t.removeClass("show"),t.addClass("hide"))},e.hideContextMenu=function(e){var t=angular.element(e.target).parents(".card").find(".card-actions");t.removeClass("show"),t.addClass("hide")},e.characterDelete=function(t){i.confirm("Confirm Delete",'Are you sure you want to delete this Character, "'+t.Name+'", and all associated pages, tabs, and tiles?',{size:"sm"}).result.then(function(a){if("yes"==a){$("#loading").css("display","block");var i=t.Id;r.Deletecharacter(i).then(function(t){if(200==t.data.StatusCode){for(var a=-1,l=0;l<e.characters.length;l++)e.characters[l].Id==i&&(a=l);a>-1&&(e.characters.splice(a,1),s.pop("success","Character Deleted Successfully")),$("#loading").fadeOut("slow")}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&(s.pop("error",t.data.ErrorMessage),$("#loading").fadeOut("slow"))})}})}}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("commandsPageController",["$scope","$transition","$q","$timeout","dialogs","toaster","navService","tileService",function(e,t,a,i,l,o,s,n){e.data=null,e.menuHamburger={opened:!1,menus:s.getCommonHamburger([]),menuClick:function(t){e.menuCharacter.opened=!1}},e.menuCharacter={opened:!1,menus:s.getCommonCharacterNav([]),menuClick:function(t){e.menuCharacter.opened=!1}},s.registerNav("hamburger",e.menuHamburger),s.registerNav("character",e.menuCharacter),function(){s.updateBody(!0,!1);var a=t.params().characterId;n.GetAllTileTypesRelatedCharacter(a).then(function(t){200==t.data.StatusCode?(e.AllTilesData=t.data.PayLoad,e.commands=t.data.PayLoad.Commands,e.data={notes:e.commands}):400==t.data.StatusCode&&1==t.data.ShowToUser&&alert(t.data.ErrorMessage)})}()}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("countersPageController",["$scope","$transition","$q","$timeout","dialogs","toaster","navService","tileService",function(e,t,a,i,l,o,s,n){e.data=null,e.menuHamburger={opened:!1,menus:s.getCommonHamburger([]),menuClick:function(t){e.menuCharacter.opened=!1}},e.menuCharacter={opened:!1,menus:s.getCommonCharacterNav([]),menuClick:function(t){e.menuCharacter.opened=!1}},s.registerNav("hamburger",e.menuHamburger),s.registerNav("character",e.menuCharacter),function(){s.updateBody(!0,!1);var a=t.params().characterId;n.GetAllTileTypesRelatedCharacter(a).then(function(t){200==t.data.StatusCode?(e.AllTilesData=t.data.PayLoad,e.counters=t.data.PayLoad.Counters,e.data={counters:e.counters}):400==t.data.StatusCode&&1==t.data.ShowToUser&&alert(t.data.ErrorMessage)})}()}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("executesPageController",["$scope","$transition","$q","$timeout","dialogs","toaster","navService","tileService",function(e,t,a,i,l,o,s,n){e.data=null,e.menuHamburger={opened:!1,menus:s.getCommonHamburger([]),menuClick:function(t){e.menuCharacter.opened=!1}},e.menuCharacter={opened:!1,menus:s.getCommonCharacterNav([]),menuClick:function(t){e.menuCharacter.opened=!1}},s.registerNav("hamburger",e.menuHamburger),s.registerNav("character",e.menuCharacter),function(){s.updateBody(!0,!1);var a=t.params().characterId;n.GetAllTileTypesRelatedCharacter(a).then(function(t){200==t.data.StatusCode?(e.AllTilesData=t.data.PayLoad,e.executes=t.data.PayLoad.Executes,e.data={notes:e.executes}):400==t.data.StatusCode&&1==t.data.ShowToUser&&alert(t.data.ErrorMessage)})}()}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("layoutPageController",["$scope","characterService","$q","$window","$transition","$state","$timeout","$interval","$log","dialogs","navService","rulesetDataShareService","layoutService","tabService","$compile","rulesetService","toaster","tileService",function(e,t,a,i,l,o,s,n,r,c,d,u,p,m,g,b,h,v){function f(t){for(var a=0;a<t.length;a++){t[a].ClientObjectId=e.initialClientObjectId,e.initialClientObjectId=e.initialClientObjectId+1;for(var i=0;i<t[a].TabList.length;i++){t[a].TabList[i].ClientObjectId=e.initialClientObjectId,e.initialClientObjectId=e.initialClientObjectId+1,t[a].TabList[i].IsSync=!0,t[a].TabList[i].UpdateDate=Date.now();for(var l=0;l<t[a].TabList[i].TileList.length;l++)t[a].TabList[i].TileList[l].ClientObjectId=e.initialClientObjectId,t[a].TabList[i].TileList[l].IsSync=!0,t[a].TabList[i].TileList[l].UpdateDate=Date.now(),e.initialClientObjectId=e.initialClientObjectId+1}}return t}if(e.$on("$destroy",function(){}),e.initialClientObjectId=1e3,e.ClientScopeChange=!1,1==o.params.action)e.isLayoutSavingInProgress=!1,1==o.params.isNew?(u.setLayoutData({}),u.setCharacterLayoutsData({}),u.setcorestatvalue({}),u.setLayoutItemInventoryMetaData({}),u.setLayoutSpellInventoryMetaData({}),u.setLayoutAbilityInventoryMetaData({}),u.setLayoutItemInventoryData({}),u.setLayoutSpellInventoryData({}),u.setLayoutAbilityInventoryData({}),u.setLayoutRulesetItemInventoryData({}),u.setLayoutRulesetSpellInventoryData({}),u.setLayoutRulesetAbilityInventoryData({}),p.GetCharacterLayouts(o.params.characterId).then(function(t){if(200==t.data.StatusCode){var a=f(t.data.PayLoad);e.Layouts=a,e.NewLayout=e.Layouts[0],e.LinkExecuteTileContent=e.NewLayout.RulesetViewModel,u.setLinkTileData(e.LinkExecuteTileContent),e.selectedLayoutName=e.NewLayout.Name,e.selectedPageName=e.NewLayout.TabList[0].TabName,u.setLayoutData(e.NewLayout),u.setCharacterLayoutsData(e.Layouts)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage)})):(0==angular.equals({},u.getLayoutData())&&(e.NewLayout=u.getLayoutData(),e.selectedLayoutName=e.NewLayout.Name,e.selectedPageName=e.NewLayout.TabList[0].TabName),0==angular.equals({},u.getCharacterLayoutsData())&&(e.Layouts=u.getCharacterLayoutsData()),0==angular.equals({},u.getCharacterLayoutsData())&&(e.characters=u.setcorestatvalue())),e.AddNewtab=function(){var t=e.NewLayout.LayoutMetaData.Tab;t.LayoutId=e.NewLayout.LayoutId,e.TabHeading="Add Page Name",e.Buttontext="Save",c.create("/views/dialogs/tab-rename.html","dialogTabRename",{scope:t,State:e.TabHeading,btntext:e.Buttontext}).result.then(function(t){null==e.NewLayout.TabList||void 0==e.NewLayout.TabList?e.NewLayout.TabList=[]:(t.ClientObjectId=e.initialClientObjectId,t.IsSync=!1,t.SyncDate=Date.now(),e.initialClientObjectId=e.initialClientObjectId+1,m.AddTab(t).then(function(a){if(200==a.data.StatusCode){for(var i=0;i<e.Layouts.length;i++)e.Layouts[i].LayoutId==a.data.PayLoad.LayoutId&&(e.Layouts[i].TabList.push(a.data.PayLoad),e.NewLayout=e.Layouts[i]);e.onTabSelected(t,e.NewLayout.TabList.length-1),$("#loading").fadeOut("slow"),h.pop("success","Tab Added Successfully.")}else 400==a.data.StatusCode&&1==a.data.ShowToUser&&($("#loading").fadeOut("slow"),h.pop("error",a.data.ErrorMessage))}),e.ClientScopeChange=!0)})},e.layoutAdd=function(){var t=e.NewLayout;t.LayoutId=e.NewLayout.LayoutId,e.TabHeading="Add Layout Name",e.Buttontext="Save",c.create("/views/dialogs/tab-rename.html","dialogTabRename",{scope:t,State:e.TabHeading,btntext:e.Buttontext}).result.then(function(t){t.LayoutId=0,t.Name=t.TabName,t.TabName="";for(var a,i=0;i<t.TabList.length;i++)0==i&&(a=t.TabList[i]);t.TabList=[],t.TabList.push(a),t.TabList[0].LayoutId=0,t.TabList[0].TabId=0,t.TabList[0].TabName="Default",t.TabList[0].TabOrder=0,t.TabList[0].TileList=[],t.IsDefault=!0,p.create(t).then(function(t){200==t.data.StatusCode?(e.NewLayout=t.data.PayLoad,e.Layouts.push(t.data.PayLoad),e.selectedLayoutName=e.NewLayout.Name,e.onTabSelected(e.NewLayout.TabList[0],0),$("#loading").fadeOut("slow"),h.pop("success","Layout Added Successfully.")):400==t.data.StatusCode&&1==t.data.ShowToUser&&($("#loading").fadeOut("slow"),h.pop("error",t.data.ErrorMessage))})})},e.layoutLoad=function(t){e.state.tilesEditing=!1,e.NewLayout=t,e.selectedLayoutName=e.NewLayout.Name,e.onTabSelected(e.NewLayout.TabList[0],0)},e.EditTab=function(t){e.TabHeading="Edit",e.Buttontext="Update",c.create("/views/dialogs/tab-rename.html","dialogTabRename",{scope:t,State:e.TabHeading,btntext:e.Buttontext}).result.then(function(t){m.UpdateTab(t).then(function(t){if(200==t.data.StatusCode){t.data.PayLoad.IsSync=!1,t.data.PayLoad.SyncDate=Date.now();for(var a=0;a<e.Layouts.length;a++)for(var i=0;i<e.Layouts[a].TabList.length;i++)e.Layouts[a].TabList[i].ClientObjectId==t.data.PayLoad.ClientObjectId&&(e.Layouts[a].TabList[i]=t.data.PayLoad);e.ClientScopeChange=!0}})})},e.DeleteTab=function(t){t&&c.confirm("Confirm Delete",'Are you sure you want to delete "'+t.TabName+'" and all its content?',{size:"sm"}).result.then(function(a){"yes"==a&&t.TabId>0&&m.deleteTab(t).then(function(t){if(200==t.data.StatusCode){for(var a=t.data.PayLoad.ClientObjectId,i=-1,l=-1,o=0;o<e.Layouts.length;o++)for(var s=0;s<e.Layouts[o].TabList.length;s++)e.Layouts[o].TabList[s].ClientObjectId==a&&(i=o,l=s);i>-1&&l>-1&&(e.Layouts[i].TabList.splice(l,1),l==e.selectedPageIndex&&e.Layouts.length>0?(e.NewLayout=e.Layouts[i],e.selectedPageIndex=0,e.selectedPageName=e.Layouts[i].TabList[0].TabName):0==e.NewLayout.TabList.length&&(e.NewLayout=e.Layouts[0],e.selectedPageIndex=0,e.selectedPageName=e.NewLayout.TabList[0].TabName)),$("#loading").fadeOut("slow"),h.pop("success","Tab deleted Successfully.")}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage)})})},e.SaveLayout=function(t){if(0==e.isLayoutSavingInProgress){e.isLayoutSavingInProgress=!0;for(var a=0;a<t.TabList.length;a++)for(var i=t.TabList[a],l=0;l<i.TileList.length;l++){var o=i.TileList[l];if(0==angular.equals({},u.getTilelst())){var s=JSON.parse(localStorage.getItem("Tilelst"));if(null!=s)for(var n=0;n<s.length;n++){var r=s[n];o.EditClientId==r.EditClientId&&o.TileTypeName==r.TileTypeName?(o.Value=r.Value,o.Styles=r.Styles):0==angular.isUndefined(o.TileId)&&null!=o.TileId&&o.TileId==r.TileId&&o.TileTypeName==r.TileTypeName&&(o.Value=r.Value,o.Styles=r.Styles)}}o.TileLocationId=1}localStorage.removeItem("Tilelst"),p.update(t).then(function(t){if(e.isLayoutSavingInProgress=!1,200==t.data.StatusCode){for(var a=t.data.PayLoad,i=0;i<e.Layouts.length;i++)e.Layouts[i].LayoutId==a.LayoutId&&(e.Layouts[i]=a);e.NewLayout=a,e.state.tilesEditing=!1,h.pop("success","Layout Updated Successfully.")}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage)})}},e.layoutRename=function(t,a){var i=a;i.TabName=i.Name,i.LayoutId=a.LayoutId,e.TabHeading="Update Layout Name",e.Buttontext="Update",c.create("/views/dialogs/tab-rename.html","dialogTabRename",{scope:i,State:e.TabHeading,btntext:e.Buttontext}).result.then(function(t){t.Name=t.TabName,p.update(t).then(function(t){if(200==t.data.StatusCode){for(var a=t.data.PayLoad.ClientObjectId,i=-1,l=0;l<e.Layouts.length;l++)e.Layouts[l].ClientObjectId==a&&(i=l);i>-1&&(e.Layouts[i]=t.data.PayLoad,h.pop("success","Layout Updated Successfully."))}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage)})})},e.layoutCopy=function(t,a){var i=a;i.TabName=i.Name,i.LayoutId=a.LayoutId,e.TabHeading="Copy Layout Name",e.Buttontext="Copy",c.create("/views/dialogs/tab-rename.html","dialogTabRename",{scope:i,State:e.TabHeading,btntext:e.Buttontext}).result.then(function(t){if(t.Name=t.TabName,t.LayoutId=0,null!=t.TabList)for(var a=0;a<t.TabList.length;a++){var i=t.TabList[a];if(i.LayoutId=0,i.TabId=0,null!=i.TileList)for(var o=0;o<i.TileList.length;o++){var s=i.TileList[o];s.EntityId=0,s.TabId=0,s.TileId=0,null!=s.Value.Attribute?s.Value.Attribute.AttributeId=0:null!=s.Value.Command?s.Value.Command.CommandId=0:null!=s.Value.Counter?s.Value.Counter.CounterId=0:null!=s.Value.Execute?s.Value.Execute.ExecuteId=0:null!=s.Value.Link?s.Value.Link.LinkId=0:null!=s.Value.Note&&(s.Value.Note.NoteId=0)}}p.copyLayout(t).then(function(t){200==t.data.StatusCode?(e.NewLayout=t.data.PayLoad,e.Layouts.push(t.data.PayLoad),e.selectedLayoutName=e.NewLayout.Name,e.onTabSelected(e.NewLayout.TabList[0],0),
h.pop("success","Layout Copied Successfully."),l.router.stateService.go("profile.character.layout",{characterId:e.NewLayout.CharacterProfileId,layoutId:e.NewLayout.LayoutId})):400==t.data.StatusCode&&1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage)})})},e.layoutDelete=function(t,a){c.confirm("Confirm Delete",'Are you sure you want to delete this view, "'+a.Name+'", and all associated pages, tabs, and tiles?',{size:"sm"}).result.then(function(t){"yes"==t&&p.deleteLayout(a).then(function(t){if(200==t.data.StatusCode){for(var a=t.data.PayLoad.ClientObjectId,i=-1,l=0;l<e.Layouts.length;l++)e.Layouts[l].ClientObjectId==a&&(i=l);i>-1&&e.Layouts.splice(i,1),0==e.Layouts.length?o.go("profile.characters"):(e.selectedLayoutName=e.Layouts[0].Name,e.selectedPageName=e.Layouts[0].TabList[0].TabName),h.pop("success","Layout deletedSuccessfully.")}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage)})})},e.state={tilesEditing:!1,tileDragging:!1,useOrEditMode:!1,tileDeleteId:null},e.ManageTiles=function(){e.state.tilesEditing=!e.state.tilesEditing,e.state.useOrEditMode=!e.state.useOrEditMode},e.ManageTilesCompleted=function(){e.state.tilesEditing=!e.state.tilesEditing,e.state.useOrEditMode=!e.state.useOrEditMode},e.ShowTiles=function(){c.create("/views/dialogs/tile-type-picker.html","dialogTileTypes",{scope:e.NewLayout.LayoutMetaData.TileTypes}).result.then(function(t){if("Note"==t.TileType){e.NewLayout.LayoutMetaData.Tile.TileTypeId=t.TileId,e.NewLayout.LayoutMetaData.Tile.TileTypeName=t.TileType,e.NewLayout.LayoutMetaData.Tile.Value=t.Value;for(var a,i=0;i<e.NewLayout.TabList.length;i++)i==e.selectedPageIndex&&(a=e.NewLayout.TabList[i]);e.NewLayout.LayoutMetaData.Tile.TabId=0==angular.isUndefined(a)?a.TabId:e.NewLayout.TabList[e.tabSet.index].TabId;var l=c.create("/views/dialogs/tile-editor-1.html","NoteTile",{scope:e.NewLayout.LayoutMetaData.Tile,Tablist:e.NewLayout.TabList});l.result.then(function(t){"cancel"!=t&&(null==e.NewLayout.TabList[e.tabSet.index].TileList||void 0==e.NewLayout.TabList[e.tabSet.index].TileList?(e.NewLayout.TabList[e.tabSet.index].TileList=[],t.Height="5",t.Width="5",t.X="0",t.Y="0",t.CharacterProfileId=e.NewLayout.CharacterProfileId,t.IsSync=!1,t.SyncDate=Date.now(),t.ClientObjectId=e.initialClientObjectId+1,e.NewLayout.TabList[e.selectedPageIndex>0?e.selectedPageIndex:e.tabSet.index].TileList.push(t),e.initialClientObjectId=e.initialClientObjectId+1):(t.Height="5",t.Width="5",t.X="0",t.Y="0",t.CharacterProfileId=e.NewLayout.CharacterProfileId,t.IsSync=!1,t.SyncDate=Date.now(),t.ClientObjectId=e.initialClientObjectId+1,e.NewLayout.TabList[e.selectedPageIndex>0?e.selectedPageIndex:e.tabSet.index].TileList.push(t),e.initialClientObjectId=e.initialClientObjectId+1)),e.ClientScopeChange=!0})}else if("Counter"==t.TileType){e.NewLayout.LayoutMetaData.Tile.TileTypeId=t.TileId,e.NewLayout.LayoutMetaData.Tile.TileTypeName=t.TileType,e.NewLayout.LayoutMetaData.Tile.Value=t.Value,e.NewLayout.LayoutMetaData.Tile.Mode="Edit";for(var a,i=0;i<e.NewLayout.TabList.length;i++)i==e.selectedPageIndex&&(a=e.NewLayout.TabList[i]);e.NewLayout.LayoutMetaData.Tile.TabId=0==angular.isUndefined(a)?a.TabId:e.NewLayout.TabList[e.tabSet.index].TabId;var l=c.create("/views/dialogs/tile-editor-2.html","NoteTile",{scope:e.NewLayout.LayoutMetaData.Tile});l.result.then(function(t){"cancel"!=t&&(null==e.NewLayout.TabList[e.tabSet.index].TileList||void 0==e.NewLayout.TabList[e.tabSet.index].TileList?(e.NewLayout.TabList[e.tabSet.index].TileList=[],t.Height="5",t.Width="5",t.X="0",t.Y="0",t.CharacterProfileId=e.NewLayout.CharacterProfileId,t.ClientObjectId=e.initialClientObjectId+1,t.IsSync=!1,t.SyncDate=Date.now(),e.NewLayout.TabList[e.selectedPageIndex>0?e.selectedPageIndex:e.tabSet.index].TileList.push(t),e.initialClientObjectId=e.initialClientObjectId+1):(t.Height="5",t.Width="5",t.X="0",t.Y="0",t.CharacterProfileId=e.NewLayout.CharacterProfileId,t.ClientObjectId=e.initialClientObjectId+1,t.IsSync=!1,t.SyncDate=Date.now(),e.NewLayout.TabList[e.selectedPageIndex>0?e.selectedPageIndex:e.tabSet.index].TileList.push(t),e.initialClientObjectId=e.initialClientObjectId+1)),e.ClientScopeChange=!0})}else if("Attribute"==t.TileType){e.CorestatValues=u.getLayoutData(),e.NewLayout.LayoutMetaData.Tile.TileTypeId=t.TileId,e.NewLayout.LayoutMetaData.Tile.TileTypeName=t.TileType,e.NewLayout.LayoutMetaData.Tile.Value=t.Value,e.NewLayout.LayoutMetaData.Tile.Value.Attribute.CoreStatValue=t.Value.Attribute.CoreStatValue,e.NewLayout.LayoutMetaData.Tile.CorestatValues=e.CorestatValues.CorestatValues,e.NewLayout.LayoutMetaData.Tile.Mode="Edit";for(var a,i=0;i<e.NewLayout.TabList.length;i++)i==e.selectedPageIndex&&(a=e.NewLayout.TabList[i]);e.NewLayout.LayoutMetaData.Tile.TabId=0==angular.isUndefined(a)?a.TabId:e.NewLayout.TabList[e.tabSet.index].TabId;var l=c.create("/views/dialogs/tile-editor-3.html","NoteTile",{scope:e.NewLayout.LayoutMetaData.Tile});l.result.then(function(t){"cancel"!=t&&(null==e.NewLayout.TabList[e.tabSet.index].TileList||void 0==e.NewLayout.TabList[e.tabSet.index].TileList?(e.NewLayout.TabList[e.tabSet.index].TileList=[],t.Height="5",t.Width="5",t.X="0",t.Y="0",t.CharacterProfileId=e.NewLayout.CharacterProfileId,t.ClientObjectId=e.initialClientObjectId+1,t.IsSync=!1,t.SyncDate=Date.now(),e.NewLayout.TabList[e.selectedPageIndex>0?e.selectedPageIndex:e.tabSet.index].TileList.push(t),e.initialClientObjectId=e.initialClientObjectId+1):(t.Height="5",t.Width="5",t.X="0",t.Y="0",t.CharacterProfileId=e.NewLayout.CharacterProfileId,t.ClientObjectId=e.initialClientObjectId+1,t.IsSync=!1,t.SyncDate=Date.now(),e.NewLayout.TabList[e.selectedPageIndex>0?e.selectedPageIndex:e.tabSet.index].TileList.push(t),e.initialClientObjectId=e.initialClientObjectId+1)),e.ClientScopeChange=!0})}else if("Link"==t.TileType){e.NewLayout.LayoutMetaData.Tile.TileTypeId=t.TileId,e.NewLayout.LayoutMetaData.Tile.TileTypeName=t.TileType,e.NewLayout.LayoutMetaData.Tile.Value=t.Value,e.NewLayout.LayoutMetaData.Tile.Mode="Edit";for(var a,i=0;i<e.NewLayout.TabList.length;i++)i==e.selectedPageIndex&&(a=e.NewLayout.TabList[i]);e.NewLayout.LayoutMetaData.Tile.TabId=0==angular.isUndefined(a)?a.TabId:e.NewLayout.TabList[e.tabSet.index].TabId;var l=c.create("/views/dialogs/tile-editor-4.html","NoteTile",{scope:e.NewLayout.LayoutMetaData.Tile});l.result.then(function(t){"cancel"!=t&&(null==e.NewLayout.TabList[e.tabSet.index].TileList||void 0==e.NewLayout.TabList[e.tabSet.index].TileList?(e.NewLayout.TabList[e.tabSet.index].TileList=[],t.Height="5",t.Width="5",t.X="0",t.Y="0",t.CharacterProfileId=e.NewLayout.CharacterProfileId,t.ClientObjectId=e.initialClientObjectId+1,t.IsSync=!1,t.SyncDate=Date.now(),e.NewLayout.TabList[e.selectedPageIndex>0?e.selectedPageIndex:e.tabSet.index].TileList.push(t),e.initialClientObjectId=e.initialClientObjectId+1):(t.Height="5",t.Width="5",t.X="0",t.Y="0",t.CharacterProfileId=e.NewLayout.CharacterProfileId,t.ClientObjectId=e.initialClientObjectId+1,t.IsSync=!1,t.SyncDate=Date.now(),e.NewLayout.TabList[e.selectedPageIndex>0?e.selectedPageIndex:e.tabSet.index].TileList.push(t),e.initialClientObjectId=e.initialClientObjectId+1)),e.ClientScopeChange=!0})}else if("Execute"==t.TileType){e.NewLayout.LayoutMetaData.Tile.TileTypeId=t.TileId,e.NewLayout.LayoutMetaData.Tile.TileTypeName=t.TileType,e.NewLayout.LayoutMetaData.Tile.Value=t.Value,e.NewLayout.LayoutMetaData.Tile.Mode="Edit";for(var a,i=0;i<e.NewLayout.TabList.length;i++)i==e.selectedPageIndex&&(a=e.NewLayout.TabList[i]);e.NewLayout.LayoutMetaData.Tile.TabId=0==angular.isUndefined(a)?a.TabId:e.NewLayout.TabList[e.tabSet.index].TabId;var l=c.create("/views/dialogs/tile-editor-5.html","NoteTile",{scope:e.NewLayout.LayoutMetaData.Tile,fullscope:e.NewLayout.TabList});l.result.then(function(t){"cancel"!=t&&(null==e.NewLayout.TabList[e.tabSet.index].TileList||void 0==e.NewLayout.TabList[e.tabSet.index].TileList?(e.NewLayout.TabList[e.tabSet.index].TileList=[],t.Height="5",t.Width="5",t.X="0",t.Y="0",t.CharacterProfileId=e.NewLayout.CharacterProfileId,t.ClientObjectId=e.initialClientObjectId+1,t.IsSync=!1,t.SyncDate=Date.now(),e.NewLayout.TabList[e.selectedPageIndex>0?e.selectedPageIndex:e.tabSet.index].TileList.push(t),e.initialClientObjectId=e.initialClientObjectId+1):(t.Height="5",t.Width="5",t.X="0",t.Y="0",t.CharacterProfileId=e.NewLayout.CharacterProfileId,t.ClientObjectId=e.initialClientObjectId+1,t.IsSync=!1,t.SyncDate=Date.now(),e.NewLayout.TabList[e.selectedPageIndex>0?e.selectedPageIndex:e.tabSet.index].TileList.push(t),e.initialClientObjectId=e.initialClientObjectId+1))}),e.ClientScopeChange=!0}else if("Command"==t.TileType){e.NewLayout.LayoutMetaData.Tile.TileTypeId=t.TileId,e.NewLayout.LayoutMetaData.Tile.TileTypeName=t.TileType,e.NewLayout.LayoutMetaData.Tile.Value=t.Value,e.NewLayout.LayoutMetaData.Tile.Mode="Edit";for(var a,i=0;i<e.NewLayout.TabList.length;i++)i==e.selectedPageIndex&&(a=e.NewLayout.TabList[i]);e.NewLayout.LayoutMetaData.Tile.TabId=0==angular.isUndefined(a)?a.TabId:e.NewLayout.TabList[e.tabSet.index].TabId;var l=c.create("/views/dialogs/tile-editor-6.html","NoteTile",{scope:e.NewLayout.LayoutMetaData.Tile});l.result.then(function(t){"cancel"!=t&&(null==e.NewLayout.TabList[e.tabSet.index].TileList||void 0==e.NewLayout.TabList[e.tabSet.index].TileList?(e.NewLayout.TabList[e.tabSet.index].TileList=[],t.Height="5",t.Width="5",t.X="0",t.Y="0",t.CharacterProfileId=e.NewLayout.CharacterProfileId,t.ClientObjectId=e.initialClientObjectId+1,t.IsSync=!1,t.SyncDate=Date.now(),e.NewLayout.TabList[e.selectedPageIndex>0?e.selectedPageIndex:e.tabSet.index].TileList.push(t),e.initialClientObjectId=e.initialClientObjectId+1):(t.Height="5",t.Width="5",t.X="0",t.Y="0",t.CharacterProfileId=e.NewLayout.CharacterProfileId,t.ClientObjectId=e.initialClientObjectId+1,t.IsSync=!1,t.SyncDate=Date.now(),e.NewLayout.TabList[e.selectedPageIndex>0?e.selectedPageIndex:e.tabSet.index].TileList.push(t),e.initialClientObjectId=e.initialClientObjectId+1)),e.ClientScopeChange=!0})}else if("Image"==t.TileType){e.NewLayout.LayoutMetaData.Tile.TileTypeId=t.TileId,e.NewLayout.LayoutMetaData.Tile.TileTypeName=t.TileType,e.NewLayout.LayoutMetaData.Tile.Value=t.Value,e.NewLayout.LayoutMetaData.Tile.Mode="Edit";for(var a,i=0;i<e.NewLayout.TabList.length;i++)i==e.selectedPageIndex&&(a=e.NewLayout.TabList[i]);e.NewLayout.LayoutMetaData.Tile.TabId=0==angular.isUndefined(a)?a.TabId:e.NewLayout.TabList[e.tabSet.index].TabId;var l=c.create("/views/dialogs/tile-editor-7.html","NoteTile",{scope:e.NewLayout.LayoutMetaData.Tile});l.result.then(function(t){"cancel"!=t&&(null==e.NewLayout.TabList[e.tabSet.index].TileList||void 0==e.NewLayout.TabList[e.tabSet.index].TileList?(e.NewLayout.TabList[e.tabSet.index].TileList=[],t.Height="5",t.Width="5",t.X="0",t.Y="0",t.CharacterProfileId=e.NewLayout.CharacterProfileId,t.ClientObjectId=e.initialClientObjectId+1,t.IsSync=!1,t.SyncDate=Date.now(),e.NewLayout.TabList[e.selectedPageIndex>0?e.selectedPageIndex:e.tabSet.index].TileList.push(t),e.initialClientObjectId=e.initialClientObjectId+1):(t.Height="5",t.Width="5",t.X="0",t.Y="0",t.CharacterProfileId=e.NewLayout.CharacterProfileId,t.ClientObjectId=e.initialClientObjectId+1,t.IsSync=!1,t.SyncDate=Date.now(),e.NewLayout.TabList[e.selectedPageIndex>0?e.selectedPageIndex:e.tabSet.index].TileList.push(t),e.initialClientObjectId=e.initialClientObjectId+1)),e.ClientScopeChange=!0})}})},e.state={tilesEditing:!1,tileDragging:!1,tileDeleteId:null},e.stackOptions={height:150,width:400,cellHeight:30,minWidth:1,pixelWidth:35,verticalMargin:5,alwaysShowResizeHandle:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),resizable:{handles:"e, se, s, sw, w"},draggable:{refreshPositions:!0,handle:".grid-stack-item-content"}},e.tabSet={api:{},index:0},e.tilePickerApi={messageId:null,beforeSelect:function(){},onClose:function(){}},e.CopyTab=function(t){e.TabHeading="Copy Page",e.Buttontext="Copy",c.create("/views/dialogs/tab-rename.html","dialogTabRename",{scope:t,State:e.TabHeading,btntext:e.Buttontext}).result.then(function(t){t.ClientObjectId=e.initialClientObjectId,t.IsSync=!1,t.SyncDate=Date.now(),e.initialClientObjectId=e.initialClientObjectId+1,t.TabId=0,m.AddTab(t).then(function(t){if(200==t.data.StatusCode){t.data.PayLoad.IsSync=!1,t.data.PayLoad.SyncDate=Date.now(),e.NewLayout.TabList.push(t.data.PayLoad);for(var a=0;a<e.Layouts.length;a++)e.Layouts[a].LayoutId==t.data.PayLoad.LayoutId&&e.Layouts[a].TabList.push(t.data.PayLoad);e.ClientScopeChange=!0}})})},e.getTileClass=function(t){var a=[];return e.state.tilesEditing&&a.push(t.__randomShake),t.id===e.state.tileDeleteId&&a.push("over-delete"),a.join(" ")},e.getAutoPosition=function(e){return!(e.id>0)&&P},e.tileSelect=function(t){e.tilePickerApi.selecting&&e.tilePickerApi.endSelect(t)},e.tileEdit=function(){e.tilePickerApi.beginSelect(function(e){})},e.onDragStart=function(t,a){s(function(){e.state.tileDragging=!0})},e.onDragStop=function(t,a){s(function(){e.state.tileDragging=!1})},e.onDeleteDrop=function(t,a){var i=-1,l=-1,o=(GridStackUI.Utils.getNodeData(a.helper),a.helper[0].dataset.gsId);e.Layout=e.NewLayout;for(var s=0;s<e.Layout.TabList.length;s++)for(var n=e.Layout.TabList[s],r=n.TileList,c=0;c<r.length;c++)r[c].ClientObjectId==o&&(i=s,l=c);i>-1&&l>-1&&(0==e.Layout.TabList[i].TileList[l].TileId?(e.Layout.TabList[i].TileList.splice(l,1),e.NewLayout=[],e.NewLayout=e.Layout,h.pop("success","Tile deleted Successfully.")):v.deleteTile(e.Layout.TabList[i].TileList[l]).then(function(t){if(200==t.data.StatusCode){for(var a=t.data.PayLoad.Result.TileId,i=-1,l=-1,o=0;o<e.Layout.TabList.length;o++)for(var s=e.Layout.TabList[o],n=s.TileList,r=0;r<n.length;r++)n[r].TileId==a&&(i=o,l=r);i>-1&&l>-1&&e.Layout.TabList[i].TileList.splice(l,1),e.NewLayout=[],e.NewLayout=e.Layout,h.pop("success","Tile deleted Successfully.")}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage)}))},e.onDeleteOver=function(t,a){var i=GridStackUI.Utils.getNodeData(a.helper);i&&s(function(){e.state.tileDeleteId=i.id})},e.onDeleteOut=function(t){e.state.tileDeleteId&&s(function(){e.state.tileDeleteId=null})},e.selectedPageIndex=0,e.onTabSelected=function(t,a){e.selectedPageIndex=a,e.selectedPageName=t.TabName},e.ToggleMenu=function(e){var t=angular.element(e.target).find(".page-toolbar-wrapper-toggle-trigger .btn"),a=t,i=".page-toolbar-wrapper.initial",l=angular.element("#showAction").text();angular.element(i).hasClass("hide")?(angular.element(i).removeClass("hide"),angular.element(i).addClass("show")):(angular.element(i).removeClass("show"),angular.element(i).addClass("hide")),angular.element(a).toggleClass("icon-arrow-down icon-arrow-up"),"Show actions"===l?angular.element("#showAction").text("Hide actions"):angular.element("#showAction").text("Show actions")},e.showContextMenu=function(e){var t=angular.element(e.target).parent(),a=angular.element(e.target).parents(".dropdown-menu-item").find(".dropdown-menu-item-actions");e.stopPropagation(),t.addClass("hide"),a.addClass("show"),a.find("[data-action=close]").click(function(e){e.stopPropagation(),t.removeClass("hide"),a.removeClass("show")})},e.hideConteextMenu=function(e){var t=angular.element(e.target).parents(".dropdown-menu-item").find(".dropdown-menu-item-actions");t.removeClass("show"),t.addClass("hide")};else if(2==o.params.action)1==o.params.contentType?(e.ShowItems=!0,0==angular.equals({},u.getLayoutItemInventoryData())?(e.NewItemInventory=u.getLayoutItemInventoryData(),e.CharacterInventoryMetaData=u.getLayoutItemInventoryMetaData(),0==e.NewItemInventory.CharacterItems.length?(e.ShowItems=!0,e.ShowItem=!1):(e.ShowItems=!1,e.ShowItem=!0)):t.GetCharacterItemContent(o.params.characterId).then(function(t){200==t.data.StatusCode?(e.NewItemInventory=t.data.PayLoad,u.setLayoutItemInventoryData(e.NewItemInventory),u.setLayoutItemInventoryMetaData(e.NewItemInventory.CharacterInventoryMetaData),0==e.NewItemInventory.CharacterItems.length?(e.ShowItems=!0,e.ShowItem=!1):(e.ShowItems=!1,e.ShowItem=!0)):400==t.data.StatusCode&&1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage)})):2==o.params.contentType?(e.ShowSpells=!0,0==angular.equals({},u.getLayoutSpellInventoryData())?(e.NewSpellInventory=u.getLayoutSpellInventoryData(),e.CharacterInventoryMetaSpellData=u.getLayoutSpellInventoryMetaData(),0==e.NewSpellInventory.CharacterSpells.length?(e.ShowSpells=!0,e.ShowSpell=!1):(e.ShowSpells=!1,e.ShowSpell=!0)):t.GetCharacterSpellContent(o.params.characterId).then(function(t){200==t.data.StatusCode?(e.NewSpellInventory=t.data.PayLoad,u.setLayoutSpellInventoryData(e.NewSpellInventory),u.setLayoutSpellInventoryMetaData(e.NewSpellInventory.CharacterInventoryMetaData),0==e.NewSpellInventory.CharacterSpells.length?(e.ShowSpells=!0,e.ShowSpell=!1):(e.ShowSpells=!1,e.ShowSpell=!0)):400==t.data.StatusCode&&1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage)})):3==o.params.contentType&&(e.ShowAbilities=!0,0==angular.equals({},u.getLayoutAbilityInventoryData())?(e.NewAbilityInventory=u.getLayoutAbilityInventoryData(),e.CharacterInventoryAbilityMetaData=u.getLayoutAbilityInventoryMetaData(),0==e.NewAbilityInventory.CharacterAbilities.length?(e.ShowAbilities=!0,e.ShowAbility=!1):(e.ShowAbilities=!1,e.ShowAbility=!0)):t.GetCharacterAbilityContent(o.params.characterId).then(function(t){200==t.data.StatusCode?(e.NewAbilityInventory=t.data.PayLoad,u.setLayoutAbilityInventoryData(e.NewAbilityInventory),u.setLayoutAbilityInventoryMetaData(e.NewAbilityInventory.CharacterInventoryMetaData),0==e.NewAbilityInventory.CharacterAbilities.length?(e.ShowAbilities=!0,e.ShowAbility=!1):(e.ShowAbilities=!1,e.ShowAbility=!0)):400==t.data.StatusCode&&1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage)})),e.GridViewTrigger=function(e){var t=angular.element(e.target);t.parent().children().removeClass("selected"),t.addClass("selected"),angular.element(".card-list").removeClass("view-list")},e.ListViewTrigger=function(e){var t=angular.element(e.target);t.parent().children().removeClass("selected"),t.addClass("selected"),angular.element(".card-list").addClass("view-list")},e.hideConteextMenu=function(e){var t=angular.element(e.target).parents(".card").find(".card-actions");t.removeClass("show"),t.addClass("hide")},e.showContextMenu=function(e){var t=angular.element(e.target).parents(".card").find(".card-actions");t.hasClass("hide")?(t.removeClass("hide"),t.addClass("show")):(t.removeClass("show"),t.addClass("hide"))};else if(3==o.params.action){if(1==o.params.contentType)if(0==angular.equals({},u.getLayoutRulesetItemInventoryData()))e.RulesetItems=u.getLayoutRulesetItemInventoryData(),0==e.RulesetItems.length?(e.ShowItems=!0,e.ShowItem=!1):(e.ShowItems=!1,e.ShowItem=!0);else{var y=b.GetRuleSetItemsForItemInventory(o.params.characterId);y.then(function(t){200==t.data.StatusCode&&(e.RulesetItems=t.data.PayLoad.Items,u.setLayoutRulesetItemInventoryData(e.RulesetItems),0==e.RulesetItems.length?(e.ShowItems=!0,e.ShowItem=!1):(e.ShowItems=!1,e.ShowItem=!0))})}else if(2==o.params.contentType)if(0==angular.equals({},u.getLayoutRulesetSpellInventoryData()))e.RulesetSpells=u.getLayoutRulesetSpellInventoryData(),0==e.RulesetSpells.length?(e.ShowSpells=!0,e.ShowSpell=!1):(e.ShowSpells=!1,e.ShowSpell=!0);else{var S=b.GetRuleSetSpellsForSpellInventory(o.params.characterId);S.then(function(t){200==t.data.StatusCode&&(e.RulesetSpells=t.data.PayLoad.Spells,u.setLayoutRulesetSpellInventoryData(e.RulesetSpells),0==e.RulesetSpells.length?(e.ShowSpells=!0,e.ShowSpell=!1):(e.ShowSpells=!1,e.ShowSpell=!0))})}else if(3==o.params.contentType)if(0==angular.equals({},u.getLayoutRulesetAbilityInventoryData()))e.RulesetAbilities=u.getLayoutRulesetAbilityInventoryData(),0==e.RulesetAbilities.length?(e.ShowAbilities=!0,e.ShowAbility=!1):(e.ShowAbilities=!1,e.ShowAbility=!0);else{var w=b.GetRuleSetAbilitiesForAbilityInventory(o.params.characterId);w.then(function(t){200==t.data.StatusCode&&(e.RulesetAbilities=t.data.PayLoad.Abilities,u.setLayoutRulesetAbilityInventoryData(e.RulesetAbilities),0==e.RulesetAbilities.length?(e.ShowAbilities=!0,e.ShowAbility=!1):(e.ShowAbilities=!1,e.ShowAbility=!0))})}}else if(4==o.params.action)if(1==o.params.contentType){e.NewItemInventory=u.getLayoutItemInventoryData(),e.CharacterContent=e.NewItemInventory.CharacterItems[o.params.index];for(var C=0;C<e.CharacterContent.CharacterItemsProperties.length;C++){var I=e.CharacterContent.CharacterItemsProperties[C];0!=I.CharacterItemId&&void 0!=I.CharacterItemId&&""!=I.CharacterItemId||(e.initialClientObjectId=e.initialClientObjectId+1,I.tile.ClientObjectId=e.initialClientObjectId,e.initialClientObjectId=e.initialClientObjectId+1)}e.CharacterContent.Index=o.params.index}else if(2==o.params.contentType){e.NewSpellInventory=u.getLayoutSpellInventoryData(),e.CharacterContent=e.NewSpellInventory.CharacterSpells[o.params.index];for(var C=0;C<e.CharacterContent.CharacterSpellsProperties.length;C++){var x=e.CharacterContent.CharacterSpellsProperties[C];0!=x.CharacterSpellId&&void 0!=x.CharacterSpellId&&""!=x.CharacterSpellId||(e.initialClientObjectId=e.initialClientObjectId+1,x.tile.ClientObjectId=e.initialClientObjectId,e.initialClientObjectId=e.initialClientObjectId+1)}e.CharacterContent.Index=o.params.index}else if(3==o.params.contentType){e.NewAbilityInventory=u.getLayoutAbilityInventoryData(),e.CharacterContent=e.NewAbilityInventory.CharacterAbilities[o.params.index];for(var C=0;C<e.CharacterContent.CharacterAbilitiesProperties.length;C++){var T=e.CharacterContent.CharacterAbilitiesProperties[C];0!=T.CharacterAbilityId&&void 0!=T.CharacterAbilityId&&""!=T.CharacterAbilityId||(e.initialClientObjectId=e.initialClientObjectId+1,T.tile.ClientObjectId=e.initialClientObjectId,e.initialClientObjectId=e.initialClientObjectId+1)}e.CharacterContent.Index=o.params.index}var P=!1;e.menuCharacter={opened:!1,menus:d.getCommonCharacterNav([]),menuClick:function(t){e.menuCharacter.opened=!1}},d.registerNav("character",e.menuCharacter),e.ShowDice=function(){c.create("/views/dialogs/defaultdiceselection.html","dialogDefaultDiceSelect",{mode:3,scope:e.NewLayout.CharacterProfileId}).result.then(function(e,t){})},e.AddCorestatvalues=function(){if(e.characters=[],0==angular.equals({},u.getLayoutData())){if(e.characters=u.getLayoutData(),null==e.characters&&h.pop("error","No CoreStat Available."),e.characters.CorestatValuesHeading="Add CoreStat Values",e.characters.CorestatValuesIcon="fa fa-floppy-o",e.characters.CorestatValuesBtnText="Save",null!=e.characters.CorestatValues&&0==angular.isUndefined(e.characters.CorestatValues))for(var a=0;a<e.characters.CorestatValues.length;a++)e.characters.CorestatValues[a]}else h.pop("error","No CoreStat Available.");c.create("/views/dialogs/addcorestatvalues.html","dialogAddCorestatValues",{scope:e.characters}).result.then(function(a){"cancel"!=a&&(a.Id=a.CharacterProfileId,t.AddCorestatValues(a).then(function(t){if(200==t.data.StatusCode){e.characters=u.getLayoutData(),e.characters.CorestatValues=[];for(var a=0;a<t.data.PayLoad.CorestatValues.length;a++)e.characters.CorestatValues.push(t.data.PayLoad.CorestatValues[a]);u.setcorestatvalue(e.characters),h.pop("success","CoreStat Values are Updated Successfully."),$("#loading").fadeOut("slow")}else 400==t.data.StatusCode&&(1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage),$("#loading").fadeOut("slow"))}))})},e.ShowTilesforInventory=function(t){e.NewLayout=u.getLayoutData(),c.create("/views/dialogs/tile-type-picker.html","dialogTileTypes",{scope:e.NewLayout.LayoutMetaData.TileTypes}).result.then(function(a){if("Note"==a.TileType){e.NewLayout.LayoutMetaData.Tile.TileTypeId=a.TileId,e.NewLayout.LayoutMetaData.Tile.TileTypeName=a.TileType,e.NewLayout.LayoutMetaData.Tile.Value=a.Value,e.NewLayout.LayoutMetaData.Tile.Mode="Edit",e.NewLayout.LayoutMetaData.Tile.TabId=0;var i=c.create("/views/dialogs/tile-editor-1.html","NoteTile",{scope:e.NewLayout.LayoutMetaData.Tile,Tablist:e.NewLayout.TabList});i.result.then(function(a){if("cancel"!=a){a.Height="5",a.Width="5",a.X="0",a.Y="0",a.ClientObjectId=e.initialClientObjectId+1,a.IsSync=!1,a.SyncDate=Date.now();var i={tile:a};t.push(i),e.initialClientObjectId=e.initialClientObjectId+1}e.ClientScopeChange=!0})}else if("Counter"==a.TileType){e.NewLayout.LayoutMetaData.Tile.TileTypeId=a.TileId,e.NewLayout.LayoutMetaData.Tile.TileTypeName=a.TileType,e.NewLayout.LayoutMetaData.Tile.Value=a.Value,e.NewLayout.LayoutMetaData.Tile.Mode="Edit",e.NewLayout.LayoutMetaData.Tile.TabId=0;var i=c.create("/views/dialogs/tile-editor-2.html","NoteTile",{scope:e.NewLayout.LayoutMetaData.Tile});i.result.then(function(a){if("cancel"!=a){a.Height="5",a.Width="5",a.X="0",a.Y="0",a.ClientObjectId=e.initialClientObjectId+1,a.IsSync=!1,a.SyncDate=Date.now();var i={tile:a};t.push(i),e.initialClientObjectId=e.initialClientObjectId+1}e.ClientScopeChange=!0})}else if("Attribute"==a.TileType){e.Attributecorestats=u.getLayoutData(),e.CorestatValues=e.Attributecorestats.CorestatValues,e.NewLayout.LayoutMetaData.Tile.TileTypeId=a.TileId,e.NewLayout.LayoutMetaData.Tile.TileTypeName=a.TileType,e.NewLayout.LayoutMetaData.Tile.Value=a.Value,e.NewLayout.LayoutMetaData.Tile.Value.Attribute.CoreStatValue=a.Value.Attribute.CoreStatValue,e.NewLayout.LayoutMetaData.Tile.CorestatValues=1==angular.isDefined(e.CorestatValues.CorestatValues)?e.CorestatValues.CorestatValues:e.CorestatValues,e.NewLayout.LayoutMetaData.Tile.Mode="Edit",e.NewLayout.LayoutMetaData.Tile.TabId=0;var i=c.create("/views/dialogs/tile-editor-3.html","NoteTile",{scope:e.NewLayout.LayoutMetaData.Tile});i.result.then(function(a){if("cancel"!=a){a.Height="5",a.Width="5",a.X="0",a.Y="0",a.ClientObjectId=e.initialClientObjectId+1,a.IsSync=!1,a.SyncDate=Date.now();var i={tile:a};t.push(i),e.initialClientObjectId=e.initialClientObjectId+1}e.ClientScopeChange=!0})}else if("Link"==a.TileType){e.NewLayout.LayoutMetaData.Tile.TileTypeId=a.TileId,e.NewLayout.LayoutMetaData.Tile.TileTypeName=a.TileType,e.NewLayout.LayoutMetaData.Tile.Value=a.Value,e.NewLayout.LayoutMetaData.Tile.TabId=0;var i=c.create("/views/dialogs/tile-editor-4.html","NoteTile",{scope:e.NewLayout.LayoutMetaData.Tile});i.result.then(function(a){if("cancel"!=a){a.Height="5",a.Width="5",a.X="0",a.Y="0",a.ClientObjectId=e.initialClientObjectId+1,a.IsSync=!1,a.SyncDate=Date.now();var i={tile:a};t.push(i),e.initialClientObjectId=e.initialClientObjectId+1,e.LinkExecuteTileContent=u.getLinkTileData()}e.ClientScopeChange=!0})}else if("Execute"==a.TileType){es,e.NewLayout.LayoutMetaData.Tile.TileTypeId=a.TileId,e.NewLayout.LayoutMetaData.Tile.TileTypeName=a.TileType,e.NewLayout.LayoutMetaData.Tile.Value=a.Value,e.NewLayout.LayoutMetaData.Tile.TabId=0;var i=c.create("/views/dialogs/tile-editor-5.html","NoteTile",{scope:e.NewLayout.LayoutMetaData.Tile,fullscope:e.NewLayout.TabList});i.result.then(function(a){if("cancel"!=a){a.Height="5",a.Width="5",a.X="0",a.Y="0",a.ClientObjectId=e.initialClientObjectId+1,a.IsSync=!1,a.SyncDate=Date.now();var i={tile:a};t.push(i),e.initialClientObjectId=e.initialClientObjectId+1,e.LinkExecuteTileContent=u.getLinkTileData()}}),e.ClientScopeChange=!0}else if("Command"==a.TileType){e.NewLayout.LayoutMetaData.Tile.TileTypeId=a.TileId,e.NewLayout.LayoutMetaData.Tile.TileTypeName=a.TileType,e.NewLayout.LayoutMetaData.Tile.Value=a.Value,e.NewLayout.LayoutMetaData.Tile.Mode="Edit",e.NewLayout.LayoutMetaData.Tile.TabId=0;var i=c.create("/views/dialogs/tile-editor-6.html","NoteTile",{scope:e.NewLayout.LayoutMetaData.Tile});i.result.then(function(a){if("cancel"!=a){a.Height="5",a.Width="5",a.X="0",a.Y="0",a.ClientObjectId=e.initialClientObjectId+1,a.IsSync=!1,a.SyncDate=Date.now();var i={tile:a};t.push(i),e.initialClientObjectId=e.initialClientObjectId+1}e.ClientScopeChange=!0})}else if("Image"==a.TileType){e.NewLayout.LayoutMetaData.Tile.TileTypeId=a.TileId,e.NewLayout.LayoutMetaData.Tile.TileTypeName=a.TileType,e.NewLayout.LayoutMetaData.Tile.Value=a.Value,e.NewLayout.LayoutMetaData.Tile.Mode="Edit",e.NewLayout.LayoutMetaData.Tile.TabId=0;var i=c.create("/views/dialogs/tile-editor-7.html","NoteTile",{scope:e.NewLayout.LayoutMetaData.Tile});i.result.then(function(a){if("cancel"!=a){a.Height="5",a.Width="5",a.X="0",a.Y="0",a.ClientObjectId=e.initialClientObjectId+1,a.IsSync=!1,a.SyncDate=Date.now();var i={tile:a};t.push(i),e.initialClientObjectId=e.initialClientObjectId+1}e.ClientScopeChange=!0})}})},e.SaveInventoryTiles=function(a,i){if(1==i){e.CharacterInventoryMetaData=u.getLayoutItemInventoryMetaData(),e.CharacterInventoryMetaData.CharacterItems.CharacterItemId=a.CharacterItemId,e.CharacterInventoryMetaData.CharacterItems.CharacterProfileId=a.CharacterProfileId,e.CharacterInventoryMetaData.CharacterItems.CharacterItemsProperties=a.CharacterItemsProperties,e.CharacterInventoryMetaData.CharacterItems.AssociatedSpells=a.AssociatedSpells,e.CharacterInventoryMetaData.CharacterItems.AssociatedAbilities=a.AssociatedAbilities;var l=[];l.push(e.CharacterInventoryMetaData.CharacterItems),t.CreateItemInventorytile(l).then(function(t){200==t.data.StatusCode&&(e.CharacterContent=t.data.PayLoad.CharacterItems[0],h.pop("success","Tile Added Successfully"))})}else if(2==i){e.CharacterInventoryMetaSpellData=u.getLayoutSpellInventoryMetaData(),e.CharacterInventoryMetaSpellData.CharacterSpells.CharacterSpellId=a.CharacterSpellId,e.CharacterInventoryMetaSpellData.CharacterSpells.CharacterProfileId=a.CharacterProfileId,e.CharacterInventoryMetaSpellData.CharacterSpells.CharacterSpellsProperties=a.CharacterSpellsProperties;var o=[];o.push(e.CharacterInventoryMetaSpellData.CharacterSpells),t.CreateSpellInventorytile(o).then(function(t){200==t.data.StatusCode&&(e.CharacterContent=t.data.PayLoad.CharacterSpells[0],h.pop("success","Tile Added Successfully"))})}else if(3==i){e.CharacterInventoryAbilityMetaData=u.getLayoutAbilityInventoryMetaData(),e.CharacterInventoryAbilityMetaData.CharacterAbilities.CharacterAbilityId=a.CharacterAbilityId,e.CharacterInventoryAbilityMetaData.CharacterAbilities.CharacterProfileId=a.CharacterProfileId,e.CharacterInventoryAbilityMetaData.CharacterAbilities.CharacterAbilitiesProperties=a.CharacterAbilitiesProperties;var s=[];s.push(e.CharacterInventoryAbilityMetaData.CharacterAbilities),t.CreateAbilityInventorytile(s).then(function(t){200==t.data.StatusCode&&(e.CharacterContent=t.data.PayLoad.CharacterAbilities[0],h.pop("success","Tile Added Successfully"))})}},e.ItemInventory=function(){u.setInventory(e.NewInventory),l.router.stateService.go("profile.ItemInventory",{characterId:o.params.characterId,action:2,isNew:1,contentType:1})},e.BackToLayout=function(){$("#loading").css("display","block"),o.go("profile.character.layout",{characterId:o.params.characterId,action:1,isNew:1}),$("#loading").fadeOut("slow")},e.onloadFun=function(){$("#loading").fadeOut("slow")},e.ImportRuleSetCharecterleavel=function(){c.create("/views/dialogs/rulesetimport.html","dialogImportRulesetinCharecter",{characterProfileId:e.NewLayout.CharacterProfileId}).result.then(function(e){})},e.SpellInventory=function(){l.router.stateService.go("profile.SpellInventory",{characterId:o.params.characterId,action:2,contentType:2})},e.AbilityInventory=function(){l.router.stateService.go("profile.AbilityInventory",{characterId:o.params.characterId,action:2,contentType:3})},e.widgets=[{x:0,y:0,width:100,height:100},{x:0,y:0,width:3,height:100}],e.options={cellHeight:200,verticalMargin:10},e.addWidget=function(){var t={x:0,y:0,width:1,height:1};e.widgets.push(t)},e.moveWidget=function(){e.widgets[0].x=1,e.widgets[0].width=2,e.widgets[0].height=2},e.removeWidget=function(t){var a=e.widgets.indexOf(t);e.widgets.splice(a,1)},e.onChange=function(e,t){r.log("onChange event: "+e+" items:"+t)},e.onDragStart=function(e,t){r.log("onDragStart event: "+e+" ui:"+t)},e.onDragStop=function(e,t){r.log("onDragStop event: "+e+" ui:"+t)},e.onResizeStart=function(e,t){r.log("onResizeStart event: "+e+" ui:"+t)},e.onResizeStop=function(e,t){r.log("onResizeStop event: "+e+" ui:"+t)},
e.onItemAdded=function(e){r.log("onItemAdded item: "+e)},e.onItemRemoved=function(e){r.log("onItemRemoved item: "+e)},e.AddRulesetItems=function(){b.GetRuleSetItemsForItemInventory(o.params.characterId).then(function(t){200==t.data.StatusCode?(console.log("StatusCode 200: ",t.data.PayLoad.Items),e.RulesetItems=t.data.PayLoad.Items,t.data.PayLoad,c.create("/views/dialogs/AssociateRulesetItems.html","dialogAssociatedRulesetItems",{scope:e.RulesetItems}).result.then(function(t){console.log("res: "+t),e.rulesets=t,e.SaveRulesetItem()})):400==t.data.StatusCode&&(console.log("!!!StatusCode 400: ",t),1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage))})},e.AddRulesetSpell=function(){b.GetRuleSetSpellsForSpellInventory(o.params.characterId).then(function(t){200==t.data.StatusCode?(console.log("StatusCode 200: ",t),e.RulesetSpells=t.data.PayLoad.Spells,t.data.PayLoad,c.create("/views/dialogs/AssociateRulesetSpells.html","dialogAssociatedRulesetSpells",{scope:e.RulesetSpells}).result.then(function(t){e.spells=t,e.SaveRulesetSpell()})):400==t.data.StatusCode&&(console.log("!!!StatusCode 400: ",t),1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage))})},e.AddRulesetAbility=function(){b.GetRuleSetAbilitiesForAbilityInventory(o.params.characterId).then(function(t){200==t.data.StatusCode?(console.log("StatusCode 200: ",t),e.RulesetAbilities=t.data.PayLoad.Abilities,t.data.PayLoad,c.create("/views/dialogs/AssociateRulesetAbilities.html","dialogAssociatedRulesetAbilities",{scope:e.RulesetAbilities}).result.then(function(t){e.abilities=t,e.SaveRulesetAbility()})):400==t.data.StatusCode&&(console.log("!!!StatusCode 400: ",t),1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage))})},e.CreateCharacterItem=function(){e.CharacterInventoryMetaData=u.getLayoutItemInventoryMetaData(),e.NewLayout=u.getLayoutData(),e.buttontext="Create",e.tabName="Create Item",e.IsButtonDisabled=!1,e.isBtnShow=!1,c.create("/views/dialogs/createitems.html","dialogCreateInventoryItem",{scope:e.CharacterInventoryMetaData.CharacterItems.CharacterItemsProperties,tabName:e.tabName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow,NewInventory:e.CharacterInventoryMetaData,CharacterId:e.NewLayout.CharacterProfileId}).result.then(function(t){"cancel"!=t&&(e.NewItemInventory.CharacterItems.push(t),0==e.NewItemInventory.CharacterItems.length?(e.ShowItems=!0,e.ShowItem=!1):(e.ShowItems=!1,e.ShowItem=!0),o.go("profile.ItemInventory"))})},e.CreateCharacterSpell=function(){e.CharacterInventoryMetaData=u.getLayoutSpellInventoryMetaData(),e.NewLayout=u.getLayoutData(),e.buttontext="Create",e.tabName="Create Spell",e.IsButtonDisabled=!1,e.isBtnShow=!1,c.create("/views/dialogs/createitems.html","dialogCreateInventorySpell",{scope:e.CharacterInventoryMetaData.CharacterSpells.CharacterSpellsProperties,tabName:e.tabName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow,NewInventory:e.CharacterInventoryMetaData,CharacterId:e.NewLayout.CharacterProfileId}).result.then(function(t){"cancel"!=t&&(e.NewSpellInventory.CharacterSpells.push(t),0==e.NewSpellInventory.CharacterSpells.length?(e.ShowSpells=!0,e.ShowSpell=!1):(e.ShowSpells=!1,e.ShowSpell=!0),o.go("profile.SpellInventory"))})},e.CreateCharacterAbility=function(){e.CharacterInventoryMetaData=u.getLayoutAbilityInventoryMetaData(),e.NewLayout=u.getLayoutData(),e.buttontext="Create",e.tabName="Create Ability",e.IsButtonDisabled=!1,e.isBtnShow=!1,c.create("/views/dialogs/createitems.html","dialogCreateInventoryAbility",{scope:e.CharacterInventoryMetaData.CharacterAbilities.CharacterAbilitiesProperties,tabName:e.tabName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow,NewInventory:e.CharacterInventoryMetaData,CharacterId:e.NewLayout.CharacterProfileId}).result.then(function(t){"cancel"!=t&&(e.NewAbilityInventory.CharacterAbilities.push(t),0==e.NewAbilityInventory.CharacterAbilities.length?(e.ShowAbilities=!0,e.ShowAbility=!1):(e.ShowAbilities=!1,e.ShowAbility=!0),o.go("profile.AbilityInventory"))})};var A=[],k=[],N=[];e.addName=function(e,t){if(1==t){var a=A.indexOf(e);-1==A.indexOf(e)?(console.log("Pushing: ",e),A.push(e)):(A.splice(a,1),console.log(A))}else if(2==t){var a=k.indexOf(e);-1==k.indexOf(e)?(console.log("Pushing: ",e),k.push(e)):(k.splice(a,1),console.log(k))}else if(3==t){var a=N.indexOf(e);-1==N.indexOf(e)?(console.log("Pushing: ",e),N.push(e)):(N.splice(a,1),console.log(N))}},e.checkSelected=function(e,t){if(1==t){var a=A.indexOf(e);return a>-1}if(2==t){var a=k.indexOf(e);return a>-1}if(3==t){var a=N.indexOf(e);return a>-1}},e.BackInventory=function(){l.router.stateService.go("profile.character.layout",{characterId:o.params.characterId,action:1})},e.BackItem=function(){l.router.stateService.go("profile.ItemInventory",{characterId:o.params.characterId,action:"2",isNew:0,contentType:1})},e.BackSpell=function(){l.router.stateService.go("profile.SpellInventory",{characterId:o.params.characterId,action:2,contentType:2})},e.BackAbility=function(){l.router.stateService.go("profile.AbilityInventory",{characterId:o.params.characterId,action:2,contentType:3})},e.BackItemProperties=function(){l.router.stateService.go("profile.ItemInventory",{characterId:o.params.characterId,action:2,contentType:1})},e.BackSpellProperties=function(){l.router.stateService.go("profile.SpellInventory",{characterId:o.params.characterId,action:2,contentType:2})},e.BackAbilityProperties=function(){l.router.stateService.go("profile.AbilityInventory",{characterId:o.params.characterId,action:2,contentType:3})},e.SaveRulesetItem=function(){if(e.NewLayout=u.getLayoutData(),e.NewItemInventory=u.getLayoutItemInventoryData(),A=e.rulesets,A.length>0){for(var a=0;a<A.length;a++)var i={CharacterItemId:0,CharacterProfileId:e.NewLayout.CharacterProfileId,CharacterItemsProperties:A[a].ItemProperties};var s=[];s.push(i),t.CreateCharacterInventoryItems(s).then(function(t){if(200==t.data.StatusCode){if(0!=t.data.PayLoad.length)for(var a=0;a<t.data.PayLoad.length;a++)e.NewItemInventory.CharacterItems.push(t.data.PayLoad[a]);l.router.stateService.go("profile.ItemInventory",{characterId:o.params.characterId,action:"2",isNew:0,contentType:1})}else 400==t.data.ErrorMessage&&alert(e.data.ErrorMessage)})}else l.router.stateService.go("profile.ItemInventory",{characterId:o.params.characterId,action:"2",isNew:0,contentType:1})},e.SaveRulesetSpell=function(){if(console.log("SaveRulesetSpell: ",e.spells),e.NewLayout=u.getLayoutData(),e.NewSpellInventory=u.getLayoutSpellInventoryData(),k=e.spells,k.length>0){for(var a=0;a<k.length;a++)var i={CharacterSpellId:0,CharacterProfileId:e.NewLayout.CharacterProfileId,CharacterSpellsProperties:k[a].SpellProperties};var s=[];s.push(i),t.CreateCharacterInventorySpells(s).then(function(t){if(200==t.data.StatusCode){if(0!=t.data.PayLoad.length)for(var a=0;a<t.data.PayLoad.length;a++)e.NewSpellInventory.CharacterSpells.push(t.data.PayLoad[a]);l.router.stateService.go("profile.SpellInventory",{characterId:o.params.characterId,action:2,contentType:2})}else 400==t.data.ErrorMessage&&alert(e.data.ErrorMessage)})}else l.router.stateService.go("profile.SpellInventory",{characterId:o.params.characterId,action:2,contentType:2})},e.SaveRulesetAbility=function(){if(console.log("SaveRulesetAbility: ",e.abilities),e.NewLayout=u.getLayoutData(),e.NewAbilityInventory=u.getLayoutAbilityInventoryData(),N=e.abilities,N.length>0){for(var a=0;a<N.length;a++)var i={CharacterAbilityId:0,CharacterProfileId:e.NewLayout.CharacterProfileId,CharacterAbilitiesProperties:N[a].AbilityProperties};var s=[];s.push(i),t.CreateCharacterInventoryAbility(s).then(function(t){if(200==t.data.StatusCode){if(0!=t.data.PayLoad.length)for(var a=0;a<t.data.PayLoad.length;a++)e.NewAbilityInventory.CharacterAbilities.push(t.data.PayLoad[a]);console.log("$scope.NewAbilityInventory: ",e.NewAbilityInventory),l.router.stateService.go("profile.AbilityInventory",{characterId:o.params.characterId,action:2,contentType:3})}else 400==t.data.ErrorMessage&&alert(t.data.ErrorMessage)})}else l.router.stateService.go("profile.AbilityInventory",{characterId:o.params.characterId,action:2,contentType:3})},e.EditItem=function(t,a,i){if(1==i){e.pageName="Editing Item",e.buttontext="Update",e.IsButtonDisabled=!0,e.isBtnShow=!0,e.OperationTypeMode="Edit";var l=c.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:t.CharacterItemsProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow,Fullscope:t,AssocSpells:t.AssociatedSpells,AssocAbilities:t.AssociatedAbilities,OperationTypeMode:e.OperationTypeMode,CharacterId:t.CharacterProfileId});l.result.then(function(t){"cancel"!=t&&(e.NewItemInventory.CharacterItems[a]=t)})}else if(2==i){e.pageName="Editing Spell",e.buttontext="Update",e.isBtnShow=!0,e.OperationTypeMode="Edit";var l=c.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:t.CharacterSpellsProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,FullSpellscope:t,OperationTypeMode:e.OperationTypeMode});l.result.then(function(t){"cancel"!=t&&(e.NewSpellInventory.CharacterSpells[a]=t)})}else if(3==i){e.pageName="Editing Ability",e.buttontext="Update",e.isBtnShow=!0,e.OperationTypeMode="Edit";var l=c.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:t.CharacterAbilitiesProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,FullAbilityScope:t,OperationTypeMode:e.OperationTypeMode});l.result.then(function(t){"cancel"!=t&&(e.NewAbilityInventory.CharacterAbilities[a]=t)})}},e.CopyItem=function(t,a,i){if(1==i){e.NewItemInventory=u.getLayoutItemInventoryData(),e.NewLayout=u.getLayoutData(),e.pageName="Copying Item",e.buttontext="Copy",e.IsButtonDisabled=!0,e.isBtnShow=!0,e.OperationTypeMode="Copy",e.SelectAssociatedSpells=!0,e.SelectAssociatedAbilities=!0;var l=c.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:t.CharacterItemsProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow,Fullscope:t,AssocSpells:t.AssociatedSpells,AssocAbilities:t.AssociatedAbilities,OperationTypeMode:e.OperationTypeMode,SelectAssociatedSpells:e.SelectAssociatedSpells,SelectAssociatedAbilities:e.SelectAssociatedAbilities});l.result.then(function(t){"cancel"!=t&&e.NewItemInventory.CharacterItems.push(t)})}else if(2==i){e.NewSpellInventory=u.getLayoutSpellInventoryData(),e.NewLayout=u.getLayoutData(),e.pageName="Copying Spell",e.buttontext="Copy",e.isBtnShow=!0,e.OperationTypeMode="Copy",e.SelectAssociatedSpells=!0,e.SelectAssociatedAbilities=!0;var l=c.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:t.CharacterSpellsProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,FullSpellscope:t,SelectAssociatedSpells:e.SelectAssociatedSpells,SelectAssociatedAbilities:e.SelectAssociatedAbilities,OperationTypeMode:e.OperationTypeMode});l.result.then(function(t){"cancel"!=t&&e.NewSpellInventory.CharacterSpells.push(t)})}else if(3==i){e.NewLayout=u.getLayoutData(),e.NewAbilityInventory=u.getLayoutAbilityInventoryData(),e.pageName="Copying Ability",e.buttontext="Copy",e.isBtnShow=!0,e.OperationTypeMode="Copy",e.SelectAssociatedSpells=!0,e.SelectAssociatedAbilities=!0;var l=c.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:t.CharacterAbilitiesProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,FullAbilityScope:t,SelectAssociatedSpells:e.SelectAssociatedSpells,SelectAssociatedAbilities:e.SelectAssociatedAbilities,OperationTypeMode:e.OperationTypeMode});l.result.then(function(t){"cancel"!=t&&e.NewAbilityInventory.CharacterAbilities.push(t)})}},e.Removeitem=function(a,i,l){if(1==l){e.NewItemInventory=u.getLayoutItemInventoryData(),e.NewLayout=u.getLayoutData();var o=c.confirm("Confirm Delete",'Are you sure you want to delete this Item, "'+a.CharacterItemsProperties[0].Value.Text.value+'", and all associated pages, tabs, and tiles?',{});o.result.then(function(l){"yes"==l&&t.DeleteCharacterContent(a.CharacterItemsProperties[0].CharacterItemId).then(function(t){200==t.data.StatusCode&&e.NewItemInventory.CharacterItems.splice(i,1)})})}else if(2==l){e.NewSpellInventory=u.getLayoutSpellInventoryData(),e.NewLayout=u.getLayoutData();var o=c.confirm("Confirm Delete",'Are you sure you want to delete this Spell, "'+a.CharacterSpellsProperties[0].Value.Text.value+'",?',{});o.result.then(function(l){"yes"==l&&t.DeleteCharacterSpellContent(a.CharacterSpellsProperties[0].CharacterSpellId).then(function(t){200==t.data.StatusCode&&e.NewSpellInventory.CharacterSpells.splice(i,1)})})}else if(3==l){e.NewLayout=u.getLayoutData(),e.NewAbilityInventory=u.getLayoutAbilityInventoryData();var o=c.confirm("Confirm Delete",'Are you sure you want to delete this Ability, "'+a.CharacterAbilitiesProperties[0].Value.Text.value+'",?',{});o.result.then(function(l){"yes"==l&&t.DeleteCharacterAbilityContent(a.CharacterAbilitiesProperties[0].CharacterAbilityId).then(function(t){200==t.data.StatusCode&&e.NewAbilityInventory.CharacterAbilities.splice(i,1)})})}},e.ShowAllItemProperties=function(e,t){o.go("profile.CharacterItemsDetails",{characterId:o.params.characterId,action:4,contentType:1,index:t})},e.ShowAllSpellProperties=function(e,t){o.go("profile.CharacterSpellDetails",{characterId:o.params.characterId,action:4,contentType:2,index:t})},e.ShowAllAbilityProperties=function(e,t){u.setItemProperties(e),o.go("profile.CharacterAbilityDetails",{characterId:o.params.characterId,action:4,contentType:3,index:t})},e.EditItems=function(t,a){if(1==a){e.pageName="Editing Item",e.buttontext="Update",e.IsButtonDisabled=!0,e.isBtnShow=!0;var i=c.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:t.CharacterItemsProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow,Fullscope:t});i.result.then(function(a){"cancel"!=a&&(e.NewItemInventory.CharacterItems[t.Index]=a,l.router.stateService.go("profile.ItemInventory",{characterId:o.params.characterId,action:2,contentType:1}))})}else if(2==a){e.pageName="Editing Spell",e.buttontext="Update",e.isBtnShow=!0;var i=c.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:t.CharacterSpellsProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,FullSpellscope:t});i.result.then(function(a){"cancel"!=a&&(e.NewSpellInventory.CharacterSpells[t.Index]=a,l.router.stateService.go("profile.SpellInventory",{characterId:o.params.characterId,action:2,contentType:2}))})}else if(3==a){e.pageName="Editing Ability",e.buttontext="Update",e.isBtnShow=!0;var i=c.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:t.CharacterAbilitiesProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,FullAbilityScope:t});i.result.then(function(a){"cancel"!=a&&(e.NewAbilityInventory.CharacterAbilities[t.Index]=a,l.router.stateService.go("profile.AbilityInventory",{characterId:o.params.characterId,action:2,contentType:3}))})}},e.Removeitems=function(a,i){if(1==i){e.NewItemInventory=u.getLayoutItemInventoryData(),e.NewLayout=u.getLayoutData();var s=c.confirm("Confirm Delete",'Are you sure you want to delete this Item, "'+a.CharacterItemsProperties[0].Value.Text.value+'", and all associated pages, tabs, and tiles?',{});s.result.then(function(i){"yes"==i&&t.DeleteCharacterContent(a.CharacterItemsProperties[0].CharacterItemId).then(function(t){200==t.data.StatusCode&&(e.NewItemInventory.CharacterItems.splice(a.Index,1),l.router.stateService.go("profile.ItemInventory",{characterId:o.params.characterId,action:2,contentType:1}))})})}else if(2==i){e.NewSpellInventory=u.getLayoutSpellInventoryData(),e.NewLayout=u.getLayoutData();var s=c.confirm("Confirm Delete",'Are you sure you want to delete this Spell, "'+a.CharacterSpellsProperties[0].Value.Text.value+'",?',{});s.result.then(function(i){"yes"==i&&t.DeleteCharacterSpellContent(a.CharacterSpellsProperties[0].CharacterSpellId).then(function(t){200==t.data.StatusCode&&(e.NewSpellInventory.CharacterSpells.splice(a.Index,1),l.router.stateService.go("profile.SpellInventory",{characterId:o.params.characterId,action:2,contentType:2}))})})}else if(3==i){e.NewLayout=u.getLayoutData(),e.NewAbilityInventory=u.getLayoutAbilityInventoryData();var s=c.confirm("Confirm Delete",'Are you sure you want to delete this Ability, "'+a.CharacterAbilitiesProperties[0].Value.Text.value+'",?',{});s.result.then(function(i){"yes"==i&&t.DeleteCharacterAbilityContent(a.CharacterAbilitiesProperties[0].CharacterAbilityId).then(function(t){200==t.data.StatusCode&&(e.NewAbilityInventory.CharacterAbilities.splice(a.Index,1),l.router.stateService.go("profile.AbilityInventory",{characterId:o.params.characterId,action:2,contentType:3}))})})}},e.CopyItems=function(t,a){if(1==a){e.NewItemInventory=u.getLayoutItemInventoryData(),e.NewLayout=u.getLayoutData(),e.pageName="Copying Item",e.buttontext="Copy",e.IsButtonDisabled=!0,e.isBtnShow=!0;var i=c.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:t.CharacterItemsProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow,Fullscope:t});i.result.then(function(t){"cancel"!=t&&(e.NewItemInventory.CharacterItems.push(t),l.router.stateService.go("profile.ItemInventory",{characterId:o.params.characterId,action:2,contentType:1}))})}else if(2==a){e.NewSpellInventory=u.getLayoutSpellInventoryData(),e.NewLayout=u.getLayoutData(),e.pageName="Copying Spell",e.buttontext="Copy",e.isBtnShow=!0;var i=c.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:t.CharacterSpellsProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,FullSpellscope:t});i.result.then(function(t){"cancel"!=t&&(e.NewSpellInventory.CharacterSpells.push(t),l.router.stateService.go("profile.SpellInventory",{characterId:o.params.characterId,action:2,contentType:2}))})}else if(3==a){e.NewLayout=u.getLayoutData(),e.NewAbilityInventory=u.getLayoutAbilityInventoryData(),e.pageName="Copying Ability",e.buttontext="Copy",e.isBtnShow=!0;var i=c.create("/views/dialogs/createitems.html","dialogEditCharacterItem",{scope:t.CharacterAbilitiesProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,FullAbilityScope:t});i.result.then(function(t){"cancel"!=t&&(e.NewAbilityInventory.CharacterAbilities.push(t),l.router.stateService.go("profile.AbilityInventory",{characterId:o.params.characterId,action:2,contentType:3}))})}},e.onloadFun=function(){$("#loading").fadeOut("slow")},e.getTileClass=function(t){var a=[];return e.state.tilesEditing&&a.push(t.__randomShake),t.id===e.state.tileDeleteId&&a.push("over-delete"),a.join(" ")},e.getTileClass=function(t){var a=[];return e.state.tilesEditing&&a.push(t.__randomShake),t.id===e.state.tileDeleteId&&a.push("over-delete"),a.join(" ")},e.stackOptions={height:150,width:400,cellHeight:30,minWidth:1,pixelWidth:35,verticalMargin:5,alwaysShowResizeHandle:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),resizable:{handles:"e, se, s, sw, w"},draggable:{refreshPositions:!0,handle:".grid-stack-item-content"}},e.onDragStart=function(t,a){s(function(){e.state.tileDragging=!0})},e.onDragStop=function(t,a){s(function(){e.state.tileDragging=!1})},e.state={tilesEditing:!1,tileDragging:!1,tileDeleteId:null},e.onChange=function(e,t){r.log("onChange event: "+e+" items:"+t)},e.onResizeStop=function(e,t){r.log("onResizeStop event: "+e+" ui:"+t)},e.onItemAdded=function(e){r.log("onItemAdded item: "+e)},e.onItemRemoved=function(e){r.log("onItemRemoved item: "+e)},e.onDeleteDropCharacterTiles=function(t,a){var i=(GridStackUI.Utils.getNodeData(a.helper),a.helper[0].dataset.gsId),l=-1;if(void 0!=e.CharacterContent.CharacterItemsProperties&&null!=e.CharacterContent.CharacterItemsProperties&&""!=e.CharacterContent.CharacterItemsProperties){for(var o=0;o<e.CharacterContent.CharacterItemsProperties.length;o++){var s=e.CharacterContent.CharacterItemsProperties[o];0!=s.CharacterItemId&&void 0!=s.CharacterItemId&&""!=s.CharacterItemId||i==e.CharacterContent.CharacterItemsProperties[o].tile.ClientObjectId&&(l=o)}0==e.CharacterContent.CharacterItemsProperties[l].tile.TileId?(e.CharacterContent.CharacterItemsProperties.splice(l,1),h.pop("success","Tile deleted Successfully.")):v.deleteTile(e.CharacterContent.CharacterItemsProperties[l].tile).then(function(t){200==t.data.StatusCode?(e.CharacterContent.CharacterItemsProperties.splice(l,1),h.pop("success","Tile deleted Successfully.")):400==t.data.StatusCode&&1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage)})}else if(void 0!=e.CharacterContent.CharacterSpellsProperties&&null!=e.CharacterContent.CharacterSpellsProperties&&""!=e.CharacterContent.CharacterSpellsProperties){for(var o=0;o<e.CharacterContent.CharacterSpellsProperties.length;o++){var n=e.CharacterContent.CharacterSpellsProperties[o];0!=n.CharacterSpellId&&void 0!=n.CharacterSpellId&&""!=n.CharacterSpellId||i==e.CharacterContent.CharacterSpellsProperties[o].tile.ClientObjectId&&(l=o)}0==e.CharacterContent.CharacterSpellsProperties[l].tile.TileId?(e.CharacterContent.CharacterSpellsProperties.splice(l,1),h.pop("success","Tile deleted Successfully.")):v.deleteTile(e.CharacterContent.CharacterSpellsProperties[l].tile).then(function(t){200==t.data.StatusCode?(e.CharacterContent.CharacterSpellsProperties.splice(l,1),h.pop("success","Tile deleted Successfully.")):400==t.data.StatusCode&&1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage)})}else if(void 0!=e.CharacterContent.CharacterAbilitiesProperties&&null!=e.CharacterContent.CharacterAbilitiesProperties&&""!=e.CharacterContent.CharacterAbilitiesProperties){for(var o=0;o<e.CharacterContent.CharacterAbilitiesProperties.length;o++){var r=e.CharacterContent.CharacterAbilitiesProperties[o];0!=r.CharacterAbilityId&&void 0!=r.CharacterAbilityId&&""!=r.CharacterAbilityId||i==e.CharacterContent.CharacterAbilitiesProperties[o].tile.ClientObjectId&&(l=o)}0==e.CharacterContent.CharacterAbilitiesProperties[l].tile.TileId?(e.CharacterContent.CharacterAbilitiesProperties.splice(l,1),h.pop("success","Tile deleted Successfully.")):v.deleteTile(e.CharacterContent.CharacterAbilitiesProperties[l].tile).then(function(t){200==t.data.StatusCode?(e.CharacterContent.CharacterAbilitiesProperties.splice(l,1),h.pop("success","Tile deleted Successfully.")):400==t.data.StatusCode&&1==t.data.ShowToUser&&h.pop("error",t.data.ErrorMessage)})}},e.onDeleteOverCharacterItem=function(t,a){var i=GridStackUI.Utils.getNodeData(a.helper);i&&s(function(){e.state.tileDeleteId=i.id})},e.onDeleteOutCharacterItem=function(t){e.state.tileDeleteId&&s(function(){e.state.tileDeleteId=null})},e.tileEdit=function(){e.tilePickerApi.beginSelect(function(e){})}}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("layoutsPageController",["$scope","$q","$window","$timeout","$transition","dialogs","toaster","navService","dataService",function(e,t,a,i,l,o,s,n,r){e.dataService=r,e.navService=n,e.tilePickerApi={messageId:null,beforeSelect:function(){s.clear("*"),e.tilePickerApi.messageId=s.pop({type:"note",body:"Click a layout to "+e.tilePickerApi.action+" it.",timeout:0,showCloseButton:!1,tapToDismiss:!1})},onClose:function(){e.tilePickerApi.messageId&&s.clear(e.tilePickerApi.messageId)}},e.menuHamburger={opened:!1,menus:n.getCommonHamburger([{name:"Layouts",header:!0},{id:"view.new",name:"New Layout",icon:"fa-fw fa-file-o",action:function(){c()}},{id:"view.rename",name:"Rename Layout",icon:"fa-fw fa-i-cursor",action:function(){d()}},{id:"view.delete",name:"Delete Layout",icon:"fa-fw fa-trash-o",action:function(){u()}},{id:"view.copy",name:"Copy Layout",icon:"fa-fw fa-files-o",action:function(){p()}}]),menuClick:function(t){e.menuHamburger.opened=!1}},e.menuCharacter={opened:!1,menus:n.getCommonCharacterNav([]),menuClick:function(t){e.menuCharacter.opened=!1}},n.registerNav("hamburger",e.menuHamburger),n.registerNav("character",e.menuCharacter);var c=function(){o.create("/views/dialogs/tab-rename.html","dialogTabRename",{name:""},{size:"sm"}).result.then(function(e){var t=r.createLayout({name:e});r.character.layouts.push(t),r.saveChanges()})},d=function(){e.tilePickerApi.action="rename",e.tilePickerApi.beginSelect(function(e){o.create("/views/dialogs/tab-rename.html","dialogTabRename",{name:e.name},{size:"sm"}).result.then(function(t){e.name=t,r.saveChanges()})})},u=function(){e.tilePickerApi.action="delete",e.tilePickerApi.beginSelect(function(e){o.confirm("Confirm Delete",'Are you sure you want to delete the layout, "'+e.name+'", and all associated pages, tabs, and tiles?',{size:"sm"}).result.then(function(t){r.deleteLayout(e),r.saveChanges()})})},p=function(){e.tilePickerApi.action="copy",e.tilePickerApi.beginSelect(function(e){o.create("/views/dialogs/tab-rename.html","dialogTabRename",{name:e.name},{size:"sm"}).result.then(function(e){alert("TODO")})})};e.selectLayout=function(t){e.tilePickerApi.selecting?e.tilePickerApi.endSelect(t):l.router.stateService.go("profile.character.layout",{characterId:l.params().characterId,layoutId:t.id})},e.newLayout=function(){e.tilePickerApi.selecting||c()};var m=null;e.$watch("dataService.character.layouts.length",function(e){0===e?m=s.pop({type:"note",body:"Click the plus button to create a new layout.",timeout:0,showCloseButton:!1,tapToDismiss:!0}):s.clear(m)}),function(){e.navService.updateBody(!0,!1)}()}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("linksPageController",["$scope","$transition","$q","$timeout","dialogs","toaster","navService","tileService",function(e,t,a,i,l,o,s,n){e.data=null,e.menuHamburger={opened:!1,menus:s.getCommonHamburger([]),menuClick:function(t){e.menuCharacter.opened=!1}},e.menuCharacter={opened:!1,menus:s.getCommonCharacterNav([]),menuClick:function(t){e.menuCharacter.opened=!1}},s.registerNav("hamburger",e.menuHamburger),s.registerNav("character",e.menuCharacter),function(){s.updateBody(!0,!1);var a=t.params().characterId;n.GetAllTileTypesRelatedCharacter(a).then(function(t){200==t.data.StatusCode?(e.AllTilesData=t.data.PayLoad,e.links=t.data.PayLoad.Links,e.data={notes:e.links}):400==t.data.StatusCode&&1==t.data.ShowToUser&&alert(t.data.ErrorMessage)})}()}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("notesPageController",["$scope","$transition","$q","$timeout","dialogs","toaster","navService","tileService",function(e,t,a,i,l,o,s,n){e.data=null,e.menuHamburger={opened:!1,menus:s.getCommonHamburger([]),menuClick:function(t){e.menuCharacter.opened=!1}},e.menuCharacter={opened:!1,menus:s.getCommonCharacterNav([]),menuClick:function(t){e.menuCharacter.opened=!1}},s.registerNav("hamburger",e.menuHamburger),s.registerNav("character",e.menuCharacter),function(){s.updateBody(!0,!1);var a=t.params().characterId;n.GetAllTileTypesRelatedCharacter(a).then(function(t){200==t.data.StatusCode?(e.AllTilesData=t.data.PayLoad,e.notes=t.data.PayLoad.Notes,e.data={notes:e.notes}):400==t.data.StatusCode&&1==t.data.ShowToUser&&alert(t.data.ErrorMessage)})}()}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("ruleSetPageController",["$scope","$timeout","$location","$state","$window","$element","dialogs","navService","rulesetService","rulesetDataShareService","toaster","$log","tileService",function(e,t,a,i,l,o,s,n,r,c,d,u,p){function m(){r.GetRuleSets().then(function(t){$("#loading").fadeOut("slow"),200==t.data.StatusCode?e.RuleSets=t.data.PayLoad:400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}function g(t,a){$("#loading").css("display","block"),r.GetNewRulesetByRuleSetId(t).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){e.NewRuleSet=t.data.PayLoad,e.ItemProperties=e.NewRuleSet.RuleSetMetaData.ItemProperties,e.SpellProperties=e.NewRuleSet.RuleSetMetaData.SpellProperties,e.AbilityProperties=e.NewRuleSet.RuleSetMetaData.AbilityProperties,e.CoreStatProperties=e.NewRuleSet.RuleSetMetaData.Corestats,e.NewRuleSet.ImportRquired=!0,c.setRulesetData(null),c.setRulesetData(e.NewRuleSet),0==e.NewRuleSet.Corestats.length?(e.NewRuleSet.IsAddDisabled=!1,e.iscorestatsadded=!1):(e.NewRuleSet.IsAddDisabled=!0,e.iscorestatsadded=!0),0==e.NewRuleSet.Items.length?e.isitemsadded=!1:e.isitemsadded=!0,0==e.NewRuleSet.Spells.length?e.isspellsadded=!1:e.isspellsadded=!0,0==e.NewRuleSet.Abilities.length?e.isabilitiesadded=!1:e.isabilitiesadded=!0,0==angular.equals({},c.getruleset())&&(e.NewRuleSet=c.getruleset(),null!=e.NewRuleSet.Corestats&&e.NewRuleSet.Corestats.length>0&&(e.iscorestatsadded=!0),null!=e.NewRuleSet.Items&&e.NewRuleSet.Items.length>0&&(e.isitemsadded=!0),null!=e.NewRuleSet.Spells&&e.NewRuleSet.Spells.length>0&&(e.isspellsadded=!0),null!=e.NewRuleSet.Abilities&&e.NewRuleSet.Abilities.length>0&&(e.isabilitiesadded=!0));for(var i=0;i<e.NewRuleSet.Corestats.length;i++)for(var l=e.NewRuleSet.Corestats[i],o=0;o<e.Types.length;o++)e.Types[o].TypeId==l.TypeId&&(l.TypeName=e.Types[o].Name);e.ItemsCount=e.NewRuleSet.Items.length,e.SpellsCount=e.NewRuleSet.Spells.length,e.AbilitiesCount=e.NewRuleSet.Abilities.length,0==a?(e.NewRuleSet.Action="Copy",e.NewRuleSet.ActionIcon="fa fa-clone",e.NewRuleSet.Heading="Copy Ruleset Details"):(e.NewRuleSet.Action="Update",e.NewRuleSet.ActionIcon="fa fa-pencil-square-o",e.NewRuleSet.Heading="Update Ruleset Details for "+e.NewRuleSet.Name)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)},function(){d.pop("error","Error in getting records")})}if(e.action="",e.spellslist=!0,e.limit=2,e.showimagebtns=!1,e.$on("$destroy",function(){c.setRulesetData(e.NewRuleSet)}),e.OpenFile=function(){$(".input-image").find("input[type=file]").click()},e.ImportRuleSet=function(){s.create("/views/dialogs/rulesetimport.html","dialogImportRuleset",{ruleSetId:25}).result.then(function(t){m();var a=t;r.GetNewRulesetByRuleSetId(a).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){e.NewRuleSet=t.data.PayLoad,e.ItemProperties=e.NewRuleSet.RuleSetMetaData.ItemProperties,e.SpellProperties=e.NewRuleSet.RuleSetMetaData.SpellProperties,e.AbilityProperties=e.NewRuleSet.RuleSetMetaData.AbilityProperties,e.CoreStatProperties=e.NewRuleSet.RuleSetMetaData.Corestats,e.NewRuleSet.ImportRquired=!0,c.setRulesetData(null),c.setRulesetData(e.NewRuleSet),0==e.NewRuleSet.Corestats.length?(e.NewRuleSet.IsAddDisabled=!1,e.iscorestatsadded=!1):(e.NewRuleSet.IsAddDisabled=!0,e.iscorestatsadded=!0),0==e.NewRuleSet.Items.length?e.isitemsadded=!1:e.isitemsadded=!0,0==e.NewRuleSet.Spells.length?e.isspellsadded=!1:e.isspellsadded=!0,0==e.NewRuleSet.Abilities.length?e.isabilitiesadded=!1:e.isabilitiesadded=!0,0==angular.equals({},c.getruleset())&&(e.NewRuleSet=c.getruleset(),null!=e.NewRuleSet.Corestats&&e.NewRuleSet.Corestats.length>0&&(e.iscorestatsadded=!0),null!=e.NewRuleSet.Items&&e.NewRuleSet.Items.length>0&&(e.isitemsadded=!0),null!=e.NewRuleSet.Spells&&e.NewRuleSet.Spells.length>0&&(e.isspellsadded=!0),null!=e.NewRuleSet.Abilities&&e.NewRuleSet.Abilities.length>0&&(e.isabilitiesadded=!0));for(var a=0;a<e.NewRuleSet.Corestats.length;a++)for(var i=e.NewRuleSet.Corestats[a],l=0;l<e.Types.length;l++)e.Types[l].TypeId==i.TypeId&&(i.TypeName=e.Types[l].Name);e.ItemsCount=e.NewRuleSet.Items.length,e.SpellsCount=e.NewRuleSet.Spells.length,e.AbilitiesCount=e.NewRuleSet.Abilities.length,0==h?(e.NewRuleSet.Action="Copy",e.NewRuleSet.ActionIcon="fa fa-clone",e.NewRuleSet.Heading="Copy Ruleset Details"):(e.NewRuleSet.Action="Update",e.NewRuleSet.ActionIcon="fa fa-pencil-square-o",e.NewRuleSet.Heading="Update Ruleset Details for "+e.NewRuleSet.Name)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)},function(){d.pop("error","Error in getting records")})})},1==i.params.action)$("#loading").css("display","block"),r.GetRuleSets().then(function(t){
$("#loading").fadeOut("slow"),200==t.data.StatusCode?e.RuleSets=t.data.PayLoad:400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)}),e.RulesetData=function(){r.GetRuleSets().then(function(t){200==t.data.StatusCode&&(e.RuleSets=t.data.PayLoad,e.HeaderContents=c.getDisplayCharacterRulesetCount(),e.HeaderContents.TotalRuleSetCount=e.RuleSets.length,$("#loading").fadeOut("slow"),d.pop("success",e.payload))})},e.rulesets=function(){i.go("profile.NewRuleSet",{RuleSetId:0,isNew:1,IsAddRuleSet:1})},e.editRuleSet=function(t){e.CopyOrUpdate=1,i.go("profile.NewRuleSet",{RuleSetId:t.Id,isNew:1,CopyOrUpdate:1})},e.copyRuleSet=function(t){e.CopyOrUpdate=0,i.go("profile.NewRuleSet",{RuleSetId:t.Id,isNew:1,CopyOrUpdate:0})},e.deleteRuleSet=function(t,a){s.confirm("Confirm Delete","You are about to delete "+t.Name+". Are you sure?",{size:"sm"}).result.then(function(a){if("yes"==a){$("#loading").css("display","block");var i=t.Id;r.DeleteRuleSet(t.Id).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){for(var a=-1,l=0;l<e.RuleSets.length;l++)e.RuleSets[l].Id==i&&(a=l);a>-1&&(e.RuleSets.splice(a,1),d.pop("success","RuleSet Deleted Successfully"))}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}})},e.exportRuleSet=function(e,t){$("#loading").css("display","block"),r.ImportRuleset(e.Id).then(function(t){$("#loading").fadeOut("slow"),""!=t.data&&angular.element("<a/>").attr({href:"data:attachment/csv;charset=utf-8,"+encodeURI(t.data),target:"_blank",download:"Ruleset_"+e.Name+".csv"})[0].click()})};else if(2==i.params.action){0==angular.equals({},c.getRulesetData())&&(e.NewRuleSet=c.getRulesetData()),r.GetTypes().then(function(t){200==t.data.StatusCode?(e.Types=t.data.PayLoad,e.weight=t.data.PayLoad[6].Units,e.Height=t.data.PayLoad[8].Units,e.Volume=t.data.PayLoad[9].Units):400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)}),e.iscorestatsadded=!1,e.isitemsadded=!1,e.isspellsadded=!1,e.isabilitiesadded=!1,e.tabName="ITEM";var b=i.params.RuleSetId,h=i.params.CopyOrUpdate;1==i.params.isNew?parseInt(b)>0?g(parseInt(b),h):function(){$("#loading").css("display","block"),r.GetNewRuleset().then(function(t){$("#loading").fadeOut("slow"),200==t.data.StatusCode?(e.NewRuleSet=t.data.PayLoad,e.ItemProperties=e.NewRuleSet.RuleSetMetaData.ItemProperties,e.SpellProperties=e.NewRuleSet.RuleSetMetaData.SpellProperties,e.AbilityProperties=e.NewRuleSet.RuleSetMetaData.AbilityProperties,e.CoreStatProperties=e.NewRuleSet.RuleSetMetaData.Corestats,c.setRulesetData(null),c.setRulesetData(e.NewRuleSet),e.NewRuleSet.IsAddDisabled=!1,e.NewRuleSet.Action="Add",e.NewRuleSet.ActionIcon="fa fa-plus",e.NewRuleSet.Heading="Add New Ruleset"):400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}():(0==angular.equals({},c.getRulesetData())&&(e.NewRuleSet=c.getRulesetData(),e.ItemProperties=e.NewRuleSet.RuleSetMetaData.ItemProperties,e.SpellProperties=e.NewRuleSet.RuleSetMetaData.SpellProperties,e.AbilityProperties=e.NewRuleSet.RuleSetMetaData.AbilityProperties,e.CoreStatProperties=e.NewRuleSet.RuleSetMetaData.Corestats),null!=e.NewRuleSet.Corestats?0==e.NewRuleSet.Corestats.length?(e.NewRuleSet.IsAddDisabled=!1,e.iscorestatsadded=!1):(e.NewRuleSet.IsAddDisabled=!0,e.iscorestatsadded=!0):e.iscorestatsadded=!1,null!=e.NewRuleSet.Items?0==e.NewRuleSet.Items.length?e.isitemsadded=!1:e.isitemsadded=!0:e.isitemsadded=!1,null!=e.NewRuleSet.Spells?0==e.NewRuleSet.Spells.length?e.isspellsadded=!1:e.isspellsadded=!0:e.isspellsadded=!1,null!=e.NewRuleSet.Abilities?0==e.NewRuleSet.Abilities.length?e.isabilitiesadded=!1:e.isabilitiesadded=!0:e.isabilitiesadded=!1),e.tab=1,e.setTab=function(t){1==t?e.tabName="ITEM":2==t?e.tabName="SPELL":3==t&&(e.tabName="ABILITY"),e.tab=t},e.isSet=function(t){return e.tab===t},e.GetRulesets=function(){l.localStorage.setItem("RuleSetId",0),i.go("profile.AddNewRuleSet")},e.BackCharacters=function(){return n.gotoCharacters()},e.ImportRuleSet=function(t){s.create("/views/dialogs/rulesetimport.html","dialogImportRuleset",{ruleSetId:e.NewRuleSet.Id}).result.then(function(t){var a=t;r.GetNewRulesetByRuleSetId(a).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){e.NewRuleSet=t.data.PayLoad,e.ItemProperties=e.NewRuleSet.RuleSetMetaData.ItemProperties,e.SpellProperties=e.NewRuleSet.RuleSetMetaData.SpellProperties,e.AbilityProperties=e.NewRuleSet.RuleSetMetaData.AbilityProperties,e.CoreStatProperties=e.NewRuleSet.RuleSetMetaData.Corestats,e.NewRuleSet.ImportRquired=!0,c.setRulesetData(null),c.setRulesetData(e.NewRuleSet),0==e.NewRuleSet.Corestats.length?(e.NewRuleSet.IsAddDisabled=!1,e.iscorestatsadded=!1):(e.NewRuleSet.IsAddDisabled=!0,e.iscorestatsadded=!0),0==e.NewRuleSet.Items.length?e.isitemsadded=!1:e.isitemsadded=!0,0==e.NewRuleSet.Spells.length?e.isspellsadded=!1:e.isspellsadded=!0,0==e.NewRuleSet.Abilities.length?e.isabilitiesadded=!1:e.isabilitiesadded=!0,0==angular.equals({},c.getruleset())&&(e.NewRuleSet=c.getruleset(),null!=e.NewRuleSet.Corestats&&e.NewRuleSet.Corestats.length>0&&(e.iscorestatsadded=!0),null!=e.NewRuleSet.Items&&e.NewRuleSet.Items.length>0&&(e.isitemsadded=!0),null!=e.NewRuleSet.Spells&&e.NewRuleSet.Spells.length>0&&(e.isspellsadded=!0),null!=e.NewRuleSet.Abilities&&e.NewRuleSet.Abilities.length>0&&(e.isabilitiesadded=!0));for(var a=0;a<e.NewRuleSet.Corestats.length;a++)for(var i=e.NewRuleSet.Corestats[a],l=0;l<e.Types.length;l++)e.Types[l].TypeId==i.TypeId&&(i.TypeName=e.Types[l].Name);e.ItemsCount=e.NewRuleSet.Items.length,e.SpellsCount=e.NewRuleSet.Spells.length,e.AbilitiesCount=e.NewRuleSet.Abilities.length,0==h?(e.NewRuleSet.Action="Copy",e.NewRuleSet.ActionIcon="fa fa-clone",e.NewRuleSet.Heading="Copy Ruleset Details"):(e.NewRuleSet.Action="Update",e.NewRuleSet.ActionIcon="fa fa-pencil-square-o",e.NewRuleSet.Heading="Update Ruleset Details for "+e.NewRuleSet.Name)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)},function(){d.pop("error","Error in getting records")})})},e.addNewCoreStat=function(){if(e.OperationTypeMode="Create",e.CoreStatsInGrid=[],e.CoreStatProperties.Name="",null!=e.NewRuleSet.Corestats){for(var t=0;t<e.NewRuleSet.Corestats.length;t++)14!=e.NewRuleSet.Corestats[t].TypeId&&5!=e.NewRuleSet.Corestats[t].TypeId&&6!=e.NewRuleSet.Corestats[t].TypeId||e.CoreStatsInGrid.push(e.NewRuleSet.Corestats[t]);e.CoreStatsNameInGrid=e.NewRuleSet.Corestats}e.CoreStatProperties.TypeId="",e.CoreStatProperties.Description="",e.IsButtonDisabled=!0,e.CoreStatProperties.Heading="New Character Stats Details",e.isInDatabaseCoreStat=!0,e.pageName="New Character stat",e.buttontext="Save",s.create("/views/dialogs/addnewcorestat.html","dialogCreateCoreStat",{scope:e.CoreStatProperties,btntext:e.buttontext,tabname:e.pageName,IsenableBtn:e.IsButtonDisabled,CoreStatsInGrid:e.CoreStatsInGrid,CoreStatsNameInGrid:e.CoreStatsNameInGrid,CoreStatMode:e.OperationTypeMode}).result.then(function(t){"cancel"!=t&&(null!=e.NewRuleSet.Corestats&&void 0!=e.NewRuleSet.Corestats||(e.NewRuleSet.Corestats=[]),e.NewRuleSet.Corestats.push(t),e.iscorestatsadded=!0)})},e.createitems=function(){e.buttontext="Create",e.tabName="Create New Item",e.IsButtonDisabled=!1,e.isBtnShow=!1,e.OperationTypeMode="Create";var t="",a="";if(e.Content_ItemProperties=[],null!=e.NewRuleSet.Items)for(var i=0;i<e.NewRuleSet.Items.length;i++)e.Content_ItemProperties.push(e.NewRuleSet.Items[i].ItemProperties[0].Value.Text.value);for(var i=0;i<e.NewRuleSet.Rulesetproperty.length;i++)7==e.NewRuleSet.Rulesetproperty[i].TypeId&&(t=e.NewRuleSet.Rulesetproperty[i].Units.selectedUnit);for(var l=0;l<e.ItemProperties.length;l++)7==e.ItemProperties[l].TypeId&&(e.ItemProperties[l].Value.Weight.units.selectedUnit=t);for(var i=0;i<e.NewRuleSet.Rulesetproperty.length;i++)1==e.NewRuleSet.Rulesetproperty[i].TypeId&&e.NewRuleSet.Rulesetproperty[i].Name.indexOf("Volume")>-1&&(a=e.NewRuleSet.Rulesetproperty[i].Value.Text.value);for(var l=0;l<e.ItemProperties.length;l++)13==e.ItemProperties[l].TypeId&&(e.ItemProperties[l].Value.Volume.units.selectedUnit=a);console.log("$scope.ItemProperties: ",e.ItemProperties),s.create("/views/dialogs/createitems.html","dialogCreateItem",{OpenBingSearch:e.OpenBingSearch,OpenFile:e.OpenFile,scope:e.ItemProperties,tabName:e.tabName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow,Content_ItemProperties:e.Content_ItemProperties,ItemMode:e.OperationTypeMode,Spells:e.NewRuleSet.Spells,Abilities:e.NewRuleSet.Abilities}).result.then(function(t){if(null!=e.NewRuleSet.Items&&void 0!=e.NewRuleSet.Items||(e.NewRuleSet.Items=[]),"cancel"!=t){var a={};a.ItemProperties=t.Properties,a.AssociatedSpells=t.AssociatedSpells,a.AssociatedAbilities=t.AssociatedAbilities,e.NewRuleSet.Items.push(a),e.isitemsadded=!0}})},e.createspells=function(){e.buttontext="Create",e.tabName="Create New Spell",e.isBtnShow=!1,e.OperationTypeMode="Create";var t="",a="";if(e.Content_SpellProperties=[],null!=e.NewRuleSet.Spells)for(var i=0;i<e.NewRuleSet.Spells.length;i++)e.Content_SpellProperties.push(e.NewRuleSet.Spells[i].SpellProperties[0].Value.Text.value);for(var i=0;i<e.NewRuleSet.Rulesetproperty.length;i++)7==e.NewRuleSet.Rulesetproperty[i].TypeId&&(t=e.NewRuleSet.Rulesetproperty[i].Units.selectedUnit);for(var l=0;l<e.SpellProperties.length;l++)7==e.SpellProperties[l].TypeId&&(e.SpellProperties[l].Value.Weight.units.selectedUnit=t);for(var i=0;i<e.NewRuleSet.Rulesetproperty.length;i++)1==e.NewRuleSet.Rulesetproperty[i].TypeId&&e.NewRuleSet.Rulesetproperty[i].Name.indexOf("Volume")>-1&&(a=e.NewRuleSet.Rulesetproperty[i].Value.Text.value);for(var l=0;l<e.SpellProperties.length;l++)13==e.SpellProperties[l].TypeId&&(e.SpellProperties[l].Value.Volume.units.selectedUnit=a);s.create("/views/dialogs/createspells.html","dialogCreateSpell",{scope:e.SpellProperties,tabName:e.tabName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,Content_SpellProperties:e.Content_SpellProperties,SpellMode:e.OperationTypeMode}).result.then(function(t){if(null!=e.NewRuleSet.Spells&&void 0!=e.NewRuleSet.Spells||(e.NewRuleSet.Spells=[]),"cancel"!=t){var a={SpellProperties:t};e.NewRuleSet.Spells.push(a),e.isspellsadded=!0}})},e.createabilities=function(){e.buttontext="Create",e.tabName="Create New Ability",e.isBtnShow=!1,e.OperationTypeMode="Create";var t="",a="";if(e.Content_AbilityProperties=[],null!=e.NewRuleSet.Abilities)for(var i=0;i<e.NewRuleSet.Abilities.length;i++)e.Content_AbilityProperties.push(e.NewRuleSet.Abilities[i].AbilityProperties[0].Value.Text.value);for(var i=0;i<e.NewRuleSet.Rulesetproperty.length;i++)7==e.NewRuleSet.Rulesetproperty[i].TypeId&&(t=e.NewRuleSet.Rulesetproperty[i].Units.selectedUnit);for(var l=0;l<e.AbilityProperties.length;l++)7==e.AbilityProperties[l].TypeId&&(e.AbilityProperties[l].Value.Weight.units.selectedUnit=t);for(var i=0;i<e.NewRuleSet.Rulesetproperty.length;i++)1==e.NewRuleSet.Rulesetproperty[i].TypeId&&e.NewRuleSet.Rulesetproperty[i].Name.indexOf("Volume")>-1&&(a=e.NewRuleSet.Rulesetproperty[i].Value.Text.value);for(var l=0;l<e.AbilityProperties.length;l++)13==e.AbilityProperties[l].TypeId&&(e.AbilityProperties[l].Value.Volume.units.selectedUnit=a);s.create("/views/dialogs/createabilities.html","dialogCreateAbility",{scope:e.AbilityProperties,tabName:e.tabName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,Content_AbilityProperties:e.Content_AbilityProperties,AbilityMode:e.OperationTypeMode}).result.then(function(t){if(null!=e.NewRuleSet.Abilities&&void 0!=e.NewRuleSet.Abilities||(e.NewRuleSet.Abilities=[]),"cancel"!=t){var a={AbilityProperties:t};e.NewRuleSet.Abilities.push(a),e.isabilitiesadded=!0}})},e.showallCorestats=function(){i.go("profile.Corestats",{RuleSetId:e.NewRuleSet.Id})},e.showallitems=function(){i.go("profile.Items",{RuleSetId:e.NewRuleSet.Id})},e.ShowallSpells=function(){i.go("profile.Spells",{RuleSetId:e.NewRuleSet.Id})},e.ShowallAbilities=function(){i.go("profile.Abilities",{RuleSetId:e.NewRuleSet.Id})},e.save=function(){var a=e.NewRuleSet;switch($("#loading").css("display","block"),e.NewRuleSet.Action){case"Copy":var l=r.copyRuleSet(a);break;case"Update":var l=r.updateRuleSet(a);break;default:var l=r.saveRuleSet(a)}l.then(function(a){if(200==a.data.StatusCode){switch(e.payload=a.data.PayLoad,e.NewRuleSet.Action){case"Add":d.pop("success","RuleSet Added Successfully."),t(i.go("profile.AddNewRuleSet"),500);break;case"Copy":d.pop("success","RuleSet Copied Successfully."),t(i.go("profile.AddNewRuleSet"),500);break;default:d.pop("success",e.payload),t(i.go("profile.AddNewRuleSet"),500)}$("#loading").fadeOut("slow"),r.GetRuleSets()}else 400==a.data.StatusCode&&($("#loading").fadeOut("slow"),1==a.data.ShowToUser&&d.pop("error",a.data.ErrorMessage))},function(){d.pop("error","Error in getting records")})},e.cancel=function(){1==i.params.IsAddRuleSet?i.go("profile.AddNewRuleSet"):i.go("profile.characters")}}else if(3==i.params.action){e.RulesetId=parseInt(i.params.RuleSetId);var v=a.absUrl().split("?")[0];if(v.indexOf("Corestats")>0)if(0==angular.equals({},c.getcorestat()))e.Corestats=c.getcorestat(),e.Corestats.length>0?(e.lists=!1,e.list=!0):(e.lists=!0,e.list=!1);else{var f=r.GetRulesetCorestats(parseInt(i.params.RuleSetId));f.then(function(t){200==t.data.StatusCode&&(e.Corestats=t.data.PayLoad,r.GetTypes().then(function(t){if(200==t.data.StatusCode){e.Types=t.data.PayLoad,c.setcorestat(e.Corestats);for(var a=0;a<e.Types.length;a++)for(var l=0;l<e.Corestats.length;l++)e.Types[a].TypeId==e.Corestats[l].TypeId&&(e.Corestats[l].TypeName=e.Types[a].Name);e.Corestats.length>0?(e.lists=!1,e.list=!0):(e.lists=!0,e.list=!1),i.go("profile.Corestats",{RuleSetId:parseInt(i.params.RuleSetId)}),$("#loading").fadeOut("slow")}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&($("#loading").fadeOut("slow"),d.pop("error",t.data.ErrorMessage),d.pop("error",t.data.ErrorMessage))}))})}else parseInt(b)>0&&g(parseInt(b),h);e.addNewCoreStat=function(){r.GetCorestatsMetadata().then(function(t){if(200==t.data.StatusCode){if(e.Corestats=c.getcorestat(),e.CoreStatProperties=t.data.PayLoad.RuleSetMetaData.Corestats,e.OperationTypeMode="Create",e.CoreStatsInGrid=[],e.CoreStatProperties.Name="",null!=e.Corestats){for(var a=0;a<e.Corestats.length;a++)14!=e.Corestats[a].TypeId&&5!=e.Corestats[a].TypeId&&6!=e.Corestats[a].TypeId||e.CoreStatsInGrid.push(e.Corestats[a]);e.CoreStatsNameInGrid=e.Corestats}e.CoreStatProperties.TypeId="",e.CoreStatProperties.Description="",e.IsButtonDisabled=!0,e.CoreStatProperties.Heading="New Character Stats Details",e.isInDatabaseCoreStat=!0,e.pageName="New Character stat",e.buttontext="Save",s.create("/views/dialogs/addnewcorestat.html","dialogCreateCoreStat",{scope:e.CoreStatProperties,btntext:e.buttontext,tabname:e.pageName,IsenableBtn:e.IsButtonDisabled,CoreStatsInGrid:e.CoreStatsInGrid,CoreStatsNameInGrid:e.CoreStatsNameInGrid,CoreStatMode:e.OperationTypeMode}).result.then(function(t){"cancel"!=t&&(e.Corestatlist=[],t.RulesetId=e.RulesetId,e.Corestatlist.push(t),r.CreateCorestats(e.Corestatlist).then(function(t){200==t.data.StatusCode?(e.Corestats=t.data.PayLoad,c.setcorestat(e.Corestats),r.GetTypes().then(function(t){if(200==t.data.StatusCode){e.Types=t.data.PayLoad;for(var a=0;a<e.Types.length;a++)for(var l=0;l<e.Corestats.length;l++)e.Types[a].TypeId==e.Corestats[l].TypeId&&(e.Corestats[l].TypeName=e.Types[a].Name);e.Corestats.length>0?(e.lists=!1,e.list=!0):(e.lists=!0,e.list=!1),i.go("profile.Corestats",{RuleSetId:e.RulesetId})}})):400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)}))})}})},e.editCoreStat=function(t){e.action="update",l.localStorage.setItem("RuleSetId",t.Id),l.localStorage.setItem("Action","edit"),e.isInDatabaseCoreStat=!1,r.GetCoreStatById(t.Id).then(function(t){200==t.data.StatusCode?(e.CoreStatProperties=t.data.PayLoad,e.CoreStatProperties.Heading="Edit CoreStats Details",s.create("/views/dialogs/addnewcorestat.html","dialogCreateCoreStat",{scope:e.CoreStatProperties}).result.then(function(t){"cancel"!=t&&(null!=e.NewRuleSet.Corestats&&void 0!=e.NewRuleSet.Corestats||(e.NewRuleSet.Corestats=[]),e.NewRuleSet.Corestats.push(t),e.iscorestatsadded=!0)}),e.CoreStatProperties.Action="Update",e.CoreStatProperties.Heading="Update Ruleset Details for "+e.CoreStatProperties.Name):400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)},function(){d.pop("error","Error in getting records")})},e.deleteCoreStat=function(e){confirm("You are about to delete "+e.Name+". Are you sure?")&&(r.DeleteCoreStat(e.Id),i.go("profile.AddNewRuleSet"))},e.deleteCorestats=function(t){e.NewRuleSet.Corestats.splice(t,1)},e.ShowChoice=function(){"2"==e.TypeId?e.result=!0:e.result=!1},e.AddChoices={Choices:[]},e.AddChoice=function(){e.AddChoices.Choices.push("")},e.CopyCorestat=function(t,a){if(e.Corestats=c.getcorestat(),e.pageName="Copying Corestat",e.buttontext="Copy",e.IsButtonDisabled=!1,e.OperationTypeMode="Copy",e.CoreStatsInGrid=[],null!=e.Corestats){for(var l=0;l<e.Corestats.length;l++)14!=e.Corestats[l].TypeId&&5!=e.Corestats[l].TypeId&&6!=e.Corestats[l].TypeId||e.CoreStatsInGrid.push(e.Corestats[l]);e.CoreStatsNameInGrid=e.Corestats}s.create("/views/dialogs/addnewcorestat.html","dialogCopyCoreStat",{scope:t,btntext:e.buttontext,tabname:e.pageName,IsenableBtn:e.IsButtonDisabled,CoreStatsNameInGrid:e.CoreStatsNameInGrid,CoreStatsInGrid:e.CoreStatsInGrid,CoreStatMode:e.OperationTypeMode}).result.then(function(t){"cancel"!=t&&(e.CorestatList=[],e.CorestatList.push(t),r.CopyCorestats(e.CorestatList).then(function(t){200==t.data.StatusCode?(e.Corestats=t.data.PayLoad,c.setcorestat(e.Corestats),r.GetTypes().then(function(t){if(200==t.data.StatusCode){e.Types=t.data.PayLoad;for(var a=0;a<e.Types.length;a++)for(var l=0;l<e.Corestats.length;l++)e.Types[a].TypeId==e.Corestats[l].TypeId&&(e.Corestats[l].TypeName=e.Types[a].Name);e.Corestats.length>0?(e.lists=!1,e.list=!0):(e.lists=!0,e.list=!1),i.go("profile.Corestats",{RuleSetId:e.RulesetId})}}),i.go("profile.Corestats",{RuleSetId:e.NewRuleSet.Id})):400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)}))})},e.EditCorestat=function(t,a){if(e.Corestats=c.getcorestat(),e.pageName="Editing Corestat",e.buttontext="Update",e.IsButtonDisabled=!1,e.OperationTypeMode="Edit",e.CoreStatsInGrid=[],null!=e.Corestats){for(var l=0;l<e.Corestats.length;l++)14!=e.Corestats[l].TypeId&&5!=e.Corestats[l].TypeId&&6!=e.Corestats[l].TypeId||e.CoreStatsInGrid.push(e.Corestats[l]);e.CoreStatsNameInGrid=e.Corestats}s.create("/views/dialogs/addnewcorestat.html","dialogCopyCoreStat",{scope:t,btntext:e.buttontext,IsenableBtn:e.IsButtonDisabled,tabname:e.pageName,CoreStatsNameInGrid:e.CoreStatsNameInGrid,CoreStatMode:e.OperationTypeMode,CoreStatsInGrid:e.CoreStatsInGrid}).result.then(function(t){"cancel"!=t&&(e.CorestatList=[],e.CorestatList.push(t),r.UpdateCorestats(e.CorestatList).then(function(t){200==t.data.StatusCode?(e.Corestats=t.data.PayLoad,r.GetTypes().then(function(t){if(200==t.data.StatusCode){e.Types=t.data.PayLoad;for(var a=0;a<e.Types.length;a++)for(var l=0;l<e.Corestats.length;l++)e.Types[a].TypeId==e.Corestats[l].TypeId&&(e.Corestats[l].TypeName=e.Types[a].Name);e.Corestats.length>0?(e.lists=!1,e.list=!0):(e.lists=!0,e.list=!1),i.go("profile.Corestats",{RuleSetId:e.Corestats[0].RulesetId})}}),i.go("profile.Corestats",{RuleSetId:e.Corestats[0].RulesetId})):400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)}))})},e.RemoveCorestat=function(t){e.Corestats=c.getcorestat(),s.confirm("Confirm Delete",'Are you sure you want to delete this Corestat, "'+t.Name+'"',{}).result.then(function(a){"yes"==a&&(e.CorestatList=[],e.CorestatList.push(t),r.DeleteCorestats(e.CorestatList).then(function(t){200==t.data.StatusCode?(e.Corestats=t.data.PayLoad,r.GetTypes().then(function(t){if(200==t.data.StatusCode){e.Types=t.data.PayLoad;for(var a=0;a<e.Types.length;a++)for(var i=0;i<e.Corestats.length;i++)e.Types[a].TypeId==e.Corestats[i].TypeId&&(e.Corestats[i].TypeName=e.Types[a].Name);e.Corestats.length>0?(e.lists=!1,e.list=!0):(e.lists=!0,e.list=!1)}})):400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)}))})},e.BackCoreStat=function(){i.go("profile.AddNewRuleSet"),$("#loading").fadeOut("slow")}}else if(4==i.params.action){e.RulesetId=parseInt(i.params.RuleSetId);var v=a.absUrl().split("?")[0];if(v.indexOf("Items")>0)if(0==angular.equals({},c.getRulesetItems()))e.RulesetItems=c.getRulesetItems(),null!=e.RulesetItems&&void 0!=e.RulesetItems&&e.RulesetItems!={}||(e.RulesetItems=[]),e.RulesetItems.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.Itemlist=!0,e.list=!1,e.grid=!1);else{var y=r.GetRulesetItems(e.RulesetId);y.then(function(t){200==t.data.StatusCode?(e.RulesetItems=t.data.PayLoad,null!=e.RulesetItems&&void 0!=e.RulesetItems&&e.RulesetItems!={}||(e.RulesetItems=[]),c.setRulesetItems(e.RulesetItems),e.RulesetItems.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Items",{RuleSetId:e.RulesetId}),$("#loading").fadeOut("slow")):400==t.data.StatusCode&&1==t.ShowToUser&&($("#loading").fadeOut("slow"),d.pop("error",t.data.ErrorMessage))})}else if(v.indexOf("Spells")>0)if(0==angular.equals({},c.getRulesetSpells()))e.RulesetSpells=c.getRulesetSpells(),e.RulesetSpells.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0);else{var S=r.GetRulesetSpells(e.RulesetId);S.then(function(t){200==t.data.StatusCode?(e.RulesetSpells=t.data.PayLoad,c.setRulesetSpells(e.RulesetSpells),e.RulesetSpells.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Spells",{RuleSetId:e.RulesetId}),$("#loading").fadeOut("slow")):400==t.data.StatusCode&&1==t.ShowToUser&&($("#loading").fadeOut("slow"),d.pop("error",t.data.ErrorMessage))})}else if(v.indexOf("Abilities")>0)if(0==angular.equals({},c.getRulesetAbilities()))e.RulesetAbilities=c.getRulesetAbilities(),e.RulesetAbilities.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0);else{var w=r.GetRulesetAbilities(e.RulesetId);w.then(function(t){200==t.data.StatusCode?(e.RulesetAbilities=t.data.PayLoad,c.setRulesetAbilities(e.RulesetAbilities),e.RulesetAbilities.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Abilities",{RuleSetId:e.RulesetId}),$("#loading").fadeOut("slow")):400==t.data.StatusCode&&1==t.ShowToUser&&($("#loading").fadeOut("slow"),d.pop("error",t.data.ErrorMessage))})}else parseInt(e.RulesetId)>0&&g(e.RulesetId,h);e.BackItem=function(){i.go("profile.AddNewRuleSet"),$("#loading").fadeOut("slow")},e.BackSpell=function(){i.go("profile.AddNewRuleSet"),$("#loading").fadeOut("slow")},e.BackAbility=function(){i.go("profile.AddNewRuleSet"),$("#loading").fadeOut("slow")},e.showlist=function(){e.list=!0,e.grid=!1},e.showgrid=function(){e.list=!1,e.grid=!0},e.CreateItem=function(){r.GetItemsMetadata(e.RulesetId).then(function(t){if(200==t.data.StatusCode){e.ItemProperties=t.data.PayLoad.RuleSetMetaData.ItemProperties,e.Rulesetproperty=t.data.PayLoad.Rulesetproperty,e.Spells=t.data.PayLoad.Spells,c.setRulesetSpells(e.Spells),e.Abilities=t.data.PayLoad.Abilities,c.setRulesetAbilities(e.Abilities),e.buttontext="Create",e.tabName="Create New Item",e.IsButtonDisabled=!1,e.isBtnShow=!1,e.OperationTypeMode="Create";var a="",i="",l="";if(e.Content_ItemProperties=[],null!=e.RulesetItems)for(var o=0;o<e.RulesetItems.length;o++)e.Content_ItemProperties.push(e.RulesetItems[o].ItemProperties[0].Value.Text.value);for(var o=0;o<e.Rulesetproperty.length;o++)1==e.Rulesetproperty[o].TypeId&&e.Rulesetproperty[o].Name.indexOf("Currency Label")>-1&&(l=e.Rulesetproperty[o].Value.Text.value);for(var n=0;n<e.ItemProperties.length;n++)14==e.ItemProperties[n].TypeId&&(e.ItemProperties[n].Value.Text=l);for(var o=0;o<e.Rulesetproperty.length;o++)1==e.Rulesetproperty[o].TypeId&&e.Rulesetproperty[o].Name.indexOf("Weight")>-1&&(a=e.Rulesetproperty[o].Value.Text.value);for(var n=0;n<e.ItemProperties.length;n++)7==e.ItemProperties[n].TypeId&&(e.ItemProperties[n].Value.Weight.units.selectedUnit=a);for(var o=0;o<e.Rulesetproperty.length;o++)1==e.Rulesetproperty[o].TypeId&&e.Rulesetproperty[o].Name.indexOf("Volume")>-1&&(i=e.Rulesetproperty[o].Value.Text.value);for(var n=0;n<e.ItemProperties.length;n++)13==e.ItemProperties[n].TypeId&&(e.ItemProperties[n].Value.Volume.units.selectedUnit=i);console.log("$scope.ItemProperties: ",e.ItemProperties),s.create("/views/dialogs/createitems.html","dialogCreateItem",{scope:e.ItemProperties,tabName:e.tabName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow,Content_ItemProperties:e.Content_ItemProperties,ItemMode:e.OperationTypeMode,Spells:e.Spells,Abilities:e.Abilities}).result.then(function(t){if("cancel"!=t){var a={};a.ItemProperties=t.Properties,console.log("res.Properties: ",t.Properties),a.AssociatedSpells=t.AssociatedSpells,a.AssociatedAbilities=t.AssociatedAbilities,a.RulesetID=e.RulesetId,e.ItemList=[],e.ItemList.push(a),r.CreateItems(e.ItemList).then(function(t){if(200==t.data.StatusCode){var a=[];a=t.data.PayLoad;for(var i=0;i<a.length;i++)e.RulesetItems.push(a[i]);c.setRulesetItems(e.RulesetItems),e.RulesetItems.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),$("#loading").fadeOut("slow")}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}$("#loading").fadeOut("slow")})}else 400==t.data.StatusCode&&1==t.ShowToUser&&d.pop("error",t.data.ErrorMessage)})},e.CopyItem=function(t,a){r.GetRulesetSpells(e.RulesetId).then(function(i){200==i.data.StatusCode&&(e.Spells=i.data.PayLoad,r.GetRulesetAbilities(e.RulesetId).then(function(i){if(200==i.data.StatusCode){if(e.Abilities=i.data.PayLoad,e.pageName="Copying Item",e.buttontext="Copy",e.IsButtonDisabled=!0,e.isBtnShow=!0,e.OperationTypeMode="Copy",e.Content_ItemProperties=[],e.SelectAssociatedSpells=!0,e.SelectAssociatedAbilities=!0,null!=e.RulesetItems)for(var l=0;l<e.RulesetItems.length;l++)e.Content_ItemProperties.push(e.RulesetItems[l].ItemProperties[0].Value.Text.value);s.create("/views/dialogs/createitems.html","dialogCopyItem",{scope:t.ItemProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow,ItemMode:e.OperationTypeMode,Spells:e.Spells,AssociatedSpells:e.RulesetItems[a].AssociatedSpells,Abilities:e.Abilities,AssociatedAbilities:e.RulesetItems[a].AssociatedAbilities,Content_ItemProperties:e.Content_ItemProperties,SelectAssociatedSpells:e.SelectAssociatedSpells,SelectAssociatedAbilities:e.SelectAssociatedAbilities}).result.then(function(t){if("cancel"!=t){for(var a={ItemProperties:t.ItemProperties},i=0;i<a.ItemProperties.length;i++)a.ItemProperties[i].ContentId=0;var l={};l.ItemProperties=t.ItemProperties,l.AssociatedSpells=t.AssociatedSpells,l.AssociatedAbilities=t.AssociatedAbilities,l.RulesetId=e.RulesetId,e.ItemList=[],e.ItemList.push(l),r.CopyItems(e.ItemList).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){var a=[];a=t.data.PayLoad;for(var i=0;i<a.length;i++)e.RulesetItems.push(a[i]);c.setRulesetItems(e.RulesetItems),e.RulesetItems.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}$("#loading").fadeOut("slow")})}}))})},e.EditItem=function(t,a){r.GetRulesetSpells(e.RulesetId).then(function(i){200==i.data.StatusCode&&(e.Spells=i.data.PayLoad,r.GetRulesetAbilities(e.RulesetId).then(function(i){200==i.data.StatusCode&&(e.Abilities=i.data.PayLoad,e.pageName="Editing Item",e.buttontext="Update",e.IsButtonDisabled=!0,e.isBtnShow=!0,e.OperationTypeMode="Edit",s.create("/views/dialogs/createitems.html","dialogCopyItem",{scope:t.ItemProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow,ItemMode:e.OperationTypeMode,Spells:e.Spells,AssociatedSpells:e.RulesetItems[a].AssociatedSpells,Abilities:e.Abilities,AssociatedAbilities:e.RulesetItems[a].AssociatedAbilities}).result.then(function(t){if("cancel"!=t){var a={};a.ItemProperties=t.ItemProperties,a.AssociatedSpells=t.AssociatedSpells,a.AssociatedAbilities=t.AssociatedAbilities,a.RulesetId=e.RulesetId,e.ItemList=[],e.ItemList.push(a),r.UpdateItems(e.ItemList).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){for(var a=t.data.PayLoad,i=0;i<a.length;i++)for(var l=0;l<e.RulesetItems.length;l++)a[i].ItemProperties[0].ContentId==e.RulesetItems[l].ItemProperties[0].ContentId&&(e.RulesetItems[l]=a[i]);c.setRulesetItems(e.RulesetItems),e.RulesetItems.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}$("#loading").fadeOut("slow")}))}))})},e.Removeitem=function(t){s.confirm("Confirm Delete",'Are you sure you want to delete this Item, "'+t.ItemProperties[0].Value.Text.value+'"',{}).result.then(function(a){if("yes"==a){var i=[];t.RulesetId=e.RulesetId,i.push(t),r.DeleteItems(i).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){for(var a=t.data.PayLoad,i=[],l=0;l<a.length;l++)for(var o=0;o<e.RulesetItems.length;o++)a[l].ItemProperties[0].ContentId==e.RulesetItems[o].ItemProperties[0].ContentId&&i.push(o);for(var l=0;l<i.length;l++)e.RulesetItems.splice(i[l],1);c.setRulesetItems(e.RulesetItems),e.RulesetItems.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}$("#loading").fadeOut("slow")})},e.CreateSpell=function(){r.GetSpellsMetadata(e.RulesetId).then(function(t){if(200==t.data.StatusCode){e.RulesetSpells=c.getRulesetSpells(),e.SpellProperties=t.data.PayLoad.RuleSetMetaData.SpellProperties,e.Rulesetproperty=t.data.PayLoad.Rulesetproperty,e.buttontext="Create",e.tabName="Create New Spell",e.isBtnShow=!1,e.OperationTypeMode="Create";var a="",i="";if(e.Content_SpellProperties=[],null!=e.RulesetSpells)for(var l=0;l<e.RulesetSpells.length;l++)e.Content_SpellProperties.push(e.RulesetSpells[l].SpellProperties[0].Value.Text.value);for(var l=0;l<e.Rulesetproperty.length;l++)7==e.Rulesetproperty[l].TypeId&&(a=e.Rulesetproperty[l].Units.selectedUnit);for(var o=0;o<e.SpellProperties.length;o++)7==e.SpellProperties[o].TypeId&&(e.SpellProperties[o].Value.Weight.units.selectedUnit=a);for(var l=0;l<e.Rulesetproperty.length;l++)1==e.Rulesetproperty[l].TypeId&&e.Rulesetproperty[l].Name.indexOf("Volume")>-1&&(i=e.Rulesetproperty[l].Value.Text.value);for(var o=0;o<e.SpellProperties.length;o++)13==e.SpellProperties[o].TypeId&&(e.SpellProperties[o].Value.Volume.units.selectedUnit=i);s.create("/views/dialogs/createspells.html","dialogCreateSpell",{scope:e.SpellProperties,tabName:e.tabName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,Content_SpellProperties:e.Content_SpellProperties,SpellMode:e.OperationTypeMode}).result.then(function(t){if("cancel"!=t){var a=t,i={};i.SpellProperties=a,i.RulesetID=e.RulesetId,e.SpellList=[],e.SpellList.push(i),r.CreateSpells(e.SpellList).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){var a=[];a=t.data.PayLoad;for(var i=0;i<a.length;i++)e.RulesetSpells.push(a[i]);c.setRulesetSpells(e.RulesetSpells),e.RulesetSpells.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}$("#loading").fadeOut("slow")})}})},e.CopySpell=function(t,a){if(e.RulesetSpells=c.getRulesetSpells(),e.pageName="Copying Spell",e.buttontext="Copy",e.isBtnShow=!0,e.OperationTypeMode="Copy",e.Content_SpellProperties=[],null!=e.RulesetSpells)for(var i=0;i<e.RulesetSpells.length;i++)e.Content_SpellProperties.push(e.RulesetSpells[i].SpellProperties[0].Value.Text.value);s.create("/views/dialogs/createitems.html","dialogCopySpell",{
scope:t.SpellProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,Content_SpellProperties:e.Content_SpellProperties,SpellMode:e.OperationTypeMode}).result.then(function(t){if("cancel"!=t){for(var a=t,i=0;i<a.length;i++)a[i].ContentId=0;var l={};l.SpellProperties=a,l.RulesetId=e.RulesetId;var o=[];o.push(l),r.CopySpells(o).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){var a=[];a=t.data.PayLoad;for(var i=0;i<a.length;i++)e.RulesetSpells.push(a[i]);c.setRulesetSpells(e.RulesetSpells),e.RulesetSpells.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}$("#loading").fadeOut("slow")})},e.EditSpell=function(t,a){e.RulesetSpells=c.getRulesetSpells(),e.pageName="Editing Spell",e.buttontext="Update",e.isBtnShow=!0,e.OperationTypeMode="Edit",s.create("/views/dialogs/createspells.html","dialogCopySpell",{scope:t.SpellProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,SpellMode:e.OperationTypeMode}).result.then(function(t){if("cancel"!=t){var a=t,i={};i.SpellProperties=a,i.RulesetId=e.RulesetId;var l=[];l.push(i),r.UpdateSpells(l).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){for(var a=t.data.PayLoad,i=0;i<a.length;i++)for(var l=0;l<e.RulesetSpells.length;l++)a[i].SpellProperties[0].ContentId==e.RulesetSpells[l].SpellProperties[0].ContentId&&(e.RulesetSpells[l]=a[i]);c.setRulesetSpells(e.RulesetSpells),e.RulesetSpells.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}$("#loading").fadeOut("slow")})},e.RemoveSpell=function(t){s.confirm("Confirm Delete",'Are you sure you want to delete this Spell, "'+t.SpellProperties[0].Value.Text.value+'"',{}).result.then(function(a){"yes"==a&&(e.SpellList=[],t.RulesetId=e.RulesetId,e.SpellList.push(t),r.DeleteSpells(e.SpellList).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){for(var a=t.data.PayLoad,i=[],l=0;l<a.length;l++)for(var o=0;o<e.RulesetSpells.length;o++)a[l].SpellProperties[0].ContentId==e.RulesetSpells[o].SpellProperties[0].ContentId&&i.push(o);for(var l=0;l<i.length;l++)e.RulesetSpells.splice(i[l],1);c.setRulesetSpells(e.RulesetSpells),e.RulesetSpells.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})),$("#loading").fadeOut("slow")})},e.CreateAbility=function(){r.GetAbilitiesMetadata(e.RulesetId).then(function(t){if(200==t.data.StatusCode){e.RulesetAbilities=c.getRulesetAbilities(),e.AbilityProperties=t.data.PayLoad.RuleSetMetaData.AbilityProperties,e.Rulesetproperty=t.data.PayLoad.Rulesetproperty,e.buttontext="Create",e.tabName="Create Ability",e.isBtnShow=!1,e.OperationTypeMode="Create";var a="",i="";if(e.Content_AbilityProperties=[],null!=e.RulesetAbilities)for(var l=0;l<e.RulesetAbilities.length;l++)e.Content_AbilityProperties.push(e.RulesetAbilities[l].AbilityProperties[0].Value.Text.value);for(var l=0;l<e.Rulesetproperty.length;l++)7==e.Rulesetproperty[l].TypeId&&(a=e.Rulesetproperty[l].Units.selectedUnit);for(var o=0;o<e.AbilityProperties.length;o++)7==e.AbilityProperties[o].TypeId&&(e.AbilityProperties[o].Value.Weight.units.selectedUnit=a);for(var l=0;l<e.Rulesetproperty.length;l++)1==e.Rulesetproperty[l].TypeId&&e.Rulesetproperty[l].Name.indexOf("Volume")>-1&&(i=e.Rulesetproperty[l].Value.Text.value);for(var o=0;o<e.AbilityProperties.length;o++)13==e.AbilityProperties[o].TypeId&&(e.AbilityProperties[o].Value.Volume.units.selectedUnit=i);s.create("/views/dialogs/createabilities.html","dialogCreateAbility",{scope:e.AbilityProperties,tabName:e.tabName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,Content_AbilityProperties:e.Content_AbilityProperties,AbilityMode:e.OperationTypeMode}).result.then(function(t){if("cancel"!=t){var a=t,i={};i.AbilityProperties=a,i.RulesetID=e.RulesetId,e.AbilityList=[],e.AbilityList.push(i),r.CreateAbilities(e.AbilityList).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){var a=[];a=t.data.PayLoad;for(var i=0;i<a.length;i++)e.RulesetAbilities.push(a[i]);c.setRulesetAbilities(e.RulesetAbilities),e.RulesetAbilities.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}})}$("#loading").fadeOut("slow")})},e.CopyAbility=function(t,a){if(e.pageName="Copying Ability",e.buttontext="Copy",e.isBtnShow=!0,e.OperationTypeMode="Copy",e.Content_AbilityProperties=[],null!=e.RulesetAbilities)for(var i=0;i<e.RulesetAbilities.length;i++)e.Content_AbilityProperties.push(e.RulesetAbilities[i].AbilityProperties[0].Value.Text.value);s.create("/views/dialogs/createitems.html","dialogCopyAbility",{scope:t.AbilityProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,Content_AbilityProperties:e.Content_AbilityProperties,AbilityMode:e.OperationTypeMode}).result.then(function(t){if("cancel"!=t){for(var a=t,i=0;i<a.length;i++)a[i].ContentId=0;var l={};l.AbilityProperties=a,l.RulesetId=e.RulesetId,e.AbilityList=[],e.AbilityList.push(l),r.CopyAbilities(e.AbilityList).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){var a=[];a=t.data.PayLoad;for(var i=0;i<a.length;i++)e.RulesetAbilities.push(a[i]);c.setRulesetAbilities(e.RulesetAbilities),e.RulesetAbilities.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}$("#loading").fadeOut("slow")})},e.EditAbility=function(t,a){e.pageName="Editing Ability",e.buttontext="Update",e.isBtnShow=!0,e.OperationTypeMode="Edit",s.create("/views/dialogs/createabilities.html","dialogCopyAbility",{scope:t.AbilityProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,AbilityMode:e.OperationTypeMode}).result.then(function(t){if("cancel"!=t){var a=t,i={};i.AbilityProperties=a,i.RulesetId=e.RulesetId,e.AbilityList=[],e.AbilityList.push(i),r.UpdateAbilities(e.AbilityList).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){for(var a=t.data.PayLoad,i=0;i<a.length;i++)for(var l=0;l<e.RulesetAbilities.length;l++)a[i].AbilityProperties[0].ContentId==e.RulesetAbilities[l].AbilityProperties[0].ContentId&&(e.RulesetAbilities[l]=a[i]);c.setRulesetAbilities(e.RulesetAbilities),e.RulesetAbilities.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}$("#loading").fadeOut("slow")})},e.RemoveAbility=function(t){s.confirm("Confirm Delete",'Are you sure you want to delete this Ability, "'+t.AbilityProperties[0].Value.Text.value+'"',{}).result.then(function(a){"yes"==a&&(e.AbilityList=[],t.RulesetID=e.RulesetId,e.AbilityList.push(t),r.DeleteAbilities(e.AbilityList).then(function(t){if($("#loading").fadeOut("slow"),200==t.data.StatusCode){for(var a=t.data.PayLoad,i=[],l=0;l<a.length;l++)for(var o=0;o<e.RulesetAbilities.length;o++)a[l].AbilityProperties[0].ContentId==e.RulesetAbilities[o].AbilityProperties[0].ContentId&&i.push(o);for(var l=0;l<i.length;l++)e.RulesetAbilities.splice(i[l],1);c.setRulesetAbilities(e.RulesetAbilities),e.RulesetAbilities.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0)}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})),$("#loading").fadeOut("slow")})},e.ShowAllItemProperties=function(t){i.go("profile.RulesetItemDetails",{index:t,RuleSetId:e.RulesetId})},e.ShowAllSpellsContent=function(t){i.go("profile.RulesetSpellDetails",{index:t,RuleSetId:e.RulesetId})},e.ShowAllAbilityContent=function(t){i.go("profile.RulesetAbilityDetails",{index:t,RuleSetId:e.RulesetId})}}else if(5==i.params.action){if(e.RulesetId=parseInt(i.params.RuleSetId),e.initialClientObjectId=0,0==angular.equals({},c.getRulesetData())?e.NewRuleSet=c.getRulesetData():parseInt(b)>0&&g(parseInt(b),h),1==i.params.contentType){e.RulesetItems=c.getRulesetItems(),e.RulesetContent=e.RulesetItems[i.params.index],console.log("$scope.RulesetContent: ",e.RulesetContent);for(var C=0;C<e.RulesetContent.ItemProperties.length;C++){var I=e.RulesetContent.ItemProperties[C];0!=I.Id&&void 0!=I.Id&&""!=I.Id||(e.initialClientObjectId=e.initialClientObjectId+1,I.tile.ClientObjectId=e.initialClientObjectId,e.initialClientObjectId=e.initialClientObjectId+1)}}else if(2==i.params.contentType){e.RulesetSpells=c.getRulesetSpells(),e.RulesetContent=e.RulesetSpells[i.params.index];for(var C=0;C<e.RulesetContent.SpellProperties.length;C++){var x=e.RulesetContent.SpellProperties[C];0!=x.Id&&void 0!=x.Id&&""!=x.Id||(e.initialClientObjectId=e.initialClientObjectId+1,x.tile.ClientObjectId=e.initialClientObjectId,e.initialClientObjectId=e.initialClientObjectId+1)}}else if(3==i.params.contentType){e.RulesetAbilities=c.getRulesetAbilities(),e.RulesetContent=e.RulesetAbilities[i.params.index];for(var C=0;C<e.RulesetContent.AbilityProperties.length;C++){var T=e.RulesetContent.AbilityProperties[C];0!=T.Id&&void 0!=T.Id&&""!=T.Id||(e.initialClientObjectId=e.initialClientObjectId+1,T.tile.ClientObjectId=e.initialClientObjectId,e.initialClientObjectId=e.initialClientObjectId+1)}}e.BackContent=function(t){e.RulesetId=c.getRulesetsData(),1==t?i.go("profile.Items",{RuleSetId:e.RulesetId}):2==t?i.go("profile.Spells",{RuleSetId:e.RulesetId}):3==t&&i.go("profile.Abilities",{RuleSetId:e.RulesetId})},e.CopyItem=function(t){r.GetRulesetSpells(e.RulesetId).then(function(a){200==a.data.StatusCode&&(e.Spells=a.data.PayLoad,r.GetRulesetAbilities(e.RulesetId).then(function(a){if(200==a.data.StatusCode){if(e.Abilities=a.data.PayLoad,e.pageName="Copying Item",e.buttontext="Copy",e.IsButtonDisabled=!0,e.isBtnShow=!0,e.OperationTypeMode="Copy",e.Content_ItemProperties=[],null!=e.RulesetItems)for(var l=0;l<e.RulesetItems.length;l++)e.Content_ItemProperties.push(e.RulesetItems[l].ItemProperties[0].Value.Text.value);s.create("/views/dialogs/createitems.html","dialogCopyItem",{scope:t.ItemProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow,ItemMode:e.OperationTypeMode,Spells:e.Spells,AssociatedSpells:e.RulesetContent.AssociatedSpells,Abilities:e.Abilities,AssociatedAbilities:e.RulesetContent.AssociatedAbilities,Content_ItemProperties:e.Content_ItemProperties}).result.then(function(t){if("cancel"!=t){for(var a={ItemProperties:t.ItemProperties},l=0;l<a.ItemProperties.length;l++)a.ItemProperties[l].ContentId=0;var o={};o.ItemProperties=t.ItemProperties,o.AssociatedSpells=t.AssociatedSpells,o.AssociatedAbilities=t.AssociatedAbilities,o.RulesetId=e.RulesetId,e.ItemList=[],e.ItemList.push(o),r.CopyItems(e.ItemList).then(function(t){if(200==t.data.StatusCode){var a=[];a=t.data.PayLoad;for(var l=0;l<a.length;l++)e.RulesetItems.push(a[l]);c.setRulesetItems(e.RulesetItems),e.RulesetItems.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Items",{RuleSetId:e.RulesetId})}else 400==t.data.StatusCode&&1==t.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}})}}))})},e.EditItem=function(t){r.GetRulesetSpells(e.RulesetId).then(function(a){200==a.data.StatusCode&&(e.Spells=a.data.PayLoad,r.GetRulesetAbilities(e.RulesetId).then(function(a){200==a.data.StatusCode&&(e.Abilities=a.data.PayLoad,e.pageName="Editing Item",e.buttontext="Update",e.IsButtonDisabled=!0,e.isBtnShow=!0,e.OperationTypeMode="Edit",s.create("/views/dialogs/createitems.html","dialogCopyItem",{scope:t.ItemProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnDisabled:e.IsButtonDisabled,IsBtnShow:e.isBtnShow,ItemMode:e.OperationTypeMode,Spells:e.Spells,AssociatedSpells:e.RulesetContent.AssociatedSpells,Abilities:e.Abilities,AssociatedAbilities:e.RulesetContent.AssociatedAbilities}).result.then(function(t){if("cancel"!=t){var a={};a.ItemProperties=t.ItemProperties,a.AssociatedSpells=t.AssociatedSpells,a.AssociatedAbilities=t.AssociatedAbilities,a.RulesetId=e.RulesetId,e.ItemList=[],e.ItemList.push(a),r.UpdateItems(e.ItemList).then(function(t){if(200==t.data.StatusCode){for(var a=t.data.PayLoad,l=0;l<a.length;l++)for(var o=0;o<e.RulesetItems.length;o++)a[l].ItemProperties[0].ContentId==e.RulesetItems[o].ItemProperties[0].ContentId&&(e.RulesetItems[o]=a[l]);c.setRulesetItems(e.RulesetItems),e.RulesetItems.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Items",{RuleSetId:e.RulesetId})}})}}))}))})},e.Removeitem=function(t){s.confirm("Confirm Delete",'Are you sure you want to delete this Item, "'+t.ItemProperties[0].Value.Text.value+'"',{}).result.then(function(a){if("yes"==a){var l=[];l.push(t),r.DeleteItems(l).then(function(t){if(200==t.data.StatusCode){for(var a=t.data.PayLoad,l=[],o=0;o<a.length;o++)for(var s=0;s<e.RulesetItems.length;s++)a[o].ItemProperties[0].ContentId==e.RulesetItems[s].ItemProperties[0].ContentId&&l.push(s);for(var o=0;o<l.length;o++)e.RulesetItems.splice(l[o],1);c.setRulesetItems(e.RulesetItems),e.RulesetItems.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Items",{RuleSetId:e.RulesetId})}})}})},e.CopySpell=function(t){if(e.RulesetSpells=c.getRulesetSpells(),e.pageName="Copying Spell",e.buttontext="Copy",e.isBtnShow=!0,e.OperationTypeMode="Copy",e.Content_SpellProperties=[],null!=e.RulesetSpells)for(var a=0;a<e.RulesetSpells.length;a++)e.Content_SpellProperties.push(e.RulesetSpells[a].SpellProperties[0].Value.Text.value);s.create("/views/dialogs/createspells.html","dialogCopySpell",{scope:t.SpellProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,Content_SpellProperties:e.Content_SpellProperties,SpellMode:e.OperationTypeMode}).result.then(function(t){if("cancel"!=t){for(var a=t,l=0;l<a.length;l++)a[l].ContentId=0;var o={};o.SpellProperties=a,o.RulesetId=e.RulesetId;var s=[];s.push(o),r.CopySpells(s).then(function(t){if(200==t.data.StatusCode){var a=[];a=t.data.PayLoad;for(var l=0;l<a.length;l++)e.RulesetSpells.push(a[l]);c.setRulesetSpells(e.RulesetSpells),e.RulesetSpells.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Spells",{RuleSetId:e.RulesetId})}})}})},e.EditSpell=function(t){e.RulesetSpells=c.getRulesetSpells(),e.pageName="Editing Spell",e.buttontext="Update",e.isBtnShow=!0,e.OperationTypeMode="Edit",s.create("/views/dialogs/createitems.html","dialogCopySpell",{scope:t.SpellProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,SpellMode:e.OperationTypeMode}).result.then(function(t){if("cancel"!=t){var a=t,l={};l.SpellProperties=a,l.RulesetId=e.RulesetId;var o=[];o.push(l),r.UpdateSpells(o).then(function(t){if(200==t.data.StatusCode){for(var a=t.data.PayLoad,l=0;l<a.length;l++)for(var o=0;o<e.RulesetSpells.length;o++)a[l].SpellProperties[0].ContentId==e.RulesetSpells[o].SpellProperties[0].ContentId&&(e.RulesetSpells[o]=a[l]);c.setRulesetSpells(e.RulesetSpells),e.RulesetSpells.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Spells",{RuleSetId:e.RulesetId})}})}})},e.RemoveSpell=function(t){s.confirm("Confirm Delete",'Are you sure you want to delete this Spell, "'+t.SpellProperties[0].Value.Text.value+'"',{}).result.then(function(a){"yes"==a&&(e.SpellList=[],t.RulesetId=e.RulesetId,e.SpellList.push(t),r.DeleteSpells(e.SpellList).then(function(t){if(200==t.data.StatusCode){for(var a=t.data.PayLoad,l=[],o=0;o<a.length;o++)for(var s=0;s<e.RulesetSpells.length;s++)a[o].SpellProperties[0].ContentId==e.RulesetSpells[s].SpellProperties[0].ContentId&&l.push(s);for(var o=0;o<l.length;o++)e.RulesetSpells.splice(l[o],1);c.setRulesetSpells(e.RulesetSpells),e.RulesetSpells.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Spells",{RuleSetId:e.RulesetId})}}))})},e.CopyAbility=function(t,a){if(e.pageName="Copying Ability",e.buttontext="Copy",e.isBtnShow=!0,e.OperationTypeMode="Copy",e.Content_AbilityProperties=[],null!=e.RulesetAbilities)for(var l=0;l<e.RulesetAbilities.length;l++)e.Content_AbilityProperties.push(e.RulesetAbilities[l].AbilityProperties[0].Value.Text.value);s.create("/views/dialogs/createabilities.html","dialogCopyAbility",{scope:t.AbilityProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,Content_AbilityProperties:e.Content_AbilityProperties,AbilityMode:e.OperationTypeMode}).result.then(function(t){if("cancel"!=t){for(var a=t,l=0;l<a.length;l++)a[l].ContentId=0;var o={};o.AbilityProperties=a,o.RulesetId=e.RulesetId,e.AbilityList=[],e.AbilityList.push(o),r.CopyAbilities(e.AbilityList).then(function(t){if(200==t.data.StatusCode){var a=[];a=t.data.PayLoad;for(var l=0;l<a.length;l++)e.RulesetAbilities.push(a[l]);c.setRulesetAbilities(e.RulesetAbilities),e.RulesetAbilities.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Abilities",{RuleSetId:e.RulesetId})}})}})},e.EditAbility=function(t,a){e.pageName="Editing Ability",e.buttontext="Update",e.isBtnShow=!0,e.OperationTypeMode="Edit",s.create("/views/dialogs/createitems.html","dialogCopyAbility",{scope:t.AbilityProperties,tabName:e.pageName,btntext:e.buttontext,IsBtnShow:e.isBtnShow,AbilityMode:e.OperationTypeMode}).result.then(function(t){if("cancel"!=t){var a=t,l={};l.AbilityProperties=a,l.RulesetId=e.RulesetId,e.AbilityList=[],e.AbilityList.push(l),r.UpdateAbilities(e.AbilityList).then(function(t){if(200==t.data.StatusCode){for(var a=t.data.PayLoad,l=0;l<a.length;l++)for(var o=0;o<e.RulesetAbilities.length;o++)a[l].AbilityProperties[0].ContentId==e.RulesetAbilities[o].AbilityProperties[0].ContentId&&(e.RulesetAbilities[o]=a[l]);c.setRulesetAbilities(e.RulesetAbilities),e.RulesetAbilities.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Abilities",{RuleSetId:e.RulesetId})}})}})},e.RemoveAbility=function(t){s.confirm("Confirm Delete",'Are you sure you want to delete this Ability, "'+t.AbilityProperties[0].Value.Text.value+'"',{}).result.then(function(a){"yes"==a&&(e.AbilityList=[],t.RulesetID=e.RulesetId,e.AbilityList.push(t),r.DeleteAbilities(e.AbilityList).then(function(t){if(200==t.data.StatusCode){for(var a=t.data.PayLoad,l=[],o=0;o<a.length;o++)for(var s=0;s<e.RulesetAbilities.length;s++)a[o].AbilityProperties[0].ContentId==e.RulesetAbilities[s].AbilityProperties[0].ContentId&&l.push(s);for(var o=0;o<l.length;o++)e.RulesetAbilities.splice(l[o],1);c.setRulesetAbilities(e.RulesetAbilities),e.RulesetAbilities.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Abilities",{RuleSetId:e.RulesetId})}}))})},e.ShowTiles=function(t){r.GetTilesMetadataForRuleset().then(function(a){if(200==a.data.StatusCode){e.TileTypes=a.data.PayLoad.RuleSetMetaData.TileTypes,e.ItemPropertyForTile=a.data.PayLoad.RuleSetMetaData.ItemProperty,e.Tile=a.data.PayLoad.RuleSetMetaData.Tile;for(var l=0;l<e.TileTypes.length;l++)"Attribute"==e.TileTypes[l].TileType&&e.TileTypes.splice(2,1);s.create("/views/dialogs/tile-type-picker.html","dialogTileTypes",{scope:e.TileTypes}).result.then(function(a){if("Note"==a.TileType){e.Tile.TileTypeId=a.TileId,e.Tile.TileTypeName=a.TileType,e.Tile.Value=a.Value;var l=s.create("/views/dialogs/tile-editor-1.html","NoteTile",{scope:e.Tile});l.result.then(function(a){if("cancel"!=a){a.Height="5",a.Width="5",a.X="0",a.Y="0",a.IsSync=!1,a.SyncDate=Date.now();var i=e.ItemPropertyForTile;i.tile=a,t.push(i)}e.ClientScopeChange=!0})}else if("Counter"==a.TileType){e.Tile.TileTypeId=a.TileId,e.Tile.TileTypeName=a.TileType,e.Tile.Value=a.Value;var l=s.create("/views/dialogs/tile-editor-2.html","NoteTile",{scope:e.Tile});l.result.then(function(a){if("cancel"!=a){a.Height="5",a.Width="5",a.X="0",a.Y="0",a.IsSync=!1,a.SyncDate=Date.now();var i=e.ItemPropertyForTile;i.tile=a,t.push(i)}e.ClientScopeChange=!0})}else if("Link"==a.TileType){if(e.RuleSetContentForLinkExecuteTile={},0==angular.equals({},c.getRulesetItems()))e.RuleSetContentForLinkExecuteTile.Items=c.getRulesetItems();else{var o=r.GetRulesetItems(parseInt(i.params.RuleSetId));o.then(function(t){200==t.data.StatusCode?(e.RuleSetContentForLinkExecuteTile.RulesetItems=t.data.PayLoad,c.setRulesetItems(e.RuleSetContentForLinkExecuteTile.Items),$("#loading").fadeOut("slow")):400==t.data.StatusCode&&1==t.ShowToUser&&($("#loading").fadeOut("slow"),d.pop("error",t.data.ErrorMessage))})}if(0==angular.equals({},c.getRulesetSpells()))e.RuleSetContentForLinkExecuteTile.Spells=c.getRulesetSpells();else{var n=r.GetRulesetSpells(parseInt(i.params.RuleSetId));n.then(function(t){200==t.data.StatusCode?(e.RuleSetContentForLinkExecuteTile.Spells=t.data.PayLoad,c.setRulesetSpells(e.RuleSetContentForLinkExecuteTile.Spells),$("#loading").fadeOut("slow")):400==t.data.StatusCode&&1==t.ShowToUser&&($("#loading").fadeOut("slow"),d.pop("error",t.data.ErrorMessage))})}if(0==angular.equals({},c.getRulesetAbilities()))e.RuleSetContentForLinkExecuteTile.Abilities=c.getRulesetAbilities();else{var u=r.GetRulesetAbilities(parseInt(i.params.RuleSetId));u.then(function(t){200==t.data.StatusCode?(e.RuleSetContentForLinkExecuteTile.Abilities=t.data.PayLoad,c.setRulesetAbilities(e.RuleSetContentForLinkExecuteTile.Abilities),$("#loading").fadeOut("slow")):400==t.data.StatusCode&&1==t.ShowToUser&&($("#loading").fadeOut("slow"),d.pop("error",t.data.ErrorMessage))})}e.Tile.TileTypeId=a.TileId,e.Tile.TileTypeName=a.TileType,e.Tile.Value=a.Value;var l=s.create("/views/dialogs/tile-editor-4.html","NoteTile",{scope:e.Tile,RuleSetContentForLinkExecuteTile:e.RuleSetContentForLinkExecuteTile});l.result.then(function(a){if("cancel"!=a){a.Height="5",a.Width="5",a.X="0",a.Y="0",a.IsSync=!1,a.SyncDate=Date.now();var i=e.ItemPropertyForTile;i.tile=a,t.push(i)}e.ClientScopeChange=!0})}else if("Execute"==a.TileType){if(e.RuleSetContentForLinkExecuteTile={},0==angular.equals({},c.getRulesetItems()))e.RuleSetContentForLinkExecuteTile.Items=c.getRulesetItems();else{var o=r.GetRulesetItems(parseInt(i.params.RuleSetId));o.then(function(t){200==t.data.StatusCode?(e.RuleSetContentForLinkExecuteTile.RulesetItems=t.data.PayLoad,c.setRulesetItems(e.RuleSetContentForLinkExecuteTile.Items),$("#loading").fadeOut("slow")):400==t.data.StatusCode&&1==t.ShowToUser&&($("#loading").fadeOut("slow"),d.pop("error",t.data.ErrorMessage))})}if(0==angular.equals({},c.getRulesetSpells()))e.RuleSetContentForLinkExecuteTile.Spells=c.getRulesetSpells();else{var n=r.GetRulesetSpells(parseInt(i.params.RuleSetId));n.then(function(t){200==t.data.StatusCode?(e.RuleSetContentForLinkExecuteTile.Spells=t.data.PayLoad,c.setRulesetSpells(e.RuleSetContentForLinkExecuteTile.Spells),$("#loading").fadeOut("slow")):400==t.data.StatusCode&&1==t.ShowToUser&&($("#loading").fadeOut("slow"),d.pop("error",t.data.ErrorMessage))})}if(0==angular.equals({},c.getRulesetAbilities()))e.RuleSetContentForLinkExecuteTile.Abilities=c.getRulesetAbilities();else{var u=r.GetRulesetAbilities(parseInt(i.params.RuleSetId));u.then(function(t){200==t.data.StatusCode?(e.RuleSetContentForLinkExecuteTile.Abilities=t.data.PayLoad,c.setRulesetAbilities(e.RuleSetContentForLinkExecuteTile.Abilities),$("#loading").fadeOut("slow")):400==t.data.StatusCode&&1==t.ShowToUser&&($("#loading").fadeOut("slow"),d.pop("error",t.data.ErrorMessage))})}e.Tile.TileTypeId=a.TileId,e.Tile.TileTypeName=a.TileType,e.Tile.Value=a.Value;var l=s.create("/views/dialogs/tile-editor-5.html","NoteTile",{scope:e.Tile,RuleSetContentForLinkExecuteTile:e.RuleSetContentForLinkExecuteTile});l.result.then(function(a){if("cancel"!=a){a.Height="5",a.Width="5",a.X="0",a.Y="0",a.IsSync=!1,a.SyncDate=Date.now();var i=e.ItemPropertyForTile;i.tile=a,t.push(i)}e.ClientScopeChange=!0})}else if("Command"==a.TileType){e.Tile.TileTypeId=a.TileId,e.Tile.TileTypeName=a.TileType,e.Tile.Value=a.Value;var l=s.create("/views/dialogs/tile-editor-6.html","NoteTile",{scope:e.Tile});l.result.then(function(a){if("cancel"!=a){a.Height="5",a.Width="5",a.X="0",a.Y="0",a.IsSync=!1,a.SyncDate=Date.now();var i=e.ItemPropertyForTile;i.tile=a,t.push(i)}e.ClientScopeChange=!0})}else if("Image"==a.TileType){e.Tile.TileTypeId=a.TileId,e.Tile.TileTypeName=a.TileType,e.Tile.Value=a.Value;var l=s.create("/views/dialogs/tile-editor-7.html","NoteTile",{scope:e.Tile});l.result.then(function(a){if("cancel"!=a){a.Height="5",a.Width="5",a.X="0",a.Y="0",a.IsSync=!1,a.SyncDate=Date.now();var i=e.ItemPropertyForTile;i.tile=a,t.push(i)}e.ClientScopeChange=!0})}})}})},e.SaveTilesForRuleset=function(t,a){if(1==a){var i={};i.ItemProperties=t,i.SpellProperties=null,i.AbilityProperties=null,r.SaveRulesetTiles(i).then(function(t){200==t.data.StatusCode&&(e.RulesetContent=t.data.PayLoad.Result,d.pop("success","Tile Added Successfully"))})}else if(2==a){var i={};i.ItemProperties=null,i.SpellProperties=t,i.AbilityProperties=null,r.SaveRulesetTiles(i).then(function(t){200==t.data.StatusCode&&(e.RulesetContent=t.data.PayLoad.Result,d.pop("success","Tile Added Successfully"))})}else if(3==a){var i={};i.ItemProperties=null,i.SpellProperties=null,i.AbilityProperties=t,r.SaveRulesetTiles(i).then(function(t){200==t.data.StatusCode&&(e.RulesetContent=t.data.PayLoad.Result,d.pop("success","Tile Added Successfully"))})}},e.stackOptions={height:150,width:400,cellHeight:30,minWidth:1,pixelWidth:35,verticalMargin:5,alwaysShowResizeHandle:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),resizable:{handles:"e, se, s, sw, w"},draggable:{refreshPositions:!0,handle:".grid-stack-item-content"}},e.onDragStart=function(a,i){t(function(){e.state.tileDragging=!0})},e.onDragStop=function(a,i){t(function(){e.state.tileDragging=!1})},e.state={tilesEditing:!1,tileDragging:!1,tileDeleteId:null},e.moveWidget=function(){e.widgets[0].x=1,e.widgets[0].width=2,e.widgets[0].height=2},e.widgets=[{x:0,y:0,width:1,height:1},{x:0,y:0,width:3,height:1}],e.onChange=function(e,t){u.log("onChange event: "+e+" items:"+t)},e.onResizeStop=function(e,t){u.log("onResizeStop event: "+e+" ui:"+t)},e.onItemAdded=function(e){u.log("onItemAdded item: "+e)},e.onItemRemoved=function(e){u.log("onItemRemoved item: "+e)},e.ShowAssociatedSpells=function(e){i.go("profile.RulesetSpellDetails",{index:e})},e.ShowAllSpellsContent=function(e){i.go("profile.RulesetSpellDetails",{index:e})},e.ShowAssociatedSpells=function(e){i.go("profile.RulesetSpellDetails",{index:e})}}e.onDeleteDrop=function(t,a){var i=(GridStackUI.Utils.getNodeData(a.helper),a.helper[0].dataset.gsId),l=-1;if(void 0!=e.RulesetContent.ItemProperties&&null!=e.RulesetContent.ItemProperties&&""!=e.RulesetContent.ItemProperties){for(var o=0;o<e.RulesetContent.ItemProperties.length;o++){var s=e.RulesetContent.ItemProperties[o];0!=s.Id&&void 0!=s.Id&&""!=s.Id||i==e.RulesetContent.ItemProperties[o].tile.ClientObjectId&&(l=o)}0==e.RulesetContent.ItemProperties[l].tile.TileId?e.RulesetContent.ItemProperties.splice(l,1):p.deleteTile(e.RulesetContent.ItemProperties[l].tile).then(function(t){200==t.data.StatusCode?e.RulesetContent.ItemProperties.splice(l,1):400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}else if(void 0!=e.RulesetContent.SpellProperties&&null!=e.RulesetContent.SpellProperties&&""!=e.RulesetContent.SpellProperties){for(var o=0;o<e.RulesetContent.SpellProperties.length;o++){var n=e.RulesetContent.SpellProperties[o];0!=n.Id&&void 0!=n.Id&&""!=n.Id||i==e.RulesetContent.SpellProperties[o].tile.ClientObjectId&&(l=o)}0==e.RulesetContent.SpellProperties[l].tile.TileId?e.RulesetContent.SpellProperties.splice(l,1):p.deleteTile(e.RulesetContent.SpellProperties[l].tile).then(function(t){200==t.data.StatusCode?e.RulesetContent.SpellProperties.splice(l,1):400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}else if(void 0!=e.RulesetContent.AbilityProperties&&null!=e.RulesetContent.AbilityProperties&&""!=e.RulesetContent.AbilityProperties){for(var o=0;o<e.RulesetContent.AbilityProperties.length;o++){var r=e.RulesetContent.AbilityProperties[o];0!=r.Id&&void 0!=r.Id&&""!=r.Id||i==e.RulesetContent.AbilityProperties[o].tile.ClientObjectId&&(l=o)}0==e.RulesetContent.AbilityProperties[l].tile.TileId?e.RulesetContent.AbilityProperties.splice(l,1):p.deleteTile(e.RulesetContent.AbilityProperties[l].tile).then(function(t){200==t.data.StatusCode?e.RulesetContent.AbilityProperties.splice(l,1):400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}},e.onDeleteDropCharacterItem=function(t,a){var i=(GridStackUI.Utils.getNodeData(a.helper),a.helper[0].dataset.gsId);i&&p.deleteTile(parseInt(i)).then(function(t){if(200==t.data.StatusCode){e.RuleSetItems=c.getRulesetItems(),e.RuleSetSpells=c.getRulesetSpells(),e.RuleSetAbilities=c.getRulesetAbilities();for(var a=0;a<e.RuleSetItems.length;a++)for(var l=e.RuleSetItems[a],o=l.ItemProperties,s=0;s<o.length;s++)if(o[s],null==o[s].ContentTypeId){var n=[];0!=s&&n.push(o[s]),o[s].tile.TileId==parseInt(i)&&o.splice(s,1)}for(var a=0;a<e.RuleSetSpells.length;a++)for(var r=e.RuleSetSpells[a],u=r.SpellProperties,s=0;s<u.length;s++)if(u[s],null==u[s].ContentTypeId){var n=[];0!=s&&n.push(u[s]),u[s].tile.TileId==parseInt(i)&&u.splice(s,1)}for(var a=0;a<e.RuleSetAbilities.length;a++)for(var p=e.RuleSetAbilities[a],m=p.AbilityProperties,s=0;s<m.length;s++)if(m[s],null==m[s].ContentTypeId){var n=[];0!=s&&n.push(u[s]),m[s].tile.TileId==parseInt(i)&&m.splice(s,1)}d.pop("success","Tile deleted Successfully.")}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})},e.OpenBingSearch=function(){e.buttontext="Ok",e.pageName="Bing Image Search",s.create("/views/search/BingSearch.html","dialogGeneralSettings",{btntext:e.buttontext,tabname:e.pageName,BingSearch:e.BingSearch}).result.then(function(e){})},e.RulesetGeneralSettings=function(){r.GetGeneralSettingsMetadata().then(function(t){200==t.data.StatusCode?(e.GeneralSettingsMetadata=t.data.PayLoad.Rulesetproperty,e.buttontext="Next",e.pageName="New Rule Set",s.create("/views/dialogs/rulesetgeneralsettings.html","dialogGeneralSettings",{OpenBingSearch:e.OpenBingSearch,OpenFile:e.OpenFile,scope:e.GeneralSettingsMetadata,btntext:e.buttontext,tabname:e.pageName,BingSearch:e.BingSearch}).result.then(function(e){"cancel"!=e&&(m(),i.go("profile.AddNewRuleSet"),d.pop("success","Rule Set created successfully"),$("#loading").fadeOut("slow"))})):400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)})},e.ManageRuleset=function(t){console.log("Val: ",t);var a=r.GetRuleSetGeneralSettings(t);a.then(function(l){console.log("editsettings: ",a),200==l.data.StatusCode&&(e.GeneralSettings=l.data.PayLoad,e.buttontext="Update",e.pageName="Edit Rule Set",e.Disabled="Edit",e.DisableName=!0,e.RulesetId=t,c.setRulesetsData(e.RulesetId),s.create("/views/dialogs/manageruleset.html","dialogManageRuleset",{scope:e.GeneralSettings}).result.then(function(t,a){if("General"==t)$("#loading").css("display","block"),e.RulesetId=c.getRulesetsData(),e.EditGeneralSettings(e.RulesetId);else if("Corestat"==t){$("#loading").css("display","block"),e.RulesetId=c.getRulesetsData();var l=r.GetRulesetCorestats(e.RulesetId);l.then(function(t){$("#loading").fadeOut("slow"),200==t.data.StatusCode&&(e.Corestats=t.data.PayLoad,r.GetTypes().then(function(t){if(200==t.data.StatusCode){e.Types=t.data.PayLoad,c.setcorestat(e.Corestats);for(var a=0;a<e.Types.length;a++)for(var l=0;l<e.Corestats.length;l++)e.Types[a].TypeId==e.Corestats[l].TypeId&&(e.Corestats[l].TypeName=e.Types[a].Name);e.Corestats.length>0?(e.lists=!0,e.list=!1):(e.lists=!1,e.list=!0),i.go("profile.Corestats",{RuleSetId:e.RulesetId})}else 400==t.data.StatusCode&&1==t.data.ShowToUser&&d.pop("error",t.data.ErrorMessage)}))})}else if("Items"==t){$("#loading").css("display","block"),e.RulesetId=c.getRulesetsData()
;var o=r.GetRulesetItems(e.RulesetId);o.then(function(t){$("#loading").fadeOut("slow"),200==t.data.StatusCode?(e.RulesetItems=t.data.PayLoad,c.setRulesetItems(e.RulesetItems),e.RulesetItems.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Items",{RuleSetId:e.RulesetId})):400==t.data.StatusCode&&1==t.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}else if("Spells"==t){$("#loading").css("display","block"),e.RulesetId=c.getRulesetsData();var s=r.GetRulesetSpells(e.RulesetId);s.then(function(t){$("#loading").fadeOut("slow"),200==t.data.StatusCode?(e.RulesetSpells=t.data.PayLoad,c.setRulesetSpells(e.RulesetSpells),e.RulesetSpells.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Spells",{RuleSetId:e.RulesetId})):400==t.data.StatusCode&&1==t.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}else if("Abilities"==t){$("#loading").css("display","block"),e.RulesetId=c.getRulesetsData();var n=r.GetRulesetAbilities(e.RulesetId);n.then(function(t){$("#loading").fadeOut("slow"),200==t.data.StatusCode?(e.RulesetAbilities=t.data.PayLoad,c.setRulesetAbilities(e.RulesetAbilities),e.RulesetAbilities.length>0?(e.list=!0,e.grid=!0,e.Itemlist=!1):(e.list=!1,e.grid=!1,e.Itemlist=!0),i.go("profile.Abilities",{RuleSetId:e.RulesetId})):400==t.data.StatusCode&&1==t.ShowToUser&&d.pop("error",t.data.ErrorMessage)})}$("#loading").fadeOut("slow")}))})},e.showContextMenu=function(e){var t=angular.element(e.target).parents(".card").find(".card-actions");t.hasClass("hide")?(t.removeClass("hide"),t.addClass("show")):(t.removeClass("show"),t.addClass("hide"))},e.hideConteextMenu=function(e){var t=angular.element(e.target).parents(".card").find(".card-actions");t.removeClass("show"),t.addClass("hide")},e.EditGeneralSettings=function(t){r.GetRuleSetGeneralSettings(t).then(function(t){200==t.data.StatusCode&&(e.GeneralSettings=t.data.PayLoad,e.buttontext="Update",e.pageName="Edit Rule Set",e.Disabled="Edit",e.DisableName=!0,s.create("/views/dialogs/rulesetgeneralsettings.html","dialogGeneralSettings",{openManageRuleset:e.ManageRuleset,scope:e.GeneralSettings,btntext:e.buttontext,tabname:e.pageName,IsenableBtn:e.IsButtonDisabled,CoreStatsInGrid:e.CoreStatsInGrid,CoreStatsNameInGrid:e.CoreStatsNameInGrid,CoreStatMode:e.OperationTypeMode,Disabled:e.Disabled,DisableName:e.DisableName,BingSearch:e.BingSearch}).result.then(function(t){if("cancel"!=t){for(var a=-1,i=0;i<e.RuleSets.length;i++)e.RuleSets[i].Id==t[0].RulesetId&&(a=i);a>-1&&(e.RuleSets[a].Name=t[0].RulesetName,e.RuleSets[a].Rulesetproperty=t),d.pop("success","Ruleset Updated Successfully")}}))})},e.CopyRuleSet=function(t){t.Rulesetproperty[0].RulesetId=t.Id,e.buttontext="Copy",e.pageName="Copy Ruleset",e.Disabled="Copy",e.DisableName=!1,s.create("/views/dialogs/rulesetgeneralsettings.html","dialogGeneralSettings",{scope:t.Rulesetproperty,btntext:e.buttontext,tabname:e.pageName,IsenableBtn:e.IsButtonDisabled,CoreStatsInGrid:e.CoreStatsInGrid,CoreStatsNameInGrid:e.CoreStatsNameInGrid,CoreStatMode:e.OperationTypeMode,Disabled:e.Disabled,DisableName:e.DisableName}).result.then(function(e){"cancel"!=e&&(m(),d.pop("success",e))})},e.GridViewTrigger=function(e){var t=angular.element(e.target);t.parent().children().removeClass("selected"),t.addClass("selected"),angular.element(".card-list").removeClass("view-list")},e.ListViewTrigger=function(e){var t=angular.element(e.target);t.parent().children().removeClass("selected"),t.addClass("selected"),angular.element(".card-list").addClass("view-list")},e.showContextMenu=function(e){var t=angular.element(e.target).parents(".card").find(".card-actions");t.hasClass("hide")?(t.removeClass("hide"),t.addClass("show")):(t.removeClass("show"),t.addClass("hide"))},e.hideConteextMenu=function(e){var t=angular.element(e.target).parents(".card").find(".card-actions");t.removeClass("show"),t.addClass("hide")}}])}(),function(){"use strict";angular.module("rpgsmith-controllers").controller("tilePageController",["$scope","$q","$state","$timeout","$log","dialogs","navService","rulesetDataShareService","layoutService","tabService","tileService",function(e,t,a,i,l,o,s,n,r,c,d){function u(){c.GetTabs(e.NewLayout[0].LayoutId).then(function(t){200==t.data.StatusCode?e.LayoutTabs=t.data.PayLoad:400==t.data.StatusCode&&1==t.data.ShowToUser&&alert(t.data.ErrorMessage)})}e.navService=s,e.NewLayout=n.getlayoutmetadata(),u();var p={id:"nav.layouts.open",name:"Switch Layout",icon:"fa-fw fa-random",menus:[]};e.menuHamburger={opened:!1,menus:s.getCommonHamburger([{name:"Layouts",header:!0,icon:"fa-fw"},p,{id:"view.new",name:"New Layout",action:function(){h()},icon:"fa-fw fa-file-o"},{id:"view.rename",name:"Rename Layout",action:function(){layoutRename()},icon:"fa-fw fa-i-cursor"},{id:"view.delete",name:"Delete Layout",action:function(){layoutDelete()},icon:"fa-fw fa-trash-o"},{id:"view.copy",name:"Copy Layout",action:function(){layoutCopy()},icon:"fa-fw fa-files-o"},{name:"Tiles",header:!0,icon:"fa-fw"},{id:"tiles.edit",name:"Edit Tiles",action:function(){e.state.tilesEditing=!e.state.tilesEditing},icon:"fa-fw fa-pencil-square-o"},{name:"Pages",header:!0,icon:"fa-fw"},{id:"tab.new",name:"New Page",action:function(){f()},icon:"fa-fw fa-file-o"},{id:"tab.rename",name:"Rename Page",action:function(){tabRename()},icon:"fa-fw fa-i-cursor"},{id:"tab.delete",name:"Delete Page",action:function(){v()},icon:"fa-fw fa-trash-o"},{id:"tab.copy",name:"Copy Page",action:function(){y()},icon:"fa-fw fa-files-o"},{id:"tab.reorder",name:"Reorder Pages",action:function(){S()},icon:"fa-fw fa-sort"}]),menuClick:function(t){e.menuHamburger.opened=!1}},e.menuCharacter={opened:!1,menus:s.getCommonCharacterNav([]),menuClick:function(t){e.menuCharacter.opened=!1}},s.registerNav("hamburger",e.menuHamburger),s.registerNav("character",e.menuCharacter),e.state={tilesEditing:!1,tileDragging:!1,tileDeleteId:null},e.stackOptions={height:0,width:100,cellHeight:30,minWidth:1,pixelWidth:35,verticalMargin:5,alwaysShowResizeHandle:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),resizable:{handles:"e, se, s, sw, w"},draggable:{refreshPositions:!0,handle:".grid-stack-item-content"}},e.tabSet={api:{},index:-1},e.tilePickerApi={messageId:null,beforeSelect:function(){},onClose:function(){}};var m=function(){e.navService.updateBody(!0,e.LayoutTabs.length),e.tabSet.api.doRecalculate(),e.tabSet.api.scrollTabIntoView()},g=function(){return e.tabSet.index>=0?LayoutTabs[e.tabSet.index]:null},b=function(e){(e||[]).sort(function(e,t){return e.order-t.order})},h=function(){o.create("/views/dialogs/tab-rename.html","dialogTabRename",{name:""},{size:"sm"}).result.then(function(t){e.LayoutViewModel={Name:t,CharacterProfileId:1},r.createLayout(e.LayoutViewModel).then(function(e){200===e.data.status.StatusCode?alert("Success"):alert("Failed")}),dataService.character.layouts.push(layout),dataService.saveChanges().then(function(){layoutLoad(layout.id)})})},v=function(){var t=g();t&&o.confirm("Confirm Delete",'Are you sure you want to delete "'+t.name+'" and all its content?',{size:"sm"}).result.then(function(a){dataService.deleteTab(t),e.tabSet.index--,-1===e.tabSet.index&&e.LayoutTabs.length&&(e.tabSet.index=0),dataService.saveChanges(),i(function(){e.tabSet.api.scrollTabIntoView()})})},f=function(){o.create("/views/dialogs/tab-rename.html","dialogTabRename",{name:null},{size:"sm"}).result.then(function(t){i(function(){var a=dataService.createTab({name:t,order:e.LayoutTabs.length});e.LayoutTabs.push(a),e.state.tilesEditing=!0,i(function(){e.tabSet.index=a.order,m()})})})};e.AddNewtab=function(){var t=e.NewLayout[0].LayoutMetaData.Tab;t.LayoutId=e.LayoutTabs[0].LayoutId,o.create("/views/dialogs/tab-rename.html","dialogTabRename",{scope:t}).result.then(function(e){c.AddTab(e).then(function(e){200==e.data.StatusCode?u():400==e.data.StatusCode&&1==e.data.ShowToUser&&alert(e.data.ErrorMessage)})})},e.ShowTiles=function(){o.create("/views/dialogs/showalltiles.html","dialogTileTypes",{}).result.then(function(e){})};var y=function(){o.create("/views/dialogs/tab-rename.html","addNewCoreStat",{name:"Add New Core Stat"},{size:"sm"}).result.then(function(e){})},S=function(){var t=g(),a=e.tabSet.index;o.create("/views/dialogs/tab-reorder.html","dialogTabReorder",{items:e.NewLayout.TabList,sorter:b},{size:"sm",copy:!1}).result.then(function(l){i(function(){l.forEach(function(e,i){e.order=i,e===t&&(a=i)}),b(e.NewLayout.TabList),e.tabSet.index=a,m()})})};e.getTileClass=function(t){var a=[];return e.state.tilesEditing&&a.push(t.__randomShake),t.id===e.state.tileDeleteId&&a.push("over-delete"),a.join(" ")},e.getAutoPosition=function(e){return e.id,!1},e.tileSelect=function(t){e.tilePickerApi.selecting&&e.tilePickerApi.endSelect(t)},e.tileEdit=function(){e.tilePickerApi.beginSelect(function(e){})}()()}])}(),function(){"use strict";angular.module("rpgsmith-directives").directive("rpgsmithrulesettype",["$compile","dialogs",function(e,t){var a=function(e,t){var a="";switch(e){case 1:a=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.input.$invalid"></span><input type="text" placeholder="Enter {{info.Name}}" class="form-control" ng-model="info.Value.Text.value" name="input" />':'<div class="form-group"><input type="text" ng-model="info.Value.Text.value" class="form-control" placeholder="Enter {{info.Name}} value"></div>';break;case 2:a=templateUrl2;break;case 3:a=templateUrl3;break;case 4:a=templateUrl4;break;case 5:a=templateUrl5;break;case 6:a=templateUrl6;break;case 7:a=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.input.$invalid"></span><div class="form-group"><input type="text"  ng-model="info.Units.selectedUnit" placeholder="Enter {{info.Name}}" class="form-control"/></div></div></ng-form>':'<div class="form-group"><input type="text"  ng-model="info.Units.selectedUnit" placeholder="Enter {{info.Name}}" class="form-control"/></div>';break;case 8:a=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.input.$invalid"></span><div class="form-group input-image"><div class="input-image-control-wrapper"><div class="input-image-note icon icon-upload"><span ng-model="info.Value.Image.image">Click here to upload.</span><small>(320 x 320 px)</small></div><input type="file"  class="form-control-file"  onchange="angular.element(this).scope().ItemImageUpload(this)" accept="x-png,gif,jpeg"></div></div>':'<div class="form-group input-image"><div class="input-image-control-wrapper"><div class="input-image-note icon icon-upload"><span ng-model="info.Value.Image.image">Click here to upload.</span><small>(320 x 320 px)</small></div><input type="file"  class="form-control-file"  onchange="angular.element(this).scope().ItemImageUpload(this)" accept="x-png,gif,jpeg"></div></div>';break;case 12:a=templateUrl12;break;case 13:a=templateUrl13;break;case 14:a=templateUrl14;break;case 15:a=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.input.$invalid"></span><span class="input-group-btn"><button type="button" title="" data-toggle="tooltip" class="btn icon icon-dice icon-rsi btn-simple-primary" data-original-title="Show Dice" ng-click="defaultDiceSelect()"></button></span><input type="text" ng-model="info.Value.DefaultDice.value" class="form-control" placeholder="Select dice">':'<span class="input-group-btn"><button type="button" title="" data-toggle="tooltip" class="btn icon icon-dice icon-rsi btn-simple-primary" data-original-title="Show Dice" ng-click="defaultDiceSelect()"></button></span><input type="text" ng-model="info.Value.DefaultDice.value" class="form-control" placeholder="Select dice">'}return a};return{restrict:"E",replace:!0,link:function(i,l,o){var s=angular.copy(i.info);l.html(a(s.TypeId,s.IsMandatory)),e(l.contents())(i),i.defaultDiceSelect=function(){t.create("/views/dialogs/defaultdiceselection.html","dialogDefaultDiceSelect",{mode:1}).result.then(function(e){i.info.Value.DefaultDice.value=e})},i.getThumbNail=function(){if(i.file)return $scope.file;var e=i.item;return e.id&&e.portrait?"/characterdata/"+e.id+"/"+e.portrait:null},i.ItemImageUpload=function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){$("#GeneralStngImage").attr("Src",e.target.result).width(120).height(120),i.info.Value.Image.image=e.target.result},t.readAsDataURL(e.files[0])}}},scope:{info:"="}}}])}(),function(){"use strict";angular.module("rpgsmith-directives").directive("rpgsmithtype",["$compile","dialogs",function(e,t){return{restrict:"E",replace:!0,link:function(a,i,l){var o=angular.copy(a.info),s=angular.copy(l.mode);void 0!=s&&("'Edit'"==s&&1==o.TypeId&&"Name"==o.Name&&(a.DisableField=!0),"'Copy'"==s&&(1==o.TypeId&&"Name"==o.Name?a.info.Value.Text.value="":a.DisableField=!0),"'Create'"==s&&1==o.TypeId&&"Name"==o.Name&&(a.DisableField=!1));var n=function(e,t){for(var a=e,i=[],l=0;l<e.length;l++){"["==e[l]||e[l];var o="",s=e.substring(l+1,e.length);if("["==e[l])for(var o="",n=0;n<s.length;n++){if("]"==s[n]){i.push(o);break}o+=s[n],l+=1}}a=a.replace(/\[/g,""),a=a.replace(/\]/g,"");for(var l=0;l<i.length;l++)for(var n=0;n<t.length;n++)i[l]!=t[n].Name&&i[l]!=t[n].CorestatName||(i[l]!=t[n].Name&&i[l]!=t[n].CorestatName||7!=t[n].TypeId?i[l]!=t[n].Name&&i[l]!=t[n].CorestatName||14!=t[n].TypeId?i[l]!=t[n].Name&&i[l]!=t[n].CorestatName||5!=t[n].TypeId?i[l]!=t[n].Name&&i[l]!=t[n].CorestatName||6!=t[n].TypeId||(a=a.replace(i[l],"fullscope["+n+"].Value.CurrentAndMaxValue.CurrentValue")):a=a.replace(i[l],"fullscope["+n+"].Value.ValueAndSubValue.value"):a=a.replace(i[l],"fullscope["+n+"].Value.Number.value"):a=a.replace(i[l],"fullscope["+n+"].Value.Weight.value"));return a};i.html(function(e,t){var i="";switch(e){case 1:i=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.itemname.$invalid"></span><input type="text" ng-disabled="DisableField" placeholder="Enter {{info.Name}}" name="itemname" id="itemname" class="form-control text-line" ng-model="info.Value.Text.value" name="input" ng-class="{red: form.input.$dirty && form.input.$error.required}" ng-required="info" > </div></ng-form>':' <input type="text" ng-disabled="DisableField" placeholder="Enter {{info.Name}}" class="form-control" ng-model="info.Value.Text.value" />';break;case 2:i=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.input.$invalid"></span><select class="form-control" ng-options="choice.ChoiceName for choice in info.Value.Choices.choices" ng-model="info.Value.Choices.selectedchoice"><option value="">--Select--</option></select></div></ng-form>':'<ul class="input-switch-items"><li class="form-check" ng-repeat="choice in info.Value.Choices.choices"><label class="form-check-label"><input class="form-check-input" ng-model="info.Value.Choices.selectedchoice" type="radio" ng-disabled="DisableField" name="newItemRarity" checked="checked"><span>{{choice.ChoiceName}}</span></label></li></ul>';break;case 3:i=1==t?'<div class="form-group"><span ng-show="form.input.$invalid"></span><div class="" ><input type="number" ng-disabled="DisableField" min=0 class="form-control inline" name="input" ng-model="info.Value.Volume.lenghtvalue" placeholder="Enter {{info.Name}}"/><input type="number" min=0 class="form-control inline" ng-model="info.Value.Volume.heightvalue" placeholder="Enter {{info.Name}}" ng-disabled="DisableField"/><input type="number" min=0 class="form-control inline" ng-model="info.Value.Volume.depthvalue" placeholder="Depth" ng-disabled="DisableField" /><input type="text" placeholder="Enter {{info.Name}}" ng-model="info.Value.Volume.units.selectedUnit" class="form-control inline_old" ng-disabled="DisableField" readonly/></div>':'<div class="btn-group" data-toggle=""><label class="btn btn-primary"><input type= "radio" ng-model="info.Value.OnOrOff.value"" value= "On" />On</label > <label class="btn btn-default"><input type="radio" ng-model="info.Value.OnOrOff.value" value="Off" ng-disabled="DisableField" />Off</label></div >';break;case 4:i=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.input.$invalid"></span><div class="btn-group" data-toggle=""><label class="btn btn-primary"><input type= "radio" name="input" ng-model="info.Value.YesOrNo.value"" value= "Yes" ng-disabled="DisableField" />Yes</label > <label class="btn btn-default"><input type="radio" name="input"  ng-model="info.Value.YesOrNo.value" value="No" ng-disabled="DisableField"/>No</label></div >':'<ul class="input-switch-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" ng-model="info.Value.YesOrNo.value" value="Yes" ng-disabled="DisableField"><span>Yes</span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="radio" ng-model="info.Value.YesOrNo.value" value="No" ng-disabled="DisableField"><span>No</span></label></li></ul>';break;case 5:i=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.input.$invalid"></span><input type="number" min=0 class="form-control inline" name="input" ng-model="info.Value.ValueAndSubValue.value" placeholder="Enter {{info.Name}}" ng-disabled="DisableField"/>&nbsp;&nbsp;<input type="number" min=0 class="form-control inline" ng-model="info.Value.ValueAndSubValue.subvalue" placeholder="Enter {{info.Name}}" />':'<input type="number" min=0 class="form-control inline" ng-model="info.Value.ValueAndSubValue.value" placeholder="Enter {{info.Name}}" />&nbsp;&nbsp;<input type="number" min=0 class="form-control inline" ng-model="info.Value.ValueAndSubValue.subvalue" placeholder="Enter {{info.Name}}" ng-disabled="DisableField" />';break;case 6:i=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.input.$invalid"></span><input type="number" min=0 name="input" ng-model="info.Value.CurrentAndMaxValue.CurrentValue" class="form-control inline" placeholder="Enter {{info.Name}}" ng-disabled="DisableField" />&nbsp;&nbsp;<input class="form-control inline" type="number" min=0 ng-model="info.Value.CurrentAndMaxValue.MaxValue" placeholder="Enter {{info.Name}}" />':'<input type="number" min=0 ng-model="info.Value.CurrentAndMaxValue.CurrentValue" class="form-control inline" placeholder="Enter {{info.Name}}" />&nbsp;&nbsp;<input class="form-control inline" type="number" min=0 ng-model="info.Value.CurrentAndMaxValue.MaxValue" placeholder="Enter {{info.Name}}" ng-disabled="DisableField" />';break;case 7:i=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.weight.$invalid"></span><input type="number" name="weight" id="weight" min=0 class="form-control inline" ng-disabled="DisableField" ng-model="info.Value.Weight.value" placeholder="Enter {{info.Name}}"  ng-disabled="DisableField" /> <input type="text" placeholder="Enter {{info.Name}}" ng-model="info.Value.Weight.units.selectedUnit" class="form-control inline_old" readonly/></div></ng-form>':'<input type="number" min=0 class="form-control inline" ng-model="info.Value.Weight.value" placeholder="Enter {{info.Name}}"  ng-disabled="DisableField"  /> <input type="text"  ng-model="info.Value.Weight.units.selectedUnit " ng-disabled="DisableField" placeholder="Enter {{info.Name}}" class="form-control inline_old" readonly/>';break;case 8:i=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.input.$invalid"></span><div class="pull-left edit-character-portrait"><img id="itemImage" ng-src="{{info.Value.Image.image}}" name="input" ng-model="info.Value.Image.image" alt="" ngf-thumbnail="getThumbNail()" ngf-resize="{width: 120, height: 120}" ng-disabled="DisableField" /></div><div class="profile_image"><span></span><input type="file" rpgsmithtype="info.Value.Image.image" ng-class="{red: form.input.$dirty && form.input.$error.required}" ng-required="info" onchange="angular.element(this).scope().ItemImageUpload(this)" accept="x-png,gif,jpeg" ng-disabled="DisableField" /> </div>':'<div class="text edit-character-portrait"><img id="itemImage" ng-src="{{info.Value.Image.image}}" ng-model="info.Value.Image.image" alt="Character Image" ngf-thumbnail="getThumbNail()" ngf-resize="{width: 120, height: 120}" ng-disabled="DisableField" /></div><div class="profile_image"><span>Choose Portrait</span><input type="file" onchange="angular.element(this).scope().ItemImageUpload(this)" accept="x-png,gif,jpeg" ng-disabled="DisableField" /> </div>';break;case 12:i=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.input.$invalid"></span><input type="number" min=0 class="form-control inline" name="input" ng-model="info.Value.Height.value" placeholder="Enter {{info.Name}}" ng-disabled="DisableField"/> <select class="form-control inline" ng-options="unit for unit in info.Value.Height.units.availableUnits" ng-model="info.Value.Height.units.selectedUnit" ><option value="">--Select--</option></select>':'<input type="number" min=0 class="form-control inline" ng-model="info.Value.Height.value" placeholder="Enter {{info.Name}}" ng-disabled="DisableField"/> <select class="form-control inline" ng-options="unit for unit in info.Value.Height.units.availableUnits" ng-model="info.Value.Height.units.selectedUnit" ><option value="">--Select--</option></select>';break;case 13:i=1==t?templateUrl13_withvalidation:'<div class="form-group"><div class="form-row"><div class="col"><input type="number" min=0 class="form-control" ng-model="info.Value.Volume.lenghtvalue" placeholder="Enter {{info.Name}}" ng-disabled="DisableField"></div><div class="col"><input type="number" min=0 class="form-control" ng-model="info.Value.Volume.heightvalue" placeholder="Enter {{info.Name}}" ng-disabled="DisableField" ></div><div class="col"><input type="number" min=0 class="form-control" ng-model="info.Value.Volume.depthvalue" placeholder="Depth {{info.Name}}" ng-disabled="DisableField" ></div><div class="col"><input type="text" placeholder="Enter {{info.Name}}" ng-model="info.Value.Volume.units.selectedUnit" class="form-control" ng-disabled="DisableField" readonly></div></div></div>';break;case 14:i=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.quantityinput.$invalid"></span><input type="number" min=0 placeholder="Enter {{info.Name}}" name="quantityinput" class="select_dropdown form-control inline_width" ng-model="info.Value.Number.value" name="input"  ng-required="info" ng-disabled="DisableField"/> </div></ng-form>':'<input type="number" min=0 ng-model="info.Value.Number.value" placeholder="Enter {{info.Name}}" class="form-control inline_width" ng-disabled="DisableField" />';break;case 15:i=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.input.$invalid"></span><input type="text" ng-disabled="DisableField" placeholder="Enter {{info.Name}}" class="form-control" ng-model="info.Value.DefaultDice.value" /><button type="button" title= "" data-toggle="tooltip" class="select_dice btn icon icon-dice icon-rsi btn-simple-primary" data-original-title="Show Dice" ng-click="defaultDiceSelect()" ng-disabled="DisableField"></button>':'<input type="text" ng-disabled="DisableField" placeholder="Enter {{info.Name}}" class="form-control" ng-model="info.Value.DefaultDice.value" /><button type="button" title= "" data-toggle="tooltip" class="select_dice btn icon icon-dice icon-rsi btn-simple-primary" data-original-title="Show Dice" ng-click="defaultDiceSelect()" ng-disabled="DisableField"></button>';break;case 16:var l="{{"+n(a.info.Value.Calculation.formulae,a.fullscope)+"}}",o="{{"+n(a.info.Value.Calculation.formulae,a.fullscope)+"}}";i=1==t?o:l;break;case 19:i=1==t?'<ng-form name="form"><div class="form-group"><span ng-show="form.input.$invalid"></span><textarea placeholder="Enter {{info.Name}}" ng-disabled="DisableField" class="form-control text-line" ng-model="info.Value.Text.value" name="input" ng-class="{red: form.input.$dirty && form.input.$error.required}" ng-required="info" ></textarea> </div></ng-form>':' <textarea placeholder="Enter {{info.Name}}" ng-disabled="DisableField" class="form-control" ng-model="info.Value.Text.value"></textarea>'}return i}(o.TypeId,o.IsMandatory)),e(i.contents())(a),a.getThumbNail=function(){if(a.file)return $scope.file;var e=a.item;return e.id&&e.portrait?"/characterdata/"+e.id+"/"+e.portrait:null},a.defaultDiceSelect=function(){t.create("/views/dialogs/defaultdiceselection.html","dialogDefaultDiceSelect",{mode:1}).result.then(function(e){a.info.Value.DefaultDice.value=e})},a.ItemImageUpload=function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){$("#itemImage").attr("Src",e.target.result).width(120).height(120),a.info.Value.Image.image=e.target.result},t.readAsDataURL(e.files[0])}}},scope:{info:"=",fullscope:"=",mode:"="}}}])}(),function(){"use strict";angular.module("rpgsmith-directives").directive("rpgsmithcontenttype",["$compile","dialogs","characterService",function(e,t,a){var i=function(e,t){var a="";switch(e){case!1:a='<button type="button" class="btn btn-accent btn_align" ng-model="" name="input">{{info.Name}}</button>';break;case!0:a='<button type="button" class="btn btn-accent btn_align" ng-model="" name="input" ng-click="UpdateEquip()">{{info.Name}}</button>'}return a};return{restrict:"E",replace:!0,link:function(t,l,o){var s=angular.copy(t.info);3!=s.TypeId&&4!=s.TypeId||1==s.IsAction&&("Yes"==s.Value.YesOrNo.value||"False"==s.Value.YesOrNo.value||""==s.Value.YesOrNo.value||void 0===s.Value.YesOrNo.value||null===s.Value.YesOrNo.value?(l.html(i(s.IsAction)),e(l.contents())(t),s.Name="UnEquipped"):"No"!=s.Value.YesOrNo.value&&"False"!=s.Value.YesOrNo.value&&""!=s.Value.YesOrNo.value&&void 0!==s.Value.YesOrNo.value&&null!==s.Value.YesOrNo.value||(l.html(i(s.IsAction)),e(l.contents())(t),s.Name="Equipped")),t.UpdateEquip=function(){void 0!=t.info.CharacterItemValueId?"Yes"==t.info.Value.YesOrNo.value||"False"==s.Value.YesOrNo.value||""==s.Value.YesOrNo.value||void 0===s.Value.YesOrNo.value||null===s.Value.YesOrNo.value?(t.info.Value.YesOrNo.value="No",a.UpdateItemEquipContent(t.info).then(function(a){200==a.data.StatusCode&&1==s.IsAction&&(t.info.Name="Equipped",l.html(i(s.IsAction)),e(l.contents())(t))})):"No"!=t.info.Value.YesOrNo.value&&"False"!=s.Value.YesOrNo.value&&""!=s.Value.YesOrNo.value&&void 0!==s.Value.YesOrNo.value&&null!==s.Value.YesOrNo.value||(t.info.Value.YesOrNo.value="Yes",a.UpdateItemEquipContent(t.info).then(function(a){200==a.data.StatusCode&&1==s.IsAction&&(t.info.Name="UnEquipped",l.html(i(s.IsAction)),e(l.contents())(t))})):void 0!=t.info.CharacterSpellValueId?"Yes"==t.info.Value.YesOrNo.value||"False"==s.Value.YesOrNo.value||""==s.Value.YesOrNo.value||void 0===s.Value.YesOrNo.value||null===s.Value.YesOrNo.value?(t.info.Value.YesOrNo.value="No",a.UpdateSpellMemorizeContent(t.info).then(function(a){200==a.data.StatusCode&&1==s.IsAction&&(t.info.Name="Memorized",l.html(i(s.IsAction)),e(l.contents())(t))})):"No"!=t.info.Value.YesOrNo.value&&"False"!=s.Value.YesOrNo.value&&""!=s.Value.YesOrNo.value&&void 0!==s.Value.YesOrNo.value&&null!==s.Value.YesOrNo.value||(t.info.Value.YesOrNo.value="Yes",a.UpdateSpellMemorizeContent(t.info).then(function(a){200==a.data.StatusCode&&1==s.IsAction&&(t.info.Name="UnMemorized",l.html(i(s.IsAction)),e(l.contents())(t))})):void 0!=t.info.CharacterAbilityValueId&&("Yes"==t.info.Value.YesOrNo.value||"False"==s.Value.YesOrNo.value||""==s.Value.YesOrNo.value||void 0===s.Value.YesOrNo.value||null===s.Value.YesOrNo.value?(t.info.Value.YesOrNo.value="No",a.UpdateAbilityEnabledContent(t.info).then(function(a){200==a.data.StatusCode&&1==s.IsAction&&(t.info.Name="Enabled",l.html(i(s.IsAction)),e(l.contents())(t))})):"No"!=t.info.Value.YesOrNo.value&&"False"!=s.Value.YesOrNo.value&&""!=s.Value.YesOrNo.value&&void 0!==s.Value.YesOrNo.value&&null!==s.Value.YesOrNo.value||(t.info.Value.YesOrNo.value="Yes",a.UpdateAbilityEnabledContent(t.info).then(function(a){200==a.data.StatusCode&&1==s.IsAction&&(t.info.Name="Disabled",l.html(i(s.IsAction)),e(l.contents())(t))})))}},scope:{info:"="}}}])}(),angular.module("rpgsmith-templates").run(["$templateCache",function(e){e.put("/views/EmailTemplates/EmailConfirmationSuccess.html",'<!DOCTYPE html><html><body><div><img src="http://demo.rpgsmith.com/images/logo.png"></div><div style="box-shadow: 1px 1px 1px 1px #ecbaa0;padding:10px;margin-top:20px"><h1 style="margin-bottom:20px;margin-top:20px;color:#d25d23">Success!!</h1><p>Email Confirmed Successfully! Now you can login to your account.</p><p></p><button type="button" style="width: 150px;display: inline-block;padding: 6px 12px;margin-bottom: 0;font-size: 14px;font-weight: 400;line-height: 1.42857143;text-align: center;white-space: nowrap;vertical-align: middle;-ms-touch-action: manipulation;touch-action: manipulation;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;background-image: none;border: 1px solid transparent;border-radius: 4px;background-color: #d35e3f"><a href="www.google.com" style="text-decoration:none;color:#fff">Click here to login</a></button></div></body></html>'),
e.put("/views/EmailTemplates/EmailConfirmationTemplate.html",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>RPGSmith Newsletter</title></head><body style="margin: 0;padding: 0;width:100%;color: #000000;background-color:#EBEBEB;font-family: Roboto, HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><style>@import url(http://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900);</style><div style="max-width: 5in;margin: 0 auto;background-color:#ffffff;margin-top: 1.5em"><table style="padding: 0 20px"><tr><td align="center" style="padding-top: 1em"><a href="https://www.facebook.com/RPG-Smith-1625592264372389" title="RPGSmith"><img width="252" height="127" title="RPGSmith" alt="RPGSmith" src="https://lh3.googleusercontent.com/QEifSn90PEjjSZ-5d3yhXoVp6ixxojV6Jo3P_lKUvvBTqxFsWmLjHllW0HrLji6hM5lgEYv3cCuWE_dDo3hzyevV_RyQZf4fA0JRHr7Y6bV0oX9Mjc3O5ZlLKzkF9sfnjkpM_YmNmLJ2SX2MmjwteXop2spQACXtsQgSOM0Sc0K94F-JFC2NcSTHwqTerHPgG-T2PSG2qINGcSdgn2m7AMkq1tSqKds5x1Ovic9auo7NkNomKTgw2WvCsoR96g9TkJRqi-viX38qbJkl3RJySoqycBoSULmZ8WaIb3gMcBM4CJFEHiVZx9a1qfpxibE_iMARM4PdP8GOiGZkqLt4NNI2rs7ojnvpXIagmS0OuUyZtXt8yw0egJWadSM_K3N_vDFE_fPt4I0RU7CDgPlD-UgjvuZ7om7c-448MOtbR4lVqFyGKyYnxxruPwtr966PpXQ3NpQpHmhfMbqSnseYJ512_aeg1ohlKpUhknsSS2WBRhTcfBo14t1f1VEyNOnd8bPx0jEUQhx4euqH8raDO6W7MxOR666SWFAlLiNJdA=w702-h353-no"></a></td></tr><tr><td align="center"><div style="margin-bottom: 1em;font-size: 1.4em;font-weight: 500" mc:edit="rem_title">Account Verification</div></td></tr><tr><td align="left"><div style="margin-bottom: 1.5em;font-weight: 300" mc:edit="rem_notes"><center>Thank you for Signing Up.<br><br>Please confirm your email address by clicking the button below.</center></div></td></tr><tr><td align="center"><table width="100%"><tr><a href="{#ConfirmationLink}" type="button" style="width: 150px;display: inline-block;padding: 6px 12px;margin-bottom: 0;font-size: 14px;font-weight: 400;line-height: 1.42857143;text-align: center;white-space: nowrap;vertical-align: middle;-ms-touch-action: manipulation;touch-action: manipulation;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;background-image: none;border: 1px solid transparent;border-radius: 4px;background-color: #d35e3f;text-decoration:none;color:#fff">Confirm</a><br><br></tr></table></td></tr><tr><td align="center" style="font-weight: 300;font-size: 0.8em;padding-bottom: 1em">Copyright &#169;2018 <a href="https://www.facebook.com/RPG-Smith-1625592264372389" title="RPGSmith" style="text-decoration: none;color: #34AADC"><span class="RPGSmith" style="color: #D2602A;font-weight: 700">RPG<b style="color: #000000;font-weight: 700">&#8226;Smith</b></span></a>, LLC All rights reserved.<br><div style="padding-top: 1.0em"><a href="https://www.facebook.com/RPG-Smith-1625592264372389" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/facebook.png" border="0" alt="Facebook"></a><a href="https://twitter.com/RpgSmith" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/twitter.png" border="0" alt="Twitter"></a><a href="https://plus.google.com/u/2/communities/101062066525142446219" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/google_plusone_share.png" border="0" alt="Google+"></a></div></td></tr></table></div></body></html>'),e.put("/views/EmailTemplates/ForgotPasswordEmailTemplate.html",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>RPGSmith Newsletter</title></head><body style="margin: 0;padding: 0;width:100%;color: #000000;background-color:#EBEBEB;font-family: Roboto, HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><style>@import url(http://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900)</style><div style="max-width: 5in;margin: 0 auto;background-color:#ffffff;margin-top: 1.5em"><table width="100%" style="padding: 0 20px"><tr><td align="center" style="padding-top: 1em"><a href="https://www.facebook.com/RPG-Smith-1625592264372389" title="RPGSmith"><img width="252" height="127" title="RPGSmith" alt="RPGSmith" src="https://lh3.googleusercontent.com/QEifSn90PEjjSZ-5d3yhXoVp6ixxojV6Jo3P_lKUvvBTqxFsWmLjHllW0HrLji6hM5lgEYv3cCuWE_dDo3hzyevV_RyQZf4fA0JRHr7Y6bV0oX9Mjc3O5ZlLKzkF9sfnjkpM_YmNmLJ2SX2MmjwteXop2spQACXtsQgSOM0Sc0K94F-JFC2NcSTHwqTerHPgG-T2PSG2qINGcSdgn2m7AMkq1tSqKds5x1Ovic9auo7NkNomKTgw2WvCsoR96g9TkJRqi-viX38qbJkl3RJySoqycBoSULmZ8WaIb3gMcBM4CJFEHiVZx9a1qfpxibE_iMARM4PdP8GOiGZkqLt4NNI2rs7ojnvpXIagmS0OuUyZtXt8yw0egJWadSM_K3N_vDFE_fPt4I0RU7CDgPlD-UgjvuZ7om7c-448MOtbR4lVqFyGKyYnxxruPwtr966PpXQ3NpQpHmhfMbqSnseYJ512_aeg1ohlKpUhknsSS2WBRhTcfBo14t1f1VEyNOnd8bPx0jEUQhx4euqH8raDO6W7MxOR666SWFAlLiNJdA=w702-h353-no"></a></td></tr><tr><td align="center"><div style="margin-bottom: 1em;font-size: 1.4em;font-weight: 500" mc:edit="rem_title">Reset Password</div></td></tr><tr><td align="left"><div style="margin-bottom: 1.5em;font-weight: 300" mc:edit="rem_notes"><center>Click the link below to reset your RPGSmith account password.<br><br>If you did not generate this email you may want to change your password anyways.</center></div></td></tr><tr><td align="center"><table width="100%"><tr><a href="{#ForgotLink}" style="width: 150px;display: inline-block;padding: 6px 12px;margin-bottom: 0;font-size: 14px;font-weight: 400;line-height: 1.42857143;text-align: center;white-space: nowrap;vertical-align: middle;-ms-touch-action: manipulation;touch-action: manipulation;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;background-image: none;border: 1px solid transparent;border-radius: 4px;background-color: #d35e3f;color:#fff;text-decoration:none">Change Password</a><br><br></tr></table></td></tr><tr><td align="center" style="font-weight: 300;font-size: 0.8em;padding-bottom: 1em">Copyright &#169;2018 <a href="https://www.facebook.com/RPG-Smith-1625592264372389" title="RPGSmith" style="text-decoration: none;color: #34AADC"><span class="RPGSmith" style="color: #D2602A;font-weight: 700">RPG<b style="color: #000000;font-weight: 700">&#8226;Smith</b></span></a>, LLC All rights reserved.<br><div style="padding-top: 1.0em"><a href="https://www.facebook.com/RPG-Smith-1625592264372389" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/facebook.png" border="0" alt="Facebook"></a><a href="https://twitter.com/RpgSmith" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/twitter.png" border="0" alt="Twitter"></a><a href="https://plus.google.com/u/2/communities/101062066525142446219" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/google_plusone_share.png" border="0" alt="Google+"></a></div></td></tr></table></div></body></html>'),e.put("/views/EmailTemplates/RegisterEmailConfirmation.html",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>RPGSmith Register</title></head><body style="margin: 0;padding: 0;width:100%;color: #000000;background-color:#EBEBEB;font-family: Roboto, HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><style>@import url(http://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900)</style><div style="max-width: 5in;margin: 0 auto;background-color:#ffffff;margin-top: 1.5em"><table width="100%" style="padding: 0 20px"><tr><td align="center" style="padding-top: 1em"><a href="https://www.facebook.com/RPG-Smith-1625592264372389" title="RPGSmith"><img width="252" height="127" title="RPGSmith" alt="RPGSmith" src="https://lh3.googleusercontent.com/QEifSn90PEjjSZ-5d3yhXoVp6ixxojV6Jo3P_lKUvvBTqxFsWmLjHllW0HrLji6hM5lgEYv3cCuWE_dDo3hzyevV_RyQZf4fA0JRHr7Y6bV0oX9Mjc3O5ZlLKzkF9sfnjkpM_YmNmLJ2SX2MmjwteXop2spQACXtsQgSOM0Sc0K94F-JFC2NcSTHwqTerHPgG-T2PSG2qINGcSdgn2m7AMkq1tSqKds5x1Ovic9auo7NkNomKTgw2WvCsoR96g9TkJRqi-viX38qbJkl3RJySoqycBoSULmZ8WaIb3gMcBM4CJFEHiVZx9a1qfpxibE_iMARM4PdP8GOiGZkqLt4NNI2rs7ojnvpXIagmS0OuUyZtXt8yw0egJWadSM_K3N_vDFE_fPt4I0RU7CDgPlD-UgjvuZ7om7c-448MOtbR4lVqFyGKyYnxxruPwtr966PpXQ3NpQpHmhfMbqSnseYJ512_aeg1ohlKpUhknsSS2WBRhTcfBo14t1f1VEyNOnd8bPx0jEUQhx4euqH8raDO6W7MxOR666SWFAlLiNJdA=w702-h353-no"></a></td></tr><tr><td align="center"><div style="margin-bottom: 1em;font-size: 1.4em;font-weight: 500" mc:edit="rem_title">Register Successfully Confirmation</div></td></tr><tr><td align="left"><div style="margin-bottom: 1.5em;font-weight: 300" mc:edit="rem_notes"><center>An Email has been sent to <strong>testing@gmail.com</strong><br><br>Please Check your Inbox and Confirm your Account.</center></div></td></tr><tr><td align="center"><table width="100%"><tr><button type="button" style="width: 150px;display: inline-block;padding: 6px 12px;margin-bottom: 0;font-size: 14px;font-weight: 400;line-height: 1.42857143;text-align: center;white-space: nowrap;vertical-align: middle;-ms-touch-action: manipulation;touch-action: manipulation;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;background-image: none;border: 1px solid transparent;border-radius: 4px;background-color: #d35e3f"><a href="www.google.com" style="text-decoration:none;color:#fff">What\'s This For?</a></button><br><br></tr></table></td></tr><tr><td align="center" style="font-weight: 300;font-size: 0.8em;padding-bottom: 1em">Copyright &#169;2018 <a href="https://www.facebook.com/RPG-Smith-1625592264372389" title="RPGSmith" style="text-decoration: none;color: #34AADC"><span class="RPGSmith" style="color: #D2602A;font-weight: 700">RPG<b style="color: #000000;font-weight: 700">&#8226;Smith</b></span></a>, LLC All rights reserved.<br><div style="padding-top: 1.0em"><a href="https://www.facebook.com/RPG-Smith-1625592264372389" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/facebook.png" border="0" alt="Facebook"></a><a href="https://twitter.com/RpgSmith" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/twitter.png" border="0" alt="Twitter"></a><a href="https://plus.google.com/u/2/communities/101062066525142446219" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/google_plusone_share.png" border="0" alt="Google+"></a></div></td></tr></table></div></body></html>'),e.put("/views/EmailTemplates/RegisterSuccess.html",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>RPGSmith Register Confirmation</title></head><body style="margin: 0;padding: 0;width:100%;color: #000000;background-color:#EBEBEB;font-family: Roboto, HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><style>@import url(http://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900);</style><div style="max-width: 5in;margin: 0 auto;background-color:#ffffff;margin-top: 1.5em"><table width="100%" style="padding: 0 20px"><tr><td align="center" style="padding-top: 1em"><a href="https://www.facebook.com/RPG-Smith-1625592264372389" title="RPGSmith"><img width="252" height="127" title="RPGSmith" alt="RPGSmith" src="https://lh3.googleusercontent.com/QEifSn90PEjjSZ-5d3yhXoVp6ixxojV6Jo3P_lKUvvBTqxFsWmLjHllW0HrLji6hM5lgEYv3cCuWE_dDo3hzyevV_RyQZf4fA0JRHr7Y6bV0oX9Mjc3O5ZlLKzkF9sfnjkpM_YmNmLJ2SX2MmjwteXop2spQACXtsQgSOM0Sc0K94F-JFC2NcSTHwqTerHPgG-T2PSG2qINGcSdgn2m7AMkq1tSqKds5x1Ovic9auo7NkNomKTgw2WvCsoR96g9TkJRqi-viX38qbJkl3RJySoqycBoSULmZ8WaIb3gMcBM4CJFEHiVZx9a1qfpxibE_iMARM4PdP8GOiGZkqLt4NNI2rs7ojnvpXIagmS0OuUyZtXt8yw0egJWadSM_K3N_vDFE_fPt4I0RU7CDgPlD-UgjvuZ7om7c-448MOtbR4lVqFyGKyYnxxruPwtr966PpXQ3NpQpHmhfMbqSnseYJ512_aeg1ohlKpUhknsSS2WBRhTcfBo14t1f1VEyNOnd8bPx0jEUQhx4euqH8raDO6W7MxOR666SWFAlLiNJdA=w702-h353-no"></a></td></tr><tr><td align="center"><div style="margin-bottom: 1em;font-size: 1.4em;font-weight: 500" mc:edit="rem_title">Email Confirmation</div></td></tr><tr><td align="left"><div style="margin-bottom: 1.5em;font-weight: 300" mc:edit="rem_notes">An Email has been sent to <strong>{{data.email}}</strong><br><br>Please Check your Inbox and Confirm your Account.</div></td></tr><tr><td align="center"><table width="100%"><tr><button type="button" style="width: 150px;display: inline-block;padding: 6px 12px;margin-bottom: 0;font-size: 14px;font-weight: 400;line-height: 1.42857143;text-align: center;white-space: nowrap;vertical-align: middle;-ms-touch-action: manipulation;touch-action: manipulation;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;background-image: none;border: 1px solid transparent;border-radius: 4px;background-color: #d35e3f"><a href="www.google.com" style="text-decoration:none;color:#fff">What\'s This For?</a></button></tr></table></td></tr><tr><td align="center" style="font-weight: 300;font-size: 0.8em;padding-bottom: 1em">Copyright &#169;2018 <a href="https://www.facebook.com/RPG-Smith-1625592264372389" title="RPGSmith" style="text-decoration: none;color: #34AADC"><span class="RPGSmith" style="color: #D2602A;font-weight: 700">RPG<b style="color: #000000;font-weight: 700">&#8226;Smith</b></span></a>, LLC All rights reserved.<br><div style="padding-top: 1.0em"><a href="https://www.facebook.com/RPG-Smith-1625592264372389" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/facebook.png" border="0" alt="Facebook"></a><a href="https://twitter.com/RpgSmith" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/twitter.png" border="0" alt="Twitter"></a><a href="https://plus.google.com/u/2/communities/101062066525142446219" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/google_plusone_share.png" border="0" alt="Google+"></a></div></td></tr></table></div></body></html>'),e.put("/views/EmailTemplates/ResetPasswordSuccess.html",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>RPGSmith Newsletter</title></head><body style="margin: 0;padding: 0;width:100%;color: #000000;background-color:#EBEBEB;font-family: Roboto, HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif"><style>@import url(http://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900)</style><div style="max-width: 5in;margin: 0 auto;background-color:#ffffff;margin-top: 1.5em"><table width="100%" style="padding: 0 20px"><tr><td align="center" style="padding-top: 1em"><a href="https://www.facebook.com/RPG-Smith-1625592264372389" title="RPGSmith"><img width="252" height="127" title="RPGSmith" alt="RPGSmith" src="https://lh3.googleusercontent.com/QEifSn90PEjjSZ-5d3yhXoVp6ixxojV6Jo3P_lKUvvBTqxFsWmLjHllW0HrLji6hM5lgEYv3cCuWE_dDo3hzyevV_RyQZf4fA0JRHr7Y6bV0oX9Mjc3O5ZlLKzkF9sfnjkpM_YmNmLJ2SX2MmjwteXop2spQACXtsQgSOM0Sc0K94F-JFC2NcSTHwqTerHPgG-T2PSG2qINGcSdgn2m7AMkq1tSqKds5x1Ovic9auo7NkNomKTgw2WvCsoR96g9TkJRqi-viX38qbJkl3RJySoqycBoSULmZ8WaIb3gMcBM4CJFEHiVZx9a1qfpxibE_iMARM4PdP8GOiGZkqLt4NNI2rs7ojnvpXIagmS0OuUyZtXt8yw0egJWadSM_K3N_vDFE_fPt4I0RU7CDgPlD-UgjvuZ7om7c-448MOtbR4lVqFyGKyYnxxruPwtr966PpXQ3NpQpHmhfMbqSnseYJ512_aeg1ohlKpUhknsSS2WBRhTcfBo14t1f1VEyNOnd8bPx0jEUQhx4euqH8raDO6W7MxOR666SWFAlLiNJdA=w702-h353-no"></a></td></tr><tr><td align="center"><div style="margin-bottom: 1em;font-size: 1.4em;font-weight: 500" mc:edit="rem_title">Success!!</div></td></tr><tr><td align="left"><div style="margin-bottom: 1.5em;font-weight: 300" mc:edit="rem_notes"><center>Your password has been changed.<br><br>You can now login to RPGSmith with your new password.</center></div></td></tr><tr><td align="center"><table width="100%"><tr><button type="button" style="width: 150px;display: inline-block;padding: 6px 12px;margin-bottom: 0;font-size: 14px;font-weight: 400;line-height: 1.42857143;text-align: center;white-space: nowrap;vertical-align: middle;-ms-touch-action: manipulation;touch-action: manipulation;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;background-image: none;border: 1px solid transparent;border-radius: 4px;background-color: #d35e3f"><a href="http://app.rpgsmith.com" style="text-decoration:none;color:#fff">Launch RPGSmith</a></button><br><br><br></tr></table></td></tr><tr><td align="center" style="font-weight: 300;font-size: 0.8em;padding-bottom: 1em">Copyright &#169;2018 <a href="https://www.facebook.com/RPG-Smith-1625592264372389" title="RPGSmith" style="text-decoration: none;color: #34AADC"><span class="RPGSmith" style="color: #D2602A;font-weight: 700">RPG<b style="color: #000000;font-weight: 700">&#8226;Smith</b></span></a>, LLC All rights reserved.<br><div style="padding-top: 1.0em"><a href="https://www.facebook.com/RPG-Smith-1625592264372389" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/facebook.png" border="0" alt="Facebook"></a><a href="https://twitter.com/RpgSmith" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/twitter.png" border="0" alt="Twitter"></a><a href="https://plus.google.com/u/2/communities/101062066525142446219" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/google_plusone_share.png" border="0" alt="Google+"></a></div></td></tr></table></div></body></html>'),e.put("/views/dialogs/addcorestatvalues.html",'<div class="popup-manage-core-stats"><div class="modal-header"><h5 class="modal-title" id="manageCoreStatsPopupTitle">MANAGE CHARARCTER STATS (<span>{{characters.CorestatValues.length}}</span>)</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close" ng-click="cancel()"></button></div><div class="modal-body"><form><table class="table table-hover"><thead class="thead-dark"><tr><td>Title</td><td>TYPE</td>\x3c!--<td>ALLOW PLAYER UPDATE</td>\r\n                        <td>SHOW TO OTHER PLAYERS</td>--\x3e</tr></thead><tbody><tr ng-repeat="value in characters.CorestatValues"><td>{{value.Name}}</td><td><rpgsmithtype info="value" fullscope="characters.CorestatValues" class="col-md-8" style="padding-left:0"></rpgsmithtype></td></tr></tbody></table></form></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-accent" ng-click="SaveCorestatValues()">Save</button>\x3c!--<button type="button" class="btn btn-primary" ><i class="{{characters.CorestatValuesIcon}}" style="color:white;"></i>{{characters.CorestatValuesBtnText}}</button>--\x3e</div></div>'),e.put("/views/dialogs/adddicename.html",'\x3c!--https://github.com/m-e-conroy/angular-dialog-service--\x3e<div class="modal-header"><h4 class="modal-title"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Dice Name</h4></div><div class="modal-body"><ng-form name="dlg" novalidate role="form"><div class="form-group pb-10"><label class="control-label col-md-4">Name</label><div class="col-md-8 mb-20"><input type="hidden" value="Result.CharacterProfileId" ng-model="Result.CharacterProfileId"> <input name="dicename" type="text" ng-model="Name" class="form-control" required> <span style="color:red" ng-show="dlg.dicename.$dirty && dlg.dicename.$invalid"><span ng-show="dlg.dicename.$error.required">Dice name is required.</span></span></div></div>\x3c!--<ng-form name="dlg" novalidate role="form">\r\n            <div class="form-group input-group-lg" ng-class="{true: \'has-error\'}[dlg.name.$dirty && dlg.name.$invalid]">\r\n                <span class="help-block">Enter a name</span>\r\n                <input type="text" class="form-control" name="name" id="name" ng-model="name" ng-keyup="hitEnter($event)" required>\r\n            </div>\r\n        </ng-form>--\x3e</ng-form></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-primary" ng-click="save()" ng-disabled="(dlg.$dirty && dlg.$invalid) || dlg.$pristine">Save</button></div>'),e.put("/views/dialogs/addnewcorestat.html",'<div class="modal-header"><h4 class="modal-title"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span>{{tabName}}</span></h4><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close" ng-click="cancel()"></button></div><div class="modal-body"><ng-form name="dlg" role="form"><div class="form-group">\x3c!--<label class="control-label col-md-4">\r\n                Name\r\n            </label>\r\n            <div class="col-md-8 mb-20">\r\n                <input name="corestatname" type="text" ng-model="CoreStatProperties.Name" class="form-control" required />\r\n                <span style="color:red" ng-show="dlg.corestatname.$dirty && dlg.corestatname.$invalid">\r\n                    <span ng-show="dlg.corestatname.$error.required">Core Stat name is required.</span>\r\n                </span>\r\n            </div>--\x3e<label class="control-label"><span class="help-block">Name <span class="errorColor">*</span></span></label><div class=""><input name="corestatname" placeholder="Enter Name" ng-disabled="DisableNameField" type="text" ng-model="CoreStatProperties.Name" class="form-control" ng-class="{red: dlg.corestatname.$dirty && dlg.corestatname.$error.required}" required></div></div>\x3c!--<div class="" ng-show="ShowChoices">\r\n            <input type="text" ng-model="CoreStatProperties.ChoiceName" />\r\n            <div class="form-group pb-10" ng-repeat="choice in CoreStatProperties.Value.Choices.choices">\r\n                <label class="control-label col-md-4">Choice</label>\r\n                <div class="col-md-8" style="margin-bottom:6px;">\r\n                    <input type="text" class="form-control" ng-model="choice.ChoiceName" />\r\n                </div>\r\n            </div>\r\n            <div class="addchoice">\r\n                <button ng-click="addChoice()" class="btn btn-primary">Add Choice</button>\r\n            </div>\r\n\r\n\r\n\r\n        </div>--\x3e\x3c!--<div ng-show="ShowValueandSubvalue" class="form-group mr-20 col-md-12">\r\n            <div class="" style="width: 20%;float:left;">\r\n                <label class="radio-inline">\r\n                    <input type="radio" ng-model="ValSub" name="value" value="Value" ng-click="AddValueSubvalue(\'Value\')" />\r\n                    <span>Value</span>\r\n                </label>\r\n            </div>\r\n            <div class="">\r\n                <label class="radio-inline">\r\n                    <input type="radio" ng-model="ValSub" name="value" value="SubValue" ng-click="AddValueSubvalue(\'SubValue\')" />\r\n                    <span>Sub Value</span>\r\n                </label>\r\n            </div>\r\n        </div>\r\n        <div ng-show="ShowCurrentMaxValue" class="form-group ml-10 col-md-12">\r\n            <div class="" style="width: 20%;float:left;">\r\n                <label class="radio-inline">\r\n                    <input type="radio" ng-model="CurrentMaxVal" name="current" value="CurrentValue" ng-change="Addcurrentmax(\'CurrentValue\')" />\r\n                    <span>Current Value</span>\r\n                </label>\r\n            </div>\r\n            <div class="">\r\n                <label class="radio-inline">\r\n                    <input type="radio" ng-model="CurrentMaxVal" name="current" value="MaxValue" ng-change="Addcurrentmax(\'MaxValue\')" />\r\n                    <span>Max Value</span>\r\n                </label>\r\n            </div>\r\n        </div>--\x3e<div class="form-group pb-10">\x3c!--<label class="control-label col-md-4">\r\n                Type\r\n            </label>\r\n            <div class="col-md-8 mb-20">\r\n                <select name="corestattype" class="form-control" ng-options="item.TypeId as item.Name for item in Types" ng-model="CoreStatProperties.TypeId" required>\r\n                    <option value="">--Select--</option>\r\n                </select>\r\n                <span style="color:red" ng-show="dlg.corestattype.$dirty && dlg.corestattype.$invalid">\r\n                    <span ng-show="dlg.corestattype.$error.required">Type is required.</span>\r\n                </span>\r\n\r\n            </div>--\x3e\x3c!--<label class="control-label col-md-4">\r\n                <span class="help-block">Type <span class="errorColor">*</span></span>\r\n            </label>\r\n            <div class="col-md-8 mb-20">\r\n                <select name="corestattype" ng-disabled="DisablecopyFields" ng-change="CoreStatOnChange()" class="form-control" ng-options="item.TypeId as item.Name for item in Types" ng-model="CoreStatProperties.TypeId" ng-class="{red: dlg.corestattype.$dirty && dlg.corestattype.$error.required}" required>\r\n                    <option value="">--Select--</option>\r\n                </select>\r\n            </div>--\x3e</div><div class="form-group form-row"><div class="col-5 col-md-5">\x3c!-- Character ruleset --\x3e<fieldset class="form-group input-list"><legend>Type</legend><ul class="input-list-items"><li class="form-check" ng-repeat="item in Types"><label class="form-check-label icon-ca">\x3c!--<input class="form-check-input" type="radio" name="newCharacterRuleset" value="ruleSetItem.Id" ng-model="ruleSetItem.RulesetID">--\x3e <input class="form-check-input" type="radio" ng-disabled="disableAllControls" name="CharacterStat" value="{{item.TypeId}}" ng-model="CoreStatProperties.TypeId"> <span>\x3c!--<img ng-src="{{item.image?item.image:\'/wwwroot/images/not-available.jpg\'}}" onerror="this.src=\'/wwwroot/images/not-available.jpg\'" />\r\n\t\t\t\t\t\t\t\t\t<span >\r\n\r\n\t\t\t\t\t\t\t\t\t</span>--\x3e <em class="icon icon-with-text icon-{{item.Name.toLowerCase()==\'command\'?\'dice\':(item.Name.toLowerCase()==\'yes/no\'?\'yes-no\':(item.Name.toLowerCase()==\'value & sub-value\'?\'value-subval\':(item.Name.toLowerCase()==\'current & max value\'?\'slider\':(item.Name.toLowerCase()==\'on/off\'?\'on-off\':item.Name.toLowerCase()))))}} icon-rsi">{{item.Name}}</em> <i class="icon" ng-class="\'ss\'"></i></span></label></li></ul>\x3c!--<div class="input-extend">\r\n\t\t\t\t\t\t<a ng-click="manageRuleSets()" class="btn icon icon-with-text icon-external btn-link-primary"><span>Manage Rulesets</span></a>\r\n\t\t\t\t\t</div>--\x3e</fieldset>\x3c!-- End of character ruleset --\x3e</div><div class="stat-type-fields stat-type-text" style="width: 55%;padding-left: 1px"><label class="control-label" ng-show="Types[CoreStatProperties.TypeId-1].Name">{{CoreStatProperties.TypeId==16?\'Calculation\':Types[CoreStatProperties.TypeId-1].Name}}</label><div class="stat-type-desc" ng-show="Types[CoreStatProperties.TypeId-1].Description"><p ng-show="Types[CoreStatProperties.TypeId-1].Description">{{Types[CoreStatProperties.TypeId-1].Description}}</p><p ng-show="Types[CoreStatProperties.TypeId-1].Examples"><em>eg. {{Types[CoreStatProperties.TypeId-1].Examples}}</em></p></div><div><label class="control-label">Description (Optional)</label><div class=""><textarea ng-disabled="DisablecopyFields" placeholder="Enter Description" ng-model="CoreStatProperties.Description" class="form-control"></textarea></div></div><div class="" ng-show="CoreStatProperties.TypeId == 16"><label class="control-label">Add an Existing Character Stat</label><div class=""><select name="ExistCoreStat" class="form-control" ng-options="CoreStatsInGrid.Name for CoreStatsInGrid in CoreStatsInGrid" ng-model="CoreStatsInGrid.Name" ng-change="ExistCoreStatOnChange()" ng-class="{red: dlg.corestattype.$dirty && dlg.corestattype.$error.required}" required><option value="">--Select--</option></select><button type="button" ng-disabled="DisablecopyFields" class="byn btn-primary" ng-click="CreateFormula()">INSERT</button></div><label class="control-label">Formula</label><div><input type="text" ng-disabled="DisablecopyFields" placeholder="Enter Formula" ng-model="Formula" class="form-control"></div></div><div ng-show="Types[CoreStatProperties.TypeId-1].Name == \'Choice\'">\x3c!--<input type="text" ng-model="CoreStatProperties.ChoiceName" />--\x3e<label class="control-label">Choice</label><div ng-repeat="choice in CoreStatProperties.Value.Choices.choices">\x3c!--<div class="col-md-8" style="margin-bottom:6px;">\r\n\t\t\t\t<input type="text" class="form-control col-md-6" ng-model="choice.ChoiceName" />\r\n\t\t\t</div>--\x3e\x3c!--<input id="ChoiceField" style="width: 70%" ng-disabled="DisablecopyFields" type="text"  placeholder="Enter Choice" class="form-control form-control-sm icon icon-trash icon-rsi" ng-model="choice.ChoiceName">--\x3e <span class="input-group-btn"><button type="button" title="Remove Choice" class="btn icon icon-trash btn-simple-primary" ng-click="RemoveChoice(choice)"></button> </span><input type="text" ng-model="choice.ChoiceName" ng-click="addChoice()" class="form-control" placeholder="Enter Choice">\x3c!--<div ng-disabled="DisablecopyFields" class="btn btn-primary icon icon-with-text icon-trash text-sm-center btn-sm" ng-click="RemoveChoice(choice)"></div>--\x3e</div>\x3c!--<div class="addchoice">\r\n\t\t\t\t\t\t<button ng-click="addChoice()" ng-disabled="DisablecopyFields" class="btn btn-primary">Add Choice</button>\r\n\t\t\t\t\t</div>--\x3e</div></div></div></ng-form></div><div class="modal-footer">\x3c!--<button type="button" class="btn btn-primary" ng-click="NewRuleSet();"><i style="color:#fff;" class="fa fa fa-plus"></i> Add RuleSet</button>--\x3e <button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-primary" ng-click="SaveCorestat()">{{buttontext}}</button>\x3c!--<button type="button" class="btn btn-primary" ng-click="SaveCorestat()">Save</button>--\x3e</div>'),
e.put("/views/dialogs/addnumericcorestats.html",'<div class="modal-header"><h4 class="modal-title"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span>Numeric Corestats</span></h4></div><div class="modal-body form-horizontal">\x3c!--<div ng-show="ShowNumericCorestats"></div>--\x3e<ng-form name="dlg" novalidate role="form"><div class="text-center" ng-show="ShowNonNumericCorestats">No Numeric Corestats For This Character.</div><div class="form-group" ng-show="!ShowNonNumericCorestats"><label class="control-label col-md-4"><span class="help-block">Select Numeric Corestat <span class="errorColor">*</span></span></label><div class="col-md-8"><select name="corestattype" ng-change="ShowCorestatValue()" class="form-control" ng-options="item for item in Result" ng-model="corestatype" ng-class="{red: dlg.corestattype.$dirty && dlg.corestattype.$error.required}" required><option value="">--Select--</option></select></div></div>\x3c!--<div ng-show="CurrentMaxValue" class="form-group ml-10">\r\n            <label class="control-label col-md-4">\r\n                <div class="checkbox-inline">\r\n                    <label><input type="checkbox" ng-model="currentvalue" name="current" ng-change="showcurrent()" />Current Value</label>\r\n                </div>\r\n                <div class="checkbox-inline">\r\n                    <label><input type="checkbox" ng-model="checked" name="max" ng-init="checked=true" />Max Value</label>\r\n                </div>\r\n            </label>\r\n\r\n        </div>\r\n        <div ng-show="ValueSubValue" class="form-group mr-20">\r\n            <label class="control-label col-md-4">\r\n                <div class="checkbox-inline">\r\n                    <label><input type="checkbox" ng-model="checked" name="value" ng-init="checked=true" />Value</label>\r\n                </div>\r\n                <div class="checkbox-inline">\r\n                    <label><input type="checkbox" ng-model="subvalue" name="sub" ng-change="showsubvalue()" />Sub Value</label>\r\n                </div>\r\n            </label>\r\n        </div>--\x3e<div ng-show="CurrentMaxValue" class="form-group ml-10"><label class="control-label col-md-4"></label><div class="radio-inline"><label><input type="radio" ng-model="CurrentMaxVal" name="current" value="CurrentValue" ng-change="showcurrentmax(\'CurrentValue\')">Current Value</label></div><div class="radio-inline"><label><input type="radio" ng-model="CurrentMaxVal" name="current" value="MaxValue" ng-change="showcurrentmax(\'MaxValue\')">Max Value</label></div>\x3c!--</label>--\x3e</div><div ng-show="ValueSubValue" class="form-group mr-20"><label class="control-label col-md-4"></label><div class="radio-inline"><label><input type="radio" ng-model="ValSub" name="value" value="Value" ng-change="showValueSubvalue(\'Value\')">Value</label></div><div class="radio-inline"><label><input type="radio" ng-model="ValSub" name="value" value="SubValue" ng-change="showValueSubvalue(\'SubValue\')">Sub Value</label></div>\x3c!--</label>--\x3e</div><div ng-show="Number"><div class="form-group"><label class="control-label col-md-4"></label><div class="col-md-8"><input type="text" ng-model="number" class="form-control col-md-8" disabled="disabled"></div></div></div><div ng-show="currenttext"><div class="form-group"><label class="control-label col-md-4"></label><div class="col-md-8"><input type="text" ng-model="current" class="form-control col-md-8" disabled="disabled"></div></div></div><div ng-show="maxtext"><div class="form-group"><label class="control-label col-md-4"></label><div class="col-md-8"><input type="text" ng-model="max" class="form-control col-md-8" disabled="disabled"></div></div></div><div ng-show="valtext"><div class="form-group"><label class="control-label col-md-4"></label><div class="col-md-8"><input type="text" ng-model="val" class="form-control col-md-8" disabled="disabled"></div></div></div><div ng-show="subvaltext"><div class="form-group"><label class="control-label col-md-4"></label><div class="col-md-8"><input type="text" class="form-control col-md-8" ng-model="subval" disabled="disabled"></div></div></div></ng-form></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-primary" ng-click="SaveCorestatValues()" ng-disabled="(dlg.$dirty && dlg.$invalid)|| dlg.$pristine ">Save</button></div>'),e.put("/views/dialogs/allabilitycontent.html",'<style>.modal-content {\r\n        width: 1100px;\r\n        left: -93px;\r\n    }</style><div class="container item_view item_properties"><div class="row"><div class="col-md-4 image"><div class="image"><img ng-src="{{Properties.AbilityProperties[1].Value.Image.image}}" class="img-resposive" width="120" height="120"></div><button class="btn btn-primary">{{Properties.AbilityProperties[0].Value.Text.value}}</button>\x3c!--<div class="buttons-align">\r\n                <button class="btn btn-warning">\r\n                    <i class="fa fa-remove" aria-hidden="true"></i>\r\n                    REMOVE\r\n                </button>\r\n                <button class="btn btn-warning">\r\n                    <i class="fa fa-exchange" aria-hidden="true"></i>\r\n                    UNMEMORIZE\r\n                </button>\r\n            </div>--\x3e</div><div class="col-md-4"><div class="text-design"><div class="text"><h5>STATS</h5><p>{{Properties.AbilityProperties[2].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-6"><div class="panel div_blue"><div class="panel-heading text-center">CLASS</div><div class="panel-body text-center">{{Properties.AbilityProperties[10].Value.Text.value}}</div></div></div><div class="col-md-6"><div class="panel div_red"><div class="panel-heading text-center">ATTRIBUTES</div><div class="panel-body text-center">{{Properties.AbilityProperties[9].Value.Text.value}}</div></div></div></div><div class="blue"><div class="col-md-6"><div class="panel div_green"><div class="panel-heading text-center">USES ReEMAINING</div><div class="panel-body text-center">{{Properties.AbilityProperties[13].Value.Number.value}}</div></div></div><div class="col-md-6"><div class="panel div_green"><div class="panel-heading text-center">MAX USES</div><div class="panel-body text-center">{{Properties.AbilityProperties[12].Value.Number.value}}</div></div></div></div></div></div></div><div class="col-md-4"><div class="text-design"><div class="text"><h5>Description</h5><p>{{Properties.AbilityProperties[14].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-12"><div class="panel panel-danger"><div class="panel-heading text-center">TAGS</div><div class="panel-body text-center">{{Properties.AbilityProperties[17].Value.Number.value}}</div></div></div>\x3c!--<div class="col-md-6">\r\n                            <div class="panel panel-default">\r\n                                <div class="panel-heading text-center" style="background-color: rgba(237, 20, 61, 0.67);">Attributes</div>\r\n                                <div class="panel-body text-center" style="background-color: rgba(237, 20, 61, 0.58);"></div>\r\n                            </div>\r\n                        </div>--\x3e</div><div class="blue"><div class="col-md-12"><div class="panel panel-danger"><div class="panel-heading text-center">REQUIREMENTS</div><div class="panel-body text-center">text</div></div></div></div></div></div></div></div></div>'),e.put("/views/dialogs/allitemcontent.html",'<style>.modal-content {\r\n        width: 1100px;\r\n        left: -93px;\r\n    }</style><div class="container item_view"><div class="row"><div class="col-md-4 image"><div class="image"><img ng-src="{{Properties.ItemProperties[1].Value.Image.image}}" class="img-resposive" width="120" height="120"></div><button class="btn btn-primary">{{Properties.ItemProperties[0].Value.Text.value}}</button></div><div class="col-md-4"><div class="text-design"><div class="text"><h5>STATS</h5><p>{{Properties.ItemProperties[2].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-6"><div class="panel div_blue"><div class="panel-heading text-center">WEIGHT</div><div class="panel-body text-center">{{Properties.ItemProperties[4].Value.Weight.value}} {{Properties.ItemProperties[4].Value.Weight.units.selectedUnit}}</div></div></div><div class="col-md-6"><div class="panel div_blue"><div class="panel-heading text-center">VOLUME</div><div class="panel-body text-center">{{Properties.ItemProperties[5].Value.Volume.lenghtvalue}} {{Properties.ItemProperties[5].Value.Volume.heightvalue}} {{Properties.ItemProperties[5].Value.Volume.depthvalue}}</div></div></div></div><div class="blue"><div class="col-md-6"><div class="panel div_red"><div class="panel-heading text-center">ATTRIBUTES</div><div class="panel-body text-center">text</div></div></div><div class="col-md-6"><div class="panel div_green"><div class="panel-heading text-center">RARITY</div><div class="panel-body text-center">{{Properties.ItemProperties[6].Value.Choices.selectedchoice}}</div></div></div></div></div></div></div><div class="col-md-4"><div class="text-design"><div class="text"><h5>Visible Description</h5><p>{{Properties.ItemProperties[6].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading text-center">Associated Spell</div><div class="panel-body"><div class="text-center">None</div>\x3c!--<div class="text-center" ng-if="RulesetContent.AssociatedSpells.length > 0">\r\n                                     \r\n                                            {{associatedSpell.SpellProperties[0].Value.Text.value}}\r\n                                     \r\n                                        <button ng-repeat="associatedSpell in RulesetContent.AssociatedSpells" class="btn btn-warning" ng-click="ShowAssociatedSpells($index)">\r\n                                            {{associatedSpell.SpellProperties[0].Value.Text.value}}\r\n                                        </button>\r\n                                    </div>--\x3e</div></div></div><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading text-center">Associated Ability</div><div class="panel-body text-center">None</div></div></div></div><div class="blue"><div class="col-md-12"><div class="panel panel-danger"><div class="panel-heading text-center">TAGS</div><div class="panel-body text-center">{{Properties.ItemProperties[17].Value.Text.value}}</div></div></div></div></div></div></div></div></div>'),e.put("/views/dialogs/allspellcontent.html",'<style>.modal-content {\r\n        width: 1100px;\r\n        left: -93px;\r\n    }</style><div class="container item_view"><div class="row"><div class="col-md-4 image"><div class="image"><img ng-src="{{Properties.SpellProperties[1].Value.Image.image}}" class="img-resposive" width="120" height="120"></div><button class="btn btn-primary">{{Properties.SpellProperties[0].Value.Text.value}}</button></div><div class="col-md-4"><div class="text-design"><div class="text"><h5>STATS</h5><p>{{Properties.SpellProperties[2].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-6"><div class="panel div_blue"><div class="panel-heading text-center">CLASS</div><div class="panel-body text-center">{{Properties.SpellProperties[10].Value.Text.value}}</div></div></div><div class="col-md-6"><div class="panel div_blue"><div class="panel-heading text-center">SCHOOL</div><div class="panel-body text-center">{{Properties.SpellProperties[9].Value.Text.value}}</div></div></div></div><div class="blue"><div class="col-md-12"><div class="panel div_green"><div class="panel-heading text-center">Materialized Components</div><div class="panel-body text-center">{{Properties.SpellProperties[9].Value.Text.value}}</div></div></div></div></div></div></div><div class="col-md-4"><div class="text-design"><div class="text"><h5>Description</h5><p>{{Properties.SpellProperties[18].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-6"><div class="panel div_red"><div class="panel-heading text-center">CASTING TIME</div><div class="panel-body text-center">{{Properties.SpellProperties[17].Value.Number.value}}</div></div></div><div class="col-md-6"><div class="panel div_red"><div class="panel-heading text-center">Attributes</div><div class="panel-body text-center"></div></div></div></div><div class="blue"><div class="col-md-12"><div class="panel panel-danger"><div class="panel-heading text-center">TAGS</div><div class="panel-body text-center">text</div></div></div></div></div></div></div></div><div class="row"><div class="col-md-4"><div class="buttons-align"></div></div><div class="col-md-4"><div class="buttons-align"><div ng-repeat="value in Properties.SpellProperties" class="col-md-6"><rpgsmithcontenttype info="value"></rpgsmithcontenttype></div></div></div><div class="col-md-4"><div class="buttons-align"></div></div></div><div class="row"><div class="col-md-4 col-xs-12"><div class="header-text"><div class="font_icons"><i class="fa fa-cog"></i> <i class="fa fa-circle" aria-hidden="true"></i></div><p>Welcome to the party in hyderabad to become a part of real time applications to be allocated in a creative manner for a while in a association manner. Welcome to the party in hyderabad to become a part of real time applications to be allocated in a creative manner for a while in a association manner.</p></div></div></div></div>'),e.put("/views/dialogs/AssociatedAbilities.html",'\x3c!-- Add item popup --\x3e\x3c!--<div class="modal fade popup-add-item" id="addItemPopup" tabindex="-1" role="dialog" aria-labelledby="addItemPopupTitle" aria-hidden="true" data-backdrop="static">\r\n\t<div class="modal-dialog" role="document">--\x3e<div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="addItemPopupTitle">Add From Ruleset Abilities</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close" ng-click="cancel()"></button></div><div class="modal-body"><form>\x3c!-- Search query --\x3e<div class="form-group form-group-unlabelled"><span class="input-group-btn"><button type="button" title="Search" data-toggle="tooltip" class="btn icon icon-search btn-simple-primary"></button> </span><input type="text" id="addItemSearchQuery" class="form-control" placeholder="Search items"></div><fieldset class="form-group input-list input-list-wrap items" ng-repeat="ability in Abilities | limitTo : limit"><ul class="input-list-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]" ng-model="ability.Selected"> <span><img ng-src="{{ability.AbilityProperties[1].Value.Image.image}}" alt="{{ability.AbilityProperties[0].Value.Text.value}}"> <em>{{ability.AbilityProperties[0].Value.Text.value}}</em> <em>{{ability.AbilityProperties[0].Value.Number.value}}</em> <i class="icon"></i></span></label></li></ul></fieldset>\x3c!-- End of item rulesets --\x3e</form></div><div class="modal-footer"><button type="button" data-dismiss="modal" ng-click="cancel()" class="btn btn-simple-accent">Cancel</button> <button type="button" ng-click="" class="btn btn-accent">Add</button></div></div>\x3c!--</div>\r\n</div>--\x3e\x3c!-- End of add item popup --\x3e'),e.put("/views/dialogs/AssociatedSpells.html",'\x3c!-- Add item popup --\x3e\x3c!--<div class="modal fade popup-add-item" id="addItemPopup" tabindex="-1" role="dialog" aria-labelledby="addItemPopupTitle" aria-hidden="true" data-backdrop="static">\r\n\t<div class="modal-dialog" role="document">--\x3e<div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="addItemPopupTitle">Add From Ruleset Spells</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close" ng-click="cancel()"></button></div><div class="modal-body"><form>\x3c!-- Search query --\x3e<div class="form-group form-group-unlabelled"><span class="input-group-btn"><button type="button" title="Search" data-toggle="tooltip" class="btn icon icon-search btn-simple-primary"></button> </span><input type="text" id="addItemSearchQuery" class="form-control" placeholder="Search items"></div><fieldset class="form-group input-list input-list-wrap items" ng-repeat="spell in RulesetSpells | limitTo : limit"><ul class="input-list-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]" ng-model="spell.Selected"> <span><img ng-src="{{spell.SpellProperties[1].Value.Image.image}}" alt="{{spell.SpellProperties[3].Value.Number.value}}"> <em>{{spell.SpellProperties[3].Value.Number.value}}</em> <i class="icon"></i></span></label></li></ul></fieldset>\x3c!-- End of item rulesets --\x3e</form></div><div class="modal-footer"><button type="button" data-dismiss="modal" ng-click="cancel()" class="btn btn-simple-accent">Cancel</button> <button type="button" ng-click="" class="btn btn-accent">Add</button></div></div>\x3c!--</div>\r\n</div>--\x3e\x3c!-- End of add item popup --\x3e'),e.put("/views/dialogs/AssociateRulesetAbilities.html",'\x3c!-- Add item popup --\x3e\x3c!--<div class="modal fade popup-add-item" id="addItemPopup" tabindex="-1" role="dialog" aria-labelledby="addItemPopupTitle" aria-hidden="true" data-backdrop="static">\r\n\t<div class="modal-dialog" role="document">--\x3e<div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="addItemPopupTitle">Add From Ruleset Abilities</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close" ng-click="cancel()"></button></div><div class="modal-body"><form>\x3c!-- Search query --\x3e<div class="form-group form-group-unlabelled"><span class="input-group-btn"><button type="button" title="Search" data-toggle="tooltip" class="btn icon icon-search btn-simple-primary"></button> </span><input type="text" id="addItemSearchQuery" class="form-control" placeholder="Search items"></div><fieldset class="form-group input-list input-list-wrap items" ng-repeat="ability in RulesetAbilities | limitTo : limit"><ul class="input-list-items"><li class="form-check"><label class="form-check-label">{{r.Title}} <input class="form-check-input" type="checkbox" name="addItemItems[]" ng-model="ability.Selected"> <span><img ng-src="{{ability.AbilityProperties[1].Value.Image.image}}" alt="{{ability.AbilityProperties[0].Value.Text.value}}"> <em>{{ability.AbilityProperties[0].Value.Text.value}}</em> <em>{{ability.AbilityProperties[0].Value.Number.value}}</em> <i class="icon"></i></span></label></li></ul></fieldset>\x3c!-- End of item rulesets --\x3e</form></div><div class="modal-footer"><button type="button" data-dismiss="modal" ng-click="cancel()" class="btn btn-simple-accent">Cancel</button> <button type="button" ng-click="SaveAssociatedRulesetAbilities()" class="btn btn-accent">Add</button></div></div>\x3c!--</div>\r\n</div>--\x3e\x3c!-- End of add item popup --\x3e'),e.put("/views/dialogs/AssociateRulesetItems.html",'\x3c!-- Add item popup --\x3e\x3c!--<div class="modal fade popup-add-item" id="addItemPopup" tabindex="-1" role="dialog" aria-labelledby="addItemPopupTitle" aria-hidden="true" data-backdrop="static">\r\n\t<div class="modal-dialog" role="document">--\x3e<div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="addItemPopupTitle">Add From Ruleset Items</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close" ng-click="cancel()"></button></div><div class="modal-body"><form>\x3c!-- Search query --\x3e<div class="form-group form-group-unlabelled"><span class="input-group-btn"><button type="button" title="Search" data-toggle="tooltip" class="btn icon icon-search btn-simple-primary"></button> </span><input type="text" id="addItemSearchQuery" class="form-control" placeholder="Search items"></div><fieldset class="form-group input-list input-list-wrap items" ng-repeat="r in RulesetItems | limitTo : limit"><ul class="input-list-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" ng-checked="checkSelected(r,1)" ng-click="addName(r,1)" name="addItemItems[]" ng-model="r.Selected"> <span><img ng-src="{{r.ItemProperties[1].Value.Image.image}}" alt="{{r.ItemProperties[0].Value.Text.value}}"> <em>{{r.ItemProperties[0].Value.Text.value}}</em> <em>{{r.ItemProperties[2].Value.Number.value}}</em> <i class="icon"></i></span></label></li></ul></fieldset>\x3c!-- End of item rulesets --\x3e</form></div><div class="modal-footer"><button type="button" data-dismiss="modal" ng-click="cancel()" class="btn btn-simple-accent">Cancel</button> <button type="button" ng-click="SaveAssociatedRulesetItems()" class="btn btn-accent">Add</button></div></div>\x3c!--</div>\r\n</div>--\x3e\x3c!-- End of add item popup --\x3e'),e.put("/views/dialogs/AssociateRulesetSpells.html",'\x3c!-- Add item popup --\x3e\x3c!--<div class="modal fade popup-add-item" id="addItemPopup" tabindex="-1" role="dialog" aria-labelledby="addItemPopupTitle" aria-hidden="true" data-backdrop="static">\r\n\t<div class="modal-dialog" role="document">--\x3e<div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="addItemPopupTitle">Add From Ruleset Spells</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close" ng-click="cancel()"></button></div><div class="modal-body"><form>\x3c!-- Search query --\x3e<div class="form-group form-group-unlabelled"><span class="input-group-btn"><button type="button" title="Search" data-toggle="tooltip" class="btn icon icon-search btn-simple-primary"></button> </span><input type="text" id="addItemSearchQuery" class="form-control" placeholder="Search items"></div><fieldset class="form-group input-list input-list-wrap items" ng-repeat="spell in RulesetSpells | limitTo : limit"><ul class="input-list-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]" ng-model="spell.Selected"> <span><img ng-src="{{spell.SpellProperties[1].Value.Image.image}}" alt="{{spell.SpellProperties[0].Value.Text.value}}"> <em>{{spell.SpellProperties[0].Value.Text.value}}</em> <em>{{spell.SpelsProperties[0].Value.Number.value}}</em> <i class="icon"></i></span></label></li></ul></fieldset>\x3c!-- End of item rulesets --\x3e</form></div><div class="modal-footer"><button type="button" data-dismiss="modal" ng-click="cancel()" class="btn btn-simple-accent">Cancel</button> <button type="button" ng-click="SaveAssociatedRulesetSpells()" class="btn btn-accent">Add</button></div></div>\x3c!--</div>\r\n</div>--\x3e\x3c!-- End of add item popup --\x3e'),e.put("/views/dialogs/attributetilecontent.html",'<div class="modal-header"><h4 class="modal-title" style="text-align:center">{{Content.Value.Attribute.Title}}</h4></div><div class="modal-body attribute_tile"><div class="row"><div class="col-md-10 table-responsive"><table class="table table-bordered"><thead><tr><th>Name</th><th>Description</th><th>Value</th></tr></thead><tbody><tr><td style="text-align:center">{{Content.Value.Attribute.AttributeContent.Name}}</td><td style="text-align:center">{{Content.Value.Attribute.AttributeContent.Description}}</td><td style="text-align:center">{{Content.Value.Attribute.CorestatValues}}</td></tr></tbody></table></div></div><div ng-show="CurrentMax"><div class="row"><div class="col-md-12 box_design"><div class="form-group col-md-12"><label class="control-label col-md-2">Max Value</label><div class="col-md-2"><input type="text" class="form-control" ng-model="Maxvalue"></div><div class="counter_div col-md-2"><img ng-src="/wwwroot/images/Dice/dice_item.png" class="img-resposive img_center" width="60" height="60" ng-click="DiceRoll(1)"></div><div class="counter_design"><span><i class="fa fa-minus fa-2x" ng-click="Decrement(1)"></i></span> <span><i class="fa fa-plus fa-2x" ng-click="Increment(1)"></i></span> <span><i class="fa fa fa-refresh fa-2x" ng-click="Reset(1)"></i></span></div></div></div></div><div class="row"><div class="col-md-12 box_design"><div class="form-group col-md-12"><label class="control-label col-md-2">Current Value</label><div class="col-md-2"><input type="text" class="form-control" ng-model="Currentvalue"></div><div class="col-md-2 counter_div"><img ng-src="/wwwroot/images/Dice/dice_item.png" class="img-resposive img_center" width="60" height="60" ng-click="DiceRoll(2)"></div><div class="counter_design"><span><i class="fa fa-minus fa-2x" ng-click="Decrement(2)"></i></span> <span><i class="fa fa-plus fa-2x" ng-click="Increment(2)"></i></span> <span><i class="fa fa fa-refresh fa-2x" ng-click="Reset(2)"></i></span></div></div></div></div>\x3c!--<label></label>\r\n        <div class="counter"><span><i class="fa fa-minus fa-2x" ng-click="Decrement()"></i></span><span><i class="fa fa fa-refresh fa-2x" ng-click="Reset()"></i></span><span><i class="fa fa-plus fa-2x" ng-click="Increment()"></i></span></div><br />--\x3e</div><div ng-show="ValueSubValue"><div class="row"><div class="col-md-12 box_design"><div class="form-group col-md-12"><label class="control-label col-md-2">Value</label><div class="col-md-2"><input type="text" class="form-control" ng-model="Value"></div><div class="col-md-2 counter_div"><img ng-src="/wwwroot/images/Dice/dice_item.png" class="img-resposive img_center" width="60" height="60" ng-click="DiceRoll(3)"></div><div class="counter_design"><span><i class="fa fa-minus fa-2x" ng-click="Decrement(3)"></i></span> <span><i class="fa fa-plus fa-2x" ng-click="Increment(3)"></i></span> <span><i class="fa fa fa-refresh fa-2x" ng-click="Reset(3)"></i></span><br></div><div class="form-group col-md-12"><label class="control-label col-md-2">Sub Value</label><div class="col-md-2"><input type="text" class="form-control" ng-model="Subvalue"></div><div class="col-md-2 counter_div"><img ng-src="/wwwroot/images/Dice/dice_item.png" class="img-resposive img_center" width="60" height="60" ng-click="DiceRoll(4)"></div><div class="counter_design"><span><i class="fa fa-minus fa-2x" ng-click="Decrement(4)"></i></span> <span><i class="fa fa-plus fa-2x" ng-click="Increment(4)"></i></span> <span><i class="fa fa fa-refresh fa-2x" ng-click="Reset(4)"></i></span></div></div></div></div></div><div ng-show="Number"><div class="row"><div class="col-md-12 box_design"><div class="form-group col-md-12"><label class="control-label col-md-2">Number</label><div class="col-md-2"><input type="text" class="form-control" ng-model="Numbers"></div><div class="col-md-2 counter_div"><img ng-src="/wwwroot/images/Dice/dice_item.png" class="img-resposive img_center" width="60" height="60" ng-click="DiceRoll(5)"></div><div class="counter_design"><span><i class="fa fa-minus fa-2x" ng-click="Decrement(5)"></i></span> <span><i class="fa fa-plus fa-2x" ng-click="Increment(5)"></i></span> <span><i class="fa fa fa-refresh fa-2x" ng-click="Reset(5)"></i></span></div><br></div></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="cancel()">Close</button> <button type="submit" class="btn btn-primary" ng-click="SaveAttributeCorestatValue()" ng-disabled="theForm.$invalid">Update</button></div><toaster-container toaster-options="{\'position-class\': \'toast-top-right\',\'time-out\':\'1000\'}" style="left: 50%; position: fixed"></toaster-container></div>'),e.put("/views/dialogs/character-addnew.html",'<div class="modal-header"><h5 class="modal-title" id="newCharacterPopupTitle">{{pageHeading}}</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close" ng-click="cancel()"></button></div><div class="modal-body table_align"><form name="characterForm" novalidate><div class="form-row"><div class="col">\x3c!-- Character name --\x3e<div class="form-group"><label for="newCharacterName">Name</label><input type="text" name="CharacterName" ng-disabled="disableNameControl" ng-model="character.name" class="form-control" placeholder="Name of the character" required></div>\x3c!-- End of character name --\x3e</div></div><div class="form-row"><div class="col-12 col-md-6">\x3c!-- Character ruleset --\x3e<fieldset class="form-group input-list"><legend>Ruleset</legend><ul class="input-list-items"><li class="form-check" ng-repeat="ruleSetItem in RuleSets"><label class="form-check-label">\x3c!--<input class="form-check-input" type="radio" name="newCharacterRuleset" value="ruleSetItem.Id" ng-model="ruleSetItem.RulesetID">--\x3e <input class="form-check-input" type="radio" ng-disabled="disableAllControls" name="CharacterRuleset" value="{{ruleSetItem.Id}}" ng-model="$parent.character.RulesetID"> <span><img ng-src="{{ruleSetItem.Rulesetproperty[2].Value.Image.image?ruleSetItem.Rulesetproperty[2].Value.Image.image:\'/wwwroot/images/not-available.jpg\'}}" onerror="this.src=\'/wwwroot/images/not-available.jpg\'"> <em>{{ruleSetItem.Name}}</em> <i class="icon" ng-class="ruleSetItem.Id == character.RulesetID? \'input_selected\':\'ss\'"></i></span></label></li><li><br></li></ul><div class="input-extend"><a ng-click="manageRuleSets()" class="btn icon icon-with-text icon-external btn-link-secondary"><span>Manage Rulesets</span></a></div></fieldset>\x3c!-- End of character ruleset --\x3e</div><div class="col-12 col-md-6">\x3c!-- Character portrait --\x3e<div class="form-group input-image input-image-alt"><label for="newRulesetImage">Portrait (optional)</label><div class="input-image-control input-image-note input-image-trigger" ng-hide="showimagebtns || character.file" ng-click="showimagebtns=true"><div class="icon icon-upload"><span>Click here to upload.</span><small>(320 x 320 px)</small></div></div><div class="input-image-control input-image-buttons" ng-show="showimagebtns" style="display:block;background-size:cover;cursor: pointer ; background-repeat: no-repeat; background-image: url(\'{{character.file?character.file:\'\'}}\')"><button type="button" ng-click="OpenBingSearch()" class="btn icon icon-with-text icon-globe btn-primary btn-block input-image-button-web">From Web</button> <button type="button" ng-click="OpenFile()" class="btn icon icon-with-text icon-computer btn-primary btn-block input-image-trigger input-image-button-computer">From Computer</button> <button type="button" ng-show="showimagebtns && character.file" class="btn btn-primary btn-block input-image-button-close" ng-click="character.file = null">Delete</button> <button type="button" ng-click="showimagebtns = false" class="btn btn-outline-primary btn-block input-image-button-close">Cancel</button></div><div ng-click="showimagebtns=true" class="input-image-control input-image-buttons" ng-show="!showimagebtns && character.file" style="background-size:cover; cursor: pointer ; background-repeat: no-repeat; background-image: url(\'{{character.file?character.file:\'\'}}\'); padding-top: 100px;padding-left:20px;padding-right: 20px;max-height: 320px;max-width:320px;background-color: #d3cfce;vertical-align: middle"></div><input type="file" id="newCharacterImage" onchange="angular.element(this).scope().characterImageUpload(this)" class="form-control-file"></div>\x3c!-- End of ruleset image --\x3e</div></div></form></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-accent" ng-click="save()" ng-disabled="characterForm.$invalid">Save</button></div>\x3c!--<toaster-container toaster-options="{\'position-class\': \'toast-top-right\'}" style=" left: 50%; position: fixed;"></toaster-container>--\x3e'),
e.put("/views/dialogs/CharacterAssociatedAbilities.html",'<!DOCTYPE html><html><head><meta charset="utf-8"><title></title></head><body><table class="table table-bordered table-striped" id=""><thead><tr><th>S.No.</th><th>Name</th><th>Quantity</th><th>Image</th><th>Select</th></tr></thead><tbody><tr ng-repeat="ability in Abilities | limitTo : limit"><td>{{$index +1}}</td><td>{{ability.CharacterAbilitiesProperties[0].Value.Text.value}}</td><td>{{ability.CharacterAssociatedAbilities[3].Value.Number.value}}</td><td><img ng-src="{{ability.CharacterAssociatedAbilities[1].Value.Image.image}}" class="img-resposive" width="60" height="60"></td><td><input type="checkbox" ng-model="ability.Selected"></td></tr></tbody></table><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="SaveAssociatedAbilities()">Save</button></div></body></html>'),e.put("/views/dialogs/CharacterAssociatedSpells.html",'<!DOCTYPE html><html><head><meta charset="utf-8"><title></title></head><body><table class="table table-bordered table-striped" id=""><thead><tr><th>S.No.</th><th>Name</th><th>Quantity</th><th>Image</th><th>Select</th></tr></thead><tbody><tr ng-repeat="spell in Spells | limitTo : limit"><td>{{$index +1}}</td><td>{{spell.CharacterSpellsProperties[0].Value.Text.value}}</td><td>{{spell.CharacterSpellsProperties[3].Value.Number.value}}</td><td><img ng-src="{{spell.CharacterSpellsProperties[1].Value.Image.image}}" class="img-resposive" width="60" height="60"></td><td><input type="checkbox" ng-model="spell.Selected"></td></tr></tbody></table><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="SaveAssociatedSpells()">Save</button></div></body></html>'),e.put("/views/dialogs/countertilecontent.html",'<style>.modal-content {\r\n        width: 420px;\r\n        left: 27%;\r\n        top: 108px;\r\n        height: 100%;\r\n    }</style><div class="modal-header"><h4 class="modal-title" style="text-align:center">{{Content.Value.Counter.Name}}</h4></div><div class="modal-body"><div class="row"><div class="col-md-12"><div class="form-group"><label class="control-label col-md-4">Counter Value</label><div class="col-md-4"><input type="number" min="0" placeholder="Value" class="form-control" ng-model="Content.Value.Counter.Value" name="input" ng-class="{red: form.input.$dirty && form.input.$error.required}" ng-required="info" value=""></div></div></div></div></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent" ng-click="cancel()">Close</button> <button type="submit" class="btn btn-accent" ng-click="SaveCounterUpdatedValue()" ng-disabled="theForm.$invalid">Update</button></div>'),e.put("/views/dialogs/createabilities.html",'<ng-form name="dlg" novalidate role="form">\x3c!--<div class="modal-dialog" role="document">\r\n\t\t<div class="modal-content">--\x3e<div class="modal-header"><h5 class="modal-title" id="createItemPopupTitle">{{tabName}}</h5><button type="button" data-dismiss="modal" ng-click="cancel()" class="btn icon icon-cross btn-simple-primary close"></button></div><div class="modal-body"><div class="form-row"><div class="col-12 col-md-6" ng-repeat="property in Properties" ng-if="property.Name != \'Tags\' && (property.TypeId == 1 || property.TypeId == 15)">\x3c!-- Item name --\x3e<div class="form-group"><label for="newItemName">{{property.Name}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div>\x3c!-- End of item name --\x3e</div>\x3c!--<div class="col-12 col-md-6">\r\n\t\t\t\t\x3c!-- Item command --\x3e\x3c!--<div class="form-group">\r\n\t\t\t\t<label for="newItemCommand">Command</label>\r\n\t\t\t\t<span class="input-group-btn">\r\n\t\t\t\t\t<button type="button" title="Show Dice" data-toggle="tooltip" class="btn icon icon-dice icon-rsi btn-simple-primary"></button>\r\n\t\t\t\t</span>\r\n\t\t\t\t<input type="text" id="newItemCommand" class="form-control" placeholder="Select dice">\r\n\t\t\t</div>--\x3e\x3c!-- End of item command --\x3e</div><div class="form-row"><div class="col-12 col-md-6">\x3c!-- Item stats --\x3e<div class="form-group" ng-repeat="property in Properties" ng-if="property.Name != \'Quantity\' && (property.TypeId == 19 || property.Name == \'Tags\')"><label for="newItemStats">{{property.Name}} {{property.TypeId == 14?"("+property.Value.Text+")":""}} {{property.TypeId == 7?"("+property.Value.Weight.units.selectedUnit+")":""}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div>\x3c!-- End of item stats --\x3e\x3c!-- Item descriptopn\r\n\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t<label for="newItemDescription">Visible Description</label>\r\n\t\t\t\t\t<textarea id="newItemDescription" class="form-control" placeholder="About the item" rows="5"></textarea>\r\n\t\t\t\t</div>\r\n\t\t\t\t End of item descriptopn --\x3e</div><div class="col-12 col-md-6">\x3c!-- Image file --\x3e<div class="form-group input-image input-image-alt"><label for="newItemImageFile">Image</label><div class="input-image-control input-image-note input-image-trigger" style="width: 320px;height:320px" ng-hide="showimagebtns || Properties[1].Value.Image.image" ng-click="showimagebtns = true"><div class="icon icon-upload"><span>Click here to upload.</span><small>(320 x 320 px)</small></div></div><div class="input-image-control input-image-buttons" ng-show="showimagebtns" style="display:block;background-size:cover;cursor: pointer ; background-repeat: no-repeat; background-image: url(\'{{Properties[1].Value.Image.image?Properties[1].Value.Image.image:\'\'}}\')"><button type="button" ng-click="OpenBingSearch()" class="btn icon icon-with-text icon-globe btn-primary btn-block input-image-button-web">From Web</button> <button type="button" ng-click="OpenFile()" class="btn icon icon-with-text icon-computer btn-primary btn-block input-image-trigger input-image-button-computer">From Computer</button> <button type="button" ng-show="showimagebtns && Properties[1].Value.Image.image" class="btn btn-primary btn-block input-image-button-close" ng-click="Properties[1].Value.Image.image = null">Delete</button> <button type="button" ng-click="showimagebtns = false" class="btn btn-outline-primary btn-block input-image-button-close">Cancel</button></div><div ng-click="showimagebtns=true" class="input-image-control input-image-buttons" ng-show="!showimagebtns && Properties[1].Value.Image.image" style="background-size:cover; cursor: pointer ; background-repeat: no-repeat; background-image: url(\'{{Properties[1].Value.Image.image?Properties[1].Value.Image.image:\'\'}}\'); padding-top: 100px;padding-left:20px;padding-right: 20px;max-height: 320px;max-width:320px;background-color: #d3cfce;vertical-align: middle"></div><input type="file" id="newRulesetImage" name="newRulesetImage" onchange="angular.element(this).scope().ItemImageUpload(this)" class="form-control-file"></div>\x3c!-- End of image file --\x3e</div></div><div class="form-separator"></div><div class="form-row"><div class="col-12 col-md-6"><div class="form-group" ng-repeat="property in Properties" ng-if="property.Name != \'Quantity\' && (property.TypeId == 7 || property.TypeId == 7 || property.TypeId == 14)"><label for="newItemStats">{{property.Name}} {{property.TypeId == 14?"("+property.Value.Text+")":""}} {{property.TypeId == 7?"("+property.Value.Weight.units.selectedUnit+")":""}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div></div><div class="col-12 col-md-6"><div class="form-group" ng-repeat="property in Properties" ng-if="property.Name == \'Rarity\'"><label for="newItemStats">{{property.Name}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div></div></div><div class="form-row"><div class="col-12 col-md-6">\x3c!-- Item bolume --\x3e<div class="form-group"><label>Volume</label><div class="form-row"><div class="col"><input type="text" id="newItemHeight" class="form-control" placeholder="Height"></div><div class="col"><input type="text" id="newItemWidth" class="form-control" placeholder="Width"></div><div class="col"><input type="text" id="newItemVolume" class="form-control" placeholder="Volume"></div></div></div>\x3c!-- End of item volume --\x3e</div><div class="col-12 col-md-6"><div class="col-12 col-md-6"><div class="form-group" ng-repeat="property in Properties" ng-if="property.Name == \'Container\'"><label for="newItemStats">{{property.Name}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div></div></div></div><div class="form-separator"></div><div class="form-row"><div class="col">\x3c!-- Item indicators --\x3e<fieldset class="form-group input-list input-list-wrap indicators"><legend>Indicators</legend><ul class="input-list-items">\x3c!--<li class="form-check">\r\n\t\t\t\t\t\t\t<label class="form-check-label">\r\n\t\t\t\t\t\t\t\t<input class="form-check-input" type="checkbox" name="newItemIndicators[]">\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t<em class="icon icon-with-text icon-visible icon-rsi">Visible</em>\r\n\t\t\t\t\t\t\t\t\t<i class="icon"></i>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</li>--\x3e<li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="newItemIndicators[]"> <span><em class="icon icon-with-text icon-consumable icon-rsi">Consumable</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="newItemIndicators[]"> <span><em class="icon icon-with-text icon-container icon-rsi">Container</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="newItemIndicators[]"> <span><em class="icon icon-with-text icon-magical icon-rsi">Magical</em> <i class="icon"></i></span></label></li>\x3c!--<li class="form-check">\r\n\t\t\t\t\t\t\t<label class="form-check-label">\r\n\t\t\t\t\t\t\t\t<input class="form-check-input" type="checkbox" name="newItemIndicators[]">\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t<em class="icon icon-with-text icon-equipped icon-rsi">Equipped</em>\r\n\t\t\t\t\t\t\t\t\t<i class="icon"></i>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</li>--\x3e<li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="newItemIndicators[]"> <span><em class="icon icon-with-text icon-unidentified icon-rsi">Unidentified</em> <i class="icon"></i></span></label></li></ul></fieldset>\x3c!-- End of item indicators --\x3e</div></div><div class="form-separator"></div></div><div class="modal-footer"><button type="button" data-dismiss="modal" ng-click="cancel()" class="btn btn-simple-accent">Cancel</button> <button type="button" ng-click="Create()" class="btn btn-accent">{{buttontext}}</button></div>\x3c!--</div>\r\n\t</div>--\x3e</ng-form>'),e.put("/views/dialogs/createitems.html",'<ng-form name="dlg" novalidate role="form">\x3c!--<div class="modal-dialog" role="document">\r\n\t\t<div class="modal-content">--\x3e<div class="modal-header"><h5 class="modal-title" id="createItemPopupTitle">{{tabName}}</h5><button type="button" data-dismiss="modal" ng-click="cancel()" class="btn icon icon-cross btn-simple-primary close"></button></div><div class="modal-body"><div class="form-row"><div class="col-12 col-md-6" ng-repeat="property in Properties" ng-if="property.Name != \'Tags\' && (property.TypeId == 1 || property.TypeId == 15)">\x3c!-- Item name --\x3e<div class="form-group"><label for="newItemName">{{property.Name}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div>\x3c!-- End of item name --\x3e</div>\x3c!--<div class="col-12 col-md-6">\r\n\t\t\t\t\t\t\t\x3c!-- Item command --\x3e\x3c!--<div class="form-group">\r\n\t\t\t\t\t\t\t\t<label for="newItemCommand">Command</label>\r\n\t\t\t\t\t\t\t\t<span class="input-group-btn">\r\n\t\t\t\t\t\t\t\t\t<button type="button" title="Show Dice" data-toggle="tooltip" class="btn icon icon-dice icon-rsi btn-simple-primary"></button>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<input type="text" id="newItemCommand" class="form-control" placeholder="Select dice">\r\n\t\t\t\t\t\t\t</div>--\x3e\x3c!-- End of item command --\x3e</div><div class="form-row"><div class="col-12 col-md-6">\x3c!-- Item stats --\x3e<div class="form-group" ng-repeat="property in Properties" ng-if="property.Name != \'Quantity\' && (property.TypeId == 19 || property.Name == \'Tags\')"><label for="newItemStats">{{property.Name}} {{property.TypeId == 14?"("+property.Value.Text+")":""}} {{property.TypeId == 7?"("+property.Value.Weight.units.selectedUnit+")":""}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div>\x3c!-- End of item stats --\x3e\x3c!-- Item descriptopn \r\n\t\t\t\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t\t\t\t<label for="newItemDescription">Visible Description</label>\r\n\t\t\t\t\t\t\t\t<textarea id="newItemDescription" class="form-control" placeholder="About the item" rows="5"></textarea>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t End of item descriptopn --\x3e</div><div class="col-12 col-md-6">\x3c!-- Image file --\x3e<div class="form-group input-image input-image-alt"><label for="newItemImageFile">Image</label><div class="input-image-control input-image-note input-image-trigger" style="width: 320px;height:320px" ng-hide="showimagebtns || Properties[1].Value.Image.image" ng-click="showimagebtns = true"><div class="icon icon-upload"><span>Click here to upload.</span><small>(320 x 320 px)</small></div></div><div class="input-image-control input-image-buttons" ng-show="showimagebtns" style="display:block;background-size:cover;cursor: pointer ; background-repeat: no-repeat; background-image: url(\'{{Properties[1].Value.Image.image?Properties[1].Value.Image.image:\'\'}}\')"><button type="button" ng-click="OpenBingSearch()" class="btn icon icon-with-text icon-globe btn-primary btn-block input-image-button-web">From Web</button> <button type="button" ng-click="OpenFile()" class="btn icon icon-with-text icon-computer btn-primary btn-block input-image-trigger input-image-button-computer">From Computer</button> <button type="button" ng-show="showimagebtns && Properties[1].Value.Image.image" class="btn btn-primary btn-block input-image-button-close" ng-click="Properties[1].Value.Image.image = null">Delete</button> <button type="button" ng-click="showimagebtns = false" class="btn btn-outline-primary btn-block input-image-button-close">Cancel</button></div><div ng-click="showimagebtns=true" class="input-image-control input-image-buttons" ng-show="!showimagebtns && Properties[1].Value.Image.image" style="background-size:cover; cursor: pointer ; background-repeat: no-repeat; background-image: url(\'{{Properties[1].Value.Image.image?Properties[1].Value.Image.image:\'\'}}\'); padding-top: 100px;padding-left:20px;padding-right: 20px;max-height: 320px;max-width:320px;background-color: #d3cfce;vertical-align: middle"></div><input type="file" id="newRulesetImage" name="newRulesetImage" onchange="angular.element(this).scope().ItemImageUpload(this)" class="form-control-file"></div>\x3c!-- End of image file --\x3e</div></div><div class="form-separator"></div><div class="form-row"><div class="col-12 col-md-6"><div class="form-group" ng-repeat="property in Properties" ng-if="property.Name != \'Quantity\' && (property.TypeId == 7 || property.TypeId == 7 || property.TypeId == 14)"><label for="newItemStats">{{property.Name}} {{property.TypeId == 14?"("+property.Value.Text+")":""}} {{property.TypeId == 7?"("+property.Value.Weight.units.selectedUnit+")":""}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div></div><div class="col-12 col-md-6"><div class="form-group" ng-repeat="property in Properties" ng-if="property.Name == \'Rarity\'"><label for="newItemStats">{{property.Name}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div></div></div><div class="form-row"><div class="col-12 col-md-6">\x3c!-- Item bolume --\x3e<div class="form-group"><label>Volume</label><div class="form-row"><div class="col"><input type="text" id="newItemHeight" class="form-control" placeholder="Height"></div><div class="col"><input type="text" id="newItemWidth" class="form-control" placeholder="Width"></div><div class="col"><input type="text" id="newItemVolume" class="form-control" placeholder="Volume"></div></div></div>\x3c!-- End of item volume --\x3e</div><div class="col-12 col-md-6"><div class="col-12 col-md-6"><div class="form-group" ng-repeat="property in Properties" ng-if="property.Name == \'Container\'"><label for="newItemStats">{{property.Name}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div></div></div></div><div class="form-separator"></div><div class="form-row"><div class="col">\x3c!-- Item indicators --\x3e<fieldset class="form-group input-list input-list-wrap indicators"><legend>Indicators</legend><ul class="input-list-items">\x3c!--<li class="form-check">\r\n\t\t\t\t\t\t\t\t\t\t<label class="form-check-label">\r\n\t\t\t\t\t\t\t\t\t\t\t<input class="form-check-input" type="checkbox" name="newItemIndicators[]">\r\n\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<em class="icon icon-with-text icon-visible icon-rsi">Visible</em>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="icon"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t</li>--\x3e<li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="newItemIndicators[]"> <span><em class="icon icon-with-text icon-consumable icon-rsi">Consumable</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="newItemIndicators[]"> <span><em class="icon icon-with-text icon-container icon-rsi">Container</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="newItemIndicators[]"> <span><em class="icon icon-with-text icon-magical icon-rsi">Magical</em> <i class="icon"></i></span></label></li>\x3c!--<li class="form-check">\r\n\t\t\t\t\t\t\t\t\t\t<label class="form-check-label">\r\n\t\t\t\t\t\t\t\t\t\t\t<input class="form-check-input" type="checkbox" name="newItemIndicators[]">\r\n\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<em class="icon icon-with-text icon-equipped icon-rsi">Equipped</em>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="icon"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t</li>--\x3e<li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="newItemIndicators[]"> <span><em class="icon icon-with-text icon-unidentified icon-rsi">Unidentified</em> <i class="icon"></i></span></label></li></ul></fieldset>\x3c!-- End of item indicators --\x3e</div></div><div class="form-separator"></div><div class="form-row"><div class="col-12 col-md-6">\x3c!-- Item spells --\x3e<div class="form-group"><label for="newItemSpells">Associated spell(s)</label><span class="input-group-btn"><button type="button" class="btn icon icon-search btn-simple-primary" ng-click="OpenAssociatedSpells()"></button> </span><input type="text" id="newItemSpells" class="form-control" placeholder="Search spell(s)"></div>\x3c!-- End of item spells --\x3e</div><div class="col-12 col-md-6">\x3c!-- Item abilities --\x3e<div class="form-group"><label for="newItemAbilities">Associated abilit(ies)</label><span class="input-group-btn"><button type="button" class="btn icon icon-search btn-simple-primary" ng-click="OpenAssociatedAbilities()"></button> </span><input type="text" id="newItemAbilities" class="form-control" placeholder="Search abilit(ies)"></div>\x3c!-- End of item abilities --\x3e</div></div></div><div class="modal-footer"><button type="button" data-dismiss="modal" ng-click="cancel()" class="btn btn-simple-accent">Cancel</button> <button type="button" ng-click="Create()" class="btn btn-accent">{{buttontext}}</button></div>\x3c!--</div>\r\n\t</div>--\x3e</ng-form>'),e.put("/views/dialogs/createspells.html",'<ng-form name="dlg" novalidate role="form">\x3c!--<div class="modal-dialog" role="document">\r\n\t\t<div class="modal-content">--\x3e<div class="modal-header"><h5 class="modal-title" id="createItemPopupTitle">{{tabName}}</h5><button type="button" data-dismiss="modal" ng-click="cancel()" class="btn icon icon-cross btn-simple-primary close"></button></div><div class="modal-body"><div class="form-row"><div class="col-12 col-md-6" ng-repeat="property in Properties" ng-if="property.Name != \'Tags\' && (property.TypeId == 1 || property.TypeId == 15)">\x3c!-- Item name --\x3e<div class="form-group"><label for="newItemName">{{property.Name}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div>\x3c!-- End of item name --\x3e</div>\x3c!--<div class="col-12 col-md-6">\r\n\t\t\t\t\x3c!-- Item command --\x3e\x3c!--<div class="form-group">\r\n\t\t\t\t<label for="newItemCommand">Command</label>\r\n\t\t\t\t<span class="input-group-btn">\r\n\t\t\t\t\t<button type="button" title="Show Dice" data-toggle="tooltip" class="btn icon icon-dice icon-rsi btn-simple-primary"></button>\r\n\t\t\t\t</span>\r\n\t\t\t\t<input type="text" id="newItemCommand" class="form-control" placeholder="Select dice">\r\n\t\t\t</div>--\x3e\x3c!-- End of item command --\x3e</div><div class="form-row"><div class="col-12 col-md-6">\x3c!-- Item stats --\x3e<div class="form-group" ng-repeat="property in Properties" ng-if="property.Name != \'Quantity\' && (property.TypeId == 19 || property.Name == \'Tags\')"><label for="newItemStats">{{property.Name}} {{property.TypeId == 14?"("+property.Value.Text+")":""}} {{property.TypeId == 7?"("+property.Value.Weight.units.selectedUnit+")":""}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div>\x3c!-- End of item stats --\x3e\x3c!-- Item descriptopn\r\n\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t<label for="newItemDescription">Visible Description</label>\r\n\t\t\t\t\t<textarea id="newItemDescription" class="form-control" placeholder="About the item" rows="5"></textarea>\r\n\t\t\t\t</div>\r\n\t\t\t\t End of item descriptopn --\x3e</div><div class="col-12 col-md-6">\x3c!-- Image file --\x3e<div class="form-group input-image input-image-alt"><label for="newItemImageFile">Image</label><div class="input-image-control input-image-note input-image-trigger" style="width: 320px;height:320px" ng-hide="showimagebtns || Properties[1].Value.Image.image" ng-click="showimagebtns = true"><div class="icon icon-upload"><span>Click here to upload.</span><small>(320 x 320 px)</small></div></div><div class="input-image-control input-image-buttons" ng-show="showimagebtns" style="display:block;background-size:cover;cursor: pointer ; background-repeat: no-repeat; background-image: url(\'{{Properties[1].Value.Image.image?Properties[1].Value.Image.image:\'\'}}\')"><button type="button" ng-click="OpenBingSearch()" class="btn icon icon-with-text icon-globe btn-primary btn-block input-image-button-web">From Web</button> <button type="button" ng-click="OpenFile()" class="btn icon icon-with-text icon-computer btn-primary btn-block input-image-trigger input-image-button-computer">From Computer</button> <button type="button" ng-show="showimagebtns && Properties[1].Value.Image.image" class="btn btn-primary btn-block input-image-button-close" ng-click="Properties[1].Value.Image.image = null">Delete</button> <button type="button" ng-click="showimagebtns = false" class="btn btn-outline-primary btn-block input-image-button-close">Cancel</button></div><div ng-click="showimagebtns=true" class="input-image-control input-image-buttons" ng-show="!showimagebtns && Properties[1].Value.Image.image" style="background-size:cover; cursor: pointer ; background-repeat: no-repeat; background-image: url(\'{{Properties[1].Value.Image.image?Properties[1].Value.Image.image:\'\'}}\'); padding-top: 100px;padding-left:20px;padding-right: 20px;max-height: 320px;max-width:320px;background-color: #d3cfce;vertical-align: middle"></div><input type="file" id="newRulesetImage" name="newRulesetImage" onchange="angular.element(this).scope().ItemImageUpload(this)" class="form-control-file"></div>\x3c!-- End of image file --\x3e</div></div><div class="form-separator"></div><div class="form-row"><div class="col-12 col-md-6"><div class="form-group" ng-repeat="property in Properties" ng-if="property.Name != \'Quantity\' && (property.TypeId == 7 || property.TypeId == 7 || property.TypeId == 14)"><label for="newItemStats">{{property.Name}} {{property.TypeId == 14?"("+property.Value.Text+")":""}} {{property.TypeId == 7?"("+property.Value.Weight.units.selectedUnit+")":""}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div></div><div class="col-12 col-md-6"><div class="form-group" ng-repeat="property in Properties" ng-if="property.Name == \'Rarity\'"><label for="newItemStats">{{property.Name}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div></div></div><div class="form-row"><div class="col-12 col-md-6">\x3c!-- Item bolume --\x3e<div class="form-group"><label>Volume</label><div class="form-row"><div class="col"><input type="text" id="newItemHeight" class="form-control" placeholder="Height"></div><div class="col"><input type="text" id="newItemWidth" class="form-control" placeholder="Width"></div><div class="col"><input type="text" id="newItemVolume" class="form-control" placeholder="Volume"></div></div></div>\x3c!-- End of item volume --\x3e</div><div class="col-12 col-md-6"><div class="col-12 col-md-6"><div class="form-group" ng-repeat="property in Properties" ng-if="property.Name == \'Container\'"><label for="newItemStats">{{property.Name}}</label><rpgsmithtype info="property" fullscope="Properties" mode="\'{{OperationTypeMode}}\'"></rpgsmithtype></div></div></div></div><div class="form-separator"></div><div class="form-row"><div class="col">\x3c!-- Item indicators --\x3e<fieldset class="form-group input-list input-list-wrap indicators"><legend>Indicators</legend><ul class="input-list-items">\x3c!--<li class="form-check">\r\n\t\t\t\t\t\t\t<label class="form-check-label">\r\n\t\t\t\t\t\t\t\t<input class="form-check-input" type="checkbox" name="newItemIndicators[]">\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t<em class="icon icon-with-text icon-visible icon-rsi">Visible</em>\r\n\t\t\t\t\t\t\t\t\t<i class="icon"></i>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</li>--\x3e<li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="newItemIndicators[]"> <span><em class="icon icon-with-text icon-consumable icon-rsi">Consumable</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="newItemIndicators[]"> <span><em class="icon icon-with-text icon-container icon-rsi">Container</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="newItemIndicators[]"> <span><em class="icon icon-with-text icon-magical icon-rsi">Magical</em> <i class="icon"></i></span></label></li>\x3c!--<li class="form-check">\r\n\t\t\t\t\t\t\t<label class="form-check-label">\r\n\t\t\t\t\t\t\t\t<input class="form-check-input" type="checkbox" name="newItemIndicators[]">\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t<em class="icon icon-with-text icon-equipped icon-rsi">Equipped</em>\r\n\t\t\t\t\t\t\t\t\t<i class="icon"></i>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</li>--\x3e<li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="newItemIndicators[]"> <span><em class="icon icon-with-text icon-unidentified icon-rsi">Unidentified</em> <i class="icon"></i></span></label></li></ul></fieldset>\x3c!-- End of item indicators --\x3e</div></div><div class="form-separator"></div>\x3c!--<div class="form-row">\r\n\t\t\t<div class="col-12 col-md-6">\r\n\t\t\t\t\r\n\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t<label for="newItemSpells">Associated Items(s)</label>\r\n\t\t\t\t\t<span class="input-group-btn">\r\n\t\t\t\t\t\t<button type="button" class="btn icon icon-search btn-simple-primary" ng-click="OpenAssociatedSpells()"></button>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<input type="text" id="newItemSpells" class="form-control" placeholder="Search spell(s)">\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div class="col-12 col-md-6">\r\n\t\t\t\t\r\n\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t<label for="newItemAbilities">Associated abilit(ies)</label>\r\n\t\t\t\t\t<span class="input-group-btn">\r\n\t\t\t\t\t\t<button type="button" class="btn icon icon-search btn-simple-primary" ng-click="OpenAssociatedAbilities()"></button>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<input type="text" id="newItemAbilities" class="form-control" placeholder="Search abilit(ies)">\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>--\x3e</div><div class="modal-footer"><button type="button" data-dismiss="modal" ng-click="cancel()" class="btn btn-simple-accent">Cancel</button> <button type="button" ng-click="Create()" class="btn btn-accent">{{buttontext}}</button></div>\x3c!--</div>\r\n\t</div>--\x3e</ng-form>'),
e.put("/views/dialogs/defaultdiceselection.html",'<div class="popup-dice"><div class="modal-header"><h5 class="modal-title" id="dicePopupTitle">Dice</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close" ng-click="cancel()"></button></div><div class="modal-body"><form id="diceareaforselection">\x3c!-- Saved commands --\x3e<div id="savedattackoptions" class="form-group saved-commands"><label>Saved Commands</label><div class="command-list"><ul><li ng-repeat="name in DiceList"><button type="button" class="btn" ng-click="ShowCommand(name.Name)">{{name.Name}}</button></li></ul></div></div>\x3c!-- End of saved commands --\x3e\x3c!-- New command (initial) --\x3e<div class="form-group new-command initial"><label>Command*</label>\x3c!-- Command console --\x3e<div class="command-console form-row"><div class="col-12 col-md-9"><input type="text" id="customset" class="form-control" placeholder="Enter the comand here or click on the dice to generate"></div><div class="d-flex col-12 col-md-3"><button type="button" id="addmod" class="btn btn-primary btn-block" ng-click="AddNumericCorestats()">Add Mod</button></div></div>\x3c!-- End of command console --\x3e\x3c!-- Dice canvas --\x3e<div class="command-canvas"><ul><li><button type="button" class="btn icon icon-rsi icon-d4-thin" onclick="dicecommandsearch(\'d4\')"><span>D4 <em>4</em></span></button></li><li><button type="button" class="btn icon icon-rsi icon-d6-thin" onclick="dicecommandsearch(\'d6\')"><span>D6 <em>6</em></span></button></li><li><button type="button" class="btn icon icon-rsi icon-d8-thin" onclick="dicecommandsearch(\'d8\')"><span>D8 <em>8</em></span></button></li><li><button type="button" class="btn icon icon-rsi icon-d10-thin" onclick="dicecommandsearch(\'d10\')"><span>D10 <em>10</em></span></button></li><li><button type="button" class="btn icon icon-rsi icon-d12-thin" onclick="dicecommandsearch(\'d12\')"><span>D12 <em>12</em></span></button></li><li><button type="button" class="btn icon icon-rsi icon-d20-thin" onclick="dicecommandsearch(\'d20\')"><span>D20 <em>20</em></span></button></li><li><button type="button" class="btn icon icon-rsi icon-d10-thin" onclick="dicecommandsearch(\'d100\')"><span>D100 <em>100</em></span></button></li><li><button type="button" class="btn icon icon-reset" onclick="diceCommandClear()"></button></li></ul></div>\x3c!-- End of dice canvas --\x3e\x3c!-- Dice actions --\x3e<div class="command-actions form-row"><div class="d-flex col-12 col-md-6"><button type="button" id="defaultDiceSelect" class="btn btn-accent btn-block" ng-click="DefaultDiceSelect()">Ok</button></div><div class="d-flex col-12 col-md-6"><button type="button" id="dicesavecommand" class="btn btn-accent btn-block" ng-click="DiceSaveCommand()">Save</button></div><div class="d-flex col-12 col-md-6"><button type="button" id="diceRollTrigger" class="btn btn-accent btn-block" onclick="DiceCommandRoll()">Roll</button></div></div>\x3c!-- End of dice actions --\x3e</div>\x3c!-- End of new command (initial) --\x3e\x3c!-- Last rolled result --\x3e <input type="text" id="set" style="background-color: rgba(3, 169, 244, 0.5);display:none"><div id="lastDiceRollResult" class="command-last-result form-group"><label>Last Result</label><p><strong><input id="lastrunresult" type="text" class="form-control" value="Dice not rolled yet..." disabled="disabled"></strong></p></div>\x3c!-- End of last rolled result --\x3e</form><div id="diceareaforroll" style="display:none">\x3c!--<div id="info_div" style="display: none">\r\n\r\n            <div class="row">\r\n                <div class="col-md-12">\r\n                    <p>Click Ok to Continue (or) Click Roll Again or drag on the dice to roll dice again.</p>\r\n                </div>\r\n            </div>\r\n\r\n\r\n\r\n            \x3c!--<div class="center_field">\r\n                <span id="label"></span>\r\n            </div>--\x3e\x3c!--<div class="center_field">\r\n                <div class="bottom_field">\r\n                    <span id="labelhelp">click to continue or tap and drag again</span>\r\n                </div>\r\n            </div>\r\n\r\n        </div>--\x3e\x3c!--  <div id="selector_div" style="display: none">\r\n             <div class="center_field">\r\n                 <div id="sethelp">\r\n\r\n                 </div>\r\n             </div>\r\n            <div class="center_field">\r\n                 <input type="text" id="set" value="4d6" style="background-color: rgba(3, 169, 244, 0.5);visibility:hidden;" /><br />\r\n                 <button id="throw">Roll</button>\r\n                 <button id="clear">clear</button>\r\n                 <button id="addmod" ng-click="AddNumericCorestats()">Add Mod</button>\r\n                 <button id="defaultdiceselect" ng-click="DefaultDiceSelect()">Ok</button>\r\n                 <button id="dicesavecommand" ng-click="DiceSaveCommand()">Save</button>\r\n             </div>\r\n         </div>--\x3e <input type="text" id="customsetatroll" class="form-control" placeholder="Enter the comand here or click on the dice to generate" disabled="disabled"><div id="canvas"><canvas width="1365" height="345"></canvas></div><div class="popup-dice"><div class="new-command result"><div id="showdicerollresult" class="command-canvas"><ul><li><button class="btn" type="button"><em id="showdicerollresult_d4">0</em> <span class="icon icon-with-text icon-d6 icon-rsi">d4</span></button></li><li><button class="btn" type="button"><em id="showdicerollresult_d6">0</em> <span class="icon icon-with-text icon-d6 icon-rsi">d6</span></button></li><li><button class="btn" type="button"><em id="showdicerollresult_d8">0</em> <span class="icon icon-with-text icon-d12 icon-rsi">d8</span></button></li><li><button class="btn" type="button"><em id="showdicerollresult_d10">0</em> <span class="icon icon-with-text icon-d20 icon-rsi">d10</span></button></li><li><button class="btn" type="button"><em id="showdicerollresult_d12">0</em> <span class="icon icon-with-text icon-d20 icon-rsi">d12</span></button></li><li><button class="btn" type="button"><em id="showdicerollresult_d20">0</em> <span class="icon icon-with-text icon-d20 icon-rsi">d20</span></button></li><li><button class="btn" type="button"><em id="showdicerollresult_d100">0</em> <span class="icon icon-with-text icon-d20 icon-rsi">d100</span></button></li><li><button class="btn" type="button"><em id="showdicerollresult_Sum">0</em></button></li></ul></div></div></div><div class="row"><div class="col-md-12"><input type="text" id="rollresult" class="form-control" value="12"></div></div><div class="command-actions form-row"><div class="d-flex col-12 col-md-6"><button type="button" id="diceShowDiceTrigger" class="btn btn-accent btn-block" onclick="dicerollcomplete()">Show Dice</button></div><div class="d-flex col-12 col-md-6"><button type="button" id="diceRollAgainTrigger" class="btn btn-accent btn-block" onclick="customrolediceagain()">Roll Again</button></div></div></div></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-outline-accent" ng-click="cancel()">Close</button></div></div>'),e.put("/views/dialogs/edit-character.html",'\x3c!--https://github.com/m-e-conroy/angular-dialog-service--\x3e<div class="modal-header"><h4 class="modal-title"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span ng-show="isEdit">Editing {{item.name}}</span> <span ng-show="!isEdit">New Character</span></h4></div><div class="modal-body"><ng-form name="dlg" novalidate role="form"><div class="form-group input-group-lg" ng-class="{true: \'has-error\'}[dlg.name.$dirty && dlg.name.$invalid]"><span class="help-block">Character Name</span> <input type="text" class="form-control" name="name" id="name" ng-model="item.name" required></div><div class="form-group input-group-lg"><span class="help-block">Character Portrait</span><div class="clearfix"><div class="pull-left edit-character-portrait"><img ngf-thumbnail="getThumbNail()" class="edit-character-portrait" ngf-resize="{width: 120, height: 120}"></div><div class="pull-left btn btn-default edit-character-portrait-button" name="file" ng-model="file" ngf-select ngf-resize="{width: 120, height: 120, quality: 0.8, centerCrop: true}" ngf-fix-orientation="true" ngf-pattern="\'image/*\'" ngf-accept="\'image/*\'">Select</div></div><span class="help-block">120px by 120px</span></div><div class="form-group"><span class="help-block">Select RuleSet</span><div class=""><select class="form-control" style="width:52% !important; display:inline-block;margin-right:10px"><option>RuleSet 1</option><option>RuleSet 2</option><option>RuleSet 3</option></select><span>Or</span><div style="display:inline-block;margin-left:14px"><a href="http://localhost:5000/characters/NewRuleSet" ng-click="cancel()" class="btn btn-primary">Add RuleSet</a></div></div></div></ng-form></div><div class="modal-footer" style="border-top:1px solid #fff">\x3c!--<button type="button" class="btn btn-primary" ng-click="NewRuleSet();"><i style="color:#fff;" class="fa fa fa-plus"></i> Add RuleSet</button>--\x3e <button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-primary" ng-click="save()" ng-disabled="(dlg.$dirty && dlg.$invalid) || dlg.$pristine">Save</button></div>'),e.put("/views/dialogs/ExistingRuleset.html",'<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"><\/script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"><\/script><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><style>.mt-20 {\r\n            margin-top: 50px; \r\n            margin-bottom: 50px;\r\n        }\r\n        .mb-20 {\r\n            margin-bottom: 20px;\r\n        }\r\n        .mt-20 {\r\n            margin-top: 20px;\r\n        }\r\n        .lead {\r\n            margin-bottom: 0;\r\n        }\r\n        .panel-success {\r\n            box-shadow: 2px 3px 5px rgba(204, 204, 204, 0.55);\r\n        }\r\n        .panel-success > .panel-heading {\r\n            color: #666;\r\n            background-color: rgba(96, 125, 139, 0.38);\r\n            border-color: #d6e9c6;\r\n        }</style></head><body><pageslide ps-open="menuHamburger.opened" ps-side="left" ps-key-listener="true" ps-zindex="2000" ps-size="200px" ps-auto-close="true" ps-body-class="true"><pageslide-menu menus="menuHamburger.menus" menu-click="menuHamburger.menuClick"></pageslide-menu></pageslide><div class="container mt-20"><div class="row"><div class="panel panel-success"><div class="panel-heading"><h4 class="lead text-center">Existing RuleSet</h4></div><div class="panel-body"><a class="pull-right btn btn-primary btn-md mb-20" ng-href="http://localhost:5000/characters/NewRuleSet">Add Rule Set</a><p id="nodata" class="lead text-center">No RuleSet Available..</p><div id="CoreStateData" style="display:none"><table class="table table-bordered"><thead><tr><th>SNO</th><th>Name</th><th>Type</th></tr></thead><tbody><tr><td>1</td><td>---- No coreset Selected----</td><td>---- No coreset Selected----</td></tr></tbody></table></div></div></div></div></div></body></html>'),e.put("/views/dialogs/Imagetilecontent.html",'<style>.modal-content {\r\n        width: 700px;\r\n        top: 34px;\r\n        left: 72px;\r\n    }</style><div class="notetileView"><div class="modal-header"><h4 class="modal-title" style="text-align:center">{{Content.Value.Imagetile.Name}}</h4></div><div class="modal-body"><div class="row"><div class="col-md-12"><div class="form-horizontal"><img ng-src="{{Content.Value.Imagetile.Imagepath}}" class="img-resposive img_center" width="300" height="500" style="align-content:center"></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-accent" ng-click="cancel()">Close</button>\x3c!--<button type="submit" class="btn btn-primary" ng-click="SaveTile()" ng-disabled="theForm.$invalid">Save</button>--\x3e</div></div>'),e.put("/views/dialogs/manageruleset.html",'<div class="page-rulesets"><div class="popup-new-ruleset-manage"><div class="modal-header"><h6 class="modal-title" id="newRulesetPopupTitle">Rule Set Properties</h6><span class="modal-title">\x3c!--<img style="width: 40px;height: 30px;" ng-src="{{GeneralSettings[2].Value.Image.image?GeneralSettings[2].Value.Image.image:\'/wwwroot/images/not-available.jpg\'}}" onerror="this.src=\'/wwwroot/images/not-available.jpg\'" />--\x3e<label>{{GeneralSettings[0].RulesetName}}</label></span><button type="button" class="btn icon btn-simple-primary download"><i class="fa fa-download" ng-click="ExportRuleSet()" aria-hidden="true"></i></button> <button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close" ng-click="cancel()"></button></div><div class="modal-body"><ul class="list-unstyled"><li>\x3c!--<a href="./Corestats" class="btn icon icon-with-text icon-external btn-accent">Manage Core Stats</a>--\x3e <button type="button" class="btn icon icon-with-text icon-external btn-accent" ng-click="ShowAllRulesetContent(\'General\')">General Settings</button></li><li>\x3c!--<a href="./Corestats" class="btn icon icon-with-text icon-external btn-accent">Manage Core Stats</a>--\x3e <button type="button" class="btn icon icon-with-text icon-external btn-accent" ng-click="ShowAllRulesetContent(\'Corestat\')">Character Stats</button></li><li>\x3c!--<a href="#" class="btn icon icon-with-text icon-external btn-accent" ng-click="ShowAllRulesetContent(\'Items\')">Manage Items</a>--\x3e <button type="button" class="btn icon icon-with-text icon-external btn-accent" ng-click="ShowAllRulesetContent(\'Items\')">Item Templates</button></li><li><button type="button" class="btn icon icon-with-text icon-external btn-accent" ng-click="ShowAllRulesetContent(\'Spells\')">Spells</button></li><li><button type="button" class="btn icon icon-with-text icon-external btn-accent" ng-click="ShowAllRulesetContent(\'Abilities\')">Abilities</button></li></ul></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent" ng-click="cancel()">Cancel</button>\x3c!--<button type="button" class="btn btn-accent" ng-click="save()">Next</button>--\x3e</div></div></div>\x3c!--<toaster-container toaster-options="{\'position-class\': \'toast-top-right\'}" style=" left: 50%; position: fixed;"></toaster-container>--\x3e'),e.put("/views/dialogs/notetilecontent.html",'<style>.modal-content {\r\n        width: 500px;\r\n        top: 34px;\r\n        left: 72px;\r\n    }\r\n\t.modal-footer {\r\n\t\tpadding-top: 5px;\r\n\t}\r\n\tbutton {\r\n\t\tborder-width: 1px;\r\n\t\tborder-color: #ff6a00;\r\n\t}</style><div class="notetileView"><div class="modal-header"><h4 class="modal-title" style="text-align:center">{{Content.Value.Note.Name}}</h4></div><div class="modal-body"><div class="row" style="background-color: white;margin: 3px"><div class="col-md-12"><div class="form-horizontal"><p ng-bind-html="Content.Value.Note.Text"></p></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default-focus" ng-click="cancel()">Close</button>\x3c!--<button type="submit" class="btn btn-primary" ng-click="SaveTile()" ng-disabled="theForm.$invalid">Save</button>--\x3e</div></div>'),e.put("/views/dialogs/ruleset-abilities.html",'<div class="modal-body"><form>\x3c!-- Search query --\x3e<div class="form-group form-group-unlabelled"><span class="input-group-btn"><button type="button" title="Search" data-toggle="tooltip" class="btn icon icon-search btn-simple-primary"></button> </span><input type="text" id="addItemSearchQuery" class="form-control" placeholder="Search items"></div>\x3c!-- End of search query --\x3e\x3c!-- Item rulesets --\x3e<fieldset class="form-group input-list input-list-wrap items"><ul class="input-list-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/boots.jpg" alt="Boots"> <em>Boots</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/bow.jpg" alt="Bow"> <em>Bow</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/golden-ring.jpg" alt="Golden Ring"> <em>Golden Ring</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/halberd.jpg" alt="Halberd"> <em>Halberd</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/shield.jpg" alt="Shield"> <em>Shield</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/silver-ring.jpg" alt="Silver Ring"> <em>Silver Ring</em> <i class="icon"></i></span></label></li></ul></fieldset>\x3c!-- End of item rulesets --\x3e</form></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent">Cancel</button> <button type="button" class="btn btn-accent">Add</button></div>\x3c!--<div class="container body-content item_properties">\r\n\r\n    <div class="row">\r\n        <div class="col-md-8 col-sm-8 table-responsive" style="margin-left:50px;">\r\n            <table class="table">\r\n                <thead>\r\n                    <tr>\r\n                        <th>S.No</th>\r\n                        <th>IMAGE</th>\r\n                        <th>NAME</th>\r\n                        <th>Stats</th>\r\n                        <th>DESCRIPTION</th>\r\n                        <th>Quantity</th>\r\n                        <th>ATTRIBUTES</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td>{{$index + 1}}</td>\r\n                        <td><img ng-src="{{Properties.AbilityProperties[1].Value.Image.image}}" class="img-resposive" width="120" height="120" /></td>\r\n                        <td>{{Properties.AbilityProperties[0].Value.Text.value}}</td>\r\n                        <td>{{Properties.AbilityProperties[2].Value.Text.value}}</td>\r\n                        <td>{{Properties.AbilityProperties[9].Value.Text.value}}</td>\r\n                        <td>{{Properties.AbilityProperties[3].Value.Number.value}}</td>\r\n                        <td>\r\n                            <div class="icon_box"><p style="width:104px;"><span>{{Properties.AbilityProperties[13].Name}}</span> <span> {{Properties.AbilityProperties[13].Value.YesOrNo.value}}</span></p></div>\r\n                            <div class="icon_box"><span>{{Properties.AbilityProperties[17].Value.YesOrNo.value}}</span></div>\r\n                            <div class="icon_box"><span>M</span></div>\r\n\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n        </div>\r\n    </div>\r\n\r\n\r\n\r\n</div>--\x3e'),e.put("/views/dialogs/ruleset-spells.html",'\x3c!-- Add item popup --\x3e\x3c!--<div class="modal fade popup-add-item" id="addItemPopup" tabindex="-1" role="dialog" aria-labelledby="addItemPopupTitle" aria-hidden="true" data-backdrop="static">\r\n\t<div class="modal-dialog" role="document">--\x3e<div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="addItemPopupTitle">Add From Ruleset</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close"></button></div><div class="modal-body"><form>\x3c!-- Search query --\x3e<div class="form-group form-group-unlabelled"><span class="input-group-btn"><button type="button" title="Search" data-toggle="tooltip" class="btn icon icon-search btn-simple-primary"></button> </span><input type="text" id="addItemSearchQuery" class="form-control" placeholder="Search items"></div>\x3c!-- End of search query --\x3e\x3c!-- Item rulesets --\x3e<fieldset class="form-group input-list input-list-wrap items"><ul class="input-list-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/boots.jpg" alt="Boots"> <em>Boots</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/bow.jpg" alt="Bow"> <em>Bow</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/golden-ring.jpg" alt="Golden Ring"> <em>Golden Ring</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/halberd.jpg" alt="Halberd"> <em>Halberd</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/shield.jpg" alt="Shield"> <em>Shield</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/silver-ring.jpg" alt="Silver Ring"> <em>Silver Ring</em> <i class="icon"></i></span></label></li></ul></fieldset>\x3c!-- End of item rulesets --\x3e</form></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent">Cancel</button> <button type="button" class="btn btn-accent">Add</button></div></div>\x3c!--</div>\r\n</div>--\x3e\x3c!-- End of add item popup --\x3e'),e.put("/views/dialogs/RuleSet.html",'<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"><\/script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"><\/script><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><script src="~/Scripts/jquery-1.10.2.min.js"><\/script><script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.js" type="text/javascript"><\/script><style>.lead {\r\n            margin-bottom: 0;\r\n            line-height: normal;\r\n        }\r\n\r\n        .mt-20 {\r\n            margin-top: 50px;\r\n            margin-bottom: 50px;\r\n        }\r\n\r\n        .mb-20 {\r\n            margin-bottom: 20px;\r\n        }\r\n\r\n        .mt-20 {\r\n            margin-top: 20px;\r\n        }\r\n\r\n        .mt-40 {\r\n            margin-top: 40px;\r\n        }\r\n\r\n\r\n        h2, p, h4 {\r\n            color: #777 !important;\r\n        }\r\n\r\n        .panel-success {\r\n            box-shadow: 2px 3px 5px rgba(204, 204, 204, 0.55);\r\n        }\r\n\r\n            .panel-success > .panel-heading {\r\n                color: #000;\r\n                background-color: rgba(96, 125, 139, 0.38);\r\n                border-color: #d6e9c6;\r\n            }\r\n\r\n        .panel-default > .panel-heading {\r\n            color: #000;\r\n            background-color: rgba(96, 125, 139, 0.38);\r\n            border-color: #d6e9c6;\r\n        }</style></head><body><pageslide ps-open="menuHamburger.opened" ps-side="left" ps-key-listener="true" ps-zindex="2000" ps-size="200px" ps-auto-close="true" ps-body-class="true"><pageslide-menu menus="menuHamburger.menus" menu-click="menuHamburger.menuClick"></pageslide-menu></pageslide><div class="container"><div class="row"><div class="panel panel-success mt-20"><div class="panel-heading"><h4 class="lead text-center">Add Rule Set</h4></div><div class="panel-body"><div class=""><div class="form-group"><label class="control-label col-md-4">Default Dice 124</label><div class="col-md-8 mb-20"><select class="form-control"><option>Dice 1</option><option>Dice 2</option></select></div></div></div><div class=""><div class="form-group"><label class="control-label col-md-4">Weight Metric Label</label><div class="col-md-8"><input type="number" min="0" class="form-control"></div></div></div><hr></div><div class="container"><div class="row panel panel-default mt-20"><div class="panel-heading"><h4 class="lead text-center">Character Stats</h4></div><button id="NewCoreState" type="button" style="position: relative;right: 1px;top: -44px" class="pull-right btn btn-primary btn-md" data-toggle="modal" data-target="#myModal"><i style="color:#fff" class="fa fa-plus"></i>&nbsp;Add New Character Stats</button><p id="nodata" class="lead text-center" style="margin-top:10px;margin-bottom:10px">No Character Stats Available..</p><div id="CoreStateData" style="display:none"><table style="width: 93%;margin-top: 2%;margin-left: 4%" class="table table-bordered table-striped" id="tableAttendees"><thead><tr><th width="10%">S.No.</th><th width="30%">Name</th><th width="30%">Type</th><th width="30%">Action</th></tr></thead><tbody>\x3c!-- <tr>\r\n                                        \x3c!--<td>1</td>\r\n                                        <td>---- No coreset Selected----</td>\r\n                                        <td>---- No coreset Selected----</td>\r\n                                    </tr>--\x3e</tbody></table></div></div></div></div></div></div><div class="modal fade" id="myModal" role="dialog"><div class="modal-dialog">\x3c!-- Modal content--\x3e<div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title"><i class="fa fa-plus"></i> Add New Character Stat</h4></div><div class="modal-body"><ng-form name="userForm" novalidate role="form"><div class="form-group"><label class="control-label col-md-4">Name</label><div class="col-md-8 mb-20"><input id="Name" type="text" ng-model="name" class="form-control"></div><span style="color:red" ng-show="myForm.user.$dirty && myForm.user.$invalid"><span ng-show="myForm.user.$error.required">Username is required.</span></span><p ng-show="userForm.name.$invalid && !userForm.name.$pristine" class="help-block">name is required.</p>\x3c!--<span style="color:red;display:none;" id="errorName"></span>--\x3e</div><div class="form-group"><label class="control-label col-md-4">Type</label><div class="col-md-8 mb-20"><input id="type" type="text" ng-model="type" class="form-control"></div><p ng-show="userForm.type.$invalid && !userForm.type.$pristine" class="help-block">Type is required.</p>\x3c!--<span style="color:red;display:none;" id="errorType"></span>--\x3e</div><div class="modal-footer" style="border-top:1px solid #fff"><button type="button" class="btn btn-primary" ng-disabled="myForm.name.$dirty && myForm.name.$invalid ||myForm.type.$dirty && myForm.type.$invalid" data-dismiss="modal" id="click">Save</button> <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button></div></ng-form></div>\x3c!--ng-disabled="(userForm.$dirty && userForm.$invalid) || userForm.$pristine"--\x3e</div></div></div></body></html><script id="personsTmpl" type="text/x-jquery-tmpl"><tr>\r\n        <td>${sno}</td>\r\n        <td>${Name}</td>\r\n        <td>${Type}</td>\r\n        <td>\r\n            <button class="btn btn-primary editclick" type="button" id="Edit_${sno}"><i style="color:#fff" class="fa fa-edit"></i> Edit</button>\r\n            <button class="btn btn-danger Deleteclick" type="button" id="Delete_${sno}"><i style="color:#fff" class="fa fa-remove"></i> Delete</button>\r\n        </td>\r\n    </tr><\/script><script>$(document).ready(function () {\r\n        $("#click").attr("disabled", true);\r\n        var model = sessionStorage.getItem("CoreStatData");\r\n        if (model != "") {\r\n            //alert(model);\r\n        }\r\n    });\r\n    $("#NewCoreState").click(function () {\r\n        $("#click").attr("disabled", true);\r\n        $("#Name").val(\'\');\r\n        $("#type").val(\'\');\r\n    });\r\n    $("#type").keypress(function () {\r\n        $("#click").attr("disabled", false);\r\n    })\r\n    $(\'.editclick\').on(\'click\', \'a\', function () { alert("hit") });\r\n    //$(".editclick").bind("click", function () {\r\n    //  alert("hit")\r\n    //})\r\n    var i = 0; var modelobject = {};\r\n    $(function () {\r\n        $(\'#click\').click(function (e) {\r\n            i = i + 1;\r\n            var model = new Object();\r\n            var array = []; \r\n            // Here you need to get the values using $(\'#id\').val() and fill the model\r\n            if ($("#Name").val() != "" && $("#type").val() != "") {\r\n                model.sno = i;\r\n                model.Name = $("#Name").val();\r\n                model.Type = $("#type").val();\r\n                modelobject.sno = model.sno;\r\n                modelobject.Name = model.Name;\r\n                modelobject.Type = model.Type;\r\n                //sessionStorage.setItem("CoreStatData", array);\r\n                //var model1 = sessionStorage.getItem("CoreStatData");\r\n                //array.push(JSON.stringify(model1));\r\n                $("#Name").val(\'\');\r\n                $("#type").val(\'\');\r\n                $("#nodata").hide();\r\n                $("#CoreStateData").show();\r\n                $("#tableAttendees > tbody").append("<tr><td>" + i + "</td><td>" + model.Name + "</td><td>" + model.Type + "</td><td><button type=\'button\' class=\'btn btn-primary editclick\'><i style=\'color:#fff\' class=\'fa fa-edit\'></i> Edit</button>&nbsp;&nbsp;&nbsp;<button type=\'button\' class=\'btn btn-danger Deleteclick\'><i style=\'color:#fff\' class=\'fa fa-remove\'></i> Delete</button></td></tr>");\r\n              //  $("#personsTmpl").tmpl(model).appendTo("#tableAttendees");\r\n                $("#errorName").hide();\r\n                $("#errorType").hide();\r\n                $("#click").attr("disabled", false);\r\n                return true;\r\n            }\r\n            else if ($("#Name").val() == "") {\r\n                $("#errorName").show();\r\n                $("#errorName").html("Required");\r\n                e.preventDefault();\r\n                return false;\r\n            }\r\n            else {\r\n                $("#errorType").show();\r\n                $("#errorType").html("Required");\r\n                e.preventDefault();\r\n                return false;\r\n            }\r\n        });\r\n\r\n    });<\/script>'),
e.put("/views/dialogs/rulesetgeneralsettings.html",'<div class="modal-header"><h5 class="modal-title" id="newRulesetPopupTitle">{{pageName}}</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close" ng-click="cancel()"></button></div><div class="modal-body table_align" style="overflow-y: auto; max-height: 670px;max-width: 600px"><ng-form name="form"><div class="form-row"><div class="col">\x3c!-- RuleSet name --\x3e<div class="form-group"><label for="newRulesetCharacterName">Name (required)</label><input type="text" class="form-control" name="name" id="name" ng-model="GeneralSettings[0].RulesetName" ng-class="{red: form.name.$dirty && form.name.$error.required}" ng-disabled="{{DisableName}}" required></div>\x3c!-- End of RuleSet name --\x3e</div></div><div class="form-row"><div class="col"><div class="form-group"><label for="newRulesetDice">{{GeneralSettings[6].Name}}</label><rpgsmithrulesettype info="GeneralSettings[6]" mode="\'{{Disabled}}\'"></rpgsmithrulesettype></div></div></div><div class="form-row"><div class="col"><div class="form-group"><label for="newRulesetDice">{{GeneralSettings[0].Name}}</label><rpgsmithrulesettype info="GeneralSettings[0]" mode="\'{{Disabled}}\'"></rpgsmithrulesettype></div></div></div><div class="form-row"><div class="col" style="padding-right: 10px"><div class="form-group"><label for="newRulesetDice">{{GeneralSettings[3].Name}}</label><rpgsmithrulesettype info="GeneralSettings[3]" mode="\'{{Disabled}}\'"></rpgsmithrulesettype></div><div class="form-group"><label for="newRulesetDice">{{GeneralSettings[1].Name}}</label><rpgsmithrulesettype info="GeneralSettings[1]" mode="\'{{Disabled}}\'"></rpgsmithrulesettype></div><div class="form-group"><label for="newRulesetDice">{{GeneralSettings[4].Name}}</label><rpgsmithrulesettype info="GeneralSettings[4]" mode="\'{{Disabled}}\'"></rpgsmithrulesettype></div><div class="form-group"><label for="newRulesetDice">{{GeneralSettings[5].Name}}</label><rpgsmithrulesettype info="GeneralSettings[5]" mode="\'{{Disabled}}\'"></rpgsmithrulesettype></div></div><div class="col">\x3c!-- Ruleset image --\x3e<div class="form-group input-image input-image-alt"><label for="newRulesetImage">Image</label><div class="input-image-control input-image-note input-image-trigger" ng-hide="showimagebtns || GeneralSettings[2].Value.Image.image" ng-click="showimagebtns=true"><div class="icon icon-upload"><span>Click here to upload.</span><small>(320 x 320 px)</small></div></div><div class="input-image-control input-image-buttons" ng-show="showimagebtns" style="display:block;background-size:cover;cursor: pointer ; background-repeat: no-repeat; background-image: url(\'{{GeneralSettings[2].Value.Image.image?GeneralSettings[2].Value.Image.image:\'\'}}\')"><button type="button" ng-click="OpenBingSearch()" class="btn icon icon-with-text icon-globe btn-primary btn-block input-image-button-web">From Web</button> <button type="button" ng-click="OpenFile()" class="btn icon icon-with-text icon-computer btn-primary btn-block input-image-trigger input-image-button-computer">From Computer</button> <button type="button" ng-show="showimagebtns && GeneralSettings[2].Value.Image.image" class="btn btn-primary btn-block input-image-button-close" ng-click="GeneralSettings[2].Value.Image.image = null">Delete</button> <button type="button" ng-click="showimagebtns = false" class="btn btn-outline-primary btn-block input-image-button-close">Cancel</button></div><div ng-click="showimagebtns=true" class="input-image-control input-image-buttons" ng-show="!showimagebtns && GeneralSettings[2].Value.Image.image" style="background-size:cover; cursor: pointer ; background-repeat: no-repeat; background-image: url(\'{{GeneralSettings[2].Value.Image.image?GeneralSettings[2].Value.Image.image:\'\'}}\'); padding-top: 100px;padding-left:20px;padding-right: 20px;max-height: 320px;max-width:320px;background-color: #d3cfce;vertical-align: middle"></div><input type="file" id="newRulesetImage" onchange="angular.element(this).scope().ItemImageUpload(this)" class="form-control-file"></div>\x3c!-- End of ruleset image --\x3e\x3c!-- Ruleset image --\x3e\x3c!--<div class=" form-group input-image input-image-alt">\r\n\t\t\t\t\t<label for="newRulesetImage">Image</label>\r\n\t\t\t\t\t<div class="input-image-control input-image-note input-image-trigger" ng-hide="showimagebtns || GeneralSettings[2].Value.Image.image" ng-click="showimagebtns = true" style="padding-top: 60px;max-height: 320px;max-width:320px;background-color: #d3cfce;vertical-align: middle; ">\r\n\t\t\t\t\t\t<div class="icon icon-upload"><span>Click here to upload.</span><small>(320 x 320 px)</small></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="input-image-control" ng-show="showimagebtns"   style="background-size:cover;cursor: pointer ; background-repeat: no-repeat; background-image: url(\'{{GeneralSettings[2].Value.Image.image?GeneralSettings[2].Value.Image.image:\'\'}}\'); top:0px;max-height: 320px;max-width:320px;background-color: #d3cfce;">\r\n\t\t\t\t\t\t<button type="button" ng-click="OpenBingSearch()" class="btn icon icon-with-text icon-globe btn-primary btn-block input-image-button-web">From Web</button>\r\n\t\t\t\t\t\t<button type="button" ng-click="OpenFile()" class="btn icon icon-with-text icon-computer btn-primary btn-block input-image-trigger input-image-button-computer">From Computer</button>\r\n\t\t\t\t\t\t<button type="button" ng-show="showimagebtns && GeneralSettings[2].Value.Image.image" class="btn btn-primary btn-block input-image-button-close" ng-click="GeneralSettings[2].Value.Image.image = null">Delete</button>\r\n\t\t\t\t\t\t<button type="button" class="btn btn-outline-primary btn-block input-image-button-close" ng-click="showimagebtns = false">Cancel</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div ng-click="showimagebtns=true" class="input-image-control input-image-buttons" ng-show="!showimagebtns && GeneralSettings[2].Value.Image.image" style="background-size:cover; cursor: pointer ; background-repeat: no-repeat; background-image: url(\'{{GeneralSettings[2].Value.Image.image?GeneralSettings[2].Value.Image.image:\'\'}}\'); padding-top: 100px;padding-left:20px;padding-right: 20px;max-height: 320px;max-width:320px;background-color: #d3cfce;vertical-align: middle">\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type="file" id="newRulesetImage" onchange="angular.element(this).scope().ItemImageUpload(this)" class="form-control-file">--\x3e\x3c!--<div ng-show="GeneralSettings[2].Value.Image.image" class="input-image-control input-image-buttons" style="padding: 0px;max-height: 320px;max-width:320px;background-color: #d3cfce;vertical-align: middle">\r\n\t\t\t\t\t\t<img class="card-img" ng-src="{{GeneralSettings[2].Value.Image.image?GeneralSettings[2].Value.Image.image:\'/wwwroot/images/not-available.jpg\'}}" onerror="this.src=\'/wwwroot/images/not-available.jpg\'" alt="{{GeneralSettings[0].RulesetName}}" ng-click="showimagebtns = true" />\r\n\t\t\t\t\t</div>\t\t\t\t\t\r\n\t\t\t\t</div>--\x3e\x3c!-- End of ruleset image --\x3e\x3c!--<rpgsmithrulesettype info="GeneralSettings[2]" mode="\'{{Disabled}}\'"></rpgsmithrulesettype>--\x3e</div></div></ng-form></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-accent" ng-click="ManageRuleset()">{{buttontext}}</button></div><style>.modal-dialog .modal-lg .modal-content {\r\n\t\tmax-width: 600px;\r\n\t\theight: 750px;\r\n\t}\r\n\t.modal-content {\r\n\t\tmax-width: 600px;\r\n\t\theight:780px;\r\n\t}\r\n\t.input-image-control {\r\n\t\twidth: 320px;\r\n\t\theight: 320px;\r\n\t\tbackground-color: #d3cfce;\r\n\t}</style>'),e.put("/views/dialogs/rulesetimport.html",'<div class="modal-header"><h5 class="modal-title ng-binding" id="newCharacterPopupTitle"><i class="fa fa-upload" aria-hidden="true"></i>&nbsp; Ruleset Import</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close" ng-click="cancel()"></button></div><div class="modal-body"><form name="RuleSetImportForm" novalidate><div class="form-row"><div class="col"><div class="form-group"><label for="newRulesetCharacterName">Name (required)</label><input type="text" class="form-control ng-pristine ng-untouched ng-empty ng-invalid ng-invalid-required" name="name" id="name" ng-model="RuleSetName" ng-class="{red: dlg.name.$dirty &amp;&amp; dlg.name.$error.required}" required="" style=""></div></div></div><div class="form-row"><div class="col"><div class="form-group"><input type="file" class="ng-pristine ng-untouched ng-empty ng-invalid ng-invalid-required" onchange="angular.element(this).scope().rulesetFileUpload(this)" accept=".zip"></div></div></div></form></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-accent" ng-click="uploadFile()" ng-disabled="RuleSetImportForm.$invalid">Upload</button></div>'),e.put("/views/dialogs/ruleset_itemproperties.html",'<div class="modal-body"><form>\x3c!-- Search query --\x3e<div class="form-group form-group-unlabelled"><span class="input-group-btn"><button type="button" title="Search" data-toggle="tooltip" class="btn icon icon-search btn-simple-primary"></button> </span><input type="text" id="addItemSearchQuery" class="form-control" placeholder="Search items"></div>\x3c!-- End of search query --\x3e\x3c!-- Item rulesets --\x3e<fieldset class="form-group input-list input-list-wrap items"><ul class="input-list-items"><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/boots.jpg" alt="Boots"> <em>Boots</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/bow.jpg" alt="Bow"> <em>Bow</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/golden-ring.jpg" alt="Golden Ring"> <em>Golden Ring</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/halberd.jpg" alt="Halberd"> <em>Halberd</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/shield.jpg" alt="Shield"> <em>Shield</em> <i class="icon"></i></span></label></li><li class="form-check"><label class="form-check-label"><input class="form-check-input" type="checkbox" name="addItemItems[]"> <span><img src="./assets/images/items/silver-ring.jpg" alt="Silver Ring"> <em>Silver Ring</em> <i class="icon"></i></span></label></li></ul></fieldset>\x3c!-- End of item rulesets --\x3e</form></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent">Cancel</button> <button type="button" class="btn btn-accent">Add</button></div>'),e.put("/views/dialogs/SelectTileBorder.html",'<div class="modal-content_new" id="selectTile"><div class="modal-header"><h5 class="modal-title">Edit Borders</h5><button type="button" class="btn icon icon-cross btn-simple-primary close" ng-click="cancel()"></button></div><div class="modal-body"><div class="container"><div class="row"><div class="col-md-12 form-horizontal"><div class="form-group"><label class="control-label col-md-4 col-xs-4">Style</label><div class="col-md-8 col-xs-8"><select class="form-control" ng-options="item.Id as item.Name for item in TileBorders.StyleList" ng-model="TileBorders.style"><option value="">--Select--</option>\x3c!--<option ng-repeat="x in TileBorders.StyleList">{{x.Name}}</option>--\x3e</select></div></div><div class="form-group"><label class="control-label col-md-4 col-xs-4">Color</label><div class="col-md-8 col-xs-8"><div class="input-group"><input type="text" id="bordercolor" color-picker color-picker-model="var" ng-model="TileBorders.color" class="form-control">\x3c!--<input id="email" type="text" value="{{var}}" color-picker color-picker-model="var" class="form-control" name="email" placeholder="" style="z-index:1">\r\n                                <span class="input-group-addon" color-picker color-picker-model="var"><i class="glyphicon glyphicon-user"></i></span>--\x3e</div></div></div><div class="form-group"><label class="control-label col-md-4 col-xs-4">Width</label><div class="col-md-8 col-xs-8"><select class="form-control" ng-options="item.Id as item.Name for item in TileBorders.WidthList" ng-model="TileBorders.width">\x3c!--<option ng-repeat="x in TileBorders.WidthList">{{x.Name}}</option>--\x3e<option value="">--Select--</option></select></div></div><div class="form-group"><label class="control-label col-md-4 col-xs-4">Radius</label><div class="col-md-8 col-xs-8"><select class="form-control" ng-options="item.Id as item.Name for item in TileBorders.RadiusList" ng-model="TileBorders.radius">\x3c!--<option ng-repeat="x in TileBorders.RadiusList">{{x.Name}}</option>--\x3e<option value="">--Select--</option></select></div></div><div class="form-group"><label class="control-label col-md-4 col-xs-4">Shadow</label><div class="col-md-8 col-xs-8"><select class="form-control" ng-options="item.Id as item.Name for item in TileBorders.ShadowList" ng-model="TileBorders.shadow">\x3c!--<option ng-repeat="x in TileBorders.ShadowList">{{x.Name}}</option>--\x3e<option value="">--Select--</option></select></div></div></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="SaveTileBorder()">Ok</button> <button type="button" class="btn btn-default" ng-click="cancel()">Close</button></div></div>'),e.put("/views/dialogs/SelectTileTitleBackground.html",'<script src="/Content/colopicker/lib/color-picker.js"><\/script><div class="modal-header"><button type="button" class="close" ng-click="cancel()">&times;</button><h4 class="modal-title" style="padding-right: 635px">Edit Border</h4></div><div class="modal-body"><div class="container"><div class="row"><div class="form-group"><label class="control-label col-md-4 col-xs-4">Title Text</label><div class="col-md-8 col-xs-8"><div class="input-group"><input type="text" id="titletextcolor" color-picker color-picker-model="var" ng-model="TileBorders.titletextcolor" class="form-control">\x3c!--<input id="email" type="text" value="{{var}}" color-picker color-picker-model="var" class="form-control" name="email" placeholder="" style="z-index:1">\r\n                <span class="input-group-addon" color-picker color-picker-model="var"><i class="glyphicon glyphicon-user"></i></span>--\x3e</div></div></div><div class="form-group"><label class="control-label col-md-4 col-xs-4">Title Background</label><div class="col-md-8 col-xs-8"><div class="input-group"><input type="text" id="titlebackgroundcolor" color-picker color-picker-model="var" ng-model="TileBorders.titlebackgroundcolor" class="form-control">\x3c!--<input id="email" type="text" value="{{var}}" color-picker color-picker-model="var" class="form-control" name="email" placeholder="" style="z-index:1">\r\n                <span class="input-group-addon" color-picker color-picker-model="var"><i class="glyphicon glyphicon-user"></i></span>--\x3e</div></div></div><div class="form-group"><label class="control-label col-md-4 col-xs-4">Body Text</label><div class="col-md-8 col-xs-8"><div class="input-group"><input type="text" id="bodytextcolor" color-picker color-picker-model="var" ng-model="TileBorders.bodytextcolor" class="form-control">\x3c!--<input id="email" type="text" value="{{var}}" color-picker color-picker-model="var" class="form-control" name="email" placeholder="" style="z-index:1">\r\n                <span class="input-group-addon" color-picker color-picker-model="var"><i class="glyphicon glyphicon-user"></i></span>--\x3e</div></div></div><div class="form-group"><label class="control-label col-md-4 col-xs-4">Body Background</label><div class="col-md-8 col-xs-8"><div class="input-group"><input type="text" id="bodybackgroundColor" color-picker color-picker-model="var" ng-model="TileBorders.bodybackgroundColor" class="form-control">\x3c!--<input id="email" type="text" value="{{var}}" color-picker color-picker-model="var" class="form-control" name="email" placeholder="" style="z-index:1">\r\n                <span class="input-group-addon" color-picker color-picker-model="var"><i class="glyphicon glyphicon-user"></i></span>--\x3e</div></div></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="SaveTileBackgrounds()">Ok</button> <button type="button" class="btn btn-default" ng-click="cancel()">Close</button></div>'),e.put("/views/dialogs/showalltiles.html",'<div class="modal-header"><h4 class="modal-title"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span>Select Tile</span></h4></div><div class="modal-body"><ng-form name="dlg" novalidate role="form">\x3c!--<div class="form-group pb-10">\r\n            \r\n            <label class="control-label col-md-4">\r\n                <span class="help-block">Select Tile Type <span class="errorColor">*</span></span>\r\n            </label>\r\n            <div class="col-md-8 mb-20">\r\n                <select name="corestattype" ng-change="" class="form-control" ng-options="item.TileId as item.TileType for item in tileTypes" ng-model="tileTypes.TileId" ng-class="{red: dlg.corestattype.$dirty && dlg.corestattype.$error.required}" required>\r\n                    <option value="">--Select--</option>\r\n                </select>\r\n            </div>\r\n        </div>--\x3e<div class="select-tile-tiles select-tile-characters" ng-class="{picker: tilePickerApi.selecting}"><ul><li ng-click="selecttiletype(tiletype)" title="{{tiletype.TileType}}" class="" ng-repeat="tiletype in tileTypes"><img ng-src="{{tiletype.TileType===\'ABILITY\'?\'attribute\':tiletype.TileType}}" ng-style="newstyles(c)" class="img-resposive ng-pristine ng-untouched ng-valid ng-empty"> <span class="name">{{tiletype.TileType}}</span></li></ul></div></ng-form></div>'),e.put("/views/dialogs/tab-rename.html",'\x3c!--https://github.com/m-e-conroy/angular-dialog-service--\x3e<div class="modal-header"><h4 class="modal-title"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>{{TabHeading}}</h4></div><div class="modal-body"><ng-form name="dlg" novalidate role="form"><div class="form-group pb-10"><label class="control-label col-md-4">Name</label><div class="col-md-8 mb-20"><input name="tabname" type="text" ng-model="Tab.TabName" class="form-control" required> <span style="color:red" ng-show="dlg.tabname.$dirty && dlg.tabname.$invalid"><span ng-show="dlg.tabname.$error.required">Name is required.</span></span></div></div>\x3c!--<ng-form name="dlg" novalidate role="form">\r\n            <div class="form-group input-group-lg" ng-class="{true: \'has-error\'}[dlg.name.$dirty && dlg.name.$invalid]">\r\n                <span class="help-block">Enter a name</span>\r\n                <input type="text" class="form-control" name="name" id="name" ng-model="name" ng-keyup="hitEnter($event)" required>\r\n            </div>\r\n        </ng-form>--\x3e</ng-form></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-primary" ng-click="save()" ng-disabled="(dlg.$dirty && dlg.$invalid) || dlg.$pristine">{{ButtonText}}</button></div>'),e.put("/views/dialogs/tab-reorder.html",'\x3c!--https://github.com/m-e-conroy/angular-dialog-service--\x3e<div class="modal-header"><h4 class="modal-title"><i class="fa fa-bars" aria-hidden="true"></i> Reorder</h4></div><div class="modal-body"><ul ui-sortable ng-model="items" class="reorder-tab-list"><li ng-repeat="item in items"><i class="fa fa-bars" aria-hidden="true"></i> {{ item.TabName }}</li></ul></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-primary" ng-click="save()">Save</button></div>'),
e.put("/views/dialogs/termsAndServices.html",'<div class="modal-header"><h5 class="modal-title" id="newCharacterPopupTitle">TERMS AND SERVICES</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close" ng-click="cancel()"></button></div><div class="modal-body table_align" style="overflow-y: auto; max-height: 600px"><form name="characterForm" novalidate><div class="form-row"><div class="col">\x3c!--<object type="application/pdf" data="../../images/TermsConditions-rpgsmith.pdf" width="100%" height="500" style="height: 85vh;">No Support</object>--\x3e<h4>RPGSMITH, LLC</h4><hr><h5>Terms and Conditions</h5><h6>Last updated: December 21, 2017</h6><p>Please read these Terms and Conditions ("Terms", "Terms and Conditions") carefully before using the https://app.rpgsmith.com website (the "Service") operated by RPGSMITH, LLC ("us", "we", or "our").</p><p>Your access to and use of the Service is conditioned upon your acceptance of and compliance with these Terms. These Terms apply to all visitors, users and others who wish to access or use the Service.</p><p>By accessing or using the Service you agree to be bound by these Terms. If you disagree with any part of the terms then you do not have permission to access the Service.</p><h5>Communications</h5><p>By creating an Account on our service, you agree to subscribe to newsletters, marketing or promotional materials and other information we may send. However, you may opt out of receiving any, or all, of these communications from us by following the unsubscribe link or instructions provided in any email we send.</p><h5>Purchases</h5><p>If you wish to purchase any product or service made available through the Service ("Purchase"), you may be asked to supply certain information relevant to your Purchase including, without limitation, your credit card number, the expiration date of your credit card, your billing address, and your shipping information.</p><p>You represent and warrant that: (i) you have the legal right to use any credit card(s) or other payment method(s) in connection with any Purchase; and that (ii) the information you supply to us is true, correct and complete.</p><p>The service may employ the use of third party services for the purpose of facilitating payment and the completion of Purchases. By submitting your information, you grant us the right to provide the information to these third parties subject to our Privacy Policy. We reserve the right to refuse or cancel your order at any time for reasons including but not limited to: product or service availability, errors in the description or price of the product or service, error in your order or other reasons. We reserve the right to refuse or cancel your order if fraud or an unauthorized or illegal transaction is suspected.</p><h5>Availability, Errors and Inaccuracies</h5><p>We are constantly updating product and service offerings on the Service. We may experience delays in updating information on the Service and in our advertising on other web sites. The information found on the Service may contain errors or inaccuracies and may not be complete or current. Products or services may be mispriced, described inaccurately, or unavailable on the Service and we cannot guarantee the accuracy or completeness of any information found on the Service.</p><p>We therefore reserve the right to change or update information and to correct errors, inaccuracies, or omissions at any time without prior notice.</p><h5>Contests, Sweepstakes and Promotions</h5><p>Any contests, sweepstakes or other promotions (collectively, "Promotions") made available through the Service may be governed by rules that are separate from these Terms & Conditions. If you participate in any Promotions, please review the applicable rules as well as our Privacy Policy. If the rules for a Promotion conflict with these Terms and Conditions, the Promotion rules will apply.</p><h5>Subscriptions</h5><p>Some parts of the Service are billed on a subscription basis ("Subscription(s)"). You will be billed in advance on a recurring and periodic basis ("Billing Cycle"). Billing cycles are set either on a monthly or annual basis, depending on the type of subscription plan you select when purchasing a Subscription.</p><p>At the end of each Billing Cycle, your Subscription will automatically renew under the exact same conditions unless you cancel it or RPGSMITH, LLC cancels it. You may cancel your Subscription renewal either through your online account management page or by contacting RPGSMITH, LLC customer support team.</p><p>A valid payment method, including credit card or PayPal, is required to process the payment for your Subscription. You shall provide RPGSMITH, LLC with accurate and complete billing information including full name, address, state, zip code, telephone number, and a valid payment method information. By submitting such payment information, you automatically authorize RPGSMITH, LLC to charge all Subscription fees incurred through your account to any such payment instruments.</p><p>Should automatic billing fail to occur for any reason, RPGSMITH, LLC will issue an electronic invoice indicating that you must proceed manually, within a certain deadline date, with the full payment corresponding to the billing period as indicated on the invoice.</p><h5>Should automatic billing fail to occur for any reason, RPGSMITH, LLC will issue an electronic invoice indicating that you must proceed manually, within a certain deadline date, with the full payment corresponding to the billing period as indicated on the invoice.</h5><p>RPGSMITH, LLC may, at its sole discretion, offer a Subscription with a free trial for a limited period of time ("Free Trial"). You may be required to enter your billing information in order to sign up for the Free Trial.</p><p>If you do enter your billing information when signing up for the Free Trial, you will not be charged by RPGSMITH, LLC until the Free Trial has expired. On the last day of the Free Trial period, unless you cancelled your Subscription, you will be automatically charged the applicable Subscription fees for the type of Subscription you have selected. At any time and without notice, RPGSMITH, LLC reserves the right to (i) modify the terms and conditions of the Free Trial offer, or (ii) cancel such Free Trial offer.</p><h5>Fee Changes</h5><p>RPGSMITH, LLC, in its sole discretion and at any time, may modify the Subscription fees for the Subscriptions. Any Subscription fee change will become effective at the end of the then-current Billing Cycle.</p><p>Your continued use of the Service after the Subscription fee change comes into effect constitutes your agreement to pay the modified Subscription fee amount.</p><h5>Refunds</h5><p>Certain refund requests for Subscriptions may be considered by RPGSMITH, LLC on a case-by-case basis and granted in sole discretion of RPGSMITH, LLC.</p><h5>Content</h5><p>Our Service allows you to post, link, store, share and otherwise make available certain information, text, graphics, videos, or other material ("Content"). You are responsible for the Content that you post on or through the Service, including its legality, reliability, and appropriateness.</p><p>By posting Content on or through the Service, You represent and warrant that: (i) the Content is yours (you own it) and/or you have the right to use it and the right to grant us the rights and license as provided in these Terms, and (ii) that the posting of your Content on or through the Service does not violate the privacy rights, publicity rights, copyrights, contract rights or any other rights of any person or entity. We reserve the right to terminate the account of anyone found to be infringing on a copyright.</p><p>You retain any and all of your rights to any Content you submit, post or display on or through the Service and you are responsible for protecting those rights. We take no responsibility and assume no liability for Content you or any third party posts on or through the Service. However, by posting Content using the Service you grant us the right and license to use, modify, publicly perform, publicly display, reproduce, and distribute such Content on and through the Service. You agree that this license includes the right for us to make your Content available to other users of the Service, who may also use your Content subject to these Terms.</p><p>RPGSMITH, LLC has the right but not the obligation to monitor and edit all Content provided by users.</p><p>In addition, Content found on or through this Service are the property of RPGSMITH, LLC or used with permission. You may not distribute, modify, transmit, reuse, download, repost, copy, or use said Content, whether in whole or in part, for commercial purposes or for personal gain, without express advance written permission from us.</p><h5>Accounts</h5><p>When you create an account with us, you guarantee that you are above the age of 18, and that the information you provide us is accurate, complete, and current at all times. Inaccurate, incomplete, or obsolete information may result in the immediate termination of your account on the Service.</p><p>You are responsible for maintaining the confidentiality of your account and password, including but not limited to the restriction of access to your computer and/or account. You agree to accept responsibility for any and all activities or actions that occur under your account and/or password, whether your password is with our Service or a third-party service. You must notify us immediately upon becoming aware of any breach of security or unauthorized use of your account.</p><p>You may not use as a username the name of another person or entity or that is not lawfully available for use, a name or trademark that is subject to any rights of another person or entity other than you, without appropriate authorization. You may not use as a username any name that is offensive, vulgar or obscene.</p><p>We reserve the right to refuse service, terminate accounts, remove or edit content, or cancel orders in our sole discretion.</p><h5>Copyright Policy</h5><p>We respect the intellectual property rights of others. It is our policy to respond to any claim that Content posted on the Service infringes on the copyright or other intellectual property rights ("Infringement") of any person or entity. If you are a copyright owner, or authorized on behalf of one, and you believe that the copyrighted work has been copied in a way that constitutes copyright infringement, please submit your claim via email to Legal@RPGSmith.com, with the subject line: "Copyright Infringement" and include in your claim a detailed description of the alleged Infringement as detailed below, under "DMCA Notice and Procedure for Copyright Infringement Claims"</p><p>You may be held accountable for damages (including costs and attorneys\' fees) for misrepresentation or bad-faith claims on the infringement of any Content found on and/or through the Service on your copyright.</p><h5>DMCA Notice and Procedure for Copyright Infringement Claims</h5><p>You may submit a notification pursuant to the Digital Millennium Copyright Act (DMCA) by providing our Copyright Agent with the following information in writing (see 17 U.S.C 512(c)(3) for further detail):<ul><li>an electronic or physical signature of the person authorized to act on behalf of the owner of the copyright\'s interest;</li><li>a description of the copyrighted work that you claim has been infringed, including the URL (i.e., web page address) of the location where the copyrighted work exists or a copy of the copyrighted work;</li><li>identification of the URL or other specific location on the Service where the material that you claim is infringing is located;</li><li>your address, telephone number, and email address;</li><li>a statement by you that you have a good faith belief that the disputed use is not authorized by the copyright owner, its agent, or the law;</li><li>a statement by you, made under penalty of perjury, that the above information in your notice is accurate and that you are the copyright owner or authorized to act on the copyright owner\'s behalf.</li></ul>You can contact our Copyright Agent via email at Legal@RPGSmith.com</p><h5>Intellectual Property</h5><p>The Service and its original content (excluding Content provided by users), features and functionality are and will remain the exclusive property of RPGSMITH, LLC and its licensors. The Service is protected by copyright, trademark, and other laws of both the United States and foreign countries. Our trademarks and trade dress may not be used in connection with any product or service without the prior written consent of RPGSMITH, LLC.</p><h5>Links To Other Web Sites</h5><p>Our Service may contain links to third party web sites or services that are not owned or controlled by RPGSMITH, LLC RPGSMITH, LLC has no control over, and assumes no responsibility for the content, privacy policies, or practices of any third party web sites or services. We do not warrant the offerings of any of these entities/individuals or their websites.</p><p>You acknowledge and agree that RPGSMITH, LLC shall not be responsible or liable, directly or indirectly, for any damage or loss caused or alleged to be caused by or in connection with use of or reliance on any such content, goods or services available on or through any such third party web sites or services.</p><p>We strongly advise you to read the terms and conditions and privacy policies of any third party web sites or services that you visit.</p><h5>Termination</h5><p>We may terminate or suspend your account and bar access to the Service immediately, without prior notice or liability, under our sole discretion, for any reason whatsoever and without limitation, including but not limited to a breach of the Terms.</p><p>If you wish to terminate your account, you may simply discontinue using the Service.</p><p>All provisions of the Terms which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity and limitations of liability.</p><h5>Indemnification</h5><p>You agree to defend, indemnify and hold harmless RPGSMITH, LLC and its licensee and licensors, and their employees, contractors, agents, officers and directors, from and against any and all claims, damages, obligations, losses, liabilities, costs or debt, and expenses (including but not limited to attorney\'s fees), resulting from or arising out of a) your use and access of the Service, by you or any person using your account and password; b) a breach of these Terms, or c) Content posted on the Service.</p><h5>Limitation Of Liability</h5><p>In no event shall RPGSMITH, LLC, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from (i) your access to or use of or inability to access or use the Service; (ii) any conduct or content of any third party on the Service; (iii) any content obtained from the Service; and (iv) unauthorized access, use or alteration of your transmissions or content, whether based on warranty, contract, tort (including negligence) or any other legal theory, whether or not we have been informed of the possibility of such damage, and even if a remedy set forth herein is found to have failed of its essential purpose.</p><h5>Disclaimer</h5><p>Your use of the Service is at your sole risk. The Service is provided on an "AS IS" and "AS AVAILABLE" basis. The Service is provided without warranties of any kind, whether express or implied, including, but not limited to, implied warranties of merchantability, fitness for a particular purpose, non-infringement or course of performance. RPGSMITH, LLC its subsidiaries, affiliates, and its licensors do not warrant that a) the Service will function uninterrupted, secure or available at any particular time or location; b) any errors or defects will be corrected; c) the Service is free of viruses or other harmful components; or d) the results of using the Service will meet your requirements.</p><h5>Exclusions</h5><p>Some jurisdictions do not allow the exclusion of certain warranties or the exclusion or limitation of liability for consequential or incidental damages, so the limitations above may not apply to you.</p><h5>Governing Law</h5><p>These Terms shall be governed and construed in accordance with the laws of Texas, United States, without regard to its conflict of law provisions.</p><p>Our failure to enforce any right or provision of these Terms will not be considered a waiver of those rights. If any provision of these Terms is held to be invalid or unenforceable by a court, the remaining provisions of these Terms will remain in effect. These Terms constitute the entire agreement between us regarding our Service, and supersede and replace any prior agreements we might have had between us regarding the Service.</p><h5>Changes</h5><p>We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material we will provide at least 30 days notice prior to any new terms taking effect. What constitutes a material change will be determined at our sole discretion. By continuing to access or use our Service after any revisions become effective, you agree to be bound by the revised terms. If you do not agree to the new terms, you are no longer authorized to use the Service.</p><h5>Contact Us</h5>If you have any questions about these Terms, please contact us.</div></div><div class="form-row"><div class="col-12 col-md-6"></div><div class="col-12 col-md-6"></div></div></form></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent" ng-click="cancel()">Close</button> <button type="button" class="btn btn-accent" ng-click="cancel()">Accept</button></div>\x3c!--<toaster-container toaster-options="{\'position-class\': \'toast-top-right\'}" style=" left: 50%; position: fixed;"></toaster-container>--\x3e'),e.put("/views/dialogs/tile-editor-1.html",'<div class="popup-new-tile"><div class="modal-header"><h5 class="modal-title"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span ng-show="isEdit" class="ng-hide" style="">Edit Note Tile</span> <span ng-show="!isEdit">Note Tile</span></h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close"></button><div class="col-md-offset-6 col-md-2"><div class=""><span class="ng-isolate-scope" style="margin-right: 10px"><img src="/wwwroot/images/drop.png" ng-click="TileBorder()"> </span><span id="bckcolor" class="ng-isolate-scope"><img src="/wwwroot/images/color.png" ng-click="TileTitleBackground()"></span></div></div></div><form name="theForm" novalidate><div class="modal-body"><div class="form-horizontal">\x3c!--<textarea rows="4" ui-tinymce="tinyMceOptions" ng-model="NewLayout.LayoutMetaData.Tile.Value.Note.Text" cols="50" style="visibility:visible"></textarea>--\x3e<rpgsmithnotetype info="NoteTile" useoredit="1" class="form_inline"></rpgsmithnotetype></div></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-accent" ng-click="SaveTile()">Save</button></div></form></div>'),e.put("/views/dialogs/tile-editor-2.html",'<div class="popup-new-counter-tile"><div class="modal-header"><h5 class="modal-title"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span ng-show="isEdit" class="ng-hide" style="">Edit Counter Tile</span> <span ng-show="!isEdit">Counter Tile</span></h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close"></button><div class="col-md-offset-6 col-md-2"><div class="">\x3c!--<span class="ng-isolate-scope" style="margin-right: 10px;">\r\n                    <img src="/wwwroot/images/drop.png" ng-click="TileBorder()">\r\n                </span>--\x3e <span id="bckcolor" class="ng-isolate-scope"><img src="/wwwroot/images/color.png" ng-click="TileTitleBackground()"></span></div></div></div></div><div class="form-group input-counter" ng-show="isEdit"><div class="input-group"><button class="btn icon icon-minus btn-primary" type="button"></button> <input class="form-control" id="viewCounterValue" type="number" placeholder="Enter value" value="30"> <button class="btn icon icon-plus btn-primary" type="button"></button></div><div class="input-extend"><button class="btn icon icon-with-text icon-reset btn-link-primary" type="button"><span>Reset to 6</span></button></div></div><form name="theForm" novalidate><div class="modal-body"><div class="form-horizontal">\x3c!--{{tile.TileType}}--\x3e<rpgsmithcountertype info="NoteTile" useoredit="1" class="form_inline"></rpgsmithcountertype></div></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-accent" ng-click="SaveCounterTile()">Save</button></div></form><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container>'),e.put("/views/dialogs/tile-editor-3.html",'<div class="popup-new-attribute-tile"><div class="modal-header"><h5 class="modal-title"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span ng-show="isEdit">Edit Attribute Tile</span> <span ng-show="!isEdit">Attribute Tile</span></h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close"></button><div class="col-md-offset-6 col-md-2"><div class="">\x3c!--<span class="ng-isolate-scope" style="margin-right: 10px;">\r\n                        <img src="/wwwroot/images/drop.png" ng-click="TileBorder()">\r\n                    </span>--\x3e <span id="bckcolor"><img src="/wwwroot/images/color.png" ng-click="TileTitleBackground()"></span></div></div></div></div><form name="theForm" novalidate><div class="modal-body"><div class="form-horizontal">\x3c!--{{tile.TileType}}--\x3e<rpgsmithattributetype info="NoteTile" useoredit="1" class="form_inline"></rpgsmithattributetype></div></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-accent" ng-click="SaveAttributeTile()">Save</button></div></form>'),e.put("/views/dialogs/tile-editor-4.html",'<div class="modal-header"><h5 class="modal-title"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span ng-show="isEdit" class="ng-hide" style="">Edit Link Tile</span> <span ng-show="!isEdit">Link Tile</span></h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close"></button><div class="col-md-offset-6 col-md-2"><div class="">\x3c!--<span class="ng-isolate-scope" style="margin-right: 10px;">\r\n                <img src="/wwwroot/images/drop.png" ng-click="TileBorder()">\r\n            </span>--\x3e <span id="bckcolor" class="ng-isolate-scope"><img src="/wwwroot/images/color.png" ng-click="TileTitleBackground()"></span></div></div></div><form name="theForm" novalidate><div class="modal-body"><div class="form-horizontal">\x3c!--{{tile.TileType}}--\x3e<rpgsmithlinktype info="NoteTile" class="form_inline" useoredit="1" fullscope="LinkExecuteTileContent"></rpgsmithlinktype></div></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-accent" ng-click="SaveLinkTile()">Save</button></div></form>'),e.put("/views/dialogs/tile-editor-5.html",'<div class="modal-header"><h5 class="modal-title"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span ng-show="isEdit" class="ng-hide" style="">Edit Execute Tile</span> <span ng-show="!isEdit">Execute Tile</span></h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close"></button><div class="col-md-offset-6 col-md-2"><div class="">\x3c!--<span class="ng-isolate-scope" style="margin-right: 10px;">\r\n                <img src="/wwwroot/images/drop.png" ng-click="TileBorder()">\r\n            </span>--\x3e <span id="bckcolor" class="ng-isolate-scope"><img src="/wwwroot/images/color.png" ng-click="TileTitleBackground()"></span></div></div></div><form name="theForm" novalidate><div class="modal-body"><div class="form-horizontal">\x3c!--{{tile.TileType}}--\x3e<rpgsmithexecutetype info="NoteTile" class="form_inline" useoredit="1" fullscope="LinkExecuteTileContent"></rpgsmithexecutetype></div></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button> <button type="submit" class="btn btn-primary" ng-click="SaveExecuteTile()" ng-disabled="theForm.$invalid">Save</button></div></form>'),e.put("/views/dialogs/tile-editor-6.html",'<div class="popup-new-command-tile"><div class="modal-header"><h5 class="modal-title"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span ng-show="isEdit" class="ng-hide" style="">Edit Command Tile</span> <span ng-show="!isEdit">Command Tile</span></h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close"></button>\x3c!--<div class="col-md-offset-6 col-md-2">\r\n            <div class="">\r\n                <span class="ng-isolate-scope" style="margin-right: 10px;">\r\n                    <img src="/wwwroot/images/drop.png" ng-click="TileBorder()">\r\n                </span>\r\n                <span id="bckcolor" class="ng-isolate-scope">\r\n                    <img src="/wwwroot/images/color.png" ng-click="TileTitleBackground()">\r\n                </span>\r\n            </div>\r\n        </div>--\x3e</div></div><form name="theForm" novalidate><div class="modal-body"><div class="form-horizontal">\x3c!--{{tile.TileType}}--\x3e<rpgsmithcommandtype info="NoteTile" class="form_inline" useoredit="1"></rpgsmithcommandtype></div></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-accent" ng-click="SaveCommandTile()">Save</button></div></form><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container>'),e.put("/views/dialogs/tile-editor-7.html",'<div class="popup-new-image-tile"><div class="modal-header"><h5 class="modal-title"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span ng-show="isEdit" class="ng-hide" style="">Edit Image Tile</span> <span ng-show="!isEdit">Image Tile</span></h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close"></button><div class="col-md-offset-6 col-md-2"><div class="">\x3c!--<span class="ng-isolate-scope" style="margin-right: 10px;">\r\n                    <img src="/wwwroot/images/drop.png" ng-click="TileBorder()">\r\n                </span>--\x3e <span id="bckcolor" class="ng-isolate-scope"><img src="/wwwroot/images/color.png" ng-click="TileTitleBackground()"></span></div></div></div></div><div class="modal-body"><rpgsmithimagetype info="NoteTile" useoredit="1" fullscope="Tablist"></rpgsmithimagetype></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-accent" ng-click="SaveImageTile()">Save</button></div>'),e.put("/views/dialogs/tile-type-picker.html",'<div class="modal-header"><h5 class="modal-title" id="newCharacterPopupTitle">New Tile</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close"></button></div><div class="popup-new-tile"><div class="modal-body"><div class="container-fluid tile-picker-container"><div class="select-tile-tiles select-tile-characters"><ul><li ng-repeat="tile in tileTypes"><button ng-click="choosetile(tile)" type="button" ng-class="\'icon-\' + tile.TileType.toLowerCase()" class="btn icon icon-with-text icon-rsi btn-accent">{{tile.TileType}}</button></li></ul></div></div></div></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent" ng-click="cancel()">Cancel</button></div>'),
e.put("/views/home/attributeinventory.html",'<div class="page-inventory itemproperty" ng-init="onloadFun()"><div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><div class="page-toolbar-title"><h1>Back to Inventory</h1></div><button type="button" id="newItemTrigger" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="btn icon icon-with-text icon-plus btn-primary dropdown-toggle">New Ability</button><div class="dropdown-menu" aria-labelledby="siteNavigationToggle">\x3c!--<ul class="page-toolbar-actions">\r\n\t\t\t<li class="view-switch">\r\n\t\t\t\t<div class="btn-group" role="group">\r\n\t\t\t\t\t<button type="button" id="gridViewTrigger" class="btn icon icon-grid btn-primary selected" ng-click="GridViewTrigger($event)"></button>\r\n\t\t\t\t\t<button type="button" id="listViewTrigger" class="btn icon icon-list btn-primary" ng-click="ListViewTrigger($event)"></button>\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<button type="button" ng-click="CreateCharacterAbility()" class="btn icon icon-with-text icon-plus btn-primary">New Ability</button>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<button type="button" ng-click="AddRulesetAbilities()" class="btn icon icon-with-text icon-plus btn-primary">Add Ability From Ruleset</button>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<button type="button" ng-click="BackToLayout()" class="btn icon icon-with-text glyphicon-backward btn-primary">Back</button>\r\n\t\t\t</li>\r\n\t\t</ul>--\x3e<ul class="dropdown-menu-list"><li class="dropdown-menu-item" ng-hide="true"></li><li class="dropdown-menu-item"><button type="button" data-toggle="modal" style="width: 100%" data-target="#createItemPopup" ng-click="AddRulesetAbility()" class="btn btn-accent">Add Ability</button></li><li class="dropdown-menu-item"><button type="button" data-toggle="modal" style="width: 100%" data-target="#addItemPopup" ng-click="CreateCharacterAbility()" class="btn btn-accent">Create Ability</button></li></ul></div></div></div>\x3c!-- End of toolbar --\x3e\x3c!-- Inventory cards --\x3e<div class="cards cards-inventory"><div class="container"><div ng-show="ShowAbilities"><div class="col-md-12"><h3 class="text-center">No Abilities Added</h3></div></div><div class="card-list" ng-show="ShowAbility"><div class="card-wrapper" ng-repeat="ability in NewAbilityInventory.CharacterAbilities"><div class="card" data-href="#"><div class="card-image"><img class="card-img-top" ng-click="ShowAllAbilityProperties(ability,$index)" ng-src="{{ability.CharacterAbilitiesProperties[1].Value.Image.image}}" alt="{{ability.CharacterItemsProperties[0].Value.Text.value}}"><div class="card-actions"><button type="button" title="Edit" ng-click="EditItem(ability,$index,3)" data-toggle="tooltip" data-action="edit" class="btn icon icon-pencil btn-simple-primary"></button> <button type="button" title="Duplicate" ng-click="CopyItem(ability,$index,3)" data-toggle="tooltip" data-action="duplicate" class="btn icon icon-copy icon-rsi btn-simple-primary"></button> <button type="button" title="Delete" ng-click="Removeitem(ability,$index,3)" data-toggle="tooltip" data-action="delete" class="btn icon icon-trash btn-simple-primary"></button> <button type="button" title="Close" ng-click="hideConteextMenu($event)" data-toggle="tooltip" data-action="close" class="btn icon icon-cross btn-simple-primary"></button></div></div><div class="card-body"><h4 class="card-title" ng-click="ShowAllAbilityProperties(ability,$index)">{{ability.CharacterAbilitiesProperties[0].Value.Text.value}}</h4><div class="card-actions-trigger"><button type="button" title="Manage" data-toggle="tooltip" class="btn icon icon-more btn-simple-primary" ng-click="showContextMenu($event)"></button></div><ul class="item-properties"><li class="item-property item-property-text rarity highlight" ng-if="(ability.CharacterAbilitiesProperties[6].Value.Choices.selectedchoice != undefined) && (ability.CharacterAbilitiesProperties[6].Value.Choices.selectedchoice != null) && (ability.CharacterAbilitiesProperties[6].Value.Choices.selectedchoice != \'\')">{{ability.CharacterAbilitiesProperties[6].Value.Choices.selectedchoice}}</li><li class="item-property item-property-text weight" ng-if="(ability.CharacterAbilitiesProperties[4].Value.Weight.value != undefined) && (ability.CharacterAbilitiesProperties[4].Value.Weight.value != null) && (ability.CharacterAbilitiesProperties[4].Value.Weight.value != \'\')">{{ability.CharacterAbilitiesProperties[4].Value.Weight.value}} {{ability.CharacterAbilitiesProperties[4].Value.Weight.units.selectedUnit}}</li><li ng-repeat="abilityproperty in ability.CharacterAbilitiesProperties" ng-if="(abilityproperty.TypeId==3 && abilityproperty.Value.OnorOff.value == \'Yes\') || ( abilityproperty.TypeId == 4 && abilityproperty.Value.YesOrNo.value == \'Yes\')" class="item-property item-property-icon icon icon-rsi" ng-class="\'icon-\' + abilityproperty.Name.toLowerCase()" title="{{abilityproperty.Name}}" data-toggle="tooltip"></li>\x3c!--<li class="item-property item-property-icon icon icon-magical icon-rsi" title="Magical" data-toggle="tooltip"></li>\r\n                                <li class="item-property item-property-icon icon icon-consumable icon-rsi" title="Consumable" data-toggle="tooltip"></li>--\x3e</ul><div class="item-stats">{{ability.CharacterAbilitiesProperties[2].Value.Text.value}}</div><div class="item-actions"><button type="button" class="btn btn-accent" ng-click="Removeitem(item,$index,1)">Drop</button> <button type="button" class="btn btn-accent">Use</button><rpgsmithcontenttype info="value" ng-repeat="value in ability.CharacterAbilitiesProperties"></rpgsmithcontenttype></div></div></div></div></div></div></div></div><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container></div>'),e.put("/views/home/character-addnew.html",'<div class="container character_new"><div class="panel panel-primary"><div class="panel-heading"><div class="row"><div class="col-md-12"><h4 class=""><i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span>{{character.Heading}}</span></h4></div></div></div><div class="panel-body"><div class="col-md-offset-3"><ng-form name="dlg" novalidate role="form">\x3c!--<div class="form-group input-group-lg">\r\n                        <span class="help-block">Character Name</span>\r\n                        <input type="hidden" value="character.id" ng-model="character.id" />\r\n                        <input type="text" class="form-control" name="name" id="name" ng-model="character.name" required maxlength="20">\r\n                    </div>--\x3e<div class="form-group"><span class="help-block">Character Name <span class="errorColor">*</span></span> <input type="text" class="form-control" name="name" id="name" ng-disabled="character.DisableCharacterName" ng-model="character.name" ng-class="{red: dlg.name.$dirty && dlg.name.$error.required}" required></div><div class="form-group input-group-lg"><span class="help-block">Character Portrait</span><div class="clearfix"><div class="pull-left edit-character-portrait"><img id="characterImage" ng-src="{{character.file}}" ng-model="character.file" alt="Character Image" ngf-thumbnail="getThumbNail()" ngf-resize="{width: 120, height: 120}"></div><div class="profile_image"><span>Select</span><input type="file" onchange="angular.element(this).scope().characterImageUpload(this)" accept="x-png,gif,jpeg" ng-disabled="character.DisableImage"></div>\x3c!--<div class="profile_image">\r\n                                <span>Select</span>\r\n                                <input type="file" onchange="angular.element(this).scope().characterImageUpload(this)" ngf-pattern="\'image/*\'"  ngf-select   ngf-resize="{width: 120, height: 120, quality: 0.8, centerCrop: true}" ngf-fix-orientation="true" accept="x-png,gif,jpeg"  ng-model="file" />\r\n                            </div>--\x3e\x3c!--<div class="pull-left btn btn-default edit-character-portrait-button"\r\n                            name="file"\r\n                            ng-model="file"\r\n                            ngf-select\r\n                            ngf-resize="{width: 120, height: 120, quality: 0.8, centerCrop: true}"\r\n                            ngf-fix-orientation="true"\r\n                            ngf-pattern="\'image/*\'"\r\n                            ngf-accept="\'image/*\'">Select</div>--\x3e</div><span class="help-block">120px by 120px</span></div>\x3c!--<div class="form-group">\r\n                        <span class="help-block">Select RuleSet</span>\r\n                        <div class="character_add">\r\n                            <select class="form-control" ng-model="character.RulesetID" ng-options="item.Id as item.Name for item in RuleSets">\r\n                                <option value="">Select RuleSet</option>\r\n                            </select>\r\n                            <span>Or</span>\r\n                            <div class="add">\r\n                                <a ng-click="addNewRuleSet()" ng-disabled="character.Button" class="btn btn-primary">Add RuleSet</a>\r\n                            </div>\r\n                        </div>\r\n                    </div>--\x3e<div class="form-group"><span class="help-block">Select RuleSet <span class="errorColor">*</span></span><div class="character_add"><select name="ruleset" class="form-control" ng-disabled="character.DisableRulesetDdl" ng-model="character.RulesetID" ng-options="item.Id as item.Name for item in RuleSets" ng-class="{red: dlg.ruleset.$dirty && dlg.ruleset.$error.required}" required><option value="">Select RuleSet</option></select><span>Or</span><div class="add"><a ng-click="addNewRuleSet()" ng-disabled="character.Button" class="btn btn-primary">Add RuleSet</a></div></div></div></ng-form></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button>\x3c!--<button type="button" class="btn btn-primary" ng-click="save()">Save</button>--\x3e <button type="button" class="btn btn-primary" ng-click="save()" ng-disabled="(dlg.$dirty && dlg.$invalid) || dlg.$pristine">Save</button></div><toaster-container toaster-options="{\'position-class\': \'toast-top-right\'}" style="left: 50%; position: fixed"></toaster-container>'),e.put("/views/home/character-attributes.html",'<pageslide ps-open="menuHamburger.opened" ps-side="left" ps-key-listener="true" ps-zindex="2000" ps-size="200px" ps-auto-close="true" ps-body-class="true"><pageslide-menu menus="menuHamburger.menus" menu-click="menuHamburger.menuClick"></pageslide-menu></pageslide><pageslide ps-open="menuCharacter.opened" ps-side="left" ps-key-listener="true" ps-zindex="2000" ps-size="200px" ps-auto-close="true" ps-body-class="true"><pageslide-menu menus="menuCharacter.menus" menu-click="menuCharacter.menuClick"></pageslide-menu></pageslide><div class="container-fluid"><ul><li ng-repeat="stat in data.corestats">{{stat.name}}</li></ul></div>'),e.put("/views/home/character-commands.html",'<pageslide ps-open="menuHamburger.opened" ps-side="left" ps-key-listener="true" ps-zindex="2000" ps-size="200px" ps-auto-close="true" ps-body-class="true"><pageslide-menu menus="menuHamburger.menus" menu-click="menuHamburger.menuClick"></pageslide-menu></pageslide><pageslide ps-open="menuCharacter.opened" ps-side="left" ps-key-listener="true" ps-zindex="2000" ps-size="200px" ps-auto-close="true" ps-body-class="true"><pageslide-menu menus="menuCharacter.menus" menu-click="menuCharacter.menuClick"></pageslide-menu></pageslide><div class="container-fluid"><ul><li ng-repeat="n in data.commands">{{n.Name}}</li></ul></div>'),e.put("/views/home/character-counters.html",'<pageslide ps-open="menuHamburger.opened" ps-side="left" ps-key-listener="true" ps-zindex="2000" ps-size="200px" ps-auto-close="true" ps-body-class="true"><pageslide-menu menus="menuHamburger.menus" menu-click="menuHamburger.menuClick"></pageslide-menu></pageslide><pageslide ps-open="menuCharacter.opened" ps-side="left" ps-key-listener="true" ps-zindex="2000" ps-size="200px" ps-auto-close="true" ps-body-class="true"><pageslide-menu menus="menuCharacter.menus" menu-click="menuCharacter.menuClick"></pageslide-menu></pageslide><div class="container-fluid"><ul><li ng-repeat="c in data.counters">{{c.Name}}</li></ul></div>'),e.put("/views/home/character-executes.html",'<pageslide ps-open="menuHamburger.opened" ps-side="left" ps-key-listener="true" ps-zindex="2000" ps-size="200px" ps-auto-close="true" ps-body-class="true"><pageslide-menu menus="menuHamburger.menus" menu-click="menuHamburger.menuClick"></pageslide-menu></pageslide><pageslide ps-open="menuCharacter.opened" ps-side="left" ps-key-listener="true" ps-zindex="2000" ps-size="200px" ps-auto-close="true" ps-body-class="true"><pageslide-menu menus="menuCharacter.menus" menu-click="menuCharacter.menuClick"></pageslide-menu></pageslide><div class="container-fluid"><ul><li ng-repeat="n in data.executes">{{n.Name}}</li></ul></div>'),e.put("/views/home/character-layout.html",'<div class="page-character-dashboard" data-ng-init="onloadFun()"><div class="page-toolbar"><div class="container"><div ng-class="{\'page-toolbar-wrapper-toggle-trigger\' : true, \'d-none\' : state.useOrEditMode}"><button type="button" id="showAction" class="btn icon icon-with-text icon-arrow-down btn-accent" ng-click="ToggleMenu($event)">Show actions</button></div><div ng-class="{\'page-toolbar-wrapper\' : true,\'initial\':true,\'hide\':true, \'d-none\' : state.useOrEditMode}"><div class="page-toolbar-dropdowns">\x3c!-- Layout dropdown --\x3e<div class="dropdown"><div class="dropdown-toggle" id="pageLayoutNavigationToggle" data-toggle="dropdown"><span>Layout <em>{{selectedLayoutName}}</em></span></div><div class="dropdown-menu" aria-labelledby="pageLayoutNavigationToggle"><div class="dropdown-menu-add-item-trigger"><button type="button" class="btn btn-accent btn-block" ng-click="layoutAdd()">New Layout</button></div><ul class="dropdown-menu-list dropdown-menu-item-contain-actions"><li class="dropdown-menu-item active" ng-repeat="layout in Layouts"><span class="dropdown-menu-item-title" ng-click="layoutLoad(layout)">{{layout.Name}}</span><div class="dropdown-menu-item-actions"><button type="button" title="Edit" data-toggle="tooltip" data-action="edit" class="btn icon icon-pencil btn-simple-primary" ng-click="layoutRename($index,layout)"></button> <button type="button" title="Duplicate" data-toggle="tooltip" data-action="duplicate" class="btn icon icon-copy icon-rsi btn-simple-primary" ng-click="layoutCopy($index,layout)"></button> <button type="button" title="Delete" data-toggle="tooltip" data-action="delete" class="btn icon icon-trash btn-simple-primary" ng-click="layoutDelete($index,layout)"></button> <button type="button" title="Close" data-toggle="tooltip" data-action="close" class="btn icon icon-cross btn-simple-primary"></button></div><div class="dropdown-menu-item-actions-trigger"><button type="button" title="Manage" data-toggle="tooltip" class="btn icon icon-more btn-simple-primary" ng-click="showContextMenu($event)"></button></div></li></ul></div></div>\x3c!-- End of layout dropdown --\x3e\x3c!-- Page dropdown --\x3e<div class="dropdown"><div class="dropdown-toggle" id="pageLayoutNavigationToggle" data-toggle="dropdown"><span>Page <em>{{selectedPageName}}</em></span></div><div class="dropdown-menu" aria-labelledby="pageLayoutNavigationToggle"><div class="dropdown-menu-add-item-trigger"><button type="button" class="btn btn-accent btn-block" ng-click="AddNewtab()">New Page</button></div><ul class="dropdown-menu-list dropdown-menu-item-contain-actions"><li class="dropdown-menu-item" ng-repeat="tab in NewLayout.TabList track by $index" index="$index" ng-click="onTabSelected(tab,$index)"><span class="dropdown-menu-item-title">{{tab.TabName}}</span><div class="dropdown-menu-item-actions"><button type="button" title="Edit" data-toggle="tooltip" ng-click="EditTab(tab)" class="btn icon icon-pencil btn-simple-primary"></button> <button type="button" title="Duplicate" data-toggle="tooltip" ng-click="CopyTab(tab)" class="btn icon icon-copy icon-rsi btn-simple-primary"></button> <button type="button" title="Delete" data-toggle="tooltip" ng-click="DeleteTab(tab)" class="btn icon icon-trash btn-simple-primary"></button> <button type="button" title="Close" data-toggle="tooltip" data-action="close" class="btn icon icon-cross btn-simple-primary"></button></div><div class="dropdown-menu-item-actions-trigger"><button type="button" title="Manage" data-toggle="tooltip" class="btn icon icon-more btn-simple-primary" ng-click="showContextMenu($event)"></button></div></li></ul></div></div>\x3c!-- End of page dropdown --\x3e</div>\x3c!-- Toolbar links --\x3e<ul class="page-toolbar-links"><li><a href="#" class="btn btn-link-primary" ng-click="ItemInventory()">Items</a></li><li><a href="#" class="btn btn-link-primary" ng-click="SpellInventory()">Spells</a></li><li><a href="#" class="btn btn-link-primary" ng-click="AbilityInventory()">Abilities</a></li></ul>\x3c!-- End of toolbar links --\x3e\x3c!-- Toolbar actions --\x3e<ul class="page-toolbar-actions"><li><button type="button" id="manageTilesTrigger" class="btn btn-outline-primary" ng-click="ManageTiles()">Manage Tiles</button></li><li><button type="button" data-toggle="modal" data-target="#manageCoreStatsPopup" class="btn btn-outline-primary" ng-click="AddCorestatvalues()">Manage Core Stats</button></li><li><button type="button" data-toggle="modal" data-target="#dicePopup" class="btn icon icon-with-text icon-dice icon-rsi btn-primary" ng-click="ShowDice()">Dice</button></li></ul>\x3c!-- End of toolbar actions --\x3e</div><div ng-class="{\'page-toolbar-wrapper\' : true, \'manage\' : true,\'d-flex\' : state.useOrEditMode}"><div class="page-toolbar-title"><h1>Manage Tiles</h1></div><ul class="page-toolbar-actions"><li class="popup-new-tile-trigger tile-bubble-add" title="Add a new tile" ng-class="{\'show-bubble\': state.tilesEditing && !state.tileDragging}" ng-click="ShowTiles()"><i class="btn icon icon-plus btn-primary" aria-hidden="true"></i></li><li class="popup-edit-ruleset remove tile-bubble-remove" title="Remove Page" droppable ng-class="{\'show-bubble\': state.tileDragging}" on-droppable-drop="onDeleteDrop(event,ui)" on-droppable-over="onDeleteOver(event,ui)" on-droppable-out="onDeleteOut(event)"><button type="button" data-toggle="modal" class="btn btn-primary" ng-class="{\'show-bubble\': state.tileDragging}" on-droppable-drop="onDeleteDrop(event,ui)" on-droppable-over="onDeleteOver(event,ui)" on-droppable-out="onDeleteOut(event)"></button> <i class="fa fa-trash-o fa-2x"></i></li>\x3c!--<li class="tile-bubble-save" title="Save changes"\r\n                         ng-class="{\'show-bubble\': state.tilesEditing}" ng-click="SaveLayout(NewLayout)">\r\n                        <i class="fa fa-floppy-o" aria-hidden="true"></i>\r\n                    </li>--\x3e\x3c!--    <li class="popup-new-tile-trigger">\r\n                           <button type="button" data-toggle="modal" class="btn icon icon-plus btn-primary" ng-class="{\'show-bubble\': state.tilesEditing && !state.tileDragging}" ng-click="ShowTiles()"></button>\r\n                       </li>\r\n                    <li class="popup-new-tile-trigger save">\r\n                           <button type="button" data-toggle="modal" class="btn btn-primary" ng-class="{\'show-bubble\': state.tilesEditing && !state.tileDragging}" ng-click="SaveLayout(NewLayout)">\r\n                               <i class="fa fa-floppy-o fa-2x"></i>\r\n                           </button>\r\n                       </li>\r\n                       \r\n                       <<li class="popup-new-tile-trigger remove">\r\n                           <button type="button" data-toggle="modal" class="btn btn-primary" ng-class="{\'show-bubble\': state.tileDragging}" on-droppable-drop="onDeleteDrop(event,ui)" on-droppable-over="onDeleteOver(event,ui)" on-droppable-out="onDeleteOut(event)"></button>\r\n                           <i class="fa fa-trash-o fa-2x"></i>\r\n\r\n                       </li>--\x3e<li><button type="button" id="manageTilesDoneTrigger" class="btn btn-accent" ng-click="ManageTilesCompleted();SaveLayout(NewLayout);">Done</button></li></ul></div></div></div>\x3c!--<div gridstack class="grid-stack">\r\n\t\t<div gridstack-item class="grid-stack-item"\r\n\t\t\t data-gs-x="0" data-gs-y="0"\r\n\t\t\t data-gs-width="4" data-gs-height="2">\r\n\t\t\t<div gridstack-item-content class="grid-stack-item-content"></div>\r\n\t\t</div>\r\n\t\t<div gridstack-item class="grid-stack-item"\r\n\t\t\t data-gs-x="4" data-gs-y="0"\r\n\t\t\t data-gs-width="4" data-gs-height="4">\r\n\t\t\t<div gridstack-item-content class="grid-stack-item-content"></div>\r\n\t\t</div>\r\n\t</div>--\x3e<div class="container-fluid" tile-picker="tilePickerApi">\x3c!--<div ng-repeat="tabs in NewLayout.TabList track by $index" ng-show="tabSet.index === $index">--\x3e<div gridstack class="grid-stack" gs-lock-tiles="true" on-drag-start="onDragStart(event,ui)" on-drag-stop="onDragStop(event,ui)" on-resize-start="onResizeStart(event,ui)" on-resize-stop="onResizeStop(event,ui)"><div gridstack-item style="overflow-y: hidden" ng-repeat="tab in NewLayout.TabList[selectedPageIndex].TileList track by $index" ng-switch on="tab.TileTypeName" gs-item-id="tab.ClientObjectId" class="grid-stack-item" gs-item-x="tab.X" gs-item-y="tab.Y" gs-item-width="tab.Width" gs-item-height="tab.Height"><div gridstack-item-content class="grid-stack-item-content" style="overflow-y: hidden">\x3c!--<div  ng-click="EditNoteTile()"  ng-switch="Note" style="background-color: {{tab.Styles.titlebackgroundcolor}}; color:{{tab.Styles.titletextcolor}};">\r\n\t\t\t\t\t<span class="text_design"> \r\n\t\t\t\t\t<span style="color:{{tab.Styles.titletextcolor}};">{{ tab.Value.Note.Name }}</span>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style="color:black;" ng-switch="Note"  ng-bind-html="tab.Value.Note.Text" ng-click="ShowContent()">\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div ng-click="EditCounterTile()"  ng-switch="Counter" style="background-color: {{tab.Styles.titlebackgroundcolor}}; color:{{tab.Styles.titletextcolor}};">\r\n\t\t\t\t\t<span class="text_design">\r\n\t\t\t\t\t\t<span style="color:{{tab.Styles.titletextcolor}};">{{tab.Value.Counter.Name}}</span>\r\n\t\t\t\t\t\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div> \r\n\t\t\t\t<div class="text_align" ng-switch="Counter">\r\n\t\t\t\t\t<p ng-click="ShowCounterValue()">{{ tab.Value.Counter.Value }}</p> \r\n\t\t\t\t\t<div class="counter">\r\n\t\t\t\t\t\t<span><i class="fa fa-minus fa-2x" ng-click="Decrement()"></i></span>\r\n\t\t\t\t\t\t<span><i class="fa fa fa-refresh fa-2x" ng-click="Reset()"></i></span>\r\n\t\t\t\t\t\t<span><i class="fa fa-plus fa-2x" ng-click="Increment()"></i></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\t<div class="btn"  ng-click="EditLinkTile()" ng-switch="Link" style="background-color: {{tab.Styles.titlebackgroundcolor}}"> \r\n\t\t\t\t\t<span style="color:{{tab.Styles.titletextcolor}};">{{tab.Value.Link.Title}}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="text_align" style="text-align:center" ng-switch="Link"> \r\n\t\t\t\t\t<img src="{{tab.Value.Link.SelectedPropertyValueImage}}" ng-style="newstyles()" class="img-resposive ng-pristine ng-untouched ng-valid ng-empty" ng-click="ShowAllContent()">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div ng-click="EditNoteTile()" class="NoteTile" ng-switch="Command" style="background-color: {{tab.Styles.titlebackgroundcolor}}; color:{{tab.Styles.titletextcolor}};">\r\n\t\t\t\t\t\t<span class="text_design">\r\n\t\t\t\t\t\t\t<span style="color:{{tab.Styles.titletextcolor}};">{{ tab.Value.Command.Name }}</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style="color:black;" ng-switch="Command" ng-bind-html="tab.Value.Command.Text" ng-click="ShowContent()">\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div ng-click="EditNoteTile()" class="NoteTile" ng-switch="Image" style="background-color: {{tab.Styles.titlebackgroundcolor}}; color:{{tab.Styles.titletextcolor}};">\r\n\t\t\t\t\t\t<span class="text_design">\r\n\t\t\t\t\t\t\t<span style="color:{{tab.Styles.titletextcolor}};">{{ tab.Value.Image.Name }}</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style="color:black;" ng-switch="Image" ng-bind-html="tab.Value.Image.Text" ng-click="ShowContent()">\r\n\t\t\t\t\t</div>--\x3e<rpgsmithnotetype gridstack-item-content ng-style="" style="border: {{tab.Styles.width}} {{tab.Styles.style}} {{tab.Styles.color}}; border-radius: {{tab.Styles.radius}};background-color: gray;color: white;box-shadow:{{tab.Styles.shadow}}" info="tab" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Note" data-method="ctrlFn"></rpgsmithnotetype><rpgsmithcountertype gridstack-item-content ng-style="" style="border: {{tab.Styles.width}} {{tab.Styles.style}} {{tab.Styles.color}};border-radius: {{tab.Styles.radius}};background-color: {{tab.Styles.bodybackgroundColor}};box-shadow:{{tab.Styles.shadow}}" info="tab" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Counter"></rpgsmithcountertype><rpgsmithattributetype gridstack-item-content ng-style="" style="border: {{tab.Styles.width}} {{tab.Styles.style}} {{tab.Styles.color}}; border-radius: {{tab.Styles.radius}};background-color: {{tab.Styles.bodybackgroundColor}};box-shadow:{{tab.Styles.shadow}}" info="tab" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Attribute"></rpgsmithattributetype><rpgsmithlinktype gridstack-item-content ng-style="" style="border: {{tab.Styles.width}} {{tab.Styles.style}} {{tab.Styles.color}}; border-radius: {{tab.Styles.radius}};background-color: {{tab.Styles.bodybackgroundColor}};box-shadow:{{tab.Styles.shadow}}" info="tab" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Link" fullscope="LinkExecuteTileContent"></rpgsmithlinktype><rpgsmithexecutetype gridstack-item-content ng-style="" style="border: {{tab.Styles.width}} {{tab.Styles.style}} {{tab.Styles.color}}; border-radius: {{tab.Styles.radius}};background-color: {{tab.Styles.bodybackgroundColor}};box-shadow:{{tab.Styles.shadow}}" info="tab" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Execute" fullscope="LinkExecuteTileContent"></rpgsmithexecutetype><rpgsmithcommandtype gridstack-item-content ng-style="" style="border: {{tab.Styles.width}} {{tab.Styles.style}} {{tab.Styles.color}}; border-radius: {{tab.Styles.radius}};background-color: {{tab.Styles.bodybackgroundColor}};box-shadow:{{tab.Styles.shadow}}" info="tab" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Command"></rpgsmithcommandtype><rpgsmithimagetype gridstack-item-content ng-style="" style="border: {{tab.Styles.width}} {{tab.Styles.style}} {{tab.Styles.color}}; border-radius: {{tab.Styles.radius}};background-color: {{tab.Styles.bodybackgroundColor}};box-shadow:{{tab.Styles.shadow}}" info="tab" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Image" fullscope="tabs.TileList"></rpgsmithimagetype></div></div></div>\x3c!--<div class="tile-bubble-remove" title="Remove Page" droppable\r\n\t\t\t ng-class="{\'show-bubble\': state.tileDragging && state.tilesEditing}"\r\n\t\t\t on-droppable-drop="onDeleteDrop(event,ui)"\r\n\t\t\t on-droppable-over="onDeleteOver(event,ui)" on-droppable-out="onDeleteOut(event)">\r\n\t\t\t<i class="btn icon icon-trash btn-primary" aria-hidden="true"></i>\r\n\t\t</div>--\x3e</div>\x3c!-- End of tiles --\x3e</div><toaster-container class="toaster_align" toaster-options="{\'time-out\':5000}"></toaster-container>'),e.put("/views/home/character-links.html",'<pageslide ps-open="menuHamburger.opened" ps-side="left" ps-key-listener="true" ps-zindex="2000" ps-size="200px" ps-auto-close="true" ps-body-class="true"><pageslide-menu menus="menuHamburger.menus" menu-click="menuHamburger.menuClick"></pageslide-menu></pageslide><pageslide ps-open="menuCharacter.opened" ps-side="left" ps-key-listener="true" ps-zindex="2000" ps-size="200px" ps-auto-close="true" ps-body-class="true"><pageslide-menu menus="menuCharacter.menus" menu-click="menuCharacter.menuClick"></pageslide-menu></pageslide><div class="container-fluid"><ul><li ng-repeat="n in data.links">{{n.Name}}</li></ul></div>'),e.put("/views/home/character-notes.html",'<pageslide ps-open="menuHamburger.opened" ps-side="left" ps-key-listener="true" ps-zindex="2000" ps-size="200px" ps-auto-close="true" ps-body-class="true"><pageslide-menu menus="menuHamburger.menus" menu-click="menuHamburger.menuClick"></pageslide-menu></pageslide><pageslide ps-open="menuCharacter.opened" ps-side="left" ps-key-listener="true" ps-zindex="2000" ps-size="200px" ps-auto-close="true" ps-body-class="true"><pageslide-menu menus="menuCharacter.menus" menu-click="menuCharacter.menuClick"></pageslide-menu></pageslide><div class="container-fluid"><ul><li ng-repeat="n in data.notes">{{n.Name}}</li></ul></div>'),
e.put("/views/home/characterabilitycontent.html",'<div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><button type="button" class="btn btn-primary back" ng-click="BackAbilityProperties()">Back</button> <button type="button" class="btn btn-accent" ng-click="SaveInventoryTiles(CharacterContent,3)">Save Tile</button></div></div></div><div class="container item_view"><div class="row"><div class="col-md-4 image"><div class="image"><img ng-src="{{CharacterContent.CharacterAbilitiesProperties[1].Value.Image.image}}" class="img-resposive" width="120" height="120"></div><button class="btn btn-primary">{{CharacterContent.CharacterAbilitiesProperties[0].Value.Text.value}}</button>\x3c!--<div class="buttons-align">\r\n                <button class="btn btn-warning">\r\n                    <i class="fa fa-remove" aria-hidden="true"></i>\r\n                    REMOVE\r\n                </button>\r\n                <button class="btn btn-warning">\r\n                    <i class="fa fa-exchange" aria-hidden="true"></i>\r\n                    UNMEMORIZE\r\n                </button>\r\n            </div>--\x3e</div><div class="col-md-4"><div class="text-design"><div class="text"><h5>STATS</h5><p>{{CharacterContent.CharacterAbilitiesProperties[2].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-6"><div class="panel div_blue"><div class="panel-heading text-center">CLASS</div><div class="panel-body text-center">{{CharacterContent.CharacterAbilitiesProperties[10].Value.Text.value}}</div></div></div><div class="col-md-6"><div class="panel div_red"><div class="panel-heading text-center">ATTRIBUTES</div><div class="panel-body text-center">{{CharacterContent.CharacterAbilitiesProperties[9].Value.Text.value}}</div></div></div></div><div class="blue"><div class="col-md-6"><div class="panel div_green"><div class="panel-heading text-center">USES ReEMAINING</div><div class="panel-body text-center">{{CharacterContent.CharacterAbilitiesProperties[13].Value.Number.value}}</div></div></div><div class="col-md-6"><div class="panel div_green"><div class="panel-heading text-center">MAX USES</div><div class="panel-body text-center">{{CharacterContent.CharacterAbilitiesProperties[12].Value.Number.value}}</div></div></div></div></div></div><div class="buttons-align"><button class="btn btn_red" ng-click="Removeitems(CharacterContent,3)"><i class="fa fa-remove" aria-hidden="true"></i> REMOVE</button> <button class="btn uneqp" ng-click="EditItems(CharacterContent,3)"><i class="fa fa-edit" aria-hidden="true"></i> EDIT</button></div></div><div class="col-md-4"><div class="text-design"><div class="text"><h5>Description</h5><p>{{CharacterContent.CharacterAbilitiesProperties[14].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-12"><div class="panel panel-danger"><div class="panel-heading text-center">TAGS</div><div class="panel-body text-center">{{CharacterContent.CharacterAbilitiesProperties[17].Value.Number.value}}</div></div></div>\x3c!--<div class="col-md-6">\r\n                            <div class="panel panel-default">\r\n                                <div class="panel-heading text-center" style="background-color: rgba(237, 20, 61, 0.67);">Attributes</div>\r\n                                <div class="panel-body text-center" style="background-color: rgba(237, 20, 61, 0.58);"></div>\r\n                            </div>\r\n                        </div>--\x3e</div><div class="blue"><div class="col-md-12"><div class="panel panel-danger"><div class="panel-heading text-center">REQUIREMENTS</div><div class="panel-body text-center">text</div></div></div></div></div></div><div class="buttons-align"><button class="btn btn-warning" style="width:100%" ng-click="ShowTilesforInventory(CharacterContent.CharacterAbilitiesProperties)"><i class="fa fa-plus" aria-hidden="true"></i> ADD TILE</button></div></div></div><div gridstack class="grid-stack" options="stackOptions" on-change="onChange(event,ui)" on-drag-start="onDragStart(event,ui)" on-drag-stop="onDragStop(event,ui)" on-resize-start="onResizeStart(event,ui)" on-resize-stop="onResizeStop(event,ui)"><div gridstack-item ng-repeat="tab in CharacterContent.CharacterAbilitiesProperties" ng-click="tileSelect(tab.tile)" ng-class="getTileClass(tab.tile)" ng-switch on="tab.tile.TileTypeName" class="grid-stack-item" gs-item="tile" gs-item-id="tab.tile.ClientObjectId" gs-item-x="tab.tile.X" gs-item-y="tab.tile.Y" gs-item-width="tab.tile.Width" gs-item-height="tab.tile.Height" gs-item-autopos="1" on-item-added="onItemAdded(item)" on-item-removed="onItemRemoved(item)" data-gs-width="4" data-gs-height="2"><rpgsmithnotetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Note"></rpgsmithnotetype><rpgsmithcountertype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Counter"></rpgsmithcountertype><rpgsmithattributetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Attribute"></rpgsmithattributetype><rpgsmithlinktype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Link" fullscope="LinkExecuteTileContent"></rpgsmithlinktype><rpgsmithexecutetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Execute" fullscope="LinkExecuteTileContent"></rpgsmithexecutetype><rpgsmithcommandtype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Command"></rpgsmithcommandtype><rpgsmithimagetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Image"></rpgsmithimagetype></div></div><div class="tile-bubble-remove" title="Remove Page" droppable ng-class="{\'show-bubble\': state.tileDragging}" on-droppable-drop="onDeleteDropCharacterTiles(event,ui)" on-droppable-over="onDeleteOverCharacterItem(event,ui)" on-droppable-out="onDeleteOutCharacterItem(event)"><i class="fa fa-trash-o" aria-hidden="true"></i></div><div class="tile-bubble-add" title="Add a new tile" ng-click="ShowTiles()"><i class="fa fa-plus" aria-hidden="true"></i></div><div class="tile-bubble-save" title="Save changes" ng-click="SaveLayout(NewLayout)"><i class="fa fa-floppy-o" aria-hidden="true"></i></div>\x3c!--<div class="tile-bubble-remove" title="Remove Page" droppable\r\n         on-droppable-drop="onDeleteDropCharacterItem(event,ui)"\r\n         on-droppable-over="onDeleteOverCharacterItem(event,ui)" on-droppable-out="onDeleteOutCharacterItem(event)">\r\n        <i class="fa fa-trash-o" aria-hidden="true"></i>\r\n    </div>\r\n    <div class="tile-bubble-add" title="Add a new tile"\r\n         ng-click="ShowTiles()">\r\n        <i class="fa fa-plus" aria-hidden="true"></i>\r\n    </div>\r\n    <div class="tile-bubble-save" title="Save changes"\r\n         ng-click="SaveLayout(NewLayout)">\r\n        <i class="fa fa-floppy-o" aria-hidden="true"></i>\r\n    </div>--\x3e</div><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container>'),e.put("/views/home/characteritemcontent.html",'<div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><button type="button" class="btn btn-primary back" ng-click="BackItemProperties()">Back</button> <button type="button" class="btn btn-accent" ng-click="SaveInventoryTiles(CharacterContent,1)">Save Tile</button></div></div></div><div class="container item_view"><div class="row"><div class="col-md-4 image"><div class="image"><img ng-src="{{CharacterContent.CharacterItemsProperties[1].Value.Image.image}}" class="img-resposive" width="120" height="120"></div><button class="btn btn-primary">{{CharacterContent.CharacterItemsProperties[0].Value.Text.value}}</button><div class="buttons-align mt-30"><button class="btn btn-warning" ng-click="Removeitems(CharacterContent,1)"><i class="fa fa-download" aria-hidden="true"></i> DROP</button> <button class="btn btn-warning" ng-click="EditItems(CharacterContent,1)"><i class="fa fa-exchange" aria-hidden="true"></i> Edit</button></div></div><div class="col-md-4"><div class="text-design"><div class="text"><h5>STATS</h5><p>{{CharacterContent.CharacterItemsProperties[2].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-6"><div class="panel div_blue"><div class="panel-heading text-center">WEIGHT</div><div class="panel-body text-center">{{CharacterContent.CharacterItemsProperties[4].Value.Weight.value}} {{CharacterContent.CharacterItemsProperties[4].Value.Weight.units.selectedUnit}}</div></div></div><div class="col-md-6"><div class="panel div_blue"><div class="panel-heading text-center">VOLUME</div><div class="panel-body text-center">{{CharacterContent.CharacterItemsProperties[5].Value.Volume.lenghtvalue}} {{CharacterContent.CharacterItemsProperties[5].Value.Volume.heightvalue}} {{CharacterContent.CharacterItemsProperties[5].Value.Volume.depthvalue}}</div></div></div></div><div class="blue"><div class="col-md-6"><div class="panel div_red"><div class="panel-heading text-center">ATTRIBUTES</div><div class="panel-body text-center">text</div></div></div><div class="col-md-6"><div class="panel div_green"><div class="panel-heading text-center">RARITY</div><div class="panel-body text-center">{{CharacterContent.CharacterItemsProperties[6].Value.Choices.selectedchoice}}</div></div></div></div></div></div><div style="margin-top:0px"><div class="buttons-align">\x3c!--<button class="btn uneqp">\r\n                <i class="fa fa-hand-paper-o" aria-hidden="true"></i>\r\n                UNEQUIP\r\n            </button>--\x3e<div ng-repeat="value in CharacterContent.CharacterItemsProperties" class="equip"><rpgsmithcontenttype info="value"></rpgsmithcontenttype></div><button class="btn btn-warning" ng-click="CopyItems(CharacterContent,1)"><i class="fa fa-external-link" aria-hidden="true"></i> Duplicate</button></div></div></div><div class="col-md-4"><div class="text-design"><div class="text"><h5>Visible Description</h5><p>{{CharacterContent.CharacterItemsProperties[6].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading text-center">Associated Spell</div><div class="panel-body"><div class="text-center" ng-if="RulesetContent.AssociatedSpells.length <= 0">None</div><div class="text-center" ng-if="RulesetContent.AssociatedSpells.length > 0">\x3c!--<button class="btn btn-warning" ng-click="ShowAllSpellsContent(RulesetContent.AssociatedSpells,$index)">\r\n                                            {{associatedSpell.SpellProperties[0].Value.Text.value}}\r\n                                        </button>--\x3e <button ng-repeat="associatedSpell in RulesetContent.AssociatedSpells" class="btn btn-warning" ng-click="ShowAssociatedSpells($index)">{{associatedSpell.SpellProperties[0].Value.Text.value}}</button></div></div></div></div><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading text-center">Associated Ability</div><div class="panel-body text-center">None</div></div></div></div><div class="blue"><div class="col-md-12"><div class="panel panel-danger"><div class="panel-heading text-center">TAGS</div><div class="panel-body text-center"><p>{{CharacterContent.CharacterItemsProperties[17].Value.Text.value}}</p></div></div></div></div></div></div><div class="buttons-align"><button class="btn btn-warning" style="width:100%" ng-click="ShowTilesforInventory(CharacterContent.CharacterItemsProperties)"><i class="fa fa-plus" aria-hidden="true"></i> ADD TILE</button></div></div></div><div gridstack class="grid-stack grid1" options="options" on-change="onChange(event,items)" on-drag-start="onDragStart(event,ui)" on-drag-stop="onDragStop(event,ui)" on-resize-start="onResizeStart(event,ui)" on-resize-stop="onResizeStop(event,ui)"><div gridstack-item class="grid-stack-item" gs-item-x="w.x" gs-item-y="w.y" gs-item-width="w.width" gs-item-height="w.height" gs-item-autopos="1" on-item-added="onItemAdded(item)" on-item-removed="onItemRemoved(item)"><div class="grid-stack-item-content"><a class="btn btn-primary" ng-click="removeWidget(w)" href="#">remove</a></div></div></div><div class="tile-bubble-remove" title="Remove Page" droppable ng-class="{\'show-bubble\': state.tileDragging}" on-droppable-drop="onDeleteDropCharacterTiles(event,ui)" on-droppable-over="onDeleteOverCharacterItem(event,ui)" on-droppable-out="onDeleteOutCharacterItem(event)"><i class="fa fa-trash-o" aria-hidden="true"></i></div><div class="tile-bubble-add" title="Add a new tile" ng-click="ShowTiles()"><i class="fa fa-plus" aria-hidden="true"></i></div><div class="tile-bubble-save" title="Save changes" ng-click="SaveLayout(NewLayout)"><i class="fa fa-floppy-o" aria-hidden="true"></i></div>\x3c!--<div class="popup-new-tile-trigger remove_new tile-bubble-remove" title="Remove Page" droppable ng-class="{\'show-bubble\': state.tileDragging}"\r\n        on-droppable-drop="onDeleteDropCharacterItem(event,ui,1,CharacterContent)"\r\n        on-droppable-over="onDeleteOverCharacterItem(event,ui)" on-droppable-out="onDeleteOutCharacterItem(event)">\r\n        <button type="button" data-toggle="modal" class="btn btn-primary" ng-class="{\'show-bubble\': state.tileDragging}" on-droppable-drop="onDeleteDrop(event,ui)" on-droppable-over="onDeleteOver(event,ui)" on-droppable-out="onDeleteOut(event)"></button>\r\n        <i class="fa fa-trash-o fa-2x" style="color:#fff;"></i>\r\n\r\n    </div>--\x3e\x3c!--<div class="tile-bubble-remove" title="Remove Page" droppable\r\n         ng-class="{\'show-bubble\': true}"\r\n         on-droppable-drop="onDeleteDropCharacterItem(event,ui)"\r\n         on-droppable-over="onDeleteOverCharacterItem(event,ui)" on-droppable-out="onDeleteOutCharacterItem(event)">\r\n        <i class="fa fa-trash-o" aria-hidden="true"></i>\r\n    </div>--\x3e\x3c!--<div class="tile-bubble-add" title="Add a new tile"\r\n         ng-click="ShowTiles()">\r\n        <i class="fa fa-plus" aria-hidden="true"></i>\r\n    </div>\r\n    <div class="tile-bubble-save" title="Save changes"\r\n         ng-click="SaveLayout(NewLayout)">\r\n        <i class="fa fa-floppy-o" aria-hidden="true"></i>\r\n    </div>--\x3e</div><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container>'),e.put("/views/home/CharacterRulesetAbilities.html",'<div class="container item_properties invenroty"><div class="row"><div class="well well-sm"><div class="col-md-12"><h4>Ruleset Abilities</h4></div><div class="col-md-offset-4 col-md-4"><button type="button" class="btn btn-primary back" ng-click="BackAbility()">Back</button></div></div></div><div class="row" ng-show="ShowAbilities"><div class="col-md-12"><h3 class="text-center">No Ruleset Abilities</h3></div></div><div class="row" id="listview" ng-show="ShowAbility"><div class="col-md-12 col-sm-12 table-responsive"><table class="table table-bordered"><thead><tr><th></th><th>S.No</th><th>Image</th><th>Name</th><th>Stats</th><th>Description</th><th>Quantity</th><th>Attributes</th></tr></thead><tbody><tr ng-repeat="ability in RulesetAbilities"><td><input type="checkbox" class="input-sm" ng-checked="checkSelected(ability,3)" ng-click="addName(ability,3)"></td><td ng-click="ShowAllItemProperties(item,$index)">{{$index + 1}}</td><td ng-click="ShowAllItemProperties(item,$index)"><img ng-src="{{ability.AbilityProperties[1].Value.Image.image}}" class="img-resposive" width="120" height="120"></td><td ng-click="ShowAllItemProperties(item,$index)">{{ability.AbilityProperties[0].Value.Text.value}}</td><td ng-click="ShowAllItemProperties(item,$index)">{{ability.AbilityProperties[2].Value.Text.value}}</td><td ng-click="ShowAllItemProperties(item,$index)">{{ability.AbilityProperties[9].Value.Text.value}}</td><td ng-click="ShowAllItemProperties(item,$index)">{{ability.AbilityProperties[3].Value.Number.value}}</td><td ng-click="ShowAllItemProperties(item,$index)"><div><div><div class="icon_box"><span>{{ability.AbilityProperties[11].Name | limitTo : 1}}</span></div></div></div></td>\x3c!--<td>\r\n                            <div class="row items_button">\r\n                                <button type="button" class="btn btn-primary" ng-click="EditItem(item,$index)"><i class="fa fa-edit"></i> EDIT</button>\r\n                                <button type="button" class="btn btn-info" ng-click="CopyItem(item,$index)"><i class="fa fa-copy"></i>COPY</button>\r\n\r\n                                <button type="button" class="btn btn-danger" ng-click="Removeitem(item)"><i class="fa fa-remove"></i>REMOVE</button>\r\n                            </div>\r\n                        </td>--\x3e</tr></tbody></table></div></div><div class="row mb-20"><div class="col-md-12"><button type="button" class="btn btn-primary pull-right" ng-click="SaveRulesetAbility()">OK</button></div></div></div>'),e.put("/views/home/CharacterRulesetItems.html",'<div class="container item_properties invenroty"><div class="row"><div class="well well-sm"><div class="col-md-12"><h4>Ruleset Items</h4></div><div class="col-md-offset-4 col-md-4"><button type="button" class="btn btn-primary back" ng-click="BackItem()">Back</button></div></div></div><div class="row" ng-show="ShowItems"><div class="col-md-12"><h3 class="text-center">No Ruleset Items</h3></div></div><div class="row" id="listview" ng-show="ShowItem"><div class="col-md-12 col-sm-12 table-responsive"><table class="table table-bordered"><thead><tr><th></th><th>S.No</th><th>Image</th><th>Name</th><th>Stats</th><th>Description</th><th>Quantity</th><th>Attributes</th></tr></thead><tbody><tr ng-repeat="item in RulesetItems"><td><input type="checkbox" class="input-sm" ng-checked="checkSelected(item,1)" ng-click="addName(item,1)"></td><td ng-click="ShowAllItemProperties(item,$index)">{{$index + 1}}</td><td ng-click="ShowAllItemProperties(item,$index)"><img ng-src="{{item.ItemProperties[1].Value.Image.image}}" class="img-resposive" width="120" height="120"></td><td ng-click="ShowAllItemProperties(item,$index)">{{item.ItemProperties[0].Value.Text.value}}</td><td ng-click="ShowAllItemProperties(item,$index)">{{item.ItemProperties[2].Value.Text.value}}</td><td ng-click="ShowAllItemProperties(item,$index)">{{item.ItemProperties[9].Value.Text.value}}</td><td ng-click="ShowAllItemProperties(item,$index)">{{item.ItemProperties[3].Value.Number.value}}</td><td ng-click="ShowAllItemProperties(item,$index)"><div><div><div class="icon_box"><span>{{item.ItemProperties[13].Name | limitTo : 1}}</span></div><div class="icon_box"><span>{{item.ItemProperties[17].Name | limitTo : 1}}</span></div><div class="icon_box"><span>{{item.ItemProperties[18].Name | limitTo : 1}}</span></div><div class="icon_box"><span>{{item.ItemProperties[19].Name | limitTo : 2}}</span></div><div class="icon_box"><span>{{item.ItemProperties[20].Name | limitTo : 1}}</span></div><div class="icon_box"><span>{{item.ItemProperties[21].Name | limitTo : 1}}</span></div></div></div></td>\x3c!--<td>\r\n                            <div class="row items_button">\r\n                                <button type="button" class="btn btn-primary" ng-click="EditItem(item,$index)"><i class="fa fa-edit"></i> EDIT</button>\r\n                                <button type="button" class="btn btn-info" ng-click="CopyItem(item,$index)"><i class="fa fa-copy"></i>COPY</button>\r\n\r\n                                <button type="button" class="btn btn-danger" ng-click="Removeitem(item)"><i class="fa fa-remove"></i>REMOVE</button>\r\n                            </div>\r\n                        </td>--\x3e</tr></tbody></table></div></div><div class="row mb-20"><div class="col-md-12"><button type="button" class="btn btn-primary pull-right" ng-click="SaveRulesetItem()">OK</button></div></div></div>'),e.put("/views/home/CharacterRulesetSpells.html",'<div class="container item_properties invenroty"><div class="row"><div class="well well-sm"><div class="col-md-12"><h4>Ruleset Spells</h4></div><div class="col-md-offset-4 col-md-4"><button type="button" class="btn btn-primary back" ng-click="BackSpell()">Back</button></div></div></div><div class="row" ng-show="ShowSpells"><div class="col-md-12"><h3 class="text-center">No Ruleset Spells</h3></div></div><div class="row" id="listview" ng-show="ShowSpell"><div class="col-md-12 col-sm-12 table-responsive"><table class="table table-bordered"><thead><tr><th></th><th>S.No</th><th>Image</th><th>Name</th><th>Stats</th><th>Description</th><th>Quantity</th><th>Attributes</th></tr></thead><tbody><tr ng-repeat="spell in RulesetSpells"><td><input type="checkbox" class="input-sm" ng-checked="checkSelected(spell,2)" ng-click="addName(spell,2)"></td><td ng-click="ShowAllItemProperties(item,$index)">{{$index + 1}}</td><td ng-click="ShowAllItemProperties(item,$index)"><img ng-src="{{spell.SpellProperties[1].Value.Image.image}}" class="img-resposive" width="120" height="120"></td><td ng-click="ShowAllItemProperties(item,$index)">{{spell.SpellProperties[0].Value.Text.value}}</td><td ng-click="ShowAllItemProperties(item,$index)">{{spell.SpellProperties[2].Value.Text.value}}</td><td ng-click="ShowAllItemProperties(item,$index)">{{spell.SpellProperties[9].Value.Text.value}}</td><td ng-click="ShowAllItemProperties(item,$index)">{{spell.SpellProperties[3].Value.Number.value}}</td><td ng-click="ShowAllItemProperties(item,$index)"><div><div><div class="icon_box"><span>{{spell.SpellProperties[13].Name | limitTo : 1}}</span></div><div class="icon_box"><span>{{spell.SpellProperties[14].Name | limitTo : 2}}</span></div><div class="icon_box"><span>{{spell.SpellProperties[15].Name | limitTo : 1}}</span></div><div class="icon_box"><span>{{spell.SpellProperties[16].Name | limitTo : 2}}</span></div><div class="icon_box"><span>{{spell.SpellProperties[20].Name | limitTo : 1}}</span></div><div class="icon_box"><span>{{spell.SpellProperties[22].Name | limitTo : 2}}</span></div></div></div></td>\x3c!--<td>\r\n                            <div class="row items_button">\r\n                                <button type="button" class="btn btn-primary" ng-click="EditItem(item,$index)"><i class="fa fa-edit"></i> EDIT</button>\r\n                                <button type="button" class="btn btn-info" ng-click="CopyItem(item,$index)"><i class="fa fa-copy"></i>COPY</button>\r\n\r\n                                <button type="button" class="btn btn-danger" ng-click="Removeitem(item)"><i class="fa fa-remove"></i>REMOVE</button>\r\n                            </div>\r\n                        </td>--\x3e</tr></tbody></table></div></div><div class="row mb-20"><div class="col-md-12"><button type="button" class="btn btn-primary pull-right" ng-click="SaveRulesetSpell()">OK</button></div></div></div>'),e.put("/views/home/characters.html",'<div class="page-characters"><div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><div class="page-toolbar-title"><h1>Characters</h1></div><ul class="page-toolbar-actions"><li><button type="button" class="btn icon icon-with-text icon-plus btn-primary" ng-click="newCharacter()">New Character</button></li></ul></div></div></div>\x3c!-- End of toolbar --\x3e<div class="characters">\x3c!-- Character cards --\x3e<div class="cards"><div class="container"><div class="row"><div class="col-6 col-md-4 col-lg-2" ng-repeat="c in characters | orderBy: \'Name\' track by $index"><div class="card-wrapper"><div class="card"><div class="card-image"><img class="card-img-top" ng-src="{{c.Portrait?c.Portrait:\'/wwwroot/images/not-available.jpg\'}}" onerror="this.src=\'/wwwroot/images/not-available.jpg\'" alt="{{c.Name}}" ng-click="selectCharacter(c)"><div class="card-actions hide"><button type="button" title="Edit" data-toggle="tooltip" data-action="edit" class="btn icon icon-pencil btn-simple-primary" ng-click="editCharacter(c)"></button> <button type="button" title="Duplicate" data-toggle="tooltip" data-action="duplicate" class="btn icon icon-copy icon-rsi btn-simple-primary" ng-click="copyCharacter(c)"></button> <button type="button" title="Delete" data-toggle="tooltip" data-action="delete" class="btn icon icon-trash btn-simple-primary" ng-click="characterDelete(c)"></button> <button type="button" title="Close" data-toggle="tooltip" data-action="close" class="btn icon icon-cross btn-simple-primary" ng-click="hideContextMenu($event)"></button></div></div><div class="card-body"><h4 class="card-title" ng-click="selectCharacter(c)">{{c.Name}}</h4><div class="card-actions-trigger"><button type="button" title="Manage" data-toggle="tooltip" class="btn icon icon-more btn-simple-primary hide" ng-click="showContextMenu($event)"></button></div></div></div></div></div></div></div></div>\x3c!-- End of character cards --\x3e</div></div><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container>'),
e.put("/views/home/characterspellcontent.html",'<div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><button type="button" class="btn btn-primary back" ng-click="BackSpellProperties()">Back</button> <button type="button" class="btn btn-accent" ng-click="SaveInventoryTiles(CharacterContent,2)">Save Tile</button></div></div></div><div class="container item_view"><div class="row"><div class="col-md-4 image"><div class="image"><img ng-src="{{CharacterContent.CharacterSpellsProperties[1].Value.Image.image}}" class="img-resposive" width="120" height="120"></div><button class="btn btn-primary">{{CharacterContent.CharacterSpellsProperties[0].Value.Text.value}}</button></div><div class="col-md-4"><div class="text-design"><div class="text"><h5>STATS</h5><p>{{CharacterContent.CharacterSpellsProperties[2].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-6"><div class="panel div_blue"><div class="panel-heading text-center">CLASS</div><div class="panel-body text-center">{{CharacterContent.CharacterSpellsProperties[10].Value.Text.value}}</div></div></div><div class="col-md-6"><div class="panel div_blue"><div class="panel-heading text-center">SCHOOL</div><div class="panel-body text-center">{{CharacterContent.CharacterSpellsProperties[9].Value.Text.value}}</div></div></div></div><div class="blue"><div class="col-md-12"><div class="panel div_green"><div class="panel-heading text-center">Materialized Components</div><div class="panel-body text-center">{{CharacterContent.CharacterSpellsProperties[9].Value.Text.value}}</div></div></div></div></div></div></div><div class="col-md-4"><div class="text-design"><div class="text"><h5>Description</h5><p>{{CharacterContent.CharacterSpellsProperties[18].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-6"><div class="panel div_red"><div class="panel-heading text-center">CASTING TIME</div><div class="panel-body text-center">{{CharacterContent.CharacterSpellsProperties[17].Value.Number.value}}</div></div></div><div class="col-md-6"><div class="panel div_red"><div class="panel-heading text-center">Attributes</div><div class="panel-body text-center"></div></div></div></div><div class="blue"><div class="col-md-12"><div class="panel panel-danger"><div class="panel-heading text-center">TAGS</div><div class="panel-body text-center">{{CharacterContent.CharacterSpellsProperties[10].Value.Text.value}}</div></div></div></div></div></div></div></div><div class="row"><div class="col-md-4"><div class="buttons-align"><button class="btn btn_red" ng-click="Removeitems(CharacterContent,2)"><i class="fa fa-remove" aria-hidden="true"></i> REMOVE</button> <button class="btn btn_red" ng-click="EditItems(CharacterContent,2)"><i class="fa fa-exchange" aria-hidden="true"></i> Edit</button></div></div><div class="col-md-4"><div class="buttons-align"><div ng-repeat="value in CharacterContent.CharacterSpellsProperties" class="equip"><rpgsmithcontenttype info="value"></rpgsmithcontenttype></div><button class="btn uneqp" ng-click="CopyItems(CharacterContent,2)"><i class="fa fa-edit" aria-hidden="true"></i> Copy</button></div></div><div class="col-md-4"><div class="buttons-align"><button class="btn btn-warning" style="width:100%" ng-click="ShowTilesforInventory(CharacterContent.CharacterSpellsProperties)"><i class="fa fa-plus" aria-hidden="true"></i> ADD TILE</button></div></div></div><div gridstack class="grid-stack" options="stackOptions" on-change="onChange(event,ui)" on-drag-start="onDragStart(event,ui)" on-drag-stop="onDragStop(event,ui)" on-resize-start="onResizeStart(event,ui)" on-resize-stop="onResizeStop(event,ui)"><div gridstack-item ng-repeat="tab in CharacterContent.CharacterSpellsProperties" ng-click="tileSelect(tab.tile)" ng-class="getTileClass(tab.tile)" ng-switch on="tab.tile.TileTypeName" class="grid-stack-item" gs-item="tile" gs-item-id="tab.tile.ClientObjectId" gs-item-x="tab.tile.X" gs-item-y="tab.tile.Y" gs-item-width="tab.tile.Width" gs-item-height="tab.tile.Height" gs-item-autopos="1" on-item-added="onItemAdded(item)" on-item-removed="onItemRemoved(item)" data-gs-width="4" data-gs-height="2"><rpgsmithnotetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Note"></rpgsmithnotetype><rpgsmithcountertype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Counter"></rpgsmithcountertype><rpgsmithattributetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Attribute"></rpgsmithattributetype><rpgsmithlinktype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Link" fullscope="LinkExecuteTileContent"></rpgsmithlinktype><rpgsmithexecutetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Execute" fullscope="LinkExecuteTileContent"></rpgsmithexecutetype><rpgsmithcommandtype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Command"></rpgsmithcommandtype><rpgsmithimagetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Image"></rpgsmithimagetype></div></div><div class="tile-bubble-remove" title="Remove Page" droppable ng-class="{\'show-bubble\': state.tileDragging}" on-droppable-drop="onDeleteDropCharacterTiles(event,ui)" on-droppable-over="onDeleteOverCharacterItem(event,ui)" on-droppable-out="onDeleteOutCharacterItem(event)"><i class="fa fa-trash-o" aria-hidden="true"></i></div><div class="tile-bubble-add" title="Add a new tile" ng-click="ShowTiles()"><i class="fa fa-plus" aria-hidden="true"></i></div><div class="tile-bubble-save" title="Save changes" ng-click="SaveLayout(NewLayout)"><i class="fa fa-floppy-o" aria-hidden="true"></i></div>\x3c!--<div class="tile-bubble-remove" title="Remove Page" droppable\r\n         on-droppable-drop="onDeleteDropCharacterItem(event,ui)"\r\n         on-droppable-over="onDeleteOverCharacterItem(event,ui)" on-droppable-out="onDeleteOutCharacterItem(event)">\r\n        <i class="fa fa-trash-o" aria-hidden="true"></i>\r\n    </div>\r\n    <div class="tile-bubble-add" title="Add a new tile"\r\n         ng-click="ShowTiles()">\r\n        <i class="fa fa-plus" aria-hidden="true"></i>\r\n    </div>\r\n    <div class="tile-bubble-save" title="Save changes"\r\n         ng-click="SaveLayout(NewLayout)">\r\n        <i class="fa fa-floppy-o" aria-hidden="true"></i>\r\n    </div>--\x3e</div><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container>'),e.put("/views/home/edit-character.html",'<div class="modal-header"><h4 class="modal-title"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span ng-show="isEdit">Editing {{item.name}}</span> <span ng-show="!isEdit">New Character</span></h4></div><div class="modal-body"><ng-form name="dlg" novalidate role="form"><div class="form-group input-group-lg" ng-class="{true: \'has-error\'}[dlg.name.$dirty && dlg.name.$invalid]"><span class="help-block">Character Name</span> <input type="text" class="form-control" name="name" id="name" ng-model="item.name" required></div><div class="form-group input-group-lg"><span class="help-block">Character Portrait</span><div class="clearfix"><div class="pull-left edit-character-portrait"><img ngf-thumbnail="getThumbNail()" class="edit-character-portrait" ngf-resize="{width: 120, height: 120}"></div><div class="pull-left btn btn-default edit-character-portrait-button" name="file" ng-model="file" ngf-select ngf-resize="{width: 120, height: 120, quality: 0.8, centerCrop: true}" ngf-fix-orientation="true" ngf-pattern="\'image/*\'" ngf-accept="\'image/*\'">Select</div></div><span class="help-block">120px by 120px</span></div><div class="form-group"><span class="help-block">Select RuleSet</span><div class=""><select class="form-control"><option>RuleSet 1</option><option>RuleSet 2</option><option>RuleSet 3</option></select></div></div></ng-form></div><div class="modal-footer">\x3c!--<a ng-href="http://localhost:5000/characters/NewRuleSet" class="btn btn-primary"><i style="color:#fff;" class="fa fa fa-plus"></i> Add Rule Set</a>--\x3e <button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-primary" ng-click="save()" ng-disabled="(dlg.$dirty && dlg.$invalid) || dlg.$pristine">Save</button></div>'),e.put("/views/home/editprofile.html",'<div class="container edit_profile"><div class="panel panel-primary"><div class="panel-heading"><h4><i class="fa fa-edit"></i> Edit Profile <a href="/characters" class="btn btn-default back_new"><i class="fa fa-angle-double-left"></i>&nbsp;<span>Back</span></a></h4></div><div class="panel-body"><div class="col-md-offset-2 col-md-10"><div class="form-horizontal"><form name="EditForm" novalidate class="form-horizontal"><div class="form-group"><label class="control-label col-sm-2" for="email">User Name:</label><div class="col-sm-3"><input type="text" class="form-control" id="email" placeholder="Enter Username" ng-model="data.Name" disabled="disabled"></div></div><div class="form-group"><label class="control-label col-sm-2" for="email">Email</label><div class="col-sm-3"><input type="email" class="form-control" id="email" placeholder="Enter email" name="email" ng-model="data.Email" disabled="disabled"></div></div>\x3c!--<div class="form-group">\r\n                            <label class="control-label col-sm-2" for="pwd">Password:</label>\r\n                            <div class="col-sm-3">\r\n                                <input type="password" class="form-control" id="pwd" placeholder="Enter password" name="pwd" ng-model="data.PasswordHash">\r\n                            </div>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label class="control-label col-sm-2" for="pwd">Confirm Password:</label>\r\n                            <div class="col-sm-3">\r\n                                <input type="password" class="form-control" id="pwd" placeholder="Enter password" name="pwd" ng-model="password" ng-change="checkpass()">\r\n                            </div>\r\n                        </div>--\x3e<div class="form-group"><label class="control-label col-sm-2" for="pwd">Profile Image:</label><div class="col-sm-4"><div class="clearfix"><div class="pull-left edit-character-portrait"><img id="profileImage" ng-src="{{data.ProfileImage}}" ng-model="data.ProfileImage" alt="Profile Image" ngf-resize="{width: 120, height: 120}"></div><div class="profile_image"><span>Select</span><input type="file" onchange="angular.element(this).scope().ProfileImageUpload(this)" accept="x-png,gif,jpeg"></div></div><span class="help-block">120px by 120px</span></div></div></form></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button type="button" class="btn btn-primary" ng-click="Update()"><i class="fa fa-edit"></i><span>Update</span></button> <button type="button" class="btn btn-default" ng-click="cancel()"><i class="fa fa-times"></i><span>Cancel</span></button></div></div></div></div></div></div><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container>'),e.put("/views/home/ExistingRuleset.html",'<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"><\/script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"><\/script><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><style>.mt-20 {\r\n            margin-top: 50px; \r\n            margin-bottom: 50px;\r\n        }\r\n        .mb-20 {\r\n            margin-bottom: 20px;\r\n        }\r\n        .mt-20 {\r\n            margin-top: 20px;\r\n        }</style></head><body><div class="container"><div class="row"><div class="panel panel-default"><div class="panel-heading"><h4 class="lead">Existing RuleSet</h4></div><div class="panel-body"><a ng-href="http://localhost:5000/NewRuleSet" class="pull-right btn btn-primary btn-md">Add Rule Set</a>\x3c!--<button type="button" class="pull-right btn btn-primary btn-md" data-toggle="modal" data-target="#myModal"><i style="color:#fff;" class="fa fa-plus" ></i>&nbsp;Add RuleSet</button>--\x3e<div class="mt-20"><table class="table table-bordered"><thead><tr><th>SNO</th><th>Name</th><th>Type</th></tr></thead><tbody><tr><td>1</td><td>---- No coreset Selected----</td><td>---- No coreset Selected----</td></tr></tbody></table><button type="button" class="btn btn-default pull-right" ng-click="cancel()">Cancel</button></div></div></div></div></div><div class="modal fade" id="myModal" role="dialog"><div class="modal-dialog">\x3c!-- Modal content--\x3e<div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Add New RuleSet</h4></div><div class="modal-body"><div class="form-group"><div class="row"><div class="col-md-12"><h2 class="text-center mt-20">Add RuleSet</h2><div class=""><div class="form-group"><label class="control-label col-md-4">Default Dice</label><div class="col-md-8 mb-20"><select class="form-control"><option>Dice 1</option><option>Dice 2</option></select></div></div></div><div class=""><div class="form-group"><label class="control-label col-md-4">Weight Metric Label</label><div class="col-md-8"><input type="number" min="0" class="form-control"></div></div></div></div></div><hr><div class="row"><div class="col-md-12"><h2 class="text-center">Core Stats</h2><button type="button" class="col-md-offset-8 btn btn-primary btn-md" data-toggle="modal" data-target="#myModal"><i style="color:#fff" class="fa fa-plus"></i>&nbsp;Add New CoreStats</button><div class="col-md-12 mt-20"><p class="lead text-center">No CoreStats Available..</p><table class="table table-bordered" style="display:none"><thead><tr><th>SNO</th><th>Name</th><th>Type</th></tr></thead><tbody><tr><td>1</td><td>---- No coreset Selected----</td><td>---- No coreset Selected----</td></tr></tbody></table><button type="button" class="btn btn-default pull-right" ng-click="cancel()">Cancel</button></div></div></div></div><div class="modal fade" id="myModal" role="dialog"><div class="modal-dialog">\x3c!-- Modal content--\x3e<div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Add New CoreState</h4></div><div class="modal-body"><div class="form-group"><label class="control-label col-md-4">Name</label><div class="col-md-8 mb-20"><input type="text" class="form-control"></div></div><div class="form-group"><label class="control-label col-md-4">Type</label><div class="col-md-8 mb-20"><input type="text" class="form-control"></div></div></div><div class="modal-footer" style="border-top:1px solid #fff"><button type="button" class="btn btn-primary" data-dismiss="modal">Save</button> <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button></div></div></div></div>\x3c!--<div class="form-group">\r\n                            <label class="control-label col-md-4">\r\n                                Name\r\n                            </label>\r\n                            <div class="col-md-8 mb-20">\r\n                                <input type="text" class="form-control" />\r\n                            </div>\r\n                        </div>--\x3e<div class="form-group"><label class="control-label col-md-4">Type</label><div class="col-md-8 mb-20"><input type="text" class="form-control"></div></div></div><div class="modal-footer" style="border-top:1px solid #fff"><button type="button" class="btn btn-primary" data-dismiss="modal">Save</button> <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button></div></div></div></div></body></html>'),e.put("/views/home/itemcontent.html",'<div gridstack class="grid-stack" options="stackOptions" on-change="onChange(event,ui)" on-drag-start="onDragStart(event,ui)" on-drag-stop="onDragStop(event,ui)" on-resize-start="onResizeStart(event,ui)" on-resize-stop="onResizeStop(event,ui)"><div gridstack-item ng-repeat="item in RulesetContent" ng-click="tileSelect(tab)" ng-class="getTileClass(tab)" ng-switch on="item.Name" class="grid-stack-item" gs-item="tile" gs-item-id="item.Id" gs-item-x="5" gs-item-y="5" data-gs-x="1" data-gs-y="1" gs-item-autopos="1" data-gs-width="4" data-gs-height="2" on-item-added="onItemAdded(item)" on-item-removed="onItemRemoved(item)"><img ng-src="{{RulesetContent[1].Value.Image.image}}" class="img-resposive grid-stack-item-content" width="120" height="120" ng-switch-when="Image"><p class="form_inline grid-stack-item-content" ng-switch-when="Name">{{item.Value.Text.value}}</p><p class="form_inline grid-stack-item-content" ng-switch-when="Stats">Stats :{{item.Value.Text.value}}</p><p class="form_inline grid-stack-item-content" ng-switch-when="Visible Description">Discription:{{item.Value.Text.value}}</p><p class="form_inline grid-stack-item-content" ng-switch-when="Weight">Weight:{{item.Value.Weight.value}}</p><p class="form_inline grid-stack-item-content" ng-switch-when="Volume">Volume:{{item.Value.Volume.depthvalue}} {{item.Value.Volume.heightvalue}} {{item.Value.Volume.lenghtvalue}}</p><p class="form_inline grid-stack-item-content" ng-switch-when="Rarity">Rarity:{{item.Value.Choices.selectedchoice}}</p><p class="form_inline grid-stack-item-content" ng-switch-when="Tags">Tags:{{item.Value.Text.value}}</p></div>\x3c!--<div class="grid-stack-item" ng-repeat="item in RulesetContent" gs-item-x="5" gs-item-y="5" data-gs-x="5" data-gs-y="5"data-gs-width="5" data-gs-height="5" gs-item-width="7" gs-item-height="7" gs-item-autopos="1" on-item-added="onItemAdded(item)" on-item-removed="onItemRemoved(item)">\r\n\r\n                        <p class="form_inline grid-stack-item-content">{{item.Value.Text.value}}</p>\r\n                </div>--\x3e</div><div class="buttons-align"><button class="btn btn-warning" style="width:100%" ng-click="ShowTiles(RulesetContent)"><i class="fa fa-plus" aria-hidden="true"></i> ADD TILE</button></div><div gridstack class="grid-stack" options="stackOptions" on-change="onChange(event,ui)" on-drag-start="onDragStart(event,ui)" on-drag-stop="onDragStop(event,ui)" on-resize-start="onResizeStart(event,ui)" on-resize-stop="onResizeStop(event,ui)"><div gridstack-item ng-repeat="tab in RulesetContent" ng-click="tileSelect(tab)" ng-class="getTileClass(tab)" ng-switch on="tab.TileTypeName" class="grid-stack-item" gs-item="tile" gs-item-id="tab.TileId" gs-item-x="tab.X" gs-item-y="tab.Y" gs-item-width="tab.Width" gs-item-height="tab.Height" gs-item-autopos="1" on-item-added="onItemAdded(item)" on-item-removed="onItemRemoved(item)" data-gs-width="4" data-gs-height="2"><rpgsmithnotetype ng-style="" style="border: {{tab.Styles.width}} {{tab.Styles.style}} {{tab.Styles.color}}; border-radius: {{tab.Styles.radius}};background-color: {{tab.Styles.backgroundColor}};box-shadow:{{tab.Styles.shadow}}" info="tab" class="form_inline grid-stack-item-content" ng-switch-when="Note" fullscope="tabs.TileList"></rpgsmithnotetype><rpgsmithcountertype ng-style="" style="border: {{tab.Styles.width}} {{tab.Styles.style}} {{tab.Styles.color}};border-radius: {{tab.Styles.radius}};background-color: {{tab.Styles.backgroundColor}};box-shadow:{{tab.Styles.shadow}}" info="tab" class="form_inline grid-stack-item-content" ng-switch-when="Counter"></rpgsmithcountertype><rpgsmithattributetype ng-style="" style="border: {{tab.Styles.width}} {{tab.Styles.style}} {{tab.Styles.color}}; border-radius: {{tab.Styles.radius}};background-color: {{tab.Styles.backgroundColor}};box-shadow:{{tab.Styles.shadow}}" info="tab" class="form_inline grid-stack-item-content" ng-switch-when="Attribute"></rpgsmithattributetype><rpgsmithlinktype ng-style="" style="border: {{tab.Styles.width}} {{tab.Styles.style}} {{tab.Styles.color}}; border-radius: {{tab.Styles.radius}};background-color: {{tab.Styles.backgroundColor}};box-shadow:{{tab.Styles.shadow}}" info="tab" class="form_inline grid-stack-item-content" ng-switch-when="Link"></rpgsmithlinktype><rpgsmithexecutetype ng-style="" style="border: {{tab.Styles.width}} {{tab.Styles.style}} {{tab.Styles.color}}; border-radius: {{tab.Styles.radius}};background-color: {{tab.Styles.backgroundColor}};box-shadow:{{tab.Styles.shadow}}" info="tab" class="form_inline grid-stack-item-content" ng-switch-when="Execute" fullscope="tabs.TileList"></rpgsmithexecutetype><rpgsmithcommandtype ng-style="" style="border: {{tab.Styles.width}} {{tab.Styles.style}} {{tab.Styles.color}}; border-radius: {{tab.Styles.radius}};background-color: {{tab.Styles.backgroundColor}};box-shadow:{{tab.Styles.shadow}}" info="tab" class="form_inline grid-stack-item-content" ng-switch-when="Command"></rpgsmithcommandtype><rpgsmithimagetype ng-style="" style="border: {{tab.Styles.width}} {{tab.Styles.style}} {{tab.Styles.color}}; border-radius: {{tab.Styles.radius}};background-color: {{tab.Styles.backgroundColor}};box-shadow:{{tab.Styles.shadow}}" info="tab" class="form_inline grid-stack-item-content" ng-switch-when="Image"></rpgsmithimagetype></div></div><div class="tile-bubble-remove" title="Remove Page" droppable on-droppable-drop="onDeleteDrop(event,ui)" on-droppable-over="onDeleteOver(event,ui)" on-droppable-out="onDeleteOut(event)"><i class="fa fa-trash-o" aria-hidden="true"></i></div><div class="tile-bubble-add" title="Add a new tile" ng-click="ShowTiles()"><i class="fa fa-plus" aria-hidden="true"></i></div><div class="tile-bubble-save" title="Save changes" ng-click="SaveLayout(NewLayout)"><i class="fa fa-floppy-o" aria-hidden="true"></i></div>\x3c!--<script type="text/javascript">\r\n                $(function () {\r\n                    $(\'.grid-stack\').gridstack();\r\n                });\r\n            <\/script>--\x3e'),e.put("/views/home/iteminventory.html",'<div class="page-inventory itemproperty" ng-init="onloadFun()"><div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><div class="page-toolbar-title"><h1>Character Inventory</h1></div><button type="button" id="newItemTrigger" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="btn icon icon-with-text icon-plus btn-primary dropdown-toggle">New Item</button><div class="dropdown-menu" aria-labelledby="siteNavigationToggle">\x3c!--<div class="dropdown-menu dropdown-menu-right" aria-labelledby="newItemTrigger">\r\n\t\t\t\t<ul class="dropdown-menu-list">\r\n\t\t\t\t\t<li class="dropdown-menu-item">\r\n\t\t\t\t\t\t<button type="button" data-toggle="modal" data-target="#addItemPopup" class="btn btn-accent">Add Item</button>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li class="dropdown-menu-item">\r\n\t\t\t\t\t\t<button type="button" data-toggle="modal" data-target="#createItemPopup" class="btn btn-accent">Create Item</button>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>--\x3e<ul class="dropdown-menu-list"><li class="dropdown-menu-item" ng-hide="true"></li><li class="dropdown-menu-item"><button type="button" data-toggle="modal" style="width: 100%" data-target="#createItemPopup" ng-click="AddRulesetItems()" class="btn btn-accent">Add Item</button></li><li class="dropdown-menu-item"><button type="button" data-toggle="modal" style="width: 100%" data-target="#addItemPopup" ng-click="CreateCharacterItem()" class="btn btn-accent">Create Item</button></li></ul></div></div></div></div>\x3c!-- End of toolbar --\x3e\x3c!-- Inventory cards --\x3e<div class="cards cards-inventory"><div class="container"><div ng-show="ShowItems"><div class="col-md-12"><h3 class="text-center">No Items Added</h3></div></div><div class="card-list" ng-show="ShowItem"><div class="card-wrapper" ng-repeat="item in NewItemInventory.CharacterItems"><div class="card" data-href="#"><div class="card-image"><img class="card-img-top" ng-click="ShowAllItemProperties(item,$index)" ng-src="{{item.CharacterItemsProperties[1].Value.Image.image?item.CharacterItemsProperties[1].Value.Image.image:\'/wwwroot/images/not-available.jpg\'}}" alt="{{item.CharacterItemsProperties[0].Value.Text.value}}"><div class="card-actions"><button type="button" title="Edit" ng-click="EditItem(item,$index,1)" data-toggle="tooltip" data-action="edit" class="btn icon icon-pencil btn-simple-primary"></button> <button type="button" title="Duplicate" ng-click="CopyItem(item,$index,1)" data-toggle="tooltip" data-action="duplicate" class="btn icon icon-copy icon-rsi btn-simple-primary"></button> <button type="button" title="Delete" ng-click="Removeitem(item,$index,1)" data-toggle="tooltip" data-action="delete" class="btn icon icon-trash btn-simple-primary"></button> <button type="button" title="Close" ng-click="hideConteextMenu($event)" data-toggle="tooltip" data-action="close" class="btn icon icon-cross btn-simple-primary"></button></div></div><div class="card-body"><h4 class="card-title" ng-click="ShowAllItemProperties(item,$index)">{{item.CharacterItemsProperties[0].Value.Text.value}}</h4><div class="card-actions-trigger"><button type="button" title="Manage" data-toggle="tooltip" class="btn icon icon-more btn-simple-primary" ng-click="showContextMenu($event)"></button></div><ul class="item-properties"><li class="item-property item-property-text rarity highlight" ng-if="(item.CharacterItemsProperties[6].Value.Choices.selectedchoice != undefined) && (item.CharacterItemsProperties[6].Value.Choices.selectedchoice != null) && (item.CharacterItemsProperties[6].Value.Choices.selectedchoice != \'\')">{{item.CharacterItemsProperties[6].Value.Choices.selectedchoice}}</li><li class="item-property item-property-text weight" ng-if="(item.CharacterItemsProperties[4].Value.Weight.value != undefined) && (item.CharacterItemsProperties[4].Value.Weight.value != null) && (item.CharacterItemsProperties[4].Value.Weight.value != \'\')">{{item.CharacterItemsProperties[4].Value.Weight.value}} {{item.CharacterItemsProperties[4].Value.Weight.units.selectedUnit}}</li><li ng-repeat="item in item.CharacterItemsProperties" ng-if="(item.TypeId==3 && item.Value.OnorOff.value == \'Yes\') || ( item.TypeId == 4 && item.Value.YesOrNo.value == \'Yes\')" class="item-property item-property-icon icon icon-rsi" ng-class="\'icon-\' + item.Name.toLowerCase()" title="{{item.Name}}" data-toggle="tooltip"></li>\x3c!--<li class="item-property item-property-icon icon icon-magical icon-rsi" title="Magical" data-toggle="tooltip"></li>\r\n                                <li class="item-property item-property-icon icon icon-consumable icon-rsi" title="Consumable" data-toggle="tooltip"></li>--\x3e</ul><div class="item-stats">{{item.CharacterItemsProperties[2].Value.Text.value}}</div><div class="item-actions">\x3c!--<button type="button" class="btn btn-accent" ng-click="Removeitem(item,$index,1)">Drop</button>\r\n\r\n                                <button type="button" class="btn btn-accent">Use</button>\r\n\r\n                                <rpgsmithcontenttype info="value" ng-repeat="value in item.CharacterItemsProperties"></rpgsmithcontenttype>--\x3e</div></div></div></div></div></div></div></div><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container>'),
e.put("/views/home/login.html",'<div class="container-fluid login_page"><div class="text-center rpgs-login" ng-hide="registersuccess"><div class="logo"></div><div class="login-form-1"><form id="login-form" class="text-left"><div class="login-form-main-message"></div><div class="main-login-form"><div class="login-group state-{{mode}}"><div class="form-group register" ng-class="{\'open\': mode==2}"><label for="lg_username" class="sr-only">Username</label><input type="text" class="form-control" name="lg_username" placeholder="username" ng-model="data.username"></div><div class="form-group register" ng-class="{\'open\': mode==2 || mode==1 || mode==3}"><label for="lg_email" class="sr-only">Email</label><input type="email" class="form-control" name="lg_email" placeholder="email address" ng-model="data.email"></div><div class="form-group register" ng-class="{\'open\': mode != 3}"><label for="lg_password1" class="sr-only">Password</label><input type="password" class="form-control" name="lg_password1" placeholder="password" ng-model="data.password" ng-keypress="passwordKeyPress($event)"></div><div class="form-group register" ng-class="{\'open\': mode == 2}"><label for="lg_password2" class="sr-only">Confirm Password</label><input type="password" class="form-control" name="lg_password2" placeholder="confirm password" ng-model="data.confirmPassword"></div><div class="register account_image" ng-class="{\'open\': mode == 2}"><div class="profile_image profile_image_new"><span>Choose Profile Picture</span> <input type="file" onchange="angular.element(this).scope().profileImageUpload(this)" accept="x-png,gif,jpeg"></div><img style="margin-top: 20px" id="profileImage" ng-src="{{profileimagesrc}}" ng-model="data.profileimagesrc" alt="Account Image"></div><div class="form-group login-group-checkbox register" ng-class="{\'open\': mode != 3}"><input type="checkbox" name="lg_remember" ng-model="data.rememberMe"> <span ng-click="data.rememberMe = !data.rememberMe" ng-keypress="rememberKeyPress($event)"><label for="lg_remember">remember</label></span></div></div><button type="button" class="login-button" ng-click="action()"><i class="fa fa-chevron-right"></i></button></div><div class="etc-login-form"><p class="register" ng-class="{\'open\': mode != 3}">forgot your password? <a href="#" ng-click="setMode(3)">click here</a></p><p class="register" ng-class="{\'open\': mode != 2}">new user? <a href="#" ng-click="setMode(2)">create new account</a></p><p class="register" ng-class="{\'open\': mode != 1}">have an account? <a href="#" ng-click="setMode(1)">sign in!</a></p></div><div class="col-md-12 divide_socilalicons"><table><tr style="width:100%"><td style="width:50%"><hr class="divider_line"></td><td>or</td><td style="width:50%"><hr class="divider_line"></td></tr><tr><td colspan="3"><br></td></tr></table></div><div style="text-align: center">\x3c!--<div id="my-signin2" data-longtitle="true" data-onfailure="onSignInFailure" data-onsuccess="onSignIn" data-theme="light" data-width="200">\r\n\r\n\t\t\t\t\t</div>--\x3e<script>var googleUser = {};\r\n\t\t\t\t\t\t//Signout of google account\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsignOut();\r\n\t\t\t\t\t\tvar startApp = function () {\r\n\t\t\t\t\t\t\tgapi.load(\'auth2\', function () {\r\n\t\t\t\t\t\t\t\t// Retrieve the singleton for the GoogleAuth library and set up the client.\r\n\t\t\t\t\t\t\t\tauth2 = gapi.auth2.init({\r\n\t\t\t\t\t\t\t\t\tclient_id: \'648640285849-0scq8gjc86o3tavrrks8ri78210q6hmq.apps.googleusercontent.com\',\r\n\t\t\t\t\t\t\t\t\tcookiepolicy: \'single_host_origin\',\r\n\t\t\t\t\t\t\t\t\t// Request scopes in addition to \'profile\' and \'email\'\r\n\t\t\t\t\t\t\t\t\t//scope: \'additional_scope\'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tattachSignin(document.getElementById(\'customBtn\'));\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tfunction attachSignin(element) {\r\n\t\t\t\t\t\t\tconsole.log(element.id);\r\n\t\t\t\t\t\t\tauth2.attachClickHandler(element, {},\r\n\t\t\t\t\t\t\t\tfunction (googleUser) {\r\n\t\t\t\t\t\t\t\t\tconsole.log("GoogleUser: ", googleUser);\r\n\t\t\t\t\t\t\t\t\tonSignIn(googleUser);\r\n\t\t\t\t\t\t\t\t\t//window.location.href = "/characters";\r\n\t\t\t\t\t\t\t\t\t//document.getElementById(\'name\').innerText = "Signed in: " +\r\n\t\t\t\t\t\t\t\t\t//\tgoogleUser.getBasicProfile().getName();\r\n\t\t\t\t\t\t\t\t}, function (error) {\r\n\t\t\t\t\t\t\t\t\talert(JSON.stringify(error, undefined, 2));\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfunction signOut() {\r\n\t\t\t\t\t\t\tif (gapi.auth2 == null)\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\tgapi.auth2.getAuthInstance().disconnect();\r\n\t\t\t\t\t\t\tgoogleUser = null;\r\n\r\n\t\t\t\t\t\t}<\/script><style type="text/css">#gSignInWrapper {\r\n\t\t\t\t\t\t\t/*align-content: center;*/\r\n\t\t\t\t\t\t\t/*margin-left: 30px;*/\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t#customBtn:hover {\r\n\t\t\t\t\t\t\t\tcursor: pointer;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tspan.label {\r\n\t\t\t\t\t\t\t\tfont-family: serif;\r\n\t\t\t\t\t\t\t\tfont-weight: normal;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tspan.icon {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  \r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tspan.buttonText {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}</style>\x3c!-- In the callback, you would hide the gSignInWrapper element osuccessful sign in --\x3e<div id="gSignInWrapper"><div id="customBtn" class="loginBtn loginBtn--google"><span class="buttonText">Log in with Google</span></div></div><div id="name"></div><script>startApp();<\/script><button onclick="SubmitLogin()" class="loginBtn loginBtn--facebook">Log in with Facebook</button>\x3c!--<button name="signInGoogle" id="signInGoogle" value="Google SignIn">Google SignIn</button>\r\n\r\n                    <fb:login-button data-size="xlarge" data-button-type="continue_with" autologoutlink="true" perms="read_friendlists, create_event, email, publish_stream"></fb:login-button>--\x3e</div><div class="etc-login-form"></div></form></div><div>By logging in you agree to the <a ng-click="showTerms();">Terms of Service</a></div></div><div style="max-width: 5in;margin: 0 auto;background-color:#ffffff;margin-top: 1.5em" ng-show="registersuccess"><table width="100%" style="padding: 0 20px"><tr><td align="center" style="padding-top: 1em"><a href="https://www.facebook.com/RPG-Smith-1625592264372389" title="RPGSmith"><img width="252" height="127" title="RPGSmith" alt="RPGSmith" src="https://lh3.googleusercontent.com/QEifSn90PEjjSZ-5d3yhXoVp6ixxojV6Jo3P_lKUvvBTqxFsWmLjHllW0HrLji6hM5lgEYv3cCuWE_dDo3hzyevV_RyQZf4fA0JRHr7Y6bV0oX9Mjc3O5ZlLKzkF9sfnjkpM_YmNmLJ2SX2MmjwteXop2spQACXtsQgSOM0Sc0K94F-JFC2NcSTHwqTerHPgG-T2PSG2qINGcSdgn2m7AMkq1tSqKds5x1Ovic9auo7NkNomKTgw2WvCsoR96g9TkJRqi-viX38qbJkl3RJySoqycBoSULmZ8WaIb3gMcBM4CJFEHiVZx9a1qfpxibE_iMARM4PdP8GOiGZkqLt4NNI2rs7ojnvpXIagmS0OuUyZtXt8yw0egJWadSM_K3N_vDFE_fPt4I0RU7CDgPlD-UgjvuZ7om7c-448MOtbR4lVqFyGKyYnxxruPwtr966PpXQ3NpQpHmhfMbqSnseYJ512_aeg1ohlKpUhknsSS2WBRhTcfBo14t1f1VEyNOnd8bPx0jEUQhx4euqH8raDO6W7MxOR666SWFAlLiNJdA=w702-h353-no"></a></td></tr><tr><td align="center"><div style="margin-bottom: 1em;font-size: 1.4em;font-weight: 500" mc:edit="rem_title">Email Confirmation ({{name}})</div></td></tr><tr><td align="center"><div style="margin-bottom: 1.5em;font-weight: 300" mc:edit="rem_notes">An Email has been sent to <strong>{{useremail}}</strong><br><br>Please check your inbox and confirm your account.</div></td></tr><tr><td align="center"></td></tr><tr><td align="center" style="font-weight: 300;font-size: 0.8em;padding-bottom: 1em">Copyright &#169;2018 <a href="https://www.facebook.com/RPG-Smith-1625592264372389" title="RPGSmith" style="text-decoration: none;color: #34AADC"><span class="RPGSmith" style="color: #D2602A;font-weight: 700">RPG<b style="color: #000000;font-weight: 700">&#8226;Smith</b></span></a>, LLC All rights reserved.<br><div style="padding-top: 1.0em"><a href="https://www.facebook.com/RPG-Smith-1625592264372389" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/facebook.png" border="0" alt="Facebook"></a><a href="https://twitter.com/RpgSmith" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/twitter.png" border="0" alt="Twitter"></a><a href="https://plus.google.com/u/2/communities/101062066525142446219" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/google_plusone_share.png" border="0" alt="Google+"></a></div></td></tr></table></div><toaster-container class="toaster_align" style="opacity: 1.0" toaster-options="{\'time-out\':6000}"></toaster-container><script>var appId = "315312135648885";\r\n\t\t\twindow.fbAsyncInit = function () {\r\n\t\t\t\t\r\n                FB.init({\r\n                    appId: appId,\r\n                    status: true,\r\n                    cookie: true,\r\n                    xfbml: true\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t//FB.Event.subscribe(\'auth.login\', function (response) {\r\n\t\t\t\t//\tvar credentials = { uid: response.authResponse.userID, accessToken: response.authResponse.accessToken };\r\n\t\t\t\t//\tSubmitLogin(credentials);\r\n\t\t\t\t//});\r\n\t\t\t\t\r\n            };\r\n\r\n            (function (d) {\r\n                var js, id = \'facebook-jssdk\', ref = d.getElementsByTagName(\'script\')[0];\r\n                if (d.getElementById(id)) {\r\n                    return;\r\n                }\r\n                js = d.createElement(\'script\');\r\n                js.id = id;\r\n                js.async = true;\r\n                js.src = "//connect.facebook.net/en_US/all.js";\r\n                ref.parentNode.insertBefore(js, ref);\r\n            }(document));\r\n\t\t\r\n\t\t\tif (angular.isUndefined(FB) != true) {\r\n\t\t\t\tvar status = FB.getLoginStatus();\r\n\t\t\t\tconsole.log("Status: ", status);\r\n\t\t\t\tif (status != null && status.indexOf("connected") == 0) {\r\n\t\t\t\t\tFBlogout();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t//FB.getLoginStatus(function (response) {\r\n                //    debugger;\r\n                //    if (response.status === \'connected\') {\r\n                //        alert("user is logged into fb");\r\n                //    }\r\n                //    else if (response.status === \'not_authorized\') { alert("user is not authorised"); }\r\n                //    else { alert("user is not conntected to facebook"); }\r\n\r\n                //});\r\n\t\tfunction FBlogout() {\r\n\t\t\tFB.logout(function (response) {\r\n\t\t\t\t// user is now logged out\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction SubmitLogin() {\r\n\t\t\tFB.login(function (response) {\r\n\t\t\t\tdebugger;\r\n\t\t\t\tif (response.authResponse) {\r\n\t\t\t\t\tconsole.log(\'Welcome!  Fetching your information.... \');\r\n\t\t\t\t\tvar credentials = { uid: response.authResponse.userID, accessToken: response.authResponse.accessToken };\r\n\t\t\t\t\tFB.api(\'/me\', function (response) {\r\n\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\tangular.element(\'#profileImage\').scope().isFBUserRegistered(credentials);\r\n\t\t\t\t\t\t//SubmitLogin(credentials);\r\n\t\t\t\t\t\t//alert(response.name);\r\n\t\t\t\t\t\t//  console.log(\'Good to see you, \' + response.name + \'.\');\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\'User cancelled login or did not fully authorize.\');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}<\/script><script>function onSignIn(googleUser) {\r\n\t\t\tvar profile = googleUser.getBasicProfile();\r\n\t\t\tconsole.log(\'ID: \' + profile.getId()); // Do not send to your backend! Use an ID token instead.\r\n\t\t\tconsole.log(\'Name: \' + profile.getName());\r\n\t\t\tconsole.log(\'Image URL: \' + profile.getImageUrl());\r\n\t\t\tconsole.log(\'Email: \' + profile.getEmail()); // This is null if\r\n\t\t\tconsole.log(\'Access\' + googleUser.getAuthResponse().id_token);\r\n\t\t\tangular.element(\'#profileImage\').scope().isUserRegistered(profile.getEmail(), profile.getId(), googleUser.getAuthResponse().id_token);\r\n\t\t}\r\n\t\tsetTimeout(function () {\r\n            $("#loading").css("display", "none");\r\n        }, 1000);<\/script></div>'),e.put("/views/home/resetpassword.html",'<div class="container reset_password" data-ng-init="loadResetPage()"><div class="panel panel-primary"><div class="panel-heading"><h4><i class="fa fa-edit"></i> Reset Password <a href="/characters" class="btn btn-default back_new"><i class="fa fa-angle-double-left"></i>&nbsp;<span>Back</span></a></h4></div><div class="panel-body"><div class="col-md-offset-2 col-md-10"><div class="form-horizontal"><div class="form-group"><label class="control-label col-sm-2" for="emailold">Old Password</label><div class="col-sm-3"><input type="password" class="form-control" id="emailold" placeholder="Enter Old Password" name="emailold" ng-model="resetModel.oldpassword"></div></div><div class="form-group"><label class="control-label col-sm-2" for="emailnew">New Password</label><div class="col-sm-3"><input type="password" class="form-control" id="emailnew" placeholder="Enter New Password" name="emailnew" ng-model="resetModel.newpassword"></div></div><div class="form-group"><label class="control-label col-sm-2" for="pwd">Confirm Password:</label><div class="col-sm-3"><input type="password" class="form-control" id="pwd" placeholder="Enter Confirm password" name="pwd" ng-model="resetModel.confirmpassword" ng-change="checkpass()"></div></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button type="button" class="btn btn-primary" ng-click="ResetProfilePassword(resetModel)"><i class="fa fa-edit"></i><span>Update</span></button> <button type="button" class="btn btn-default" ng-click="cancel()"><i class="fa fa-times"></i><span>Cancel</span></button></div></div></div></div></div></div><toaster-container toaster-options="{\'position-class\': \'toast-top-right\', \'time-out\':6000}" style="left: 50%; position: fixed"></toaster-container>'),e.put("/views/home/ruleset-abilities.html",'\x3c!--<div class="container item_properties">\r\n    <div class="row">\r\n        <div class="well well-sm">\r\n            <div class="">\r\n\r\n                <button type="button" class="glyphicon glyphicon-th-list btn btn-default btn-sm" ng-click="showlist()">List</button>\r\n\r\n                <button type="button" class="glyphicon glyphicon-th btn btn-default btn-sm" ng-click="showgrid()">Grid</button>\r\n                <button type="button" class="btn btn-primary back" ng-click="BackItem()">Back</button>\r\n                <button type="button" class="btn btn-primary" ng-click="CreateItem()">Create Item</button>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div ng-show="Itemlist">\r\n        <div class="col-md-12">\r\n            <h3 class="text-center">No Items Added</h3>\r\n        </div>\r\n    </div>--\x3e\x3c!--<div class="row" id="listview" ng-show="list">\r\n    <div class="col-md-12 col-sm-12 table-responsive">\r\n        <table class="table table-bordered">\r\n            <thead>\r\n                <tr>\r\n                    <th>S.No</th>\r\n                    <th>IMAGE</th>\r\n                    <th>NAME</th>\r\n                    <th>Stats</th>\r\n                    <th>DESCRIPTION</th>\r\n                    <th>Quantity</th>\r\n                    <th>ATTRIBUTES</th>\r\n                    <th>ACTIONS</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr ng-repeat="item in RulesetItems">\r\n                    <td ng-click="ShowAllItemProperties($index)">{{$index + 1}}</td>\r\n                    <td ng-click="ShowAllItemProperties($index)"><img ng-src="{{item.ItemProperties[1].Value.Image.image}}" class="img-resposive" width="120" height="120" /></td>\r\n                    <td ng-click="ShowAllItemProperties($index)">{{item.ItemProperties[0].Value.Text.value}}</td>\r\n                    <td ng-click="ShowAllItemProperties($index)">{{item.ItemProperties[2].Value.Text.value}}</td>\r\n                    <td ng-click="ShowAllItemProperties($index)">{{item.ItemProperties[9].Value.Text.value}}</td>\r\n                    <td ng-click="ShowAllItemProperties($index)">{{item.ItemProperties[3].Value.Number.value}}</td>\r\n                    <td ng-click="ShowAllItemProperties($index)">\r\n                        <div class="icon_box">\r\n                            <p style="width:104px;">\r\n                                <span>{{item.ItemProperties[13].Name | limitTo: 2}}</span>\r\n                                <span> {{item.ItemProperties[13].Value.YesOrNo.value | limitTo: 3}}</span>\r\n                            </p>\r\n                        </div>\r\n                        <div class="icon_box"><span>{{item.ItemProperties[17].Value.YesOrNo.value | limitTo: 1}}</span></div>\r\n                        <div class="icon_box"><span>M</span></div>\r\n\r\n                    </td>\r\n\r\n                    <td>\r\n                        <div class="row items_button">\r\n                            <button type="button" class="btn btn-primary" ng-click="EditItem(item,$index)"><i class="fa fa-edit"></i> EDIT</button>\r\n                            <button type="button" class="btn btn-info" ng-click="CopyItem(item,$index)"><i class="fa fa-copy"></i>COPY</button>\r\n\r\n                            \x3c!--<img src="/wwwroot/images/brain.png" class="img_inline" />\r\n                            <img src="/wwwroot/images/hand.png" class="img_inline" />--\x3e\x3c!--<button type="button" class="btn btn-danger" ng-click="Removeitem(item)"><i class="fa fa-remove"></i>REMOVE</button>\r\n                        </div>\r\n                    </td>\r\n\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n\r\n    </div>\r\n</div>--\x3e\x3c!--<div class="row" id="gridview" ng-show="grid">\r\n    <div class="col-md-3 col-sm-6" ng-repeat="item in NewRuleSet.Items" ng-click="ShowAllItemProperties(item,$index)">\r\n        <div class="card hovercard">\r\n            <div class="" ng-click="ShowAllItemProperties(item,$index)">\r\n                <img ng-src="{{item.ItemProperties[1].Value.Image.image}}" class="img-resposive" width="240" height="240" />\r\n            </div>\r\n\r\n            <div class="info">\r\n                <div class="title">\r\n                    <a target="_blank" href="#">{{item.ItemProperties[0].Value.Text.value}}</a>\r\n                </div>\r\n                <div class="desc">\r\n                    {{item.ItemProperties[9].Value.Text.value}}\r\n                </div>\r\n            </div>\r\n\r\n            <div class="bottom">\r\n\r\n                    {{item.ItemProperties[13].Value.YesOrNo.value}}\r\n\r\n                <a class="btn btn-danger btn-sm" rel="publisher"\r\n                   href="#">\r\n                    <i class="fa fa-google-plus"></i>\r\n                    {{item.ItemProperties[17].Value.YesOrNo.value}}\r\n                </a>\r\n                <a class="btn btn-primary btn-sm" rel="publisher"\r\n                   href="#">\r\n                    <i class="fa fa-facebook"></i>\r\n                    {{item.ItemProperties[13].Value.YesOrNo.value}}\r\n                </a>--\x3e\x3c!--<a class="btn btn-primary btn-xs" ng-click="EditItem(item,$index)">\r\n                <i class="fa fa-edit"></i>\r\n                <i class="fa fa-edit"></i>\r\n                Edit\r\n            </a>\r\n            <a class="btn btn-info  btn-xs" ng-click="CopyItem(item,$index)">\r\n                <i class="fa fa-copy"></i>\r\n                Copy\r\n            </a>\r\n            <a class="btn btn-danger  btn-xs" ng-click="Removeitem(item)">\r\n                <i class="fa fa-remove"></i>\r\n                Remove\r\n            </a>\r\n\r\n        </div>\r\n    </div>\r\n</div>--\x3e\x3c!--</div>--\x3e<toaster-container></toaster-container><div class="page-inventory"><div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><div class="page-toolbar-title"><h1>Ruleset Abilities</h1></div><ul class="page-toolbar-actions"><li class="view-switch"><div class="btn-group" role="group"><button type="button" id="gridViewTrigger" class="btn icon icon-grid btn-primary selected" ng-click="GridViewTrigger($event)"></button> <button type="button" id="listViewTrigger" class="btn icon icon-list btn-primary" ng-click="ListViewTrigger($event)"></button></div></li>\x3c!--<li>\r\n                        <button type="button" ng-click="BackAbility()" class="btn icon icon-with-text btn-primary">Back</button>\r\n                    </li>--\x3e<li><button type="button" ng-click="CreateAbility()" class="btn icon icon-with-text icon-plus btn-primary">Create Ability</button></li></ul></div></div></div><div ng-show="Itemlist"><div class="col-md-12"><h3 class="text-center">No Abilities Added</h3></div></div><div class="cards cards-inventory" ng-show="list"><div class="container"><div class="card-list"><div class="card-wrapper" ng-repeat="ability in RulesetAbilities"><div class="card" data-href="#"><div class="card-image"><img class="card-img-top" ng-click="ShowAllAbilityContent($index)" ng-src="{{ability.AbilityProperties[1].Value.Image.image}}?ability.AbilityProperties[1].Value.Image.image:\'/wwwroot/images/not-available.jpg\'" alt="{{ability.AbilityProperties[0].Value.Text.Value}}"><div class="card-actions hide"><button type="button" title="" data-toggle="tooltip" ng-click="EditAbility(ability,$index)" class="btn icon icon-pencil btn-simple-primary" data-original-title="Edit"></button> <button type="button" title="" data-toggle="tooltip" ng-click="CopyAbility(ability,$index)" class="btn icon icon-copy icon-rsi btn-simple-primary" data-original-title="Duplicate"></button> <button type="button" title="" data-toggle="tooltip" ng-click="RemoveAbility(ability,$index)" class="btn icon icon-trash btn-simple-primary" data-original-title="Delete"></button> <button type="button" title="" data-toggle="tooltip" class="btn icon icon-cross btn-simple-primary" data-original-title="Close" ng-click="hideConteextMenu($event)"></button></div></div><div class="card-body"><h4 class="card-title" ng-click="ShowAllAbilityContent($index)">{{ability.AbilityProperties[0].Value.Text.value}}</h4><div class="card-actions-trigger"><button type="button" title="" data-toggle="tooltip" class="btn icon icon-more btn-simple-primary" data-original-title="Manage" ng-click="showContextMenu($event)"></button></div><ul class="item-properties"><li class="item-property item-property-text rarity highlight">{{ability.AbilityProperties[2].Value.Text.value}}</li><li class="item-property item-property-text weight">{{ability.AbilityProperties[3].Value.Number.value}}</li><li class="item-property item-property-icon icon icon-magical icon-rsi" title="" data-toggle="tooltip" data-original-title="Magical"></li><li class="item-property item-property-icon icon icon-consumable icon-rsi" title="" data-toggle="tooltip" data-original-title="Consumable"></li></ul><div class="item-stats">{{ability.AbilityProperties[18].Value.Text.value}}</div></div></div></div></div></div></div></div>'),e.put("/views/home/ruleset-addnew.html",'<div class="container ruleset"><div class="row"><div class=""><div class="panel panel-primary"><div class="panel-heading"><h4><i class="{{NewRuleSet.ActionIcon}}"></i> {{NewRuleSet.Heading}}</h4></div><div class="panel-body"><ng-form name="dlg" id="rulesetForm" novalidate role="form">\x3c!--<div class="col-md-offset-2 col-md-8 mbr-20">\r\n                            <div class="form-group">\r\n                                <label class="control-label col-md-4">Name <span class="errorColor">*</span></label>\r\n                                <div class="col-md-8">\r\n                                    <input type="text" class="form-control" name="name" id="name" ng-model="NewRuleSet.Name" ng-class="{red: dlg.name.$dirty && dlg.name.$error.required}" required>\r\n                                </div>\r\n                                <button type="button" class="btn btn-primary" ng-click="ImportRuleSet()">Import Ruleset</button>\r\n                            </div>\r\n                        </div>--\x3e<div class="col-md-offset-2 col-md-8 mbr-20"><div class="form-group"><label class="control-label col-md-2">Name <span class="errorColor">*</span></label><div class="col-md-7"><input type="text" class="form-control" name="name" id="name" ng-model="NewRuleSet.Name" ng-class="{red: dlg.name.$dirty && dlg.name.$error.required}" required></div><div class="col-md-3"><button type="button" class="btn btn-primary pull-right" ng-click="ImportRuleSet()" ng-show="NewRuleSet.ImportRquired">Import Ruleset</button></div></div></div><div class="col-md-offset-2 col-md-8"><uib-accordion close-others="oneAtATime"><uib-accordion-group is-open="status.open"><uib-accordion-heading>General Settings <i class="pull-left fa" ng-class="{\'fa fa-minus\': status.open, \'fa fa-plus\': !status.open}"></i></uib-accordion-heading><div class="pb-10" ng-repeat="t in NewRuleSet.Rulesetproperty"><rulesetproperty info="t"></rulesetproperty></div></uib-accordion-group></uib-accordion><uib-accordion close-others="oneAtATime"><uib-accordion-group is-open="status.open"><uib-accordion-heading>Core Stats : {{NewRuleSet.Corestats.length}} <i class="pull-left fa" ng-class="{\'fa fa-minus\': status.open, \'fa fa-plus\': !status.open}"></i></uib-accordion-heading><h4 class="text-center" ng-show="!(iscorestatsadded)">No Core Stats Added</h4><div class="col-md-12 mobileview_addnew"><button type="button" class="btn btn-success col-md-offset-4 col-md-4" ng-click="showallCorestats()">Show All</button> <button class="btn btn-primary mb-20 ng-scope pull-right" ng-click="addNewCoreStat()">Add New Corestats</button></div><table ng-show="(iscorestatsadded)" class="table table-bordered table-striped" id="tableAttendees"><thead><tr><th>S.No.</th><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr ng-repeat="corestat in NewRuleSet.Corestats | limitTo : limit"><td>{{$index +1}}</td><td>{{corestat.Name}}</td><td>{{corestat.TypeName}}</td><td>{{corestat.Description}}</td></tr></tbody></table></uib-accordion-group></uib-accordion><uib-accordion close-others="oneAtATime"><uib-accordion-group is-open="status.open"><uib-accordion-heading>Content <i class="pull-left fa" ng-class="{\'fa fa-minus\': status.open, \'fa fa-plus\': !status.open}"></i></uib-accordion-heading><div class="col-md-12 items_tabs"><ul class="nav nav-pills"><li ng-class="{ active: isSet(1) }"><a href="#items" ng-click="setTab(1)">Items: {{NewRuleSet.Items.length}}</a></li><li ng-class="{ active: isSet(2) }"><a href="#spells" ng-click="setTab(2)">Spells: {{NewRuleSet.Spells.length}}</a></li><li ng-class="{ active: isSet(3) }"><a href="#abilities" ng-click="setTab(3)">Abilities: {{NewRuleSet.Abilities.length}}</a></li></ul><div class="tab-content"><div id="items" ng-show="isSet(1)"><div class="row"><h4 class="text-center" ng-show="!(isitemsadded)">No Items Added</h4></div><button type="button" ng-click="createitems()" class="create btn btn-default col-md-4">Create Items</button> <button type="button" class="create btn btn-success col-md-4" ng-click="showallitems()">Show All</button><table ng-show="isitemsadded" class="table table-bordered table-striped" id="tableAttendees"><thead><tr><th>S.No.</th><th>Name</th><th>Quantity</th><th>Image</th></tr></thead><tbody><tr ng-repeat="item in NewRuleSet.Items | limitTo : limit"><td>{{$index +1}}</td><td>{{item.ItemProperties[0].Value.Text.value}}</td><td>{{item.ItemProperties[3].Value.Number.value}}</td>\x3c!--<td width="30%">{{item.ItemProperties[1].Value.Image.image}}</td>--\x3e<td><img ng-src="{{item.ItemProperties[1].Value.Image.image}}" class="img-resposive" width="60" height="60"></td></tr></tbody></table></div><div id="spells" ng-show="isSet(2)"><div class="row"><h4 class="text-center" ng-show="!(isspellsadded)">No Spells Added</h4></div><button type="button" ng-click="createspells()" class="create btn btn-default col-md-4">Create Spells</button> <button type="button" class="create btn btn-success col-md-4" ng-click="ShowallSpells()">Show All</button><table ng-show="isspellsadded" class="table table-bordered table-striped" id="tableAttendees"><thead><tr><th>S.No.</th><th>Name</th><th>Quantity</th><th>Image</th></tr></thead><tbody><tr ng-repeat="spell in NewRuleSet.Spells | limitTo : limit"><td>{{$index +1}}</td><td>{{spell.SpellProperties[0].Value.Text.value}}</td><td>{{spell.SpellProperties[3].Value.Number.value}}</td><td><img ng-src="{{spell.SpellProperties[1].Value.Image.image}}" class="img-resposive" width="60" height="60"></td></tr></tbody></table></div><div id="abilities" ng-show="isSet(3)"><div class="row"><h4 class="text-center" ng-show="!(isabilitiesadded)">No Abilities Added</h4></div><button type="button" ng-click="createabilities()" class="create btn btn-default col-md-4">Create Abilities:</button> <button type="button" class="create btn btn-success col-md-4" ng-click="ShowallAbilities()">Show All</button><table ng-show="isabilitiesadded" class="table table-bordered table-striped" id="tableAttendees"><thead><tr><th>S.No.</th><th>Name</th><th>Quantity</th><th>Image</th></tr></thead><tbody><tr ng-repeat="ability in NewRuleSet.Abilities | limitTo : limit"><td>{{$index +1}}</td><td>{{ability.AbilityProperties[0].Value.Text.value}}</td><td>{{ability.AbilityProperties[3].Value.Number.value}}</td><td><img ng-src="{{ability.AbilityProperties[1].Value.Image.image}}" class="img-resposive" width="60" height="60"></td></tr></tbody></table></div></div></div></uib-accordion-group></uib-accordion><div class="pull-right"><button type="button" class="btn btn-default" ng-click="cancel()"><i class="fa fa-times"></i> Cancel</button>\x3c!--<button type="button" class="btn btn-primary" ng-click="save()" ng-disabled="(dlg.$dirty && dlg.$invalid) || dlg.$pristine"><i style="color:white;padding-top: 3px;" class="{{NewRuleSet.ActionIcon}}"></i>{{NewRuleSet.Action}}</button>--\x3e <button type="button" class="btn btn-primary" ng-click="save()"><i style="color:white;padding-top: 3px" class="{{NewRuleSet.ActionIcon}}"></i>{{NewRuleSet.Action}}</button></div></div></ng-form></div></div></div></div></div><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container>'),
e.put("/views/home/ruleset-corestats.html",'<div class=""><div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><div class="page-toolbar-title"><h1>Character Stats</h1></div><button type="button" ng-click="addNewCoreStat()" class="btn icon icon-with-text icon-plus btn-primary">Add Character Stat</button></div></div></div><div ng-show="lists"><div class="col-md-12"><h3 class="text-center">No Character Stats added</h3></div></div>\x3c!-- Character stat cards --\x3e<div class="cards cards-inventory"><div class="container"><div class="card-list" ng-repeat="corestat in Corestats"><div class="card-wrapper"><div class="card" style="flex-direction: row;padding: 20px;align-content: flex-start"><div class="card-icon icon icon-{{corestat.TypeName.toLowerCase()==\'command\'?\'dice\':(corestat.TypeName.toLowerCase()==\'yes/no\'?\'yes-no\':(corestat.TypeName.toLowerCase()==\'value & sub-value\'?\'value-subval\':(corestat.TypeName.toLowerCase()==\'current & max value\'?\'slider\':(corestat.TypeName.toLowerCase()==\'on/off\'?\'on-off\':corestat.TypeName.toLowerCase()))))}} icon-rsi"></div><div class="card-order-trigger icon icon-list" ng-hide="true"></div><div class="card-body"><h4 class="card-title">{{corestat.Name}}</h4><div class="item-desc">{{corestat.Description}}</div><div class="item-type"><span>{{corestat.TypeName}}</span></div><div class="card-actions-trigger"><button type="button" title="Manage" data-toggle="tooltip" class="btn icon icon-more btn-simple-primary" ng-click="showActionBtns=true"></button></div><div ng-show="showActionBtns" style="flex-direction: row;padding: 20px;align-content: flex-start"><button type="button" title="Edit" data-toggle="tooltip" data-action="edit" class="btn icon icon-pencil btn-simple-primary"></button> <button type="button" title="Duplicate" data-toggle="tooltip" data-action="duplicate" class="btn icon icon-copy icon-rsi btn-simple-primary"></button> <button type="button" title="Delete" data-toggle="tooltip" data-action="delete" class="btn icon icon-trash btn-simple-primary"></button> <button type="button" title="Close" data-toggle="tooltip" data-action="close" class="btn icon icon-cross btn-simple-primary" ng-click="showActionBtns=false"></button></div></div></div></div></div></div></div></div><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container>'),e.put("/views/home/ruleset-spells.html",'\x3c!--<div class="container item_properties">\r\n    <div class="row">\r\n        <div class="well well-sm">\r\n            <div class="">\r\n\r\n                <button type="button" class="glyphicon glyphicon-th-list btn btn-default btn-sm" ng-click="showlist()">List</button>\r\n\r\n                <button type="button" class="glyphicon glyphicon-th btn btn-default btn-sm" ng-click="showgrid()">Grid</button>\r\n                <button type="button" class="btn btn-primary back" ng-click="BackItem()">Back</button>\r\n                <button type="button" class="btn btn-primary" ng-click="CreateItem()">Create Item</button>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div ng-show="Itemlist">\r\n        <div class="col-md-12">\r\n            <h3 class="text-center">No Items Added</h3>\r\n        </div>\r\n    </div>--\x3e\x3c!--<div class="row" id="listview" ng-show="list">\r\n    <div class="col-md-12 col-sm-12 table-responsive">\r\n        <table class="table table-bordered">\r\n            <thead>\r\n                <tr>\r\n                    <th>S.No</th>\r\n                    <th>IMAGE</th>\r\n                    <th>NAME</th>\r\n                    <th>Stats</th>\r\n                    <th>DESCRIPTION</th>\r\n                    <th>Quantity</th>\r\n                    <th>ATTRIBUTES</th>\r\n                    <th>ACTIONS</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr ng-repeat="item in RulesetItems">\r\n                    <td ng-click="ShowAllItemProperties($index)">{{$index + 1}}</td>\r\n                    <td ng-click="ShowAllItemProperties($index)"><img ng-src="{{item.ItemProperties[1].Value.Image.image}}" class="img-resposive" width="120" height="120" /></td>\r\n                    <td ng-click="ShowAllItemProperties($index)">{{item.ItemProperties[0].Value.Text.value}}</td>\r\n                    <td ng-click="ShowAllItemProperties($index)">{{item.ItemProperties[2].Value.Text.value}}</td>\r\n                    <td ng-click="ShowAllItemProperties($index)">{{item.ItemProperties[9].Value.Text.value}}</td>\r\n                    <td ng-click="ShowAllItemProperties($index)">{{item.ItemProperties[3].Value.Number.value}}</td>\r\n                    <td ng-click="ShowAllItemProperties($index)">\r\n                        <div class="icon_box">\r\n                            <p style="width:104px;">\r\n                                <span>{{item.ItemProperties[13].Name | limitTo: 2}}</span>\r\n                                <span> {{item.ItemProperties[13].Value.YesOrNo.value | limitTo: 3}}</span>\r\n                            </p>\r\n                        </div>\r\n                        <div class="icon_box"><span>{{item.ItemProperties[17].Value.YesOrNo.value | limitTo: 1}}</span></div>\r\n                        <div class="icon_box"><span>M</span></div>\r\n\r\n                    </td>\r\n\r\n                    <td>\r\n                        <div class="row items_button">\r\n                            <button type="button" class="btn btn-primary" ng-click="EditItem(item,$index)"><i class="fa fa-edit"></i> EDIT</button>\r\n                            <button type="button" class="btn btn-info" ng-click="CopyItem(item,$index)"><i class="fa fa-copy"></i>COPY</button>\r\n\r\n                            \x3c!--<img src="/wwwroot/images/brain.png" class="img_inline" />\r\n                            <img src="/wwwroot/images/hand.png" class="img_inline" />--\x3e\x3c!--<button type="button" class="btn btn-danger" ng-click="Removeitem(item)"><i class="fa fa-remove"></i>REMOVE</button>\r\n                        </div>\r\n                    </td>\r\n\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n\r\n    </div>\r\n</div>--\x3e\x3c!--<div class="row" id="gridview" ng-show="grid">\r\n    <div class="col-md-3 col-sm-6" ng-repeat="item in NewRuleSet.Items" ng-click="ShowAllItemProperties(item,$index)">\r\n        <div class="card hovercard">\r\n            <div class="" ng-click="ShowAllItemProperties(item,$index)">\r\n                <img ng-src="{{item.ItemProperties[1].Value.Image.image}}" class="img-resposive" width="240" height="240" />\r\n            </div>\r\n\r\n            <div class="info">\r\n                <div class="title">\r\n                    <a target="_blank" href="#">{{item.ItemProperties[0].Value.Text.value}}</a>\r\n                </div>\r\n                <div class="desc">\r\n                    {{item.ItemProperties[9].Value.Text.value}}\r\n                </div>\r\n            </div>\r\n\r\n            <div class="bottom">\r\n\r\n                    {{item.ItemProperties[13].Value.YesOrNo.value}}\r\n\r\n                <a class="btn btn-danger btn-sm" rel="publisher"\r\n                   href="#">\r\n                    <i class="fa fa-google-plus"></i>\r\n                    {{item.ItemProperties[17].Value.YesOrNo.value}}\r\n                </a>\r\n                <a class="btn btn-primary btn-sm" rel="publisher"\r\n                   href="#">\r\n                    <i class="fa fa-facebook"></i>\r\n                    {{item.ItemProperties[13].Value.YesOrNo.value}}\r\n                </a>--\x3e\x3c!--<a class="btn btn-primary btn-xs" ng-click="EditItem(item,$index)">\r\n                <i class="fa fa-edit"></i>\r\n                <i class="fa fa-edit"></i>\r\n                Edit\r\n            </a>\r\n            <a class="btn btn-info  btn-xs" ng-click="CopyItem(item,$index)">\r\n                <i class="fa fa-copy"></i>\r\n                Copy\r\n            </a>\r\n            <a class="btn btn-danger  btn-xs" ng-click="Removeitem(item)">\r\n                <i class="fa fa-remove"></i>\r\n                Remove\r\n            </a>\r\n\r\n        </div>\r\n    </div>\r\n</div>--\x3e\x3c!--</div>--\x3e\x3c!--<toaster-container></toaster-container>--\x3e<div class="page-inventory"><div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><div class="page-toolbar-title"><h1>Ruleset Spells</h1></div><ul class="page-toolbar-actions"><li class="view-switch"><div class="btn-group" role="group"><button type="button" id="gridViewTrigger" class="btn icon icon-grid btn-primary selected" ng-click="GridViewTrigger($event)"></button> <button type="button" id="listViewTrigger" class="btn icon icon-list btn-primary" ng-click="ListViewTrigger($event)"></button></div></li>\x3c!--<li>\r\n                        <button type="button" ng-click="BackSpell()" class="btn icon icon-with-text btn-primary">Back</button>\r\n                    </li>--\x3e<li><button type="button" ng-click="CreateSpell()" class="btn icon icon-with-text icon-plus btn-primary">CREATE SPELL</button></li></ul></div></div></div><div ng-show="Itemlist"><div class="col-md-12"><h3 class="text-center">No Spells Added</h3></div></div><div class="cards cards-inventory" ng-show="list"><div class="container"><div class="card-list"><div class="card-wrapper" ng-repeat="spell in RulesetSpells"><div class="card" data-href="#"><div class="card-image"><img class="card-img-top" ng-click="ShowAllSpellsContent($index)" ng-src="{{spell.SpellProperties[1].Value.Image.image?spell.SpellProperties[1].Value.Image.image:\'/wwwroot/images/not-available.jpg\'}}" alt="{{spell.SpellProperties[0].Value.Text.Value}}"><div class="card-actions hide"><button type="button" title="" data-toggle="tooltip" ng-click="EditSpell(spell,$index)" class="btn icon icon-pencil btn-simple-primary" data-original-title="Edit"></button> <button type="button" title="" data-toggle="tooltip" ng-click="CopySpell(spell,$index)" class="btn icon icon-copy icon-rsi btn-simple-primary" data-original-title="Duplicate"></button> <button type="button" title="" data-toggle="tooltip" ng-click="RemoveSpell(spell,$index)" class="btn icon icon-trash btn-simple-primary" data-original-title="Delete"></button> <button type="button" title="" data-toggle="tooltip" class="btn icon icon-cross btn-simple-primary" data-original-title="Close" ng-click="hideConteextMenu($event)"></button></div></div><div class="card-body"><h4 class="card-title" ng-click="ShowAllSpellsContent($index)">{{spell.SpellProperties[0].Value.Text.value}}</h4><div class="card-actions-trigger"><button type="button" title="" data-toggle="tooltip" class="btn icon icon-more btn-simple-primary" data-original-title="Manage" ng-click="showContextMenu($event)"></button></div><ul class="item-properties"><li class="item-property item-property-text rarity highlight">{{spell.SpellProperties[2].Value.Text.value}}</li><li class="item-property item-property-text weight">{{spell.SpellProperties[3].Value.Number.value}}</li><li class="item-property item-property-icon icon icon-magical icon-rsi" title="" data-toggle="tooltip" data-original-title="Magical"></li><li class="item-property item-property-icon icon icon-consumable icon-rsi" title="" data-toggle="tooltip" data-original-title="Consumable"></li></ul><div class="item-stats">{{spell.SpellProperties[18].Value.Text.value}}</div></div></div></div></div></div></div></div><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container>'),e.put("/views/home/RuleSet.html",'<div class="page-rulesets"><div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><div class="page-toolbar-title"><h1>Rulesets</h1></div><ul class="page-toolbar-actions">\x3c!--<li>\r\n                        <button type="button"  class="btn btn-primary pull-right" ng-click="ImportRuleSet()"><i class="fa fa-upload" aria-hidden="true"></i>&nbsp;   Import Ruleset</button>\r\n                    </li>--\x3e<li><div class="dropdown dropdown-buttons show" ng-click="siteNavigationMenuToggle($event)"><div class="dropdown-toggle btn btn-primary" id="siteNavigationToggle" data-toggle="dropdown" style="width:100%"><span class="icon icon-with-text icon-plus">NEW RULE SET</span></div><div class="dropdown-menu" aria-labelledby="siteNavigationToggle">\x3c!--<div class="dropdown-menu dropdown-menu-right" aria-labelledby="newItemTrigger">\r\n\t\t\t\t\t\t\t\t\t<ul class="dropdown-menu-list">\r\n\t\t\t\t\t\t\t\t\t\t<li class="dropdown-menu-item">\r\n\t\t\t\t\t\t\t\t\t\t\t<button type="button" data-toggle="modal" data-target="#addItemPopup" class="btn btn-accent">Add Item</button>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t<li class="dropdown-menu-item">\r\n\t\t\t\t\t\t\t\t\t\t\t<button type="button" data-toggle="modal" data-target="#createItemPopup" class="btn btn-accent">Create Item</button>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t</div>--\x3e<ul class="dropdown-menu-list"><li class="dropdown-menu-item" ng-hide="true"></li><li class="dropdown-menu-item"><button type="button" data-toggle="modal" data-target="#createItemPopup" class="btn btn-accent">Add Rule Set</button></li><li class="dropdown-menu-item"><button type="button" data-toggle="modal" data-target="#addItemPopup" ng-click="RulesetGeneralSettings()" class="btn btn-accent">Create Rule Set</button></li><li class="dropdown-menu-item"><button type="button" data-toggle="modal" data-target="#createItemPopup" class="btn btn-accent">Import Rule Set</button></li>\x3c!--<li class="dropdown-menu-item" ng-click="RulesetGeneralSettings()">\r\n\t\t\t\t\t\t\t\t\t\t<a class="dropdown-menu-item-link"  id="AddRuleSet" >\r\n\t\t\t\t\t\t\t\t\t\t\t<span class="dropdown-menu-item-title">Create Rule Set</span>\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li class="dropdown-menu-item" style="margin-left:0px">\r\n\t\t\t\t\t\t\t\t\t\t<a class="dropdown-menu-item-link" id="CopyRuleSet" href="./RuleSets">\r\n\t\t\t\t\t\t\t\t\t\t\t<span class="dropdown-menu-item-title">Copy Rule Set</span>\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li class="dropdown-menu-item" style="margin-left:0px">\r\n\t\t\t\t\t\t\t\t\t\t<a class="dropdown-menu-item-link" id="ImportRuleSet" href="./RuleSets">\r\n\t\t\t\t\t\t\t\t\t\t\t<span class="dropdown-menu-item-title">Import Rule Set</span>\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t</li>--\x3e</ul></div></div></li></ul></div></div></div>\x3c!-- End of toolbar --\x3e<div class="rulesets">\x3c!-- Ruleset cards --\x3e<div class="cards"><div class="container"><div class="row"><div class="col-6 col-md-4 col-lg-2" ng-repeat="ruleset in RuleSets"><div class="card-wrapper"><div class="card" data-href="#"><div class="card-image" style="vertical-align: central; height: 80%"><img style="display: block" class="card-img-top" ng-src="{{ruleset.Rulesetproperty[2].Value.Image.image?ruleset.Rulesetproperty[2].Value.Image.image:\'/wwwroot/images/not-available.jpg\'}}" onerror="this.src=\'/wwwroot/images/not-available.jpg\'" alt="{{ruleset.Name}}" ng-click="ManageRuleset(ruleset.Id)"><div class="card-actions"><button type="button" title="Edit" data-toggle="tooltip" ng-click="EditGeneralSettings(ruleset.Id)" class="btn icon icon-pencil btn-simple-primary"></button> <button type="button" title="Duplicate" data-toggle="tooltip" ng-click="CopyRuleSet(ruleset)" class="btn icon icon-copy icon-rsi btn-simple-primary"></button> <button type="button" title="Delete" data-toggle="tooltip" ng-click="deleteRuleSet(ruleset,$index);" class="btn icon icon-trash btn-simple-primary"></button> <button type="button" title="Close" data-toggle="tooltip" data-action="close" class="btn icon icon-cross btn-simple-primary" ng-click="hideConteextMenu($event)"></button></div></div><div class="card-body"><h4 class="card-title">{{ruleset.Name}}</h4><div class="card-actions-trigger"><button type="button" title="Manage" data-toggle="tooltip" class="btn icon icon-more btn-simple-primary" ng-click="showContextMenu($event)"></button></div></div></div></div></div></div></div></div>\x3c!-- End of ruleset cards --\x3e</div>\x3c!-- New ruleset popup --\x3e\x3c!-- End of new ruleset popup --\x3e\x3c!-- New ruleset manage popup --\x3e<div class="modal fade popup-new-ruleset-manage" id="newRulesetManagePopup" tabindex="-1" role="dialog" aria-labelledby="newRulesetManagePopupTitle" aria-hidden="true" data-backdrop="static"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="newRulesetManagePopupTitle">New Ruleset</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close"></button></div><div class="modal-body"><ul class="list-unstyled"><li><a href="#" class="btn icon icon-with-text icon-external btn-accent">Manage Character Stats</a></li><li><a href="#" class="btn icon icon-with-text icon-external btn-accent">Manage Items</a></li><li><a href="#" class="btn icon icon-with-text icon-external btn-accent">Manage Spells</a></li><li><a href="#" class="btn icon icon-with-text icon-external btn-accent">Manage Abilities</a></li></ul></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-outline-accent">Close</button></div></div></div></div>\x3c!-- End of new ruleset manage popup --\x3e\x3c!-- Edit ruleset popup --\x3e<div class="modal fade popup-edit-ruleset" id="editRulesetPopup" tabindex="-1" role="dialog" aria-labelledby="editRulesetPopupTitle" aria-hidden="true" data-backdrop="static"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="editRulesetPopupTitle">Edit Ruleset</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close"></button></div><div class="modal-body"><form><div class="form-row"><div class="col">\x3c!-- Character name --\x3e<div class="form-group"><label for="editRulesetCharacterName">Name (required)</label><input type="text" id="editRulesetCharacterName" class="form-control" placeholder="Name of the ruleset" value="Apocalypse World"></div>\x3c!-- End of character name --\x3e</div></div><div class="form-row"><div class="col">\x3c!-- Ruleset description --\x3e<div class="form-group"><label for="editRulesetCharacterName">Description</label><input type="text" id="editRulesetCharacterName" class="form-control" placeholder="Description" value="rulesetDesc"></div>\x3c!-- End of character name --\x3e</div></div><div class="form-row"><div class="col">\x3c!-- Ruleset dice --\x3e<div class="form-group"><label for="editRulesetDice">Default Dice</label><span class="input-group-btn"><button type="button" title="Show dice" data-toggle="tooltip" class="btn icon icon-dice icon-rsi btn-simple-primary"></button> </span><input type="text" id="editRulesetDice" class="form-control" placeholder="Select dice" value="4d6"></div>\x3c!-- End of ruleset dice --\x3e</div></div><div class="form-row"><div class="col-12 col-md-6">\x3c!-- Ruleset currency --\x3e<div class="form-group"><label for="editRulesetCurrency">Currency Label</label><input type="text" id="editRulesetCurrency" class="form-control" placeholder="Enter currency value"></div>\x3c!-- End of ruleset currency --\x3e\x3c!-- Ruleset weight --\x3e<div class="form-group"><label for="editRulesetWeightMetric">Weight Metric Label</label><input type="text" id="editRulesetWeightMetric" class="form-control" placeholder="Enter metric value"></div>\x3c!-- End of ruleset weight --\x3e\x3c!-- Ruleset distance --\x3e<div class="form-group"><label for="editRulesetDistanceMetric">Distance Metric Label</label><input type="text" id="editRulesetDistanceMetric" class="form-control" placeholder="Enter metric value"></div>\x3c!-- End of ruleset distance --\x3e</div><div class="col-12 col-md-6">\x3c!-- Ruleset image --\x3e<div class="form-group input-image input-image-edit"><label for="editRulesetImage">Image</label><div class="input-image-control-wrapper"><div class="input-image-view"><img src="./assets/images/rulesets/apocalypse-world.jpg"> <i class="icon icon-pencil"></i></div><input type="file" id="editRulesetImage" class="form-control-file"></div></div>\x3c!-- End of ruleset image --\x3e</div></div><div class="form-row"><div class="col"><div class="form-group"><div class="icon icon-with-text icon-external">Manage <a href="#">Character Stats</a>, <a href="#">Items</a>, <a href="#">Spells</a> and <a href="#">Abilities</a>.</div></div></div></div></form></div><div class="modal-footer"><button type="button" data-dismiss="modal" class="btn btn-simple-accent">Cancel</button> <button type="button" class="btn btn-accent">Save</button></div></div></div></div></div><toaster-container class="toaster_align" toaster-options="{\'position-class\': \'toast-top-center\',\'time-out\':\'5000\'}" style="top: 5%;left: -5%;opacity: 100 ;position: fixed"></toaster-container>'),e.put("/views/home/rulesetabilitycontent.html",'<div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><button type="button" class="btn btn-primary back" ng-click="BackContent(3)">Back</button> <button type="button" class="btn btn-accent" ng-click="SaveTilesForRuleset(RulesetContent.AbilityProperties,3)">Save Tile</button></div></div></div><div class="container item_view"><div class="row"><div class="col-md-4 image"><div class="image"><img ng-src="{{RulesetContent.AbilityProperties[1].Value.Image.image}}" class="img-resposive" width="120" height="120"></div><button class="btn btn-primary">{{RulesetContent.AbilityProperties[0].Value.Text.value}}</button><div class="buttons-align"><button class="btn btn-warning" ng-click="CopyAbility(RulesetContent)"><i class="fa fa-remove" aria-hidden="true"></i> Copy</button>\x3c!--<button class="btn btn-warning">\r\n                    <i class="fa fa-exchange" aria-hidden="true"></i>\r\n                    UNMEMORIZE\r\n                </button>--\x3e</div></div><div class="col-md-4"><div class="text-design"><div class="text"><h5>STATS</h5><p>{{RulesetContent.AbilityProperties[2].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-6"><div class="panel div_blue"><div class="panel-heading text-center">CLASS</div><div class="panel-body text-center">{{RulesetContent.AbilityProperties[10].Value.Text.value}}</div></div></div><div class="col-md-6"><div class="panel div_red"><div class="panel-heading text-center">ATTRIBUTES</div><div class="panel-body text-center">{{RulesetContent.AbilityProperties[9].Value.Text.value}}</div></div></div></div><div class="blue"><div class="col-md-6"><div class="panel div_green"><div class="panel-heading text-center">USES ReEMAINING</div><div class="panel-body text-center">{{RulesetContent.AbilityProperties[13].Value.Number.value}}</div></div></div><div class="col-md-6"><div class="panel div_green"><div class="panel-heading text-center">MAX USES</div><div class="panel-body text-center">{{RulesetContent.AbilityProperties[12].Value.Number.value}}</div></div></div></div></div></div><div class="buttons-align"><button class="btn btn_red" ng-click="RemoveAbility(RulesetContent)"><i class="fa fa-remove" aria-hidden="true"></i> REMOVE</button> <button class="btn uneqp" ng-click="EditAbility(RulesetContent)"><i class="fa fa-edit" aria-hidden="true"></i> EDIT</button></div></div><div class="col-md-4"><div class="text-design"><div class="text"><h5>Description</h5><p>{{RulesetContent.AbilityProperties[14].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-12"><div class="panel panel-danger"><div class="panel-heading text-center">TAGS</div><div class="panel-body text-center">{{RulesetContent.AbilityProperties[17].Value.Number.value}}</div></div></div>\x3c!--<div class="col-md-6">\r\n                            <div class="panel panel-default">\r\n                                <div class="panel-heading text-center" style="background-color: rgba(237, 20, 61, 0.67);">Attributes</div>\r\n                                <div class="panel-body text-center" style="background-color: rgba(237, 20, 61, 0.58);"></div>\r\n                            </div>\r\n                        </div>--\x3e</div><div class="blue"><div class="col-md-12"><div class="panel panel-danger"><div class="panel-heading text-center">REQUIREMENTS</div><div class="panel-body text-center">text</div></div></div></div></div></div><div class="buttons-align"><button class="btn btn-warning" style="width:100%" ng-click="ShowTiles(RulesetContent.AbilityProperties)"><i class="fa fa-plus" aria-hidden="true"></i> ADD TILE</button></div></div></div><div gridstack class="grid-stack" options="stackOptions" on-change="onChange(event,ui)" on-drag-start="onDragStart(event,ui)" on-drag-stop="onDragStop(event,ui)" on-resize-start="onResizeStart(event,ui)" on-resize-stop="onResizeStop(event,ui)"><div gridstack-item ng-repeat="tab in RulesetContent.AbilityProperties" ng-click="tileSelect(tab.tile)" ng-class="getTileClass(tab.tile)" ng-switch on="tab.tile.TileTypeName" class="grid-stack-item" gs-item="tile" gs-item-id="tab.tile.ClientObjectId" gs-item-x="tab.tile.X" gs-item-y="tab.tile.Y" gs-item-width="tab.tile.Width" gs-item-height="tab.tile.Height" gs-item-autopos="1" on-item-added="onItemAdded(item)" on-item-removed="onItemRemoved(item)" data-gs-width="4" data-gs-height="2"><rpgsmithnotetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Note"></rpgsmithnotetype><rpgsmithcountertype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Counter"></rpgsmithcountertype><rpgsmithattributetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Attribute"></rpgsmithattributetype><rpgsmithlinktype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Link" fullscope="RuleSetContentForLinkExecuteTile"></rpgsmithlinktype><rpgsmithexecutetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Execute" fullscope="RuleSetContentForLinkExecuteTile"></rpgsmithexecutetype><rpgsmithcommandtype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Command"></rpgsmithcommandtype><rpgsmithimagetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Image"></rpgsmithimagetype></div></div><div class="tile-bubble-remove" title="Remove Page" droppable ng-class="{\'show-bubble\': state.tileDragging}" on-droppable-drop="onDeleteDrop(event,ui)" on-droppable-over="onDeleteOver(event,ui)" on-droppable-out="onDeleteOut(event)"><i class="fa fa-trash-o" aria-hidden="true"></i></div></div><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container>'),
e.put("/views/home/rulesetitemcontent.html",'\x3c!-- Mobile Search --\x3e<div class="container-fluid"><form class="site-phone-search" action="./search-result.html"><i class="icon icon-search"></i> <input type="search" placeholder="Search"></form></div>\x3c!-- End of mobile Search --\x3e\x3c!-- Toolbar --\x3e<div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><div class="page-toolbar-title"><a href="./Items?RuleSetId={{RulesetContent.ItemProperties[1].Id}}" class="icon icon-back"></a><h1>Item Details</h1></div>\x3c!-- Toolbar actions --\x3e<ul class="page-toolbar-actions"><li><button type="button" id="manageTilesTrigger" class="btn btn-outline-primary">Manage Tiles</button></li><li>\x3c!-- Manage item --\x3e<div class="dropdown dropdown-buttons"><button type="button" id="manageItemTrigger" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="btn btn-primary dropdown-toggle">Manage Item</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="newItemTrigger"><ul class="dropdown-menu-list"><li class="dropdown-menu-item"><button type="button" ng-click="EditItem(RulesetContent)" class="btn icon icon-with-text icon-pencil btn-accent">Edit</button></li><li class="dropdown-menu-item"><button type="button" ng-click="CopyItem(RulesetContent)" class="btn icon icon-with-text icon-copy icon-rsi btn-accent">Duplicate</button></li><li class="dropdown-menu-item"><button type="button" ng-click="Removeitem(RulesetContent)" class="btn icon icon-with-text icon-trash btn-accent">Delete</button></li></ul></div></div>\x3c!-- Manage item --\x3e</li></ul>\x3c!-- End of toolbar actions --\x3e</div></div></div>\x3c!-- End of toolbar --\x3e\x3c!-- Item info --\x3e<div class="page-item-details"><div class="container"><div class="item-info-wrapper"><div class="item-info-top-section"><div class="row"><div class="col"><div class="item-info-banner">\x3c!-- Item image --\x3e<div class="item-info-image"><img ng-src="{{RulesetContent.ItemProperties[1].Value.Image.image}}"></div>\x3c!-- End of item image --\x3e\x3c!-- Item name --\x3e<h2 class="item-info-name">{{RulesetContent.ItemProperties[0].Value.Text.value}}</h2>\x3c!-- End of item name --\x3e<div class="item-info-props-indics">\x3c!-- Item properties --\x3e<ul class="item-info-props"><li></li><li>{{RulesetContent.ItemProperties[9].Value.Number.value}}</li><li>{{RulesetContent.ItemProperties[4].Value.Weight.value + " "+RulesetContent.ItemProperties[4].Value.Weight.units.selectedUnit}}</li><li>1.75 x 0.5 x 0.6 feet</li></ul>\x3c!-- End of item properties --\x3e\x3c!-- Item indicators --\x3e<ul class="item-info-indics"><li><i class="icon icon-rsi icon-visible"></i></li><li><i class="icon icon-rsi icon-magical"></i></li><li><i class="icon icon-rsi icon-consumable"></i></li></ul>\x3c!-- End of item indicators --\x3e</div></div>\x3c!-- Item actions --\x3e<ul class="item-info-actions"><li><button type="button" class="btn btn-accent">Equip</button></li><li><button type="button" class="btn btn-accent">Drop</button></li><li><button type="button" class="btn btn-accent">Use</button></li></ul>\x3c!-- End of item actions --\x3e</div></div></div><div class="item-info-bottom-section"><div class="row"><div class="col-12 col-md-6">\x3c!-- Item command --\x3e<div class="item-info-command"><h3>Command</h3><p>{{RulesetContent.ItemProperties[8].Value.DefaultDice.value}}</p></div>\x3c!-- End of item command --\x3e</div><div class="col-12 col-md-6">\x3c!-- Item stats --\x3e<div class="item-info-stats"><h3>Stats</h3><p>{{RulesetContent.ItemProperties[2].Value.Text.value}}</p></div>\x3c!-- End of item stats --\x3e</div></div><div class="row"><div class="col-12 col-md-6">\x3c!-- Item description --\x3e<div class="item-info-desc"><h3>Description</h3><p>{{RulesetContent.ItemProperties[7].Value.Text.value}}</p></div>\x3c!-- End of item description --\x3e</div><div class="col-12 col-md-6">\x3c!-- Item tags --\x3e<div class="item-info-tags"><h3>Tags</h3><p>{{RulesetContent.ItemProperties[16].Value.Text.value}}</p></div>\x3c!-- End of item tags --\x3e</div></div><div class="row"><div class="col-12 col-md-6">\x3c!-- Item spells --\x3e<div class="item-info-spells"><h3>Spells</h3><div class="form-group output-list output-list-wrap"><ul class="output-list-items" ng-repeat="associatedSpell in RulesetContent.AssociatedSpells"><li class="output-list-item"><div><img src="wwwroot/css/assets/images/spells/command.jpg" alt="Command"> <span>{{associatedSpell.SpellProperties[0].Value.Text.value}}</span></div></li></ul><div class="input-extend" ng-show="RulesetContent.AssociatedSpells.length > 10"><button type="button" class="btn icon icon-with-text icon-arrow-down btn-link-primary"><span>Show more</span></button></div></div></div>\x3c!-- End of item spells --\x3e</div><div class="col-12 col-md-6">\x3c!-- Item abilities --\x3e<div class="item-info-abils"><h3>Abilities</h3><div class="form-group output-list output-list-wrap"><ul class="output-list-items" ng-repeat="associatedAbility in RulesetContent.AssociatedAbilities"><li class="output-list-item"><div><img src="{{associatedAbility.AbilityProperties[0].Value.Image.image}}" alt="{{associatedAbility.AbilityProperties[0].Value.Text.value}}"> <span>{{associatedAbility.AbilityProperties[0].Value.Text.value}}</span></div></li></ul><div class="input-extend" ng-show="RulesetContent.AssociatedAbilities.length > 10"><button type="button" class="btn icon icon-with-text icon-arrow-down btn-link-primary"><span>Show more</span></button></div></div></div>\x3c!-- End of item abilities --\x3e</div></div></div></div></div></div>\x3c!-- End of item info --\x3e\x3c!-- Item tiles --\x3e<div class="item-tiles"><div class="container"><div class="tiles">\x3c!-- Apperance tile --\x3e<div class="tile-group tile-group-apperance"><div class="tile tile-type-note tile-color-3"><h5 class="tile-title">Apperance</h5><div class="tile-body"><div><p>Design is not just what it looks like and feels like. Design is how it works.</p><p>Good design is making something intelligible and memorable. Great design is making something memorable and meaningful.</p><p>Pictures, abstract symbols, materials, and colors are among the ingredients with which a designer or engineer works. To design is to discover relationships and to make arrangements and rearrangements among these ingredients.</p><p>Design must be functional, and functionality must be translated into visual aesthetics without any reliance on gimmicks that have to be explained.</p></div></div><div class="tile-actions"><button type="button" title="Edit" data-toggle="tooltip" data-action="edit" class="btn icon icon-pencil btn-primary"></button> <button type="button" title="Resize" data-toggle="tooltip" data-action="resize-left" class="btn icon icon-arrow-resize btn-primary"></button> <button type="button" title="Resize" data-toggle="tooltip" data-action="resize-right" class="btn icon icon-arrow-resize btn-primary"></button></div></div></div>\x3c!-- End of apperance tile --\x3e\x3c!-- Background Story tile --\x3e<div class="tile-group tile-group-bg_story"><div class="tile tile-type-note tile-color-6"><h5 class="tile-title">Background Story</h5><div class="tile-body"><div><p>Design is a way of life, a point of view. It involves the whole complex of visual communications: talent, creative ability, manual skill, and technical knowledge. Aesthetics and economics, technology and psychology are intrinsically related to the process.</p><p>The critical thing in developing software is not the program, it\'s the design. It is translating understanding of user needs into something that can be realized as a computer program.</p><p>To design is much more than simply to assemble, to order, or even to edit: it is to add value and meaning, to illuminate, to simplify, to clarify, to modify, to dignify, to dramatize, to persuade, and perhaps even to amuse.</p></div></div><div class="tile-actions"><button type="button" title="Edit" data-toggle="tooltip" data-action="edit" class="btn icon icon-pencil btn-primary"></button> <button type="button" title="Resize" data-toggle="tooltip" data-action="resize-left" class="btn icon icon-arrow-resize btn-primary"></button> <button type="button" title="Resize" data-toggle="tooltip" data-action="resize-right" class="btn icon icon-arrow-resize btn-primary"></button></div></div></div>\x3c!-- End of background Story tile --\x3e\x3c!-- Hints tile --\x3e<div class="tile-group tile-group-seen_in_game"><div class="tile tile-type-image tile-color-4"><h5 class="tile-title">Seen in the game</h5><div class="tile-body"><img src="wwwroot/css/assets/images/tiles/clue.jpg" alt="Seen in the game"></div><div class="tile-actions"><button type="button" title="Edit" data-toggle="tooltip" data-action="edit" class="btn icon icon-pencil btn-primary"></button> <button type="button" title="Resize" data-toggle="tooltip" data-action="resize-left" class="btn icon icon-arrow-resize btn-primary"></button> <button type="button" title="Resize" data-toggle="tooltip" data-action="resize-right" class="btn icon icon-arrow-resize btn-primary"></button></div></div></div>\x3c!-- End of hints tile --\x3e</div></div></div>\x3c!-- End of item tiles --\x3e\x3c!-- External JavaScript files --\x3e<script src="wwwroot/css/assets/js/jquery.js"><\/script><script src="wwwroot/css/assets/js/popper.js"><\/script><script src="wwwroot/css/assets/js/bootstrap.js"><\/script><script src="wwwroot/css/assets/js/script.js"><\/script>\x3c!-- End of external JavaScript files --\x3e'),e.put("/views/home/rulesetspellcontent.html",'<div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><button type="button" class="btn btn-primary back" ng-click="BackContent(2)">Back</button> <button type="button" class="btn btn-accent" ng-click="SaveTilesForRuleset(RulesetContent.SpellProperties,2)">Save Tile</button></div></div></div><div class="container item_view"><div class="row"><div class="col-md-4 image"><div class="image"><img ng-src="{{RulesetContent.SpellProperties[1].Value.Image.image}}" class="img-resposive" width="120" height="120"></div><button class="btn btn-primary">{{RulesetContent.SpellProperties[0].Value.Text.value}}</button><div class="buttons-align mt-30"><button class="btn btn_red" ng-click="RemoveSpell(RulesetContent)"><i class="fa fa-remove" aria-hidden="true"></i> REMOVE</button>\x3c!--<button class="btn btn_red">\r\n                    <i class="fa fa-exchange" aria-hidden="true"></i>\r\n                    UNMEMORIZE\r\n                </button>--\x3e</div></div><div class="col-md-4"><div class="text-design"><div class="text"><h5>STATS</h5><p>{{RulesetContent.SpellProperties[2].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-6"><div class="panel div_blue"><div class="panel-heading text-center">CLASS</div><div class="panel-body text-center">{{RulesetContent.SpellProperties[10].Value.Text.value}}</div></div></div><div class="col-md-6"><div class="panel div_blue"><div class="panel-heading text-center">SCHOOL</div><div class="panel-body text-center">{{RulesetContent.SpellProperties[9].Value.Text.value}}</div></div></div></div><div class="blue"><div class="col-md-12"><div class="panel div_green"><div class="panel-heading text-center">Materialized Components</div><div class="panel-body text-center">{{RulesetContent.SpellProperties[9].Value.Text.value}}</div></div></div></div></div></div><div class="buttons-align"><button class="btn uneqp" ng-click="EditSpell(RulesetContent)"><i class="fa fa-edit" aria-hidden="true"></i> EDIT</button> <button class="btn btn-warning" ng-click="CopySpell(RulesetContent)"><i class="fa fa-external-link" aria-hidden="true"></i> CAST</button></div></div><div class="col-md-4"><div class="text-design"><div class="text"><h5>Description</h5><p>{{RulesetContent.SpellProperties[18].Value.Text.value}}</p></div><div class="panels row"><div class="blue"><div class="col-md-6"><div class="panel div_red"><div class="panel-heading text-center">CASTING TIME</div><div class="panel-body text-center">{{RulesetContent.SpellProperties[17].Value.Number.value}}</div></div></div><div class="col-md-6"><div class="panel div_red"><div class="panel-heading text-center">Attributes</div><div class="panel-body text-center"></div></div></div></div><div class="blue"><div class="col-md-12"><div class="panel panel-danger"><div class="panel-heading text-center">TAGS</div><div class="panel-body text-center">text</div></div></div></div></div></div><div class="buttons-align"><button class="btn btn-warning" style="width:100%" ng-click="ShowTiles(RulesetContent.SpellProperties)"><i class="fa fa-plus" aria-hidden="true"></i> ADD TILE</button></div></div></div><div gridstack class="grid-stack" options="stackOptions" on-change="onChange(event,ui)" on-drag-start="onDragStart(event,ui)" on-drag-stop="onDragStop(event,ui)" on-resize-start="onResizeStart(event,ui)" on-resize-stop="onResizeStop(event,ui)"><div gridstack-item ng-repeat="tab in RulesetContent.SpellProperties" ng-click="tileSelect(tab.tile)" ng-class="getTileClass(tab.tile)" ng-switch on="tab.tile.TileTypeName" class="grid-stack-item" gs-item="tile" gs-item-id="tab.tile.ClientObjectId" gs-item-x="tab.tile.X" gs-item-y="tab.tile.Y" gs-item-width="tab.tile.Width" gs-item-height="tab.tile.Height" gs-item-autopos="1" on-item-added="onItemAdded(item)" on-item-removed="onItemRemoved(item)" data-gs-width="4" data-gs-height="2"><rpgsmithnotetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Note"></rpgsmithnotetype><rpgsmithcountertype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Counter"></rpgsmithcountertype><rpgsmithattributetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Attribute"></rpgsmithattributetype><rpgsmithlinktype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Link" fullscope="RuleSetContentForLinkExecuteTile"></rpgsmithlinktype><rpgsmithexecutetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Execute" fullscope="RuleSetContentForLinkExecuteTile"></rpgsmithexecutetype><rpgsmithcommandtype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Command"></rpgsmithcommandtype><rpgsmithimagetype info="tab.tile" ng-style="" style="border: {{tab.tile.Styles.width}} {{tab.tile.Styles.style}} {{tab.tile.Styles.color}}; border-radius: {{tab.tile.Styles.radius}};background-color: {{tab.tile.Styles.bodybackgroundColor}};box-shadow:{{tab.tile.Styles.shadow}}" useoredit="0" class="form_inline grid-stack-item-content" ng-switch-when="Image"></rpgsmithimagetype></div></div><div class="tile-bubble-remove" title="Remove Page" droppable ng-class="{\'show-bubble\': state.tileDragging}" on-droppable-drop="onDeleteDrop(event,ui)" on-droppable-over="onDeleteOver(event,ui)" on-droppable-out="onDeleteOut(event)"><i class="fa fa-trash-o" aria-hidden="true"></i></div></div><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container>'),e.put("/views/home/ruleset_itemproperties.html",'<div class="page-inventory"><div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><div class="page-toolbar-title"><h1>Ruleset Items</h1></div><ul class="page-toolbar-actions"><li class="view-switch"><div class="btn-group" role="group"><button type="button" id="gridViewTrigger" class="btn icon icon-grid btn-primary selected" ng-click="GridViewTrigger($event)"></button> <button type="button" id="listViewTrigger" class="btn icon icon-list btn-primary" ng-click="ListViewTrigger($event)"></button></div></li>\x3c!--<li>\r\n                        <button type="button" ng-click="BackItem()" class="btn icon icon-with-text btn-primary">Back</button>\r\n                    </li>--\x3e<li>\x3c!--<div class="dropdown dropdown-buttons show" ng-click="CreateItem($event)">\r\n\t\t\t\t\t\t\t<div class="dropdown-toggle btn  btn-primary" id="siteNavigationToggle" data-toggle="dropdown" style="width:100%">\r\n\t\t\t\t\t\t\t\t<span class="icon icon-with-text icon-plus">CREATE ITEM</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>--\x3e <button type="button" ng-click="CreateItem()" class="btn icon icon-with-text icon-plus btn-primary">Create Item</button>\x3c!--<button type="button" ng-click="CreateItem()" class="btn icon icon-with-text icon-plus btn-primary">New Item</button>--\x3e</li></ul></div></div></div><div ng-show="Itemlist"><div class="col-md-12"><h3 class="text-center">No Items Added</h3></div></div><div class="cards cards-inventory" ng-show="list"><div class="container"><div class="card-list"><div class="card-wrapper" ng-repeat="item in RulesetItems"><div class="card" data-href="#"><div class="card-image"><img style="display: block" class="card-img-top" ng-click="ShowAllItemProperties($index)" ng-src="{{item.ItemProperties[1].Value.Image.image?item.ItemProperties[1].Value.Image.image:\'/wwwroot/images/not-available.jpg\'}}" alt="{{item.ItemProperties[0].Value.Text.Value}}"><div class="card-actions hide"><button type="button" title="" data-toggle="tooltip" ng-click="EditItem(item,$index)" class="btn icon icon-pencil btn-simple-primary" data-original-title="Edit"></button> <button type="button" title="" data-toggle="tooltip" ng-click="CopyItem(item,$index)" class="btn icon icon-copy icon-rsi btn-simple-primary" data-original-title="Duplicate"></button> <button type="button" title="" data-toggle="tooltip" ng-click="Removeitem(item,$index)" class="btn icon icon-trash btn-simple-primary" data-original-title="Delete"></button> <button type="button" title="" data-toggle="tooltip" class="btn icon icon-cross btn-simple-primary" data-original-title="Close" ng-click="hideConteextMenu($event)"></button></div></div><div class="card-body"><h4 class="card-title" ng-click="ShowAllItemProperties($index)">{{item.ItemProperties[0].Value.Text.value}}</h4><div class="card-actions-trigger"><button type="button" title="" data-toggle="tooltip" class="btn icon icon-more btn-simple-primary" data-original-title="Manage" ng-click="showContextMenu($event)"></button></div><ul class="item-properties"><li class="item-property item-property-text rarity highlight">{{item.ItemProperties[2].Value.Text.value}}</li><li class="item-property item-property-text weight">{{item.ItemProperties[3].Value.Number.value}}</li><li class="item-property item-property-icon icon icon-magical icon-rsi" title="" data-toggle="tooltip" data-original-title="Magical"></li><li class="item-property item-property-icon icon icon-consumable icon-rsi" title="" data-toggle="tooltip" data-original-title="Consumable"></li></ul><div class="item-stats">{{item.ItemProperties[6].Value.Text.value}}</div></div></div></div></div></div></div></div><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container>'),e.put("/views/home/spellinventory.html",'<div class="page-inventory itemproperty" ng-init="onloadFun()"><div class="page-toolbar"><div class="container"><div class="page-toolbar-wrapper"><div class="page-toolbar-title"><h1>Back to Inventory</h1></div><button type="button" id="newItemTrigger" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="btn icon icon-with-text icon-plus btn-primary dropdown-toggle">New Spell</button><div class="dropdown-menu" aria-labelledby="siteNavigationToggle">\x3c!--<ul class="page-toolbar-actions">\r\n\t\t\t<li class="view-switch">\r\n\t\t\t\t<div class="btn-group" role="group">\r\n\t\t\t\t\t<button type="button" id="gridViewTrigger" class="btn icon icon-grid btn-primary selected" ng-click="GridViewTrigger($event)"></button>\r\n\t\t\t\t\t<button type="button" id="listViewTrigger" class="btn icon icon-list btn-primary" ng-click="ListViewTrigger($event)"></button>\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<button type="button" ng-click="CreateCharacterSpell()" class="btn icon icon-with-text icon-plus btn-primary">New Spell</button>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<button type="button" ng-click="AddRulesetSpells()" class="btn icon icon-with-text icon-plus btn-primary">Add Spell From Ruleset</button>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<button type="button" ng-click="BackToLayout()" class="btn icon icon-with-text glyphicon-backward btn-primary">Back</button>\r\n\t\t\t</li>\r\n\t\t</ul>--\x3e<ul class="dropdown-menu-list"><li class="dropdown-menu-item" ng-hide="true"></li><li class="dropdown-menu-item"><button type="button" data-toggle="modal" style="width: 100%" data-target="#createItemPopup" ng-click="AddRulesetSpell()" class="btn btn-accent">Add Spell</button></li><li class="dropdown-menu-item"><button type="button" data-toggle="modal" style="width: 100%" data-target="#addItemPopup" ng-click="CreateCharacterSpell()" class="btn btn-accent">Create Spell</button></li></ul></div></div></div>\x3c!-- End of toolbar --\x3e\x3c!-- Inventory cards --\x3e<div class="cards cards-inventory"><div class="container"><div ng-show="ShowSpells"><div class="col-md-12"><h3 class="text-center">No Spells Added</h3></div></div><div class="card-list" ng-show="ShowSpell"><div class="card-wrapper" ng-repeat="spell in NewSpellInventory.CharacterSpells"><div class="card" data-href="#"><div class="card-image"><img class="card-img-top" ng-click="ShowAllSpellProperties(spell,$index)" ng-src="{{spell.CharacterSpellsProperties[1].Value.Image.image?spell.CharacterSpellsProperties[1].Value.Image.image :\'/wwwroot/images/not-available.jpg\'}}" alt="{{spell.CharacterSpellsProperties[0].Value.Text.value}}"><div class="card-actions"><button type="button" title="Edit" ng-click="EditItem(spell,$index,2)" data-toggle="tooltip" data-action="edit" class="btn icon icon-pencil btn-simple-primary"></button> <button type="button" title="Duplicate" ng-click="CopyItem(spell,$index,2)" data-toggle="tooltip" data-action="duplicate" class="btn icon icon-copy icon-rsi btn-simple-primary"></button> <button type="button" title="Delete" ng-click="Removeitem(spell,$index,2)" data-toggle="tooltip" data-action="delete" class="btn icon icon-trash btn-simple-primary"></button> <button type="button" title="Close" ng-click="hideConteextMenu($event)" data-toggle="tooltip" data-action="close" class="btn icon icon-cross btn-simple-primary"></button></div></div><div class="card-body"><h4 class="card-title" ng-click="ShowAllItemProperties(item,$index)">{{spell.CharacterSpellsProperties[0].Value.Text.value}}</h4><div class="card-actions-trigger"><button type="button" title="Manage" data-toggle="tooltip" class="btn icon icon-more btn-simple-primary" ng-click="showContextMenu($event)"></button></div><ul class="item-properties"><li class="item-property item-property-text rarity highlight" ng-if="(spell.CharacterSpellsProperties[6].Value.Choices.selectedchoice != undefined) && (spell.CharacterSpellsProperties[6].Value.Choices.selectedchoice != null) && (spell.CharacterSpellsProperties[6].Value.Choices.selectedchoice != \'\')">{{spell.CharacterSpellsProperties[6].Value.Choices.selectedchoice}}</li><li class="item-property item-property-text weight" ng-if="(spell.CharacterSpellsProperties[4].Value.Weight.value != undefined) && (spell.CharacterSpellsProperties[4].Value.Weight.value != null) && (spell.CharacterSpellsProperties[4].Value.Weight.value != \'\')">{{spell.CharacterSpellsProperties[4].Value.Weight.value}} {{spell.CharacterSpellsProperties[4].Value.Weight.units.selectedUnit}}</li><li ng-repeat="spell in spell.CharacterSpellsProperties" ng-if="(spell.TypeId==3 && spell.Value.OnorOff.value == \'Yes\') || ( spell.TypeId == 4 && spell.Value.YesOrNo.value == \'Yes\')" class="item-property item-property-icon icon icon-rsi" ng-class="\'icon-\' + spell.Name.toLowerCase()" title="Magical" data-toggle="tooltip"></li>\x3c!--<li class="item-property item-property-icon icon icon-magical icon-rsi" title="Magical" data-toggle="tooltip"></li>\r\n                                <li class="item-property item-property-icon icon icon-consumable icon-rsi" title="Consumable" data-toggle="tooltip"></li>--\x3e</ul><div class="item-stats">{{spell.CharacterSpellsProperties[2].Value.Text.value}}</div><div class="item-actions"><button type="button" class="btn btn-accent" ng-click="Removeitem(item,$index,2)">Drop</button> <button type="button" class="btn btn-accent">Use</button><rpgsmithcontenttype info="value" ng-repeat="value in spell.CharacterSpellsProperties"></rpgsmithcontenttype></div></div></div></div></div></div></div></div><toaster-container class="toaster_align" toaster-options="{\'time-out\':1000}"></toaster-container></div>'),
e.put("/views/search/BingSearch.html",'\x3c!--<!DOCTYPE html>\r\n\x3c!-- saved from url=(0014)about:internet --\x3e\x3c!-- the above Mark of the Web lets IE run this page in the Internet security zone,\r\n\t avoiding the permission prompt for running active content such as JavaScript --\x3e\x3c!--\r\n<html>\r\n<head>\r\n\t<meta charset="UTF-8">\r\n\t<title>Bing Web Search API Demo</title>\r\n\t--\x3e<base target="_blank"><style type="text/css">html, body, div, p, h1, h2 {\r\n\t\tfont-family: Verdana, "Lucida Sans", sans-serif;\r\n\t\tcolor: #000;\r\n\t}\r\n\r\n\thtml, body, div, p {\r\n\t\tfont-weight: normal;\r\n\t}\r\n\r\n\tbody {\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\th1, h2, h3 {\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #087;\r\n\t}\r\n\r\n\tsup {\r\n\t\tfont-weight: normal;\r\n\t}\r\n\r\n\thtml, body, div, p {\r\n\t\tfont-size: 12px;\r\n\t}\r\n\r\n\th1 {\r\n\t\tfont-size: 20px;\r\n\t\tmargin-top: 30px;\r\n\t}\r\n\r\n\th2 {\r\n\t\tfont-size: 16px;\r\n\t\tclear: left;\r\n\t}\r\n\r\n\th3 {\r\n\t\tfont-size: 14px;\r\n\t\tclear: left;\r\n\t}\r\n\r\n\t#sidebar {\r\n\t\tfont-size: 10px;\r\n\t\ttext-align: right;\r\n\t\tdisplay: flex;\r\n\t\tpadding: 0px 10px;\r\n\t\tfloat: right;\r\n\t\tmargin-left: 15px;\r\n\t\tmargin-right: 0px;\r\n\t}\r\n\r\n\t\t#sidebar p {\r\n\t\t\tmargin-top: 0px;\r\n\t\t\tfont-size: 10px;\r\n\t\t}\r\n\r\n\t\t#sidebar img {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tfloat: none;\r\n\t\t\tpadding-right: 0px;\r\n\t\t}\r\n\r\n\t#pole p {\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t#pole, #mainline, #json, #http, #sidebar, #error, #paging1, #paging2 {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t#term {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t#logo {\r\n\t\tpadding: 15px;\r\n\t\tfloat: right;\r\n\t\tborder-left: 2px solid #ccc;\r\n\t}\r\n\r\n\t#query {\r\n\t\tfloat: left;\r\n\t}\r\n\r\n\timg {\r\n\t\tvertical-align: top;\r\n\t\tfloat: left;\r\n\t\tmargin-right: 10px;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\r\n\tp.images img {\r\n\t\tfloat: none;\r\n\t}\r\n\r\n\tp.relatedSearches {\r\n\t\tclear: none;\r\n\t}\r\n\r\n\t#logo p, p.news, p.webPages, p.images {\r\n\t\tclear: left;\r\n\t}\r\n\r\n\ta[href="#"]:link {\r\n\t\tcolor: blue;\r\n\t}\r\n\r\n\ta[href="#"]:visited {\r\n\t\tcolor: blue;\r\n\t}\r\n\r\n\th3 a:visited {\r\n\t\tcolor: #087 !important;\r\n\t}\r\n\r\n\th3 a:link {\r\n\t\tcolor: #087 !important;\r\n\t}</style><script type="text/javascript">// cookie names for data we store\r\n\t// YOUR API KEY DOES NOT GO IN THIS CODE; don\'t paste it in.\r\n\tAPI_KEY_COOKIE = "49e31e6efd1e47b1ab65035a3e22f613";\r\n\tCLIENT_ID_COOKIE = "bing-search-client-id";\r\n\r\n\t// Various browsers differ in their support for persistent storage by local\r\n\t// HTML files (IE won\'t use localStorage, but Chrome won\'t use cookies). So\r\n\t// use localStorage if we can, otherwise use cookies.\r\n\r\n\ttry {\r\n\t\tlocalStorage.getItem;   // try localStorage\r\n\r\n\t\twindow.retrieveValue = function (name) {\r\n\t\t\treturn localStorage.getItem(name) || "";\r\n\t\t}\r\n\t\twindow.storeValue = function (name, value) {\r\n\t\t\tlocalStorage.setItem(name, value);\r\n\t\t}\r\n\t} catch (e) {\r\n\t\twindow.retrieveValue = function (name) {\r\n\t\t\tvar cookies = document.cookie.split(";");\r\n\t\t\tfor (var i = 0; i < cookies.length; i++) {\r\n\t\t\t\tvar keyvalue = cookies[i].split("=");\r\n\t\t\t\tif (keyvalue[0].trim() === name) return keyvalue[1];\r\n\t\t\t}\r\n\t\t\treturn "";\r\n\t\t}\r\n\t\twindow.storeValue = function (name, value) {\r\n\t\t\tvar expiry = new Date();\r\n\t\t\texpiry.setFullYear(expiry.getFullYear() + 1);\r\n\t\t\tdocument.cookie = name + "=" + value.trim() + "; expires=" + expiry.toUTCString();\r\n\t\t}\r\n\t}\r\n\r\n\t// get stored API subscription key, or prompt if it\'s not found\r\n\tfunction getSubscriptionKey() {\r\n\t\tvar key = retrieveValue(API_KEY_COOKIE);\r\n\t\twhile (key.length !== 32) {\r\n\t\t\tkey = prompt("Enter Bing Search API subscription key:", "").trim();\r\n\t\t}\r\n\t\t// always set the cookie in order to update the expiration date\r\n\t\tstoreValue(API_KEY_COOKIE, key);\r\n\t\treturn key;\r\n\t}\r\n\r\n\t// invalidate stored API subscription key so user will be prompted again\r\n\tfunction invalidateSubscriptionKey() {\r\n\t\tstoreValue(API_KEY_COOKIE, "");\r\n\t}\r\n\r\n\t// escape quotes to HTML entities for use in HTML tag attributes\r\n\tfunction escapeQuotes(text) {\r\n\t\treturn text.replace(/\'/g, "&apos;").replace(/"/g, "&quot;");\r\n\t}\r\n\r\n\t// get the host portion of a URL, strpping out search result formatting and www too\r\n\tfunction getHost(url) {\r\n\t\treturn url.replace(/<\\/?b>/g, "").replace(/^https?:\\/\\//, "").split("/")[0].replace(/^www\\./, "");\r\n\t}\r\n\r\n\t// format plain text for display as an HTML <pre> element\r\n\tfunction preFormat(text) {\r\n\t\ttext = "" + text;\r\n\t\treturn "<pre>" + text.replace(/&/g, "&amp;").replace(/</g, "&lt;") + "</pre>"\r\n\t}\r\n\r\n\t// put HTML markup into a <div> and reveal it\r\n\tfunction showDiv(id, html) {\r\n\t\tvar content = document.getElementById("_" + id)\r\n\t\tif (content) content.innerHTML = html;\r\n\t\tvar wrapper = document.getElementById(id);\r\n\t\tif (wrapper) wrapper.style.display = html.trim() ? "block" : "none";\r\n\t}\r\n\r\n\t// hides the specified <div>s\r\n\tfunction hideDivs() {\r\n\t\tfor (var i = 0; i < arguments.length; i++) {\r\n\t\t\tvar element = document.getElementById(arguments[i])\r\n\t\t\tif (element) element.style.display = "none";\r\n\t\t}\r\n\t}\r\n\r\n\t// render functions for various types of search results\r\n\tsearchItemRenderers = {\r\n\t\t// render Web page result\r\n\t\twebPages: function (item) {\r\n\t\t\tvar html = [];\r\n\t\t\t//html.push("<p class=\'webPages\'><a href=\'" + item.url + "\'>" + item.name + "</a>");\r\n\t\t\t//html.push(" (" + getHost(item.displayUrl) + ")");\r\n\t\t\t//html.push("<br>" + item.snippet);\r\n\t\t\t//if ("deepLinks" in item) {\r\n\t\t\t//    var links = [];\r\n\t\t\t//    for (var i = 0; i < item.deepLinks.length; i++) {\r\n\t\t\t//        links.push("<a href=\'" + item.deepLinks[i].url + "\'>" +\r\n\t\t\t//            item.deepLinks[i].name + "</a>");\r\n\t\t\t//    }\r\n\t\t\t//    html.push("<br>" + links.join(" - "));\r\n\t\t\t//}\r\n\t\t\treturn html.join("");\r\n\t\t},\r\n\t\t// render news story\r\n\t\tnews: function (item) {\r\n\t\t\tvar html = [];\r\n\t\t\t//html.push("<p class=\'news\'>");\r\n\t\t\t//if (item.image) {\r\n\t\t\t//    width = 60;\r\n\t\t\t//    height = Math.round(width * item.image.thumbnail.height / item.image.thumbnail.width);\r\n\t\t\t//    html.push("<img src=\'" +  item.image.thumbnail.contentUrl +\r\n\t\t\t//        "&h=" + height + "&w=" + width + "\' width=" + width + " height=" + height+  ">");\r\n\t\t\t//}\r\n\t\t\t//html.push("<a href=\'" + item.url + "\'>" + item.name + "</a>");\r\n\t\t\t//if (item.category) html.push(" - " + item.category);\r\n\t\t\t//if (item.contractualRules) {    // MUST display source attributions\r\n\t\t\t//    html.push(" (");\r\n\t\t\t//    var rules = [];\r\n\t\t\t//    for (var i = 0; i < item.contractualRules.length; i++)\r\n\t\t\t//        rules.push(item.contractualRules[i].text);\r\n\t\t\t//    html.push(rules.join(", "));\r\n\t\t\t//    html.push(")");\r\n\t\t\t//}\r\n\t\t\t// html.push(" (" + getHost(item.url) + ")");\r\n\t\t\t//html.push("<br>" + item.description);\r\n\t\t\treturn html.join("");\r\n\t\t},\r\n\t\t// render image result using thumbnail\r\n\t\timages: function (item, section, index, count) {\r\n\t\t\tvar height = 100;\r\n\t\t\tvar width = 100; //Math.round(height * item.thumbnail.width / item.thumbnail.height);\r\n\t\t\tvar html = [];\r\n\t\t\tif (section === "sidebar") {\r\n\t\t\t\tif (index) html.push("<br>");\r\n\t\t\t} else {\r\n\t\t\t\tif (!index) html.push("<p class=\'images\'>");\r\n\t\t\t}\r\n\t\t\t//html.push("<a href=\'" + item.hostPageUrl + "\'>");\r\n\t\t\tvar title = escapeQuotes(item.name) + "\\n" + getHost(item.hostPageDisplayUrl);\r\n\t\t\thtml.push("<img src=\'" + item.thumbnailUrl + "&h=320&w=320" +\r\n\t\t\t\t"\' height=" + height + " width=" + width + " title=\'" + title + "\' alt=\'" + title + "\'>");\r\n\t\t\t//html.push("</a>");\r\n\t\t\treturn html.join("");\r\n\t\t},\r\n\r\n\t\trelatedSearches: function (item, section, index, count) {\r\n\t\t\tvar html = [];\r\n\t\t\t//if (section !== "sidebar") html.push(index === 0 ? "<h2>Related</h2>": " - ");\r\n\t\t\t//else html.push("<p class=\'relatedSearches\'>");\r\n\t\t\t//html.push("<a href=\'#\' onclick=\'return doRelatedSearch(&quot;" +\r\n\t\t\t//    escapeQuotes(item.text) + "&quot;)\'>");\r\n\t\t\t//html.push(item.displayText + "</a>");\r\n\t\t\treturn html.join("");\r\n\t\t}\r\n\t}\r\n\r\n\t// render search results from rankingResponse object in specified order\r\n\tfunction renderResultsItems(section, results) {\r\n\r\n\t\tvar items = results.rankingResponse[section].items;\r\n\t\tvar html = [];\r\n\t\tfor (var i = 0; i < items.length; i++) {\r\n\t\t\tvar item = items[i];\r\n\t\t\t// collection name has lowercase first letter while answerType has uppercase\r\n\t\t\t// e.g. `WebPages` rankingResult type is in the `webPages` top-level collection\r\n\t\t\tvar type = item.answerType[0].toLowerCase() + item.answerType.slice(1);\r\n\t\t\t// must have results of the given type AND a renderer for it\r\n\t\t\tif (type in results && type in searchItemRenderers) {\r\n\t\t\t\tvar render = searchItemRenderers[type];\r\n\t\t\t\t// this ranking item refers to ONE result of the specified type\r\n\t\t\t\tif ("resultIndex" in item) {\r\n\t\t\t\t\thtml.push(render(results[type].value[item.resultIndex], section));\r\n\t\t\t\t\t// this ranking item refers to ALL results of the specified type\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar len = results[type].value.length;\r\n\t\t\t\t\tfor (var j = 0; j < len; j++) {\r\n\t\t\t\t\t\thtml.push(render(results[type].value[j], section, j, len));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn html.join("\\n\\n");\r\n\t}\r\n\r\n\t// render the search results given the parsed JSON response\r\n\tfunction renderSearchResults(results) {\r\n\r\n\t\t// if spelling was corrected, update search field\r\n\t\tif (results.queryContext.alteredQuery)\r\n\t\t\tdocument.forms.bing.query.value = results.queryContext.alteredQuery;\r\n\r\n\t\t// add Prev / Next links with result count\r\n\t\tvar pagingLinks = renderPagingLinks(results);\r\n\t\tshowDiv("paging1", pagingLinks);\r\n\t\tshowDiv("paging2", pagingLinks);\r\n\r\n\t\t// for each possible section, render the resuts from that section\r\n\t\tfor (section in { pole: 0, mainline: 0, sidebar: 0 }) {\r\n\t\t\tif (results.rankingResponse[section])\r\n\t\t\t\tshowDiv(section, renderResultsItems(section, results));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction renderErrorMessage(message) {\r\n\t\tshowDiv("error", preFormat(message));\r\n\t\tshowDiv("noresults", "No results.");\r\n\t}\r\n\r\n\t// handle Bing search request results\r\n\tfunction handleOnLoad() {\r\n\t\thideDivs("noresults");\r\n\r\n\t\tvar json = this.responseText.trim();\r\n\t\tvar jsobj = {};\r\n\r\n\t\t// try to parse JSON results\r\n\t\ttry {\r\n\t\t\tif (json.length) jsobj = JSON.parse(json);\r\n\t\t} catch (e) {\r\n\t\t\trenderErrorMessage("Invalid JSON response");\r\n\t\t}\r\n\r\n\t\t// show raw JSON and headers\r\n\t\tshowDiv("json", preFormat(JSON.stringify(jsobj, null, 2)));\r\n\t\tshowDiv("http", preFormat("GET " + this.responseURL + "\\n\\nStatus: " + this.status + " " +\r\n\t\t\tthis.statusText + "\\n" + this.getAllResponseHeaders()));\r\n\r\n\t\t// if HTTP response is 200 OK, try to render search results\r\n\t\tif (this.status === 200) {\r\n\t\t\tvar clientid = this.getResponseHeader("X-MSEdge-ClientID");\r\n\t\t\tif (clientid) retrieveValue(CLIENT_ID_COOKIE, clientid);\r\n\t\t\tif (json.length) {\r\n\t\t\t\tif (jsobj._type === "SearchResponse" && "rankingResponse" in jsobj) {\r\n\t\t\t\t\trenderSearchResults(jsobj);\r\n\t\t\t\t} else {\r\n\t\t\t\t\trenderErrorMessage("No search results in JSON response");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\trenderErrorMessage("Empty response (are you sending too many requests too quickly?)");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Any other HTTP response is an error\r\n\t\telse {\r\n\t\t\t// 401 is unauthorized; force re-prompt for API key for next request\r\n\t\t\tif (this.status === 401) invalidateSubscriptionKey();\r\n\r\n\t\t\t// some error responses don\'t have a top-level errors object, so gin one up\r\n\t\t\tvar errors = jsobj.errors || [jsobj];\r\n\t\t\tvar errmsg = [];\r\n\r\n\t\t\t// display HTTP status code\r\n\t\t\terrmsg.push("HTTP Status " + this.status + " " + this.statusText + "\\n");\r\n\r\n\t\t\t// add all fields from all error responses\r\n\t\t\tfor (var i = 0; i < errors.length; i++) {\r\n\t\t\t\tif (i) errmsg.push("\\n");\r\n\t\t\t\tfor (var k in errors[i]) errmsg.push(k + ": " + errors[i][k]);\r\n\t\t\t}\r\n\r\n\t\t\t// also display Bing Trace ID if it isn\'t blocked by CORS\r\n\t\t\tvar traceid = this.getResponseHeader("BingAPIs-TraceId");\r\n\t\t\tif (traceid) errmsg.push("\\nTrace ID " + traceid);\r\n\r\n\t\t\t// and display the error message\r\n\t\t\trenderErrorMessage(errmsg.join("\\n"));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction bingWebSearch(query, options, key) {\r\n\r\n\t\t// scroll to top of window\r\n\t\twindow.scrollTo(0, 0);\r\n\t\tif (!query.trim().length) return false;     // empty query, do nothing\r\n\r\n\t\tshowDiv("noresults", "Working. Please wait.");\r\n\t\thideDivs("pole", "mainline", "sidebar", "_json", "_headers", "paging1", "paging2", "error");\r\n\r\n\t\tvar endpoint = "https://api.cognitive.microsoft.com/bing/v7.0/search";\r\n\t\tvar request = new XMLHttpRequest();\r\n\t\tvar queryurl = endpoint + "?q=" + encodeURIComponent(query) + "&" + options;\r\n\r\n\t\t//\r\n\t\ttry {\r\n\t\t\trequest.open("GET", queryurl);\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\trenderErrorMessage("Bad request (invalid URL)\\n" + queryurl);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// add request headers\r\n\t\trequest.setRequestHeader("Ocp-Apim-Subscription-Key", key);\r\n\t\trequest.setRequestHeader("Accept", "application/json");\r\n\t\tvar clientid = retrieveValue(CLIENT_ID_COOKIE);\r\n\t\tif (clientid) request.setRequestHeader("X-MSEdge-ClientID", clientid);\r\n\r\n\t\t// event handler for successful response\r\n\t\trequest.addEventListener("load", handleOnLoad);\r\n\r\n\t\t// event handler for erorrs\r\n\t\trequest.addEventListener("error", function () {\r\n\t\t\trenderErrorMessage("Error completing request");\r\n\t\t});\r\n\r\n\t\t// event handler for aborted request\r\n\t\trequest.addEventListener("abort", function () {\r\n\t\t\trenderErrorMessage("Request aborted");\r\n\t\t});\r\n\r\n\t\t// send the request\r\n\t\trequest.send();\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// build query options from the HTML form\r\n\tfunction bingSearchOptions(form) {\r\n\r\n\t\tvar options = [];\r\n\t\toptions.push("mkt=" + form.where.value);\r\n\t\toptions.push("SafeSearch=" + (form.safe.checked ? "strict" : "off"));\r\n\t\tif (form.when.value.length) options.push("freshness=" + form.when.value);\r\n\t\tvar what = [];\r\n\t\tfor (var i = 0; i < form.what.length; i++)\r\n\t\t\tif (form.what[i].checked) what.push(form.what[i].value);\r\n\t\tif (what.length) {\r\n\t\t\toptions.push("promote=" + what.join(","));\r\n\t\t\toptions.push("answerCount=9");\r\n\t\t}\r\n\t\toptions.push("count=" + form.count.value);\r\n\t\toptions.push("offset=" + form.offset.value);\r\n\t\toptions.push("textDecorations=true");\r\n\t\toptions.push("textFormat=HTML");\r\n\t\treturn options.join("&");\r\n\t}\r\n\r\n\t// toggle display of a div (used by JSON/HTTP expandos)\r\n\tfunction toggleDisplay(id) {\r\n\r\n\t\tvar element = document.getElementById(id);\r\n\t\tif (element) {\r\n\t\t\tvar display = element.style.display;\r\n\t\t\tif (display === "none") {\r\n\t\t\t\telement.style.display = "block";\r\n\t\t\t\twindow.scrollBy(0, 200);\r\n\t\t\t} else {\r\n\t\t\t\telement.style.display = "none";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// perform a related search (used by related search links)\r\n\tfunction doRelatedSearch(query) {\r\n\r\n\t\tvar bing = document.forms.bing;\r\n\t\tbing.query.value = query;\r\n\t\tbing.offset.value = 0;\r\n\t\treturn bingWebSearch(query, bingSearchOptions(bing), getSubscriptionKey());\r\n\t}\r\n\r\n\t// generate the HTML for paging links (prev/next)\r\n\tfunction renderPagingLinks(results) {\r\n\r\n\t\tvar html = [];\r\n\t\tvar bing = document.forms.bing;\r\n\t\tvar offset = parseInt(bing.offset.value, 10);\r\n\t\tvar count = parseInt(bing.count.value, 10);\r\n\t\thtml.push("<p class=\'paging\'><i>Results " + (offset + 1) + " to " + (offset + count));\r\n\t\thtml.push(" of about " + results.webPages.totalEstimatedMatches + ".</i> ");\r\n\t\thtml.push("<a href=\'#\' onclick=\'return doPrevSearchPage()\'>Prev</a> | ");\r\n\t\thtml.push("<a href=\'#\' onclick=\'return doNextSearchPage()\'>Next</a>");\r\n\t\treturn html.join("");\r\n\t}\r\n\r\n\t// go to the next page (used by next page link)\r\n\tfunction doNextSearchPage() {\r\n\r\n\t\tvar bing = document.forms.bing;\r\n\t\tvar query = bing.query.value;\r\n\t\tvar offset = parseInt(bing.offset.value, 10);\r\n\t\tvar count = parseInt(bing.count.value, 10);\r\n\t\toffset += count;\r\n\t\tbing.offset.value = offset;\r\n\t\treturn bingWebSearch(query, bingSearchOptions(bing), getSubscriptionKey());\r\n\t}\r\n\r\n\t// go to the previous page (used by previous page link)\r\n\tfunction doPrevSearchPage() {\r\n\r\n\t\tvar bing = document.forms.bing;\r\n\t\tvar query = bing.query.value;\r\n\t\tvar offset = parseInt(bing.offset.value, 10);\r\n\t\tvar count = parseInt(bing.count.value, 10);\r\n\t\tif (offset) {\r\n\t\t\toffset -= count;\r\n\t\t\tif (offset < 0) offset = 0;\r\n\t\t\tbing.offset.value = offset;\r\n\t\t\treturn bingWebSearch(query, bingSearchOptions(bing), getSubscriptionKey());\r\n\t\t}\r\n\t\talert("You\'re already at the beginning!");\r\n\t\treturn false;\r\n\t}\r\n\r\n// --\x3e<\/script>\x3c!--</head>\r\n<body onload="document.forms.bing.query.focus();">--\x3e<div class="modal-full-screen popup-image-search" id="searchImagePopup" tabindex="-1" role="dialog" aria-labelledby="searchImagePopupTitle" data-backdrop="static"><div class="" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="searchImagePopupTitle">Search Image</h5><button type="button" data-dismiss="modal" class="btn icon icon-cross btn-simple-primary close"></button></div><div class="modal-body"><form name="bing" onsubmit="this.offset.value = 0; return bingWebSearch(this.query.value,bingSearchOptions(this), getSubscriptionKey())"><div id="logo" style="display: none">\x3c!-- logo block including search market/language --\x3e <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAyCAIAAAAYxYiPAAAAA3NCSVQICAjb4U/gAAARMElEQVR42u2bCVRUV5rHi8VxaeNuOumYTs706aTTZrp7TqbTk5g+9kn3OZN0pjudpZM5SfdJzEzPyZmO1gbIJhmNmijy6hUFsisCgsqigoCt7IoKgoDgUgXILntR+/aWzHfvfQUFFEURsU8cKe/hFFL16r3f++53/9//uyXSWUwjZgPDshzHcy4PnuMXHvP4EJ1qufpPyRHby3Iv93XqbDY7y7IC9QU48wr6RMtVEb1NpJAvoeQvpVF7L5c0jQ6ZHAwJcH6B+HyBzm6pEymkIlomouUiWiqiJCvpwDdOxCdfr+nV6x0Mwy+gnqeIJqAxa3iikJDhEyX5fmx4eZcGJ+yFxz2DPg6pQwA9eQBuSnJC3bCQPe4/6ChxjqbxAVQgnHM8OKBzW5s4lucfsOSxAHoWPh4eggRy/ubprQzL6a1Wo83KfZuWl5lBU39v0CDeQcDbGQa0PB7jT4RfHawDJD562bTzERiznI1l4xurX0yNfCVdcUbTAtAXQE+PSnbEYgkoyfmkOGNL8dEtxZkwPhFGFjz/tCR7b+35su5WrcXCuq1gOa5ZO7Q6eruIBuEk/WH8zj6LaQH0dNB8t8X03dgIqJ6cQyainENBhmSJQvxi2v4j12tMqIydFN3wy8XuO0sOSNEVUZI1ypA23cgCaDegewTQAlYfGNTEQCWVQkrO1l8h+eu5E2M2m+u5AfRBq+Xf0unFlHSxUv5BQZqRcSyAdg/60dgd+NPFf8hPiaotPQCjpnR/bWnExcI/5h96KmmXHyqsUGbwo+S7Lp2zu0Y0immuR6/NbLqSc7NhxGb59qyGXoMm6/59Bt0rgEYcY+svsOz4IscxHJhdXK/REFRZsISENiX9fkx4q0E3nqnRKxFrbIux5I3fnhL8Rp038o77u2iluxbjo7Fh+HwkqmvVnBt1wVoZ9rPibB8KQCPc6Tfr3cmQb6HX4QH0gW0ENATIHe2gwW5lp4rb+wZaKVE2uAWNgraqp2OJkqRsyb7qc+OgJ+tuMhG5mWS6kGsEhc4730TeJ/zXN1X9bh4zg4bhAlpSfPS149Gqa1U3RgeMdlCraCqji55f0GZIHeEkoqMbqqdXd/j3r2/ptd+JDhQpUbLec6GYnQyaQY46KlsQLpfcgZx2koI4IScRSQ6vtzIM1DhjVovJbnOgtCOkHo+qH+t+JPAdAERvMessZrPdzuBqYNLxcQ3lFWh4Y2mnelmU2EcpWR8T+ubJ5JTmq61jWjPjmF683V/QuLRuHBlcCuKPkvlFSVKba3ERw5HbAJjKutU5rU25msbmgT7X0zE5HPmtzdmaxhx1Y59eR25Jl24sqeHynwozXj2m2pRJv5EXF1p++lJfp4VhZpy1+H/hzzqrtayrNbQ8/628xFcyqV8di34vL2XfxfMtw/1WtEywl3o7cjXXc2431fZ2zgI6D0CjIzN6u+Pl1AOiaCJRpb5Rkqfid/65MCNPfb3PqIeIwPGN/t1X0CwSFmx6S70f0nmyNcqgOu0AClyeJbcB5N4v0ykQLT6UJLAkx/XG95j0j0YH+dAS36itJ243WR3M0VsNG5N2+0fB2itGKzC6amQRr1WGhFadGXWmymmzioPbWdvf87vchOWwTlBEO4iJePc/INkQu2NfXaXWbn8//7A/RGfU1vdPHvYiR+NrA4TK2gofdE5SYVDoUpdQsueS9nx2LqeoUz1oNjkmUp3zHOcS4wh0TBj6aFos5Ghn4hyXH0MW8+ajKpESncCHpw+bWXbcQoKX2Xl+UzqNL14mKz3leqf6TMY1qmBku1PSDE1LXGP1CmUgfNBSZdDag2HrEnYsVwX7oO4HYu2nkMkr8i244J/EGOeBgjs3fwDqCODSYh+FZDEtWx0Xsi4+fFVsqD/S+6DiAyKqz76ZfwSzEr99MsV71cG3G8Y2KENmeLH0HxTyfzkSGVZRcLm/e8RqsXNCIuTnEuMToBXi6GsX4RAkF+I0x9gYpkOv/a+io35Yb/woYdeN0UHXOTQBGleV8tLTrrf5rsm4WhUqUqKc82llwbrokOWqoP84lZrb2nxTO3xbO1za2fY/f8tZARU8hVg/ogqq7G3nJh0f3erL/T1PxGMNSotXKuXv5iZmqa9dG+7XjI1cHehVNFx4IfUrP1oMq8iTyXuQNIoSv33q0BxA2zn+o4K08RbMVNHtHMupgM2Z0V9eKasbHtDjxUGIbS8y+ARoShJaWdQ42Nc4dBdGzWBPQduNiPL8jSl7ICf4KmQ/Obyvqq+DZSZNbSdoBS4spVNA942DVsgXK4NXKrar6qvN0KzDEUFuJ8wPmPX+6D6hc9hSmM4IRxDEyIjd/uusGHL5cCdgWpggm7NkEWZYIvbNxo+L0v1pMu9hAs0FNClwSzo0i5D/MA309GKHkq5WhbyRHR/TVN0yNmxxMDy+HC9ydBj5dF80S2TwcfDTn4ZyHB0TjrwiNuSvZSdbdVrWqTRcNYmD419GoNFpTAVtNq6OCcUdO7kvJf+8stjuTj6OOeybM5RI0lDSpxMjhm2WcdAwwY6pGxZRuC6NkkEj2za9IsJhNWKzvpYdR+63iNqGQHtfggMmncPxC7TUSGZcP52ZxCWVi9fHhqU11xA95Lky7DOb1seEjTfShA8i6wEl9DOXx4a8mBUdWJHfMNhnZ1mSOcePgEFTbkFDoK2CiEaBIn8maQ/86o4SylWx1y6SD11Gy5tGB3mnoALP8LUTsZAxRIptL6Tu19ps7pZKYm+xF+92LaUDviFohuWpq5U+ZIWlvRwSiI4vLhWxszU9poB+LH7Hjw/t2XgYjR8f3vtM8u7vxUcsiw7wxdB9FNLvxobtq6swOBysU4WR/PaSZ9BoMZT/pSTP4b6DgIRNZW+XPw5GX4WkrLtdKGdYWKX064gHS23df7V0XFa6uRaWNzGO51O/whEzR9A8TmQdxrEnY7ejrSA0SdbSWaDDcWjJ/yLQnLeg8WIYWVeutVl1eIzZrANm4y3tUEFry2fnsx9H6QVlEsgquy+ft7HjAofzDrQs4doV99INS0W1VrtcQZZEcWH7bcFA4fjiDo0/jvQlCnnt3V52ZluCw5XRv+cl4fOcK2j8gGSf39b825yDsBQIU5uaLY3Q4p3VxcxsK6EAOpbIO/A6LroDwQPWqr7O51O/JLllrTK4bqCHuEcYNOdNRB+7dV2out3V1R163Qoa6yuFrABA4xBBKaX+IhYbEjjJuxYT5wk0AvUuknffFDS+V5yesZ9tu/H2ycQ1McHI3yEbQmYGHVF1ZlYjzQk6nLxRVe8WNC6KGK6oS71MEUCytuR8HsPNDfTx280zgQamnQb9CkWwK2icotmIC8UkCDYk7hxjHZzniL5H0K4PC+Oo6Gr94HTq2pgInCJmUC9KcXhlgbegY8KRCqYDYuovcDP7OeDo/zyDxp0X6c9TI01kVfQKNMJ3XO0eNEnTnQbDSnegA8vz8TQSb0jepWMZT6BR9ci/A3zvETQp1Yjz22XQv1+UOWMCwWUeFDLzChrCif0APhQJXulTcRGDWITdb9AhVWeItH0iaaeWZXjeU0QD6LfuHTTyHBge1qjsWw3/mha1iPKoOmhxSPnpeQXNQzj9qTiLOAxPqXYMWO87aIiqqKsVeOLKVsUEt5uNgsU1Q0ffxrC/PBbrBWgXP5qfcG+FB1TD0AZ9Oy8FSUWicGlPqWOOoJHXPA56igNOfoC7tjlLRZTP88l7DbAZc55BT10MQUWcarvpRxHnSFrUcduDJQ9/6TEbNhyMQAeJ2uaxMnSxSZ06mif7LpqH+z89l7UGFKU3ahqBlgaVnfamrzRRGSpnAo1+wA7XCwPdyJTAH/FBcRrjtEkB9MsZHitD5Wygeb4LQE9RHfzX8KPVMLaWXDUl/c/CLDszY2cH/pDUUoM9OPlsJTgBrUGgBeeM5bqNui8vnXs64XNn8pXMUqqgiYPCM6jkFHo/z3kFGt0bDHpyyJBzgHHHoP01hDPKMNKlUcDiBjfvoKdEND46dNF+n5uAPVXpquiQ8p521nUL+cSM59v12o2p+5CjNLvXgWTQVrDPOfZriEWt1XL0Vv2LR/b5Ib5yvJ96tljGCzRYFhtT9ua1thAnzlvQtCy6rhJtVuIY55Ylxuiwdxp02eqGTWlf+eJ7DObyWydTDA77PIM2ugON5/Sp9pYlZH8zJXvh8L5rQ30OVqhMBeXJsBrd2FvHE8Fi9AcbFoXaLKaSFIFWN5oZpry37XcnExfjHh02ZWQzTgLFRCz7UrLH4nbIq/LbdKN2jmO96O66gJb+4ij1cdHRj2AUZ3xUnP7novQ38hKhFl+KDg5fUQAjWPxyepR6bBRH+f2PaDyloE3zyek03yjIvChUn0v8gq6/0KIdvGs29JkMLaODKc01L6RGwrX/85EDm7LjiaZ496Rn904h/qquYuvfclepQmYvtSdAo5TySHTQR6fTa/u6ie8zt+bsLHYVampAWP0hL1E9OuzK6n6DJqkBZtWrmSpftB8KprXMlw54ND7i+SORG9P3PRYf7od9tGcTdp/rvfMucZUp6R9PEtXh1vbE9d4jkPsPiEVkzwo9exSjDgAdAAk0v+2G2e4g/S3vd9v2mQ2Px4SCI+qDD+XjHOQ5Mk6VAWsPhv8qMzq5uWYU9ouyk5YjojpeSaewZy0JmKY61qlCUCuLkp5QX/cAGlTHWjoEKl5olxS033IBzZNivF2n/fhMBvjAvmT/FOrUkG09kqXKwM2ZdHVfh53l3hHse+l70MqaEbT3w+mI+lGynxzaf7DxEtkiNNd9IPB6vc2WUFd1oKZkP4xa9DPS+RyexNRXZd5qqOnvhq6z20YwKXyzmmr3X4HXl5Z0ql1fAuZUXF0FHCfySol6eNCDJaS1WmPqKiOvnFddKVOPDLJT9DJ+IzSmS+/cEp89vintwLOHdj+TvOtnafuhSE5vrh1CBixr4djf5qaIsFP6l+Jj9wxaIYT/92I/D68s6tCNMUQZzL0jzjlVhXMXAEeesWjvAM8KXQy84szcnhb+LpwEy03Z1yE0xkgPwlNdR97KsRN7B9z5c1D+cTqHrc+k7zca4PbYUO9b2PxiYB0/OxxJhEPEpXOQo6/OxVyell4o2UrV9g8L0+sGerGuXPi6i3AfNHrtatQLloKaPt7aJDoOoF0y7BzsfFq6TBH0m2Oxhe03jQ7H+D65/9/4xrv8vIfZgIP9YGM14bmG3t6uHREVaZqXxwSTnpPXGRl148EzS2+uG7ZZ2YcmiklqwptXZmzLkZ1KHTrtT1P2koj8fU4SLIwivcN+XNO0KUu5SCFzU+y5qjqcx2Hp/8eEXbsvl/QYdQ6U7tiHCDTLDZlMpe23YdFmOX6y/SJ42WArdul17+cl+0RB4Mq/QwcWYt0iIq32IbNJ1XjhuSN7facsjIg+3nmPt9KuPxj+2fnc5qF+Zr533T0gEc226rVPqkJfP6E61HwFPJ8xixn2ITqQrGShcG0b02bcqAMd4ov31oCm3lKUacaGl8hpY7CQZVv1o6GVZzbERfhMtLFxHUhJQR7CFKjoarM6l9WHEjRa4lZEQ+Rt81OIn0gIe/WY8r0zR7aczfywMO313LgfHvpiGSKG2uR+tOSdnCQQJKSQEE3xnEA5XBvs/e+zWetiQnD5KFlES186sj/9Rp0ef6HsYf4WLVx9p1H304TP/Wix8+vcrpWEICggnB+PCwsuPz1oMo7zEk1N9nhYHI6yLs2bOXHPJu0E8Q/77HGGYR/yL+DjvgkLGUNRV/F6TsIzh75cHxe+IjpouTJwOR24Mib46cRdsPkm/ELR1f5uG+l1OS0ekYeDQinVOTbqmP9t0A98XEM2MDNsr17X0N9T1aWBErSkSwNlt2Z0SG+DpOCm8fJ/b7k8gBQkHh4AAAAASUVORK5CYII="><i>api</i><p><select name="where"><option value="es-AR">Argentina (Spanish)</option><option value="en-AU">Australia (English)</option><option value="de-AT">Austria (German)</option><option value="nl-BE">Belgium (Dutch)</option><option value="fr-BE">Belgium (French)</option><option value="pt-BR">Brazil (Portuguese)</option><option value="en-CA">Canada (English)</option><option value="fr-CA">Canada (French)</option><option value="es-CL">Chile (Spanish)</option><option value="da-DK">Denmark (Danish)</option><option value="fi-FI">Finland (Finnish)</option><option value="fr-FR">France (French)</option><option value="de-DE">Germany (German)</option><option value="zh-HK">Hong Kong (Traditional Chinese)</option><option value="en-IN">India (English)</option><option value="en-ID">Indonesia (English)</option><option value="it-IT">Italy (Italian)</option><option value="ja-JP">Japan (Japanese)</option><option value="ko-KR">Korea (Korean)</option><option value="en-MY">Malaysia (English)</option><option value="es-MX">Mexico (Spanish)</option><option value="nl-NL">Netherlands (Dutch)</option><option value="en-NZ">New Zealand (English)</option><option value="no-NO">Norway (Norwegian)</option><option value="zh-CN">People\'s Republic of China (Chinese)</option><option value="pl-PL">Poland (Polish)</option><option value="pt-PT">Portugal (Portuguese)</option><option value="en-PH">Philippines (English)</option><option value="ru-RU">Russia (Russian)</option><option value="ar-SA">Saudi Arabia (Arabic)</option><option value="en-ZA">South Africa (English)</option><option value="es-ES">Spain (Spanish)</option><option value="sv-SE">Sweden (Swedish)</option><option value="fr-CH">Switzerland (French)</option><option value="de-CH">Switzerland (German)</option><option value="zh-TW">Taiwan (Traditional Chinese)</option><option value="tr-TR">Turkey (Turkish)</option><option value="en-GB">United Kingdom (English)</option><option value="en-US" selected="selected">United States (English)</option><option value="es-US">United States (Spanish)</option></select></p><p>from Microsoft Cognitive Services</p></div><div id="query">\x3c!-- query controls including search field and options --\x3e <input type="text" name="query" id="term" placeholder="Search the Web" autocomplete="on"><p style="display: none">Promote <input type="checkbox" name="what" id="webpages" value="webpages"><label for="webpages">Web pages</label><input type="checkbox" name="what" id="news" value="news"><label for="news">News</label><input type="checkbox" name="what" checked="checked" id="images" value="images"><label for="images">Images</label><input type="checkbox" name="what" id="videos" value="videos"><label for="videos">Videos</label>&nbsp;&nbsp;&nbsp;From<select name="when"><option value="" selected="selected">All time</option><option value="month">Past month</option><option value="week">Past week</option><option value="day">Last 24 hours</option></select>&nbsp;&nbsp;&nbsp;<input type="checkbox" id="safe" name="safe" value="on" checked="checked"><label for="safe">SafeSearch</label>\x3c!-- these hidden fields control paging --\x3e <input type="hidden" name="count" value="15"> <input type="hidden" name="offset" value="0"></p></div></form><div id="error"><h2>Error</h2><div id="_error"></div></div><h2>Results</h2><div id="paging1"><div id="_paging1"></div></div><div id="noresults"><div id="_noresults">None yet.</div></div><div style="display: none" id="sidebar"><div id="_sidebar"></div></div><div style="display: none" id="pole"><div id="_pole"></div></div><div id="mainline"><div id="_mainline"></div></div><div id="paging2"><div id="_paging2"></div></div>\x3c!--<div id="json" style="display: none">\r\n\t\t\t\t\t<h3><a href="#" onclick="return toggleDisplay(\'_json\')">JSON</a></h3>\r\n\t\t\t\t\t<div id="_json" style="display: none"></div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div id="http" style="display: none">\r\n\t\t\t\t\t<h3><a href="#" onclick="return toggleDisplay(\'_http\')">HTTP</a></h3>\r\n\t\t\t\t\t<div id="_http" style="display: none"></div>\r\n\t\t\t\t</div>--\x3e</div><div class="modal-footer">\x3c!--<button type="button" class="btn btn-primary" ng-click="NewRuleSet();"><i style="color:#fff;" class="fa fa fa-plus"></i> Add RuleSet</button>--\x3e <button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button> <button type="button" class="btn btn-primary" ng-click="SelectImage()">{{buttontext}}</button>\x3c!--<button type="button" class="btn btn-primary" ng-click="SaveCorestat()">Save</button>--\x3e</div></div></div></div>'),
e.put("/views/shared/AccountSettings.html",'<div class="container" data-ng-init="onloadFun()"><div class="account_setting"><uib-tabset active="active"><uib-tab><uib-tab-heading><i class="glyphicon glyphicon-bell"></i> Edit Profile</uib-tab-heading><div class="container edit_profile"><div class="panel panel-primary"><div class="panel-heading"><div class="page-toolbar-wrapper"><div class="page-toolbar-title"><h1>Edit Profile</h1></div><button type="button" class="btn btn-primary back" ng-click="Cancel()">Back</button></div></div><div class="panel-body"><div class="col-md-offset-2 col-md-10"><div class="form-horizontal"><form name="EditForm" novalidate class="form-horizontal header"><div class="form-row"><div class="col-12 col-md-12">\x3c!-- Item name --\x3e<div class="form-group col-md-6"><label for="newItemName">User Name</label><input type="text" class="form-control" id="username" placeholder="Enter Username" ng-model="data.Name" disabled="disabled"></div>\x3c!-- End of item name --\x3e</div><div class="col-12 col-md-12">\x3c!-- Item name --\x3e<div class="form-group col-md-6"><label for="newItemName">Email</label><input type="text" class="form-control" id="email" placeholder="Enter email" name="email" ng-model="data.Email" disabled="disabled"></div>\x3c!-- End of item name --\x3e</div></div><div class="form-group">\x3c!--<label class="control-label col-sm-2" for="pwd">Profile Image:</label>--\x3e<div class="col-sm-4"><div class="clearfix"><div class="pull-left edit-character-portrait"><img id="profileImage" ng-src="{{data.ProfileImage}}" ng-model="data.ProfileImage" alt="" ngf-resize="{width: 120, height: 120}"></div><div class="profile_image"><span>Choose file</span><input type="file" onchange="angular.element(this).scope().ProfileImageUpload(this)" accept="x-png,gif,jpeg"></div></div><span class="help-block">120px by 120px</span></div></div></form></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button type="button" class="btn btn-accent pull-left" ng-click="Update()">Update</button>\x3c!--<button type="button" class="btn btn-simple-accent" ng-click="cancel()">Cancel</button>--\x3e</div></div></div></div></div></div></uib-tab><uib-tab><uib-tab-heading>Reset Profile</uib-tab-heading><div class="container reset_password"><div class="panel panel-primary"><div class="panel-heading"><div class="page-toolbar-wrapper"><div class="page-toolbar-title"><h1>Reset Profile</h1></div><button type="button" class="btn btn-primary back" ng-click="Cancel()">Back</button></div></div><div class="panel-body"><div class="col-md-offset-2 col-md-10"><div class="form-horizontal">\x3c!--<form name="EditForm1" novalidate class="form-horizontal">--\x3e<div class="form-row"><div class="col-12 col-md-12">\x3c!-- Item name --\x3e<div class="form-group col-md-6"><label for="newItemName">Old Password</label><input type="password" class="form-control" id="emailold" placeholder="Enter Old Password" name="emailold" ng-model="resetModel.oldpassword"></div>\x3c!-- End of item name --\x3e</div><div class="col-12 col-md-12">\x3c!-- Item name --\x3e<div class="form-group col-md-6"><label for="newItemName">New Password</label><input type="password" class="form-control" id="emailnew" placeholder="Enter New Password" name="emailnew" ng-model="resetModel.newpassword"></div>\x3c!-- End of item name --\x3e</div><div class="col-12 col-md-12">\x3c!-- Item name --\x3e<div class="form-group col-md-6"><label for="newItemName">Confirm Password</label><input type="password" class="form-control" id="pwd" placeholder="Enter Confirm password" name="pwd" ng-model="resetModel.confirmpassword" ng-change="checkpass()"></div>\x3c!-- End of item name --\x3e</div></div>\x3c!--</form>--\x3e</div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button type="button" class="btn btn-accent pull-left" ng-click="ResetProfilePassword(resetModel)">Update</button>\x3c!--<button type="button" class="btn btn-simple-accent" ng-click="cancel()">Cancel</button>--\x3e</div></div></div></div></div></div></uib-tab></uib-tabset></div></div><toaster-container class="toaster_align" toaster-options="{\'time-out\':7000}"></toaster-container>'),e.put("/views/shared/home-topNav.html",'<div class="page-characters"><header class="site-header"><div class="container-fluid"><div class="site-header-wrapper"><div class="site-header-left-section">\x3c!-- Logo --\x3e<div class="site-header-logo"><div class="site-header-logo-small"><img src="/wwwroot/css/assets/images/logo-small.svg" ng-click="gohome()" alt="Logo"></div><div class="site-header-logo-full"><img src="/wwwroot/css/assets/images/logo-full.svg" ng-click="gohome()" alt="Logo"></div></div>\x3c!-- End of logo --\x3e</div><div class="site-header-right-section"><div class="site-header-user">\x3c!-- Search --\x3e<form class="site-header-search" action="./search-result.html"><i class="icon icon-search"></i> <input type="search" placeholder="Search items"></form>\x3c!-- User --\x3e<div class="site-header-user"><div class="site-header-user-avatar"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 102 102"><path d="M0,0V102H102V0ZM95,76,51,101,7,76V26L51,1,95,26Z"></path></svg> <img style="border: none" ng-src="{{data.ProfileImage?data.ProfileImage:\'http://www.advacto.com/images/user.jpg\'}}" onerror="this.src=\'http://www.advacto.com/images/user.jpg\'"></div><div ng-bind="data.UserName" class="site-header-user-name"></div></div>\x3c!--class="site-header-user-name"--\x3e\x3c!-- End of user --\x3e\x3c!-- Site navigation --\x3e<nav class="site-header-navigation"><div class="dropdown hide" ng-click="siteNavigationMenuToggle($event)"><div class="dropdown-toggle" id="siteNavigationToggle" data-toggle="dropdown" ng-click="CharacterRulesetCount()"><div class="icon"></div></div><div class="dropdown-menu dropdown-menu-right hide" aria-labelledby="siteNavigationToggle"><ul class="dropdown-menu-list dropdown-menu-item-contain-links"><li class="dropdown-menu-item" ng-class="{active : activeMenu === \'Characters\'}"><a class="dropdown-menu-item-link" href="./characters.html"><span class="dropdown-menu-item-title">Characters</span> <span class="dropdown-menu-item-count">{{HeaderContents.TotalCharactersCount}}</span></a></li><li class="dropdown-menu-item" ng-class="{active : activeMenu === \'Rulesets\'}"><a class="dropdown-menu-item-link" id="GetAllRuleSet" href="./RuleSets"><span class="dropdown-menu-item-title">Rulesets</span> <span class="dropdown-menu-item-count">{{HeaderContents.TotalRuleSetCount}}</span></a></li><li class="dropdown-menu-item" ng-class="{active : activeMenu === \'AccountSettings\'}" ng-click="AccountSettings()"><a class="dropdown-menu-item-link" href="#"><span class="dropdown-menu-item-title">Account Settings</span></a></li><li class="dropdown-menu-item" ng-click="signout()"><a class="dropdown-menu-item-link" href="#"><span class="dropdown-menu-item-title">Logout</span></a></li></ul></div></div></nav></div></div></div></div></header></div>'),e.put("/views/shared/home-topNav_addnewruleset.html",'<nav role="navigation" class="navbar navbar-default navbar-fixed-top navbar-1 addnewruleset_menu"><div class="navbar-header pull-left"><a class="navbar-brand" ng-click="noop()" title="RPGSmith"><span ng-click="gohome()" class="rpgs-navbar-brand"></span></a></div><div class="navbar-header pull-right"><span>{{navService.topNav.header}}</span><div class="btn-group" uib-dropdown is-open="status.isopen"><button id="single-button" type="button" class="btn btn-default" uib-dropdown-toggle ng-disabled="disabled">Account Settings <span class="fa fa-cog"></span></button><ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button"><li role="menuitem"><a href="#"><img ng-src="{{data.ProfileImage}}" ng-style="newstyles(data)" class="img-resposive ng-pristine ng-untouched ng-valid ng-empty" ng-click="EditData()"> <span class="name" ng-click="EditData()"><i class="fa fa-user"></i> {{data.Email}}</span>\x3c!--<div class="pull-left edit-character-portrait"><img id="characterImage" ng-model="character.file" alt="Character Image" ngf-thumbnail="getThumbNail()" ngf-resize="{width: 120, height: 120}" class="ng-pristine ng-untouched ng-valid ng-empty"></div>--\x3e</a></li>\x3c!--<li><a><div class="btn-group" data-toggle=""><label class="btn btn-primary"><input type="radio" ng-model="" value="On" />On</label> <label class="btn btn-default"><input type="radio" ng-model="" value="Off" />Off</label></div></a></li>--\x3e<li class="divider"></li><li role="menuitem"><a href="#" ng-click="ReSetPassword()"><i class="fa fa-key"></i> Change Password</a></li><li role="menuitem"><a href="#"><i class="fa fa-cc-diners-club"></i>Show Virtual Dice</a></li><li class="divider"></li><li role="menuitem"><a href="#" ng-click="signout()"><i class="fa fa-sign-out"></i>Sign Out</a></li></ul></div></div>\x3c!--<p class="text-center email"><span class="">{{data.Email}}</span></p>--\x3e</nav>'),e.put("/views/shared/pageslide-menu.html",'<script type="text/ng-template" id="pageslide-menu-item.html"><span ng-if="!menu.divider && menu.header" style="color: white;">\x3c!--\r\n        --\x3e<i class="fa {{menu.icon}}" aria-hidden="true"></i>{{menu.name}}</span>\r\n\r\n    <a ng-if="!menu.divider && !menu.header && !hasMenus(menu)" ng-click="onItemClick(menu)">\x3c!--\r\n        --\x3e<i class="fa {{menu.icon}}" aria-hidden="true"></i>{{menu.name}}</a>\r\n\r\n    <a ng-if="!menu.divider && !menu.header && hasMenus(menu)" class="dropdown-toggle" uib-dropdown-toggle>\x3c!--\r\n        --\x3e<i class="fa {{menu.icon}}" aria-hidden="true"></i>{{menu.name}} <b class="caret"></b></a>\r\n    <ul class="dropdown-menu" uib-dropdown-menu ng-if="hasMenus(menu)">\x3c!--\r\n        --\x3e<li ng-repeat="menu in menu.menus" uib-dropdown ng-include="\'pageslide-menu-item.html\'"></li>\r\n    </ul><\/script><div class="pageslide-left"><div class="navbar navbar-default"><ul class="nav navbar-nav"><li ng-repeat="menu in menus" uib-dropdown ng-class="{\'dropdown-header\': menu.header, \'divider\': menu.divider}" ng-include="\'pageslide-menu-item.html\'"></li></ul></div></div>'),e.put("/views/shared/rulesetproperty.html",'<div class="form-group"><label class="control-label col-md-4">{{ info.Name }}</label><div class="col-md-8 mb-20"><rpgsmithrulesettype info="info"></rpgsmithrulesettype>\x3c!--<select class="form-control" ng-init="RulesetProperties()" ng-options="item.PropertyId as item.Name for item in properties" ng-model="propertyid">\r\n            <option value="">Select Option</option>\r\n        </select>--\x3e</div></div>'),e.put("/views/shared/validation-messages.html",'<p ng-message="required">This field is required.</p><p ng-message="minlength">This field is too short.</p><p ng-message="maxlength">This field is too long.</p><p ng-message="required">This field is required.</p><p ng-message="email">This needs to be a valid email.</p>'),e.put("/views/tiles/tile-property-editor.html",'<div class="form-horizontal"><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><div class="form-horizontal"><div class="form-group"><label class="col-sm-2 control-label">Shadow</label><div class="col-sm-10"><input type="checkbox" ng-model="style.borderShadow"></div></div><div class="form-group"><label class="col-sm-2 control-label">Corner Radius</label><div class="col-sm-10"><input type="number" min="0" ng-model="style.borderRadius"></div></div><div class="form-group"><label class="col-sm-2 control-label">Background</label><div class="col-sm-10"><spectrum-colorpicker ng-model="style.backgroundColor" options="colorOptions.background"></spectrum-colorpicker></div></div><div class="form-group"><label class="col-sm-2 control-label">Text</label><div class="col-sm-10"><spectrum-colorpicker ng-model="style.color" options="colorOptions.text"></spectrum-colorpicker></div></div><div class="form-group"><label class="col-sm-2 control-label">Border</label><div class="col-sm-10"><spectrum-colorpicker class="pull-left" ng-model="style.borderColor" options="colorOptions.border"></spectrum-colorpicker><ui-select ng-model="borderStyleSelected.value" class="pull-left" style="width: 100px;margin-left: 10px; margin-right: 10px"><ui-select-match><span ng-bind="$select.selected.name"></span></ui-select-match><ui-select-choices repeat="item in borderStyles track by item.id"><span ng-bind="item.name"></span></ui-select-choices></ui-select><ui-select ng-model="borderWidthSelected.value" class="pull-left" style="width: 60px"><ui-select-match><span ng-bind="$select.selected.name"></span></ui-select-match><ui-select-choices repeat="item in borderWidths track by item.id"><span ng-bind="item.name"></span></ui-select-choices></ui-select></div></div></div></div></div></div>'),e.put("/views/tiles/tile-template-1.html",'<div class="tile-content"><div ng-bind-html-compile="tile.entity.content | trusted"></div></div>'),e.put("/views/tiles/tile-template-2.html",'<div class="tile-container"><div class="tile-title" ng-bind="tile.entity.name"></div><div class="tile-content {{tile.parseStyle().content.classes}}" ng-style="tile.parseStyle().content.styles" ng-bind="tile.entity.displayValue"></div><div class="clearfix tile-counter-icons"><a ng-click="decrement()"><i class="fa fa-arrow-circle-down" aria-hidden="true"></i></a> <a ng-click="reset()"><i class="fa fa-refresh" aria-hidden="true"></i></a> <a ng-click="increment()"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></a></div></div>'),e.put("/views/tiles/tile-template-3.html",'<div class="tile-container"><div class="tile-title" ng-bind="tile.entity.name"></div><div class="tile-content"></div></div>')}]);
//# sourceMappingURL=app.min.js.map?v=1520383944064
